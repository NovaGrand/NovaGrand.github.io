const Vu=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};Vu();function si(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const zu="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",Yu=si(zu),Xu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qu=si(Xu);function Lo(e){return!!e||e===""}function Ht(e){if(de(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=Pe(i)?qu(i):Ht(i);if(r)for(const s in r)t[s]=r[s]}return t}else{if(Pe(e))return e;if(Fe(e))return e}}const Zu=/;(?![^(]*\))/g,Ju=/:(.+)/;function qu(e){const t={};return e.split(Zu).forEach(n=>{if(n){const i=n.split(Ju);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function _e(e){let t="";if(Pe(e))t=e;else if(de(e))for(let n=0;n<e.length;n++){const i=_e(e[n]);i&&(t+=i+" ")}else if(Fe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function ly(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Pe(t)&&(e.class=_e(t)),n&&(e.style=Ht(n)),e}function ef(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=Gt(e[i],t[i]);return n}function Gt(e,t){if(e===t)return!0;let n=fa(e),i=fa(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=de(e),i=de(t),n||i)return n&&i?ef(e,t):!1;if(n=Fe(e),i=Fe(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const o in e){const u=e.hasOwnProperty(o),D=t.hasOwnProperty(o);if(u&&!D||!u&&D||!Gt(e[o],t[o]))return!1}}return String(e)===String(t)}function ai(e,t){return e.findIndex(n=>Gt(n,t))}const Le=e=>Pe(e)?e:e==null?"":de(e)||Fe(e)&&(e.toString===Oo||!ve(e.toString))?JSON.stringify(e,Do,2):String(e),Do=(e,t)=>t&&t.__v_isRef?Do(e,t.value):Cr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:dr(t)?{[`Set(${t.size})`]:[...t.values()]}:Fe(t)&&!de(t)&&!Co(t)?String(t):t,Se={},Or=[],vt=()=>{},tf=()=>!1,rf=/^on[^a-z]/,On=e=>rf.test(e),ys=e=>e.startsWith("onUpdate:"),Me=Object.assign,Ts=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},nf=Object.prototype.hasOwnProperty,ye=(e,t)=>nf.call(e,t),de=Array.isArray,Cr=e=>oi(e)==="[object Map]",dr=e=>oi(e)==="[object Set]",fa=e=>e instanceof Date,ve=e=>typeof e=="function",Pe=e=>typeof e=="string",xs=e=>typeof e=="symbol",Fe=e=>e!==null&&typeof e=="object",Ss=e=>Fe(e)&&ve(e.then)&&ve(e.catch),Oo=Object.prototype.toString,oi=e=>Oo.call(e),sf=e=>oi(e).slice(8,-1),Co=e=>oi(e)==="[object Object]",_s=e=>Pe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,on=si(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),li=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},af=/-(\w)/g,ut=li(e=>e.replace(af,(t,n)=>n?n.toUpperCase():"")),of=/\B([A-Z])/g,yt=li(e=>e.replace(of,"-$1").toLowerCase()),ui=li(e=>e.charAt(0).toUpperCase()+e.slice(1)),jn=li(e=>e?`on${ui(e)}`:""),pn=(e,t)=>!Object.is(e,t),Rr=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Yn=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},$t=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ca;const lf=()=>ca||(ca=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let tt;class Ro{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&tt&&(this.parent=tt,this.index=(tt.scopes||(tt.scopes=[])).push(this)-1)}run(t){if(this.active){const n=tt;try{return tt=this,t()}finally{tt=n}}}on(){tt=this}off(){tt=this.parent}stop(t){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function uy(e){return new Ro(e)}function Po(e,t=tt){t&&t.active&&t.effects.push(e)}function fy(){return tt}function cy(e){tt&&tt.cleanups.push(e)}const As=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Io=e=>(e.w&Vt)>0,Mo=e=>(e.n&Vt)>0,uf=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Vt},ff=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];Io(r)&&!Mo(r)?r.delete(e):t[n++]=r,r.w&=~Vt,r.n&=~Vt}t.length=n}},Vi=new WeakMap;let rn=0,Vt=1;const zi=30;let ht;const lr=Symbol(""),Yi=Symbol("");class fi{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Po(this,i)}run(){if(!this.active)return this.fn();let t=ht,n=Kt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ht,ht=this,Kt=!0,Vt=1<<++rn,rn<=zi?uf(this):da(this),this.fn()}finally{rn<=zi&&ff(this),Vt=1<<--rn,ht=this.parent,Kt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ht===this?this.deferStop=!0:this.active&&(da(this),this.onStop&&this.onStop(),this.active=!1)}}function da(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}function dy(e,t){e.effect&&(e=e.effect.fn);const n=new fi(e);t&&(Me(n,t),t.scope&&Po(n,t.scope)),(!t||!t.lazy)&&n.run();const i=n.run.bind(n);return i.effect=n,i}function hy(e){e.effect.stop()}let Kt=!0;const Fo=[];function hr(){Fo.push(Kt),Kt=!1}function vr(){const e=Fo.pop();Kt=e===void 0?!0:e}function at(e,t,n){if(Kt&&ht){let i=Vi.get(e);i||Vi.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=As()),wo(r)}}function wo(e,t){let n=!1;rn<=zi?Mo(e)||(e.n|=Vt,n=!Io(e)):n=!e.has(ht),n&&(e.add(ht),ht.deps.push(e))}function Ot(e,t,n,i,r,s){const o=Vi.get(e);if(!o)return;let u=[];if(t==="clear")u=[...o.values()];else if(n==="length"&&de(e))o.forEach((D,C)=>{(C==="length"||C>=i)&&u.push(D)});else switch(n!==void 0&&u.push(o.get(n)),t){case"add":de(e)?_s(n)&&u.push(o.get("length")):(u.push(o.get(lr)),Cr(e)&&u.push(o.get(Yi)));break;case"delete":de(e)||(u.push(o.get(lr)),Cr(e)&&u.push(o.get(Yi)));break;case"set":Cr(e)&&u.push(o.get(lr));break}if(u.length===1)u[0]&&Xi(u[0]);else{const D=[];for(const C of u)C&&D.push(...C);Xi(As(D))}}function Xi(e,t){for(const n of de(e)?e:[...e])(n!==ht||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const cf=si("__proto__,__v_isRef,__isVue"),Bo=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(xs)),df=ci(),hf=ci(!1,!0),vf=ci(!0),gf=ci(!0,!0),ha=mf();function mf(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=Te(this);for(let s=0,o=this.length;s<o;s++)at(i,"get",s+"");const r=i[t](...n);return r===-1||r===!1?i[t](...n.map(Te)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){hr();const i=Te(this)[t].apply(this,n);return vr(),i}}),e}function ci(e=!1,t=!1){return function(i,r,s){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&s===(e?t?Ho:Wo:t?jo:Ko).get(i))return i;const o=de(i);if(!e&&o&&ye(ha,r))return Reflect.get(ha,r,s);const u=Reflect.get(i,r,s);return(xs(r)?Bo.has(r):cf(r))||(e||at(i,"get",r),t)?u:je(u)?!o||!_s(r)?u.value:u:Fe(u)?e?Go(u):ft(u):u}}const pf=ko(),Ef=ko(!0);function ko(e=!1){return function(n,i,r,s){let o=n[i];if(En(o)&&je(o)&&!je(r))return!1;if(!e&&!En(r)&&($o(r)||(r=Te(r),o=Te(o)),!de(n)&&je(o)&&!je(r)))return o.value=r,!0;const u=de(n)&&_s(i)?Number(i)<n.length:ye(n,i),D=Reflect.set(n,i,r,s);return n===Te(s)&&(u?pn(r,o)&&Ot(n,"set",i,r):Ot(n,"add",i,r)),D}}function yf(e,t){const n=ye(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Ot(e,"delete",t,void 0),i}function Tf(e,t){const n=Reflect.has(e,t);return(!xs(t)||!Bo.has(t))&&at(e,"has",t),n}function xf(e){return at(e,"iterate",de(e)?"length":lr),Reflect.ownKeys(e)}const Uo={get:df,set:pf,deleteProperty:yf,has:Tf,ownKeys:xf},No={get:vf,set(e,t){return!0},deleteProperty(e,t){return!0}},Sf=Me({},Uo,{get:hf,set:Ef}),_f=Me({},No,{get:gf}),bs=e=>e,di=e=>Reflect.getPrototypeOf(e);function Pn(e,t,n=!1,i=!1){e=e.__v_raw;const r=Te(e),s=Te(t);t!==s&&!n&&at(r,"get",t),!n&&at(r,"get",s);const{has:o}=di(r),u=i?bs:n?Ls:yn;if(o.call(r,t))return u(e.get(t));if(o.call(r,s))return u(e.get(s));e!==r&&e.get(t)}function In(e,t=!1){const n=this.__v_raw,i=Te(n),r=Te(e);return e!==r&&!t&&at(i,"has",e),!t&&at(i,"has",r),e===r?n.has(e):n.has(e)||n.has(r)}function Mn(e,t=!1){return e=e.__v_raw,!t&&at(Te(e),"iterate",lr),Reflect.get(e,"size",e)}function va(e){e=Te(e);const t=Te(this);return di(t).has.call(t,e)||(t.add(e),Ot(t,"add",e,e)),this}function ga(e,t){t=Te(t);const n=Te(this),{has:i,get:r}=di(n);let s=i.call(n,e);s||(e=Te(e),s=i.call(n,e));const o=r.call(n,e);return n.set(e,t),s?pn(t,o)&&Ot(n,"set",e,t):Ot(n,"add",e,t),this}function ma(e){const t=Te(this),{has:n,get:i}=di(t);let r=n.call(t,e);r||(e=Te(e),r=n.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return r&&Ot(t,"delete",e,void 0),s}function pa(){const e=Te(this),t=e.size!==0,n=e.clear();return t&&Ot(e,"clear",void 0,void 0),n}function Fn(e,t){return function(i,r){const s=this,o=s.__v_raw,u=Te(o),D=t?bs:e?Ls:yn;return!e&&at(u,"iterate",lr),o.forEach((C,A)=>i.call(r,D(C),D(A),s))}}function wn(e,t,n){return function(...i){const r=this.__v_raw,s=Te(r),o=Cr(s),u=e==="entries"||e===Symbol.iterator&&o,D=e==="keys"&&o,C=r[e](...i),A=n?bs:t?Ls:yn;return!t&&at(s,"iterate",D?Yi:lr),{next(){const{value:_,done:p}=C.next();return p?{value:_,done:p}:{value:u?[A(_[0]),A(_[1])]:A(_),done:p}},[Symbol.iterator](){return this}}}}function Rt(e){return function(...t){return e==="delete"?!1:this}}function Af(){const e={get(s){return Pn(this,s)},get size(){return Mn(this)},has:In,add:va,set:ga,delete:ma,clear:pa,forEach:Fn(!1,!1)},t={get(s){return Pn(this,s,!1,!0)},get size(){return Mn(this)},has:In,add:va,set:ga,delete:ma,clear:pa,forEach:Fn(!1,!0)},n={get(s){return Pn(this,s,!0)},get size(){return Mn(this,!0)},has(s){return In.call(this,s,!0)},add:Rt("add"),set:Rt("set"),delete:Rt("delete"),clear:Rt("clear"),forEach:Fn(!0,!1)},i={get(s){return Pn(this,s,!0,!0)},get size(){return Mn(this,!0)},has(s){return In.call(this,s,!0)},add:Rt("add"),set:Rt("set"),delete:Rt("delete"),clear:Rt("clear"),forEach:Fn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=wn(s,!1,!1),n[s]=wn(s,!0,!1),t[s]=wn(s,!1,!0),i[s]=wn(s,!0,!0)}),[e,n,t,i]}const[bf,Lf,Df,Of]=Af();function hi(e,t){const n=t?e?Of:Df:e?Lf:bf;return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(ye(n,r)&&r in i?n:i,r,s)}const Cf={get:hi(!1,!1)},Rf={get:hi(!1,!0)},Pf={get:hi(!0,!1)},If={get:hi(!0,!0)},Ko=new WeakMap,jo=new WeakMap,Wo=new WeakMap,Ho=new WeakMap;function Mf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ff(e){return e.__v_skip||!Object.isExtensible(e)?0:Mf(sf(e))}function ft(e){return En(e)?e:vi(e,!1,Uo,Cf,Ko)}function wf(e){return vi(e,!1,Sf,Rf,jo)}function Go(e){return vi(e,!0,No,Pf,Wo)}function vy(e){return vi(e,!0,_f,If,Ho)}function vi(e,t,n,i,r){if(!Fe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const o=Ff(e);if(o===0)return e;const u=new Proxy(e,o===2?i:n);return r.set(e,u),u}function Pr(e){return En(e)?Pr(e.__v_raw):!!(e&&e.__v_isReactive)}function En(e){return!!(e&&e.__v_isReadonly)}function $o(e){return!!(e&&e.__v_isShallow)}function Vo(e){return Pr(e)||En(e)}function Te(e){const t=e&&e.__v_raw;return t?Te(t):e}function zo(e){return Yn(e,"__v_skip",!0),e}const yn=e=>Fe(e)?ft(e):e,Ls=e=>Fe(e)?Go(e):e;function Ds(e){Kt&&ht&&(e=Te(e),wo(e.dep||(e.dep=As())))}function gi(e,t){e=Te(e),e.dep&&Xi(e.dep)}function je(e){return!!(e&&e.__v_isRef===!0)}function Wn(e){return Yo(e,!1)}function Bf(e){return Yo(e,!0)}function Yo(e,t){return je(e)?e:new kf(e,t)}class kf{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Te(t),this._value=n?t:yn(t)}get value(){return Ds(this),this._value}set value(t){t=this.__v_isShallow?t:Te(t),pn(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:yn(t),gi(this))}}function gy(e){gi(e)}function ln(e){return je(e)?e.value:e}const Uf={get:(e,t,n)=>ln(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return je(r)&&!je(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function Xo(e){return Pr(e)?e:new Proxy(e,Uf)}class Nf{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:i}=t(()=>Ds(this),()=>gi(this));this._get=n,this._set=i}get value(){return this._get()}set value(t){this._set(t)}}function my(e){return new Nf(e)}function py(e){const t=de(e)?new Array(e.length):{};for(const n in e)t[n]=jf(e,n);return t}class Kf{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function jf(e,t,n){const i=e[t];return je(i)?i:new Kf(e,t,n)}class Wf{constructor(t,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new fi(t,()=>{this._dirty||(this._dirty=!0,gi(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=Te(this);return Ds(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Hf(e,t,n=!1){let i,r;const s=ve(e);return s?(i=e,r=vt):(i=e.get,r=e.set),new Wf(i,r,s||!r,n)}const un=[];function Gf(e,...t){hr();const n=un.length?un[un.length-1].component:null,i=n&&n.appContext.config.warnHandler,r=$f();if(i)Lt(i,n,11,[e+t.join(""),n&&n.proxy,r.map(({vnode:s})=>`at <${Ol(n,s.type)}>`).join(`
`),r]);else{const s=[`[Vue warn]: ${e}`,...t];r.length&&s.push(`
`,...Vf(r)),console.warn(...s)}vr()}function $f(){let e=un[un.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const i=e.component&&e.component.parent;e=i&&i.vnode}return t}function Vf(e){const t=[];return e.forEach((n,i)=>{t.push(...i===0?[]:[`
`],...zf(n))}),t}function zf({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",i=e.component?e.component.parent==null:!1,r=` at <${Ol(e.component,e.type,i)}`,s=">"+n;return e.props?[r,...Yf(e.props),s]:[r+s]}function Yf(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(i=>{t.push(...Qo(i,e[i]))}),n.length>3&&t.push(" ..."),t}function Qo(e,t,n){return Pe(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:je(t)?(t=Qo(e,Te(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):ve(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Te(t),n?t:[`${e}=`,t])}function Lt(e,t,n,i){let r;try{r=i?e(...i):e()}catch(s){$r(s,t,n)}return r}function lt(e,t,n,i){if(ve(e)){const s=Lt(e,t,n,i);return s&&Ss(s)&&s.catch(o=>{$r(o,t,n)}),s}const r=[];for(let s=0;s<e.length;s++)r.push(lt(e[s],t,n,i));return r}function $r(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,u=n;for(;s;){const C=s.ec;if(C){for(let A=0;A<C.length;A++)if(C[A](e,o,u)===!1)return}s=s.parent}const D=t.appContext.config.errorHandler;if(D){Lt(D,null,10,[e,o,u]);return}}Xf(e,n,r,i)}function Xf(e,t,n,i=!0){console.error(e)}let Xn=!1,Qi=!1;const it=[];let At=0;const fn=[];let nn=null,br=0;const cn=[];let wt=null,Lr=0;const Zo=Promise.resolve();let Os=null,Zi=null;function Cs(e){const t=Os||Zo;return e?t.then(this?e.bind(this):e):t}function Qf(e){let t=At+1,n=it.length;for(;t<n;){const i=t+n>>>1;Tn(it[i])<e?t=i+1:n=i}return t}function Rs(e){(!it.length||!it.includes(e,Xn&&e.allowRecurse?At+1:At))&&e!==Zi&&(e.id==null?it.push(e):it.splice(Qf(e.id),0,e),Jo())}function Jo(){!Xn&&!Qi&&(Qi=!0,Os=Zo.then(tl))}function Zf(e){const t=it.indexOf(e);t>At&&it.splice(t,1)}function qo(e,t,n,i){de(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?i+1:i))&&n.push(e),Jo()}function Jf(e){qo(e,nn,fn,br)}function el(e){qo(e,wt,cn,Lr)}function Ps(e,t=null){if(fn.length){for(Zi=t,nn=[...new Set(fn)],fn.length=0,br=0;br<nn.length;br++)nn[br]();nn=null,br=0,Zi=null,Ps(e,t)}}function Qn(e){if(cn.length){const t=[...new Set(cn)];if(cn.length=0,wt){wt.push(...t);return}for(wt=t,wt.sort((n,i)=>Tn(n)-Tn(i)),Lr=0;Lr<wt.length;Lr++)wt[Lr]();wt=null,Lr=0}}const Tn=e=>e.id==null?1/0:e.id;function tl(e){Qi=!1,Xn=!0,Ps(e),it.sort((n,i)=>Tn(n)-Tn(i));const t=vt;try{for(At=0;At<it.length;At++){const n=it[At];n&&n.active!==!1&&Lt(n,null,14)}}finally{At=0,it.length=0,Qn(),Xn=!1,Os=null,(it.length||fn.length||cn.length)&&tl(e)}}let Qr,Bn=[];function qf(e,t){var n,i;Qr=e,Qr?(Qr.enabled=!0,Bn.forEach(({event:r,args:s})=>Qr.emit(r,...s)),Bn=[]):typeof window!="undefined"&&window.HTMLElement&&!(!((i=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)===null||i===void 0)&&i.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{qf(s,t)}),setTimeout(()=>{Qr||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Bn=[])},3e3)):Bn=[]}function ec(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Se;let r=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const A=`${o==="modelValue"?"model":o}Modifiers`,{number:_,trim:p}=i[A]||Se;p?r=n.map(L=>L.trim()):_&&(r=n.map($t))}let u,D=i[u=jn(t)]||i[u=jn(ut(t))];!D&&s&&(D=i[u=jn(yt(t))]),D&&lt(D,e,6,r);const C=i[u+"Once"];if(C){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,lt(C,e,6,r)}}function rl(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let o={},u=!1;if(!ve(e)){const D=C=>{const A=rl(C,t,!0);A&&(u=!0,Me(o,A))};!n&&t.mixins.length&&t.mixins.forEach(D),e.extends&&D(e.extends),e.mixins&&e.mixins.forEach(D)}return!s&&!u?(i.set(e,null),null):(de(s)?s.forEach(D=>o[D]=null):Me(o,s),i.set(e,o),o)}function mi(e,t){return!e||!On(t)?!1:(t=t.slice(2).replace(/Once$/,""),ye(e,t[0].toLowerCase()+t.slice(1))||ye(e,yt(t))||ye(e,t))}let Ve=null,pi=null;function xn(e){const t=Ve;return Ve=e,pi=e&&e.type.__scopeId||null,t}function tc(e){pi=e}function rc(){pi=null}const Ey=e=>rt;function rt(e,t=Ve,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Pa(-1);const s=xn(t),o=e(...r);return xn(s),i._d&&Pa(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function Hn(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:u,attrs:D,emit:C,render:A,renderCache:_,data:p,setupState:L,ctx:O,inheritAttrs:R}=e;let T,y;const l=xn(e);try{if(n.shapeFlag&4){const f=r||i;T=nt(A.call(f,f,_,s,L,p,O)),y=D}else{const f=t;T=nt(f.length>1?f(s,{attrs:D,slots:u,emit:C}):f(s,null)),y=t.props?D:ic(D)}}catch(f){hn.length=0,$r(f,e,1),T=he(Ye)}let a=T;if(y&&R!==!1){const f=Object.keys(y),{shapeFlag:d}=a;f.length&&d&7&&(o&&f.some(ys)&&(y=sc(y,o)),a=zt(a,y))}return n.dirs&&(a.dirs=a.dirs?a.dirs.concat(n.dirs):n.dirs),n.transition&&(a.transition=n.transition),T=a,xn(l),T}function nc(e){let t;for(let n=0;n<e.length;n++){const i=e[n];if(cr(i)){if(i.type!==Ye||i.children==="v-if"){if(t)return;t=i}}else return}return t}const ic=e=>{let t;for(const n in e)(n==="class"||n==="style"||On(n))&&((t||(t={}))[n]=e[n]);return t},sc=(e,t)=>{const n={};for(const i in e)(!ys(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function ac(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:u,patchFlag:D}=t,C=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&D>=0){if(D&1024)return!0;if(D&16)return i?Ea(i,o,C):!!o;if(D&8){const A=t.dynamicProps;for(let _=0;_<A.length;_++){const p=A[_];if(o[p]!==i[p]&&!mi(C,p))return!0}}}else return(r||u)&&(!u||!u.$stable)?!0:i===o?!1:i?o?Ea(i,o,C):!0:!!o;return!1}function Ea(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!mi(n,s))return!0}return!1}function Is({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const oc=e=>e.__isSuspense,lc={name:"Suspense",__isSuspense:!0,process(e,t,n,i,r,s,o,u,D,C){e==null?uc(t,n,i,r,s,o,u,D,C):fc(e,t,n,i,r,o,u,D,C)},hydrate:cc,create:Ms,normalize:dc},yy=lc;function Sn(e,t){const n=e.props&&e.props[t];ve(n)&&n()}function uc(e,t,n,i,r,s,o,u,D){const{p:C,o:{createElement:A}}=D,_=A("div"),p=e.suspense=Ms(e,r,i,t,_,n,s,o,u,D);C(null,p.pendingBranch=e.ssContent,_,null,i,p,s,o),p.deps>0?(Sn(e,"onPending"),Sn(e,"onFallback"),C(null,e.ssFallback,t,n,i,null,s,o),Ir(p,e.ssFallback)):p.resolve()}function fc(e,t,n,i,r,s,o,u,{p:D,um:C,o:{createElement:A}}){const _=t.suspense=e.suspense;_.vnode=t,t.el=e.el;const p=t.ssContent,L=t.ssFallback,{activeBranch:O,pendingBranch:R,isInFallback:T,isHydrating:y}=_;if(R)_.pendingBranch=p,pt(p,R)?(D(R,p,_.hiddenContainer,null,r,_,s,o,u),_.deps<=0?_.resolve():T&&(D(O,L,n,i,r,null,s,o,u),Ir(_,L))):(_.pendingId++,y?(_.isHydrating=!1,_.activeBranch=R):C(R,r,_),_.deps=0,_.effects.length=0,_.hiddenContainer=A("div"),T?(D(null,p,_.hiddenContainer,null,r,_,s,o,u),_.deps<=0?_.resolve():(D(O,L,n,i,r,null,s,o,u),Ir(_,L))):O&&pt(p,O)?(D(O,p,n,i,r,_,s,o,u),_.resolve(!0)):(D(null,p,_.hiddenContainer,null,r,_,s,o,u),_.deps<=0&&_.resolve()));else if(O&&pt(p,O))D(O,p,n,i,r,_,s,o,u),Ir(_,p);else if(Sn(t,"onPending"),_.pendingBranch=p,_.pendingId++,D(null,p,_.hiddenContainer,null,r,_,s,o,u),_.deps<=0)_.resolve();else{const{timeout:l,pendingId:a}=_;l>0?setTimeout(()=>{_.pendingId===a&&_.fallback(L)},l):l===0&&_.fallback(L)}}function Ms(e,t,n,i,r,s,o,u,D,C,A=!1){const{p:_,m:p,um:L,n:O,o:{parentNode:R,remove:T}}=C,y=$t(e.props&&e.props.timeout),l={vnode:e,parent:t,parentComponent:n,isSVG:o,container:i,hiddenContainer:r,anchor:s,deps:0,pendingId:0,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:A,isUnmounted:!1,effects:[],resolve(a=!1){const{vnode:f,activeBranch:d,pendingBranch:m,pendingId:h,effects:c,parentComponent:v,container:P}=l;if(l.isHydrating)l.isHydrating=!1;else if(!a){const S=d&&m.transition&&m.transition.mode==="out-in";S&&(d.transition.afterLeave=()=>{h===l.pendingId&&p(m,P,g,0)});let{anchor:g}=l;d&&(g=O(d),L(d,v,l,!0)),S||p(m,P,g,0)}Ir(l,m),l.pendingBranch=null,l.isInFallback=!1;let b=l.parent,x=!1;for(;b;){if(b.pendingBranch){b.effects.push(...c),x=!0;break}b=b.parent}x||el(c),l.effects=[],Sn(f,"onResolve")},fallback(a){if(!l.pendingBranch)return;const{vnode:f,activeBranch:d,parentComponent:m,container:h,isSVG:c}=l;Sn(f,"onFallback");const v=O(d),P=()=>{!l.isInFallback||(_(null,a,h,v,m,null,c,u,D),Ir(l,a))},b=a.transition&&a.transition.mode==="out-in";b&&(d.transition.afterLeave=P),l.isInFallback=!0,L(d,m,null,!0),b||P()},move(a,f,d){l.activeBranch&&p(l.activeBranch,a,f,d),l.container=a},next(){return l.activeBranch&&O(l.activeBranch)},registerDep(a,f){const d=!!l.pendingBranch;d&&l.deps++;const m=a.vnode.el;a.asyncDep.catch(h=>{$r(h,a,0)}).then(h=>{if(a.isUnmounted||l.isUnmounted||l.pendingId!==a.suspenseId)return;a.asyncResolved=!0;const{vnode:c}=a;is(a,h,!1),m&&(c.el=m);const v=!m&&a.subTree.el;f(a,c,R(m||a.subTree.el),m?null:O(a.subTree),l,o,D),v&&T(v),Is(a,c.el),d&&--l.deps===0&&l.resolve()})},unmount(a,f){l.isUnmounted=!0,l.activeBranch&&L(l.activeBranch,n,a,f),l.pendingBranch&&L(l.pendingBranch,n,a,f)}};return l}function cc(e,t,n,i,r,s,o,u,D){const C=t.suspense=Ms(t,i,n,e.parentNode,document.createElement("div"),null,r,s,o,u,!0),A=D(e,C.pendingBranch=t.ssContent,n,C,s,o);return C.deps===0&&C.resolve(),A}function dc(e){const{shapeFlag:t,children:n}=e,i=t&32;e.ssContent=ya(i?n.default:n),e.ssFallback=i?ya(n.fallback):he(Ye)}function ya(e){let t;if(ve(e)){const n=kr&&e._c;n&&(e._d=!1,ae()),e=e(),n&&(e._d=!0,t=Tt,yl())}return de(e)&&(e=nc(e)),e=nt(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function nl(e,t){t&&t.pendingBranch?de(e)?t.effects.push(...e):t.effects.push(e):el(e)}function Ir(e,t){e.activeBranch=t;const{vnode:n,parentComponent:i}=e,r=n.el=t.el;i&&i.subTree===n&&(i.vnode.el=r,Is(i,r))}function Gn(e,t){if(Ke){let n=Ke.provides;const i=Ke.parent&&Ke.parent.provides;i===n&&(n=Ke.provides=Object.create(i)),n[e]=t}}function Dt(e,t,n=!1){const i=Ke||Ve;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&ve(t)?t.call(i.proxy):t}}function Ty(e,t){return Cn(e,null,t)}function hc(e,t){return Cn(e,null,{flush:"post"})}function xy(e,t){return Cn(e,null,{flush:"sync"})}const Ta={};function ur(e,t,n){return Cn(e,t,n)}function Cn(e,t,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=Se){const u=Ke;let D,C=!1,A=!1;if(je(e)?(D=()=>e.value,C=$o(e)):Pr(e)?(D=()=>e,i=!0):de(e)?(A=!0,C=e.some(Pr),D=()=>e.map(y=>{if(je(y))return y.value;if(Pr(y))return or(y);if(ve(y))return Lt(y,u,2)})):ve(e)?t?D=()=>Lt(e,u,2):D=()=>{if(!(u&&u.isUnmounted))return _&&_(),lt(e,u,3,[p])}:D=vt,t&&i){const y=D;D=()=>or(y())}let _,p=y=>{_=T.onStop=()=>{Lt(y,u,4)}};if(Ur)return p=vt,t?n&&lt(t,u,3,[D(),A?[]:void 0,p]):D(),vt;let L=A?[]:Ta;const O=()=>{if(!!T.active)if(t){const y=T.run();(i||C||(A?y.some((l,a)=>pn(l,L[a])):pn(y,L)))&&(_&&_(),lt(t,u,3,[y,L===Ta?void 0:L,p]),L=y)}else T.run()};O.allowRecurse=!!t;let R;r==="sync"?R=O:r==="post"?R=()=>Ge(O,u&&u.suspense):R=()=>{!u||u.isMounted?Jf(O):O()};const T=new fi(D,R);return t?n?O():L=T.run():r==="post"?Ge(T.run.bind(T),u&&u.suspense):T.run(),()=>{T.stop(),u&&u.scope&&Ts(u.scope.effects,T)}}function vc(e,t,n){const i=this.proxy,r=Pe(e)?e.includes(".")?il(i,e):()=>i[e]:e.bind(i,i);let s;ve(t)?s=t:(s=t.handler,n=t);const o=Ke;Yt(this);const u=Cn(r,s.bind(i),n);return o?Yt(o):Wt(),u}function il(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function or(e,t){if(!Fe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),je(e))or(e.value,t);else if(de(e))for(let n=0;n<e.length;n++)or(e[n],t);else if(dr(e)||Cr(e))e.forEach(n=>{or(n,t)});else if(Co(e))for(const n in e)or(e[n],t);return e}function sl(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ti(()=>{e.isMounted=!0}),Bs(()=>{e.isUnmounting=!0}),e}const ot=[Function,Array],gc={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ot,onEnter:ot,onAfterEnter:ot,onEnterCancelled:ot,onBeforeLeave:ot,onLeave:ot,onAfterLeave:ot,onLeaveCancelled:ot,onBeforeAppear:ot,onAppear:ot,onAfterAppear:ot,onAppearCancelled:ot},setup(e,{slots:t}){const n=gr(),i=sl();let r;return()=>{const s=t.default&&Fs(t.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const R of s)if(R.type!==Ye){o=R;break}}const u=Te(e),{mode:D}=u;if(i.isLeaving)return Pi(o);const C=xa(o);if(!C)return Pi(o);const A=_n(C,u,i,n);wr(C,A);const _=n.subTree,p=_&&xa(_);let L=!1;const{getTransitionKey:O}=C.type;if(O){const R=O();r===void 0?r=R:R!==r&&(r=R,L=!0)}if(p&&p.type!==Ye&&(!pt(C,p)||L)){const R=_n(p,u,i,n);if(wr(p,R),D==="out-in")return i.isLeaving=!0,R.afterLeave=()=>{i.isLeaving=!1,n.update()},Pi(o);D==="in-out"&&C.type!==Ye&&(R.delayLeave=(T,y,l)=>{const a=ol(i,p);a[String(p.key)]=p,T._leaveCb=()=>{y(),T._leaveCb=void 0,delete A.delayedLeave},A.delayedLeave=l})}return o}}},al=gc;function ol(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function _n(e,t,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:u,onEnter:D,onAfterEnter:C,onEnterCancelled:A,onBeforeLeave:_,onLeave:p,onAfterLeave:L,onLeaveCancelled:O,onBeforeAppear:R,onAppear:T,onAfterAppear:y,onAppearCancelled:l}=t,a=String(e.key),f=ol(n,e),d=(h,c)=>{h&&lt(h,i,9,c)},m={mode:s,persisted:o,beforeEnter(h){let c=u;if(!n.isMounted)if(r)c=R||u;else return;h._leaveCb&&h._leaveCb(!0);const v=f[a];v&&pt(e,v)&&v.el._leaveCb&&v.el._leaveCb(),d(c,[h])},enter(h){let c=D,v=C,P=A;if(!n.isMounted)if(r)c=T||D,v=y||C,P=l||A;else return;let b=!1;const x=h._enterCb=S=>{b||(b=!0,S?d(P,[h]):d(v,[h]),m.delayedLeave&&m.delayedLeave(),h._enterCb=void 0)};c?(c(h,x),c.length<=1&&x()):x()},leave(h,c){const v=String(e.key);if(h._enterCb&&h._enterCb(!0),n.isUnmounting)return c();d(_,[h]);let P=!1;const b=h._leaveCb=x=>{P||(P=!0,c(),x?d(O,[h]):d(L,[h]),h._leaveCb=void 0,f[v]===e&&delete f[v])};f[v]=e,p?(p(h,b),p.length<=1&&b()):b()},clone(h){return _n(h,t,n,i)}};return m}function Pi(e){if(Rn(e))return e=zt(e),e.children=null,e}function xa(e){return Rn(e)?e.children?e.children[0]:void 0:e}function wr(e,t){e.shapeFlag&6&&e.component?wr(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Fs(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const u=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Re?(o.patchFlag&128&&r++,i=i.concat(Fs(o.children,t,u))):(t||o.type!==Ye)&&i.push(u!=null?zt(o,{key:u}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function Ei(e){return ve(e)?{setup:e,name:e.name}:e}const Br=e=>!!e.type.__asyncLoader;function Sy(e){ve(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:i,delay:r=200,timeout:s,suspensible:o=!0,onError:u}=e;let D=null,C,A=0;const _=()=>(A++,D=null,p()),p=()=>{let L;return D||(L=D=t().catch(O=>{if(O=O instanceof Error?O:new Error(String(O)),u)return new Promise((R,T)=>{u(O,()=>R(_()),()=>T(O),A+1)});throw O}).then(O=>L!==D&&D?D:(O&&(O.__esModule||O[Symbol.toStringTag]==="Module")&&(O=O.default),C=O,O)))};return Ei({name:"AsyncComponentWrapper",__asyncLoader:p,get __asyncResolved(){return C},setup(){const L=Ke;if(C)return()=>Ii(C,L);const O=l=>{D=null,$r(l,L,13,!i)};if(o&&L.suspense||Ur)return p().then(l=>()=>Ii(l,L)).catch(l=>(O(l),()=>i?he(i,{error:l}):null));const R=Wn(!1),T=Wn(),y=Wn(!!r);return r&&setTimeout(()=>{y.value=!1},r),s!=null&&setTimeout(()=>{if(!R.value&&!T.value){const l=new Error(`Async component timed out after ${s}ms.`);O(l),T.value=l}},s),p().then(()=>{R.value=!0,L.parent&&Rn(L.parent.vnode)&&Rs(L.parent.update)}).catch(l=>{O(l),T.value=l}),()=>{if(R.value&&C)return Ii(C,L);if(T.value&&i)return he(i,{error:T.value});if(n&&!y.value)return he(n)}}})}function Ii(e,{vnode:{ref:t,props:n,children:i}}){const r=he(e,n,i);return r.ref=t,r}const Rn=e=>e.type.__isKeepAlive,mc={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=gr(),i=n.ctx;if(!i.renderer)return t.default;const r=new Map,s=new Set;let o=null;const u=n.suspense,{renderer:{p:D,m:C,um:A,o:{createElement:_}}}=i,p=_("div");i.activate=(l,a,f,d,m)=>{const h=l.component;C(l,a,f,0,u),D(h.vnode,l,a,f,h,u,d,l.slotScopeIds,m),Ge(()=>{h.isDeactivated=!1,h.a&&Rr(h.a);const c=l.props&&l.props.onVnodeMounted;c&&Qe(c,h.parent,l)},u)},i.deactivate=l=>{const a=l.component;C(l,p,null,1,u),Ge(()=>{a.da&&Rr(a.da);const f=l.props&&l.props.onVnodeUnmounted;f&&Qe(f,a.parent,l),a.isDeactivated=!0},u)};function L(l){Mi(l),A(l,n,u,!0)}function O(l){r.forEach((a,f)=>{const d=ti(a.type);d&&(!l||!l(d))&&R(f)})}function R(l){const a=r.get(l);!o||a.type!==o.type?L(a):o&&Mi(o),r.delete(l),s.delete(l)}ur(()=>[e.include,e.exclude],([l,a])=>{l&&O(f=>sn(l,f)),a&&O(f=>!sn(a,f))},{flush:"post",deep:!0});let T=null;const y=()=>{T!=null&&r.set(T,Fi(n.subTree))};return Ti(y),ws(y),Bs(()=>{r.forEach(l=>{const{subTree:a,suspense:f}=n,d=Fi(a);if(l.type===d.type){Mi(d);const m=d.component.da;m&&Ge(m,f);return}L(l)})}),()=>{if(T=null,!t.default)return null;const l=t.default(),a=l[0];if(l.length>1)return o=null,l;if(!cr(a)||!(a.shapeFlag&4)&&!(a.shapeFlag&128))return o=null,a;let f=Fi(a);const d=f.type,m=ti(Br(f)?f.type.__asyncResolved||{}:d),{include:h,exclude:c,max:v}=e;if(h&&(!m||!sn(h,m))||c&&m&&sn(c,m))return o=f,a;const P=f.key==null?d:f.key,b=r.get(P);return f.el&&(f=zt(f),a.shapeFlag&128&&(a.ssContent=f)),T=P,b?(f.el=b.el,f.component=b.component,f.transition&&wr(f,f.transition),f.shapeFlag|=512,s.delete(P),s.add(P)):(s.add(P),v&&s.size>parseInt(v,10)&&R(s.values().next().value)),f.shapeFlag|=256,o=f,a}}},_y=mc;function sn(e,t){return de(e)?e.some(n=>sn(n,t)):Pe(e)?e.split(",").includes(t):e.test?e.test(t):!1}function pc(e,t){ll(e,"a",t)}function Ec(e,t){ll(e,"da",t)}function ll(e,t,n=Ke){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(yi(t,i,n),n){let r=n.parent;for(;r&&r.parent;)Rn(r.parent.vnode)&&yc(i,t,n,r),r=r.parent}}function yc(e,t,n,i){const r=yi(t,e,i,!0);ks(()=>{Ts(i[t],r)},n)}function Mi(e){let t=e.shapeFlag;t&256&&(t-=256),t&512&&(t-=512),e.shapeFlag=t}function Fi(e){return e.shapeFlag&128?e.ssContent:e}function yi(e,t,n=Ke,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;hr(),Yt(n);const u=lt(t,n,e,o);return Wt(),vr(),u});return i?r.unshift(s):r.push(s),s}}const Ct=e=>(t,n=Ke)=>(!Ur||e==="sp")&&yi(e,t,n),Tc=Ct("bm"),Ti=Ct("m"),xc=Ct("bu"),ws=Ct("u"),Bs=Ct("bum"),ks=Ct("um"),Sc=Ct("sp"),_c=Ct("rtg"),Ac=Ct("rtc");function bc(e,t=Ke){yi("ec",e,t)}let Ji=!0;function Lc(e){const t=fl(e),n=e.proxy,i=e.ctx;Ji=!1,t.beforeCreate&&Sa(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:u,provide:D,inject:C,created:A,beforeMount:_,mounted:p,beforeUpdate:L,updated:O,activated:R,deactivated:T,beforeDestroy:y,beforeUnmount:l,destroyed:a,unmounted:f,render:d,renderTracked:m,renderTriggered:h,errorCaptured:c,serverPrefetch:v,expose:P,inheritAttrs:b,components:x,directives:S,filters:g}=t;if(C&&Dc(C,i,null,e.appContext.config.unwrapInjectedRef),o)for(const M in o){const F=o[M];ve(F)&&(i[M]=F.bind(n))}if(r){const M=r.call(n,n);Fe(M)&&(e.data=ft(M))}if(Ji=!0,s)for(const M in s){const F=s[M],w=ve(F)?F.bind(n,n):ve(F.get)?F.get.bind(n,n):vt,k=!ve(F)&&ve(F.set)?F.set.bind(n):vt,B=Et({get:w,set:k});Object.defineProperty(i,M,{enumerable:!0,configurable:!0,get:()=>B.value,set:U=>B.value=U})}if(u)for(const M in u)ul(u[M],i,n,M);if(D){const M=ve(D)?D.call(n):D;Reflect.ownKeys(M).forEach(F=>{Gn(F,M[F])})}A&&Sa(A,e,"c");function I(M,F){de(F)?F.forEach(w=>M(w.bind(n))):F&&M(F.bind(n))}if(I(Tc,_),I(Ti,p),I(xc,L),I(ws,O),I(pc,R),I(Ec,T),I(bc,c),I(Ac,m),I(_c,h),I(Bs,l),I(ks,f),I(Sc,v),de(P))if(P.length){const M=e.exposed||(e.exposed={});P.forEach(F=>{Object.defineProperty(M,F,{get:()=>n[F],set:w=>n[F]=w})})}else e.exposed||(e.exposed={});d&&e.render===vt&&(e.render=d),b!=null&&(e.inheritAttrs=b),x&&(e.components=x),S&&(e.directives=S)}function Dc(e,t,n=vt,i=!1){de(e)&&(e=qi(e));for(const r in e){const s=e[r];let o;Fe(s)?"default"in s?o=Dt(s.from||r,s.default,!0):o=Dt(s.from||r):o=Dt(s),je(o)&&i?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:u=>o.value=u}):t[r]=o}}function Sa(e,t,n){lt(de(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function ul(e,t,n,i){const r=i.includes(".")?il(n,i):()=>n[i];if(Pe(e)){const s=t[e];ve(s)&&ur(r,s)}else if(ve(e))ur(r,e.bind(n));else if(Fe(e))if(de(e))e.forEach(s=>ul(s,t,n,i));else{const s=ve(e.handler)?e.handler.bind(n):t[e.handler];ve(s)&&ur(r,s,e)}}function fl(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,u=s.get(t);let D;return u?D=u:!r.length&&!n&&!i?D=t:(D={},r.length&&r.forEach(C=>Zn(D,C,o,!0)),Zn(D,t,o)),s.set(t,D),D}function Zn(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&Zn(e,s,n,!0),r&&r.forEach(o=>Zn(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const u=Oc[o]||n&&n[o];e[o]=u?u(e[o],t[o]):t[o]}return e}const Oc={data:_a,props:ir,emits:ir,methods:ir,computed:ir,beforeCreate:ze,created:ze,beforeMount:ze,mounted:ze,beforeUpdate:ze,updated:ze,beforeDestroy:ze,beforeUnmount:ze,destroyed:ze,unmounted:ze,activated:ze,deactivated:ze,errorCaptured:ze,serverPrefetch:ze,components:ir,directives:ir,watch:Rc,provide:_a,inject:Cc};function _a(e,t){return t?e?function(){return Me(ve(e)?e.call(this,this):e,ve(t)?t.call(this,this):t)}:t:e}function Cc(e,t){return ir(qi(e),qi(t))}function qi(e){if(de(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ze(e,t){return e?[...new Set([].concat(e,t))]:t}function ir(e,t){return e?Me(Me(Object.create(null),e),t):t}function Rc(e,t){if(!e)return t;if(!t)return e;const n=Me(Object.create(null),e);for(const i in t)n[i]=ze(e[i],t[i]);return n}function Pc(e,t,n,i=!1){const r={},s={};Yn(s,xi,1),e.propsDefaults=Object.create(null),cl(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:wf(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function Ic(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,u=Te(r),[D]=e.propsOptions;let C=!1;if((i||o>0)&&!(o&16)){if(o&8){const A=e.vnode.dynamicProps;for(let _=0;_<A.length;_++){let p=A[_];if(mi(e.emitsOptions,p))continue;const L=t[p];if(D)if(ye(s,p))L!==s[p]&&(s[p]=L,C=!0);else{const O=ut(p);r[O]=es(D,u,O,L,e,!1)}else L!==s[p]&&(s[p]=L,C=!0)}}}else{cl(e,t,r,s)&&(C=!0);let A;for(const _ in u)(!t||!ye(t,_)&&((A=yt(_))===_||!ye(t,A)))&&(D?n&&(n[_]!==void 0||n[A]!==void 0)&&(r[_]=es(D,u,_,void 0,e,!0)):delete r[_]);if(s!==u)for(const _ in s)(!t||!ye(t,_)&&!0)&&(delete s[_],C=!0)}C&&Ot(e,"set","$attrs")}function cl(e,t,n,i){const[r,s]=e.propsOptions;let o=!1,u;if(t)for(let D in t){if(on(D))continue;const C=t[D];let A;r&&ye(r,A=ut(D))?!s||!s.includes(A)?n[A]=C:(u||(u={}))[A]=C:mi(e.emitsOptions,D)||(!(D in i)||C!==i[D])&&(i[D]=C,o=!0)}if(s){const D=Te(n),C=u||Se;for(let A=0;A<s.length;A++){const _=s[A];n[_]=es(r,D,_,C[_],e,!ye(C,_))}}return o}function es(e,t,n,i,r,s){const o=e[n];if(o!=null){const u=ye(o,"default");if(u&&i===void 0){const D=o.default;if(o.type!==Function&&ve(D)){const{propsDefaults:C}=r;n in C?i=C[n]:(Yt(r),i=C[n]=D.call(null,t),Wt())}else i=D}o[0]&&(s&&!u?i=!1:o[1]&&(i===""||i===yt(n))&&(i=!0))}return i}function dl(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},u=[];let D=!1;if(!ve(e)){const A=_=>{D=!0;const[p,L]=dl(_,t,!0);Me(o,p),L&&u.push(...L)};!n&&t.mixins.length&&t.mixins.forEach(A),e.extends&&A(e.extends),e.mixins&&e.mixins.forEach(A)}if(!s&&!D)return i.set(e,Or),Or;if(de(s))for(let A=0;A<s.length;A++){const _=ut(s[A]);Aa(_)&&(o[_]=Se)}else if(s)for(const A in s){const _=ut(A);if(Aa(_)){const p=s[A],L=o[_]=de(p)||ve(p)?{type:p}:p;if(L){const O=Da(Boolean,L.type),R=Da(String,L.type);L[0]=O>-1,L[1]=R<0||O<R,(O>-1||ye(L,"default"))&&u.push(_)}}}const C=[o,u];return i.set(e,C),C}function Aa(e){return e[0]!=="$"}function ba(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function La(e,t){return ba(e)===ba(t)}function Da(e,t){return de(t)?t.findIndex(n=>La(n,e)):ve(t)&&La(t,e)?0:-1}const hl=e=>e[0]==="_"||e==="$stable",Us=e=>de(e)?e.map(nt):[nt(e)],Mc=(e,t,n)=>{const i=rt((...r)=>Us(t(...r)),n);return i._c=!1,i},vl=(e,t,n)=>{const i=e._ctx;for(const r in e){if(hl(r))continue;const s=e[r];if(ve(s))t[r]=Mc(r,s,i);else if(s!=null){const o=Us(s);t[r]=()=>o}}},gl=(e,t)=>{const n=Us(t);e.slots.default=()=>n},Fc=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Te(t),Yn(t,"_",n)):vl(t,e.slots={})}else e.slots={},t&&gl(e,t);Yn(e.slots,xi,1)},wc=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=Se;if(i.shapeFlag&32){const u=t._;u?n&&u===1?s=!1:(Me(r,t),!n&&u===1&&delete r._):(s=!t.$stable,vl(t,r)),o=t}else t&&(gl(e,t),o={default:1});if(s)for(const u in r)!hl(u)&&!(u in o)&&delete r[u]};function jt(e,t){const n=Ve;if(n===null)return e;const i=Si(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,u,D,C=Se]=t[s];ve(o)&&(o={mounted:o,updated:o}),o.deep&&or(u),r.push({dir:o,instance:i,value:u,oldValue:void 0,arg:D,modifiers:C})}return e}function mt(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const u=r[o];s&&(u.oldValue=s[o].value);let D=u.dir[i];D&&(hr(),lt(D,n,8,[e.el,u,e,t]),vr())}}function ml(){return{app:null,config:{isNativeTag:tf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bc=0;function kc(e,t){return function(i,r=null){ve(i)||(i=Object.assign({},i)),r!=null&&!Fe(r)&&(r=null);const s=ml(),o=new Set;let u=!1;const D=s.app={_uid:Bc++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:ad,get config(){return s.config},set config(C){},use(C,...A){return o.has(C)||(C&&ve(C.install)?(o.add(C),C.install(D,...A)):ve(C)&&(o.add(C),C(D,...A))),D},mixin(C){return s.mixins.includes(C)||s.mixins.push(C),D},component(C,A){return A?(s.components[C]=A,D):s.components[C]},directive(C,A){return A?(s.directives[C]=A,D):s.directives[C]},mount(C,A,_){if(!u){const p=he(i,r);return p.appContext=s,A&&t?t(p,C):e(p,C,_),u=!0,D._container=C,C.__vue_app__=D,Si(p.component)||p.component.proxy}},unmount(){u&&(e(null,D._container),delete D._container.__vue_app__)},provide(C,A){return s.provides[C]=A,D}};return D}}function Jn(e,t,n,i,r=!1){if(de(e)){e.forEach((p,L)=>Jn(p,t&&(de(t)?t[L]:t),n,i,r));return}if(Br(i)&&!r)return;const s=i.shapeFlag&4?Si(i.component)||i.component.proxy:i.el,o=r?null:s,{i:u,r:D}=e,C=t&&t.r,A=u.refs===Se?u.refs={}:u.refs,_=u.setupState;if(C!=null&&C!==D&&(Pe(C)?(A[C]=null,ye(_,C)&&(_[C]=null)):je(C)&&(C.value=null)),ve(D))Lt(D,u,12,[o,A]);else{const p=Pe(D),L=je(D);if(p||L){const O=()=>{if(e.f){const R=p?A[D]:D.value;r?de(R)&&Ts(R,s):de(R)?R.includes(s)||R.push(s):p?(A[D]=[s],ye(_,D)&&(_[D]=A[D])):(D.value=[s],e.k&&(A[e.k]=D.value))}else p?(A[D]=o,ye(_,D)&&(_[D]=o)):je(D)&&(D.value=o,e.k&&(A[e.k]=o))};o?(O.id=-1,Ge(O,n)):O()}}}let Pt=!1;const kn=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",wi=e=>e.nodeType===8;function Uc(e){const{mt:t,p:n,o:{patchProp:i,nextSibling:r,parentNode:s,remove:o,insert:u,createComment:D}}=e,C=(T,y)=>{if(!y.hasChildNodes()){n(null,T,y),Qn();return}Pt=!1,A(y.firstChild,T,null,null,null),Qn(),Pt&&console.error("Hydration completed but contains mismatches.")},A=(T,y,l,a,f,d=!1)=>{const m=wi(T)&&T.data==="[",h=()=>O(T,y,l,a,f,m),{type:c,ref:v,shapeFlag:P}=y,b=T.nodeType;y.el=T;let x=null;switch(c){case An:b!==3?x=h():(T.data!==y.children&&(Pt=!0,T.data=y.children),x=r(T));break;case Ye:b!==8||m?x=h():x=r(T);break;case Mr:if(b!==1)x=h();else{x=T;const S=!y.children.length;for(let g=0;g<y.staticCount;g++)S&&(y.children+=x.outerHTML),g===y.staticCount-1&&(y.anchor=x),x=r(x);return x}break;case Re:m?x=L(T,y,l,a,f,d):x=h();break;default:if(P&1)b!==1||y.type.toLowerCase()!==T.tagName.toLowerCase()?x=h():x=_(T,y,l,a,f,d);else if(P&6){y.slotScopeIds=f;const S=s(T);if(t(y,S,null,l,a,kn(S),d),x=m?R(T):r(T),Br(y)){let g;m?(g=he(Re),g.anchor=x?x.previousSibling:S.lastChild):g=T.nodeType===3?st(""):he("div"),g.el=T,y.component.subTree=g}}else P&64?b!==8?x=h():x=y.type.hydrate(T,y,l,a,f,d,e,p):P&128&&(x=y.type.hydrate(T,y,l,a,kn(s(T)),f,d,e,A))}return v!=null&&Jn(v,null,a,y),x},_=(T,y,l,a,f,d)=>{d=d||!!y.dynamicChildren;const{type:m,props:h,patchFlag:c,shapeFlag:v,dirs:P}=y,b=m==="input"&&P||m==="option";if(b||c!==-1){if(P&&mt(y,null,l,"created"),h)if(b||!d||c&48)for(const S in h)(b&&S.endsWith("value")||On(S)&&!on(S))&&i(T,S,null,h[S],!1,void 0,l);else h.onClick&&i(T,"onClick",null,h.onClick,!1,void 0,l);let x;if((x=h&&h.onVnodeBeforeMount)&&Qe(x,l,y),P&&mt(y,null,l,"beforeMount"),((x=h&&h.onVnodeMounted)||P)&&nl(()=>{x&&Qe(x,l,y),P&&mt(y,null,l,"mounted")},a),v&16&&!(h&&(h.innerHTML||h.textContent))){let S=p(T.firstChild,y,T,l,a,f,d);for(;S;){Pt=!0;const g=S;S=S.nextSibling,o(g)}}else v&8&&T.textContent!==y.children&&(Pt=!0,T.textContent=y.children)}return T.nextSibling},p=(T,y,l,a,f,d,m)=>{m=m||!!y.dynamicChildren;const h=y.children,c=h.length;for(let v=0;v<c;v++){const P=m?h[v]:h[v]=nt(h[v]);if(T)T=A(T,P,a,f,d,m);else{if(P.type===An&&!P.children)continue;Pt=!0,n(null,P,l,null,a,f,kn(l),d)}}return T},L=(T,y,l,a,f,d)=>{const{slotScopeIds:m}=y;m&&(f=f?f.concat(m):m);const h=s(T),c=p(r(T),y,h,l,a,f,d);return c&&wi(c)&&c.data==="]"?r(y.anchor=c):(Pt=!0,u(y.anchor=D("]"),h,c),c)},O=(T,y,l,a,f,d)=>{if(Pt=!0,y.el=null,d){const c=R(T);for(;;){const v=r(T);if(v&&v!==c)o(v);else break}}const m=r(T),h=s(T);return o(T),n(null,y,h,m,l,a,kn(h),f),m},R=T=>{let y=0;for(;T;)if(T=r(T),T&&wi(T)&&(T.data==="["&&y++,T.data==="]")){if(y===0)return r(T);y--}return T};return[C,A]}const Ge=nl;function Nc(e){return pl(e)}function Kc(e){return pl(e,Uc)}function pl(e,t){const n=lf();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:u,createComment:D,setText:C,setElementText:A,parentNode:_,nextSibling:p,setScopeId:L=vt,cloneNode:O,insertStaticContent:R}=e,T=(K,W,V,Q=null,Y=null,Z=null,ne=!1,q=null,re=!!W.dynamicChildren)=>{if(K===W)return;K&&!pt(K,W)&&(Q=z(K),j(K,Y,Z,!0),K=null),W.patchFlag===-2&&(re=!1,W.dynamicChildren=null);const{type:J,ref:le,shapeFlag:oe}=W;switch(J){case An:y(K,W,V,Q);break;case Ye:l(K,W,V,Q);break;case Mr:K==null&&a(W,V,Q,ne);break;case Re:S(K,W,V,Q,Y,Z,ne,q,re);break;default:oe&1?m(K,W,V,Q,Y,Z,ne,q,re):oe&6?g(K,W,V,Q,Y,Z,ne,q,re):(oe&64||oe&128)&&J.process(K,W,V,Q,Y,Z,ne,q,re,X)}le!=null&&Y&&Jn(le,K&&K.ref,Z,W||K,!W)},y=(K,W,V,Q)=>{if(K==null)i(W.el=u(W.children),V,Q);else{const Y=W.el=K.el;W.children!==K.children&&C(Y,W.children)}},l=(K,W,V,Q)=>{K==null?i(W.el=D(W.children||""),V,Q):W.el=K.el},a=(K,W,V,Q)=>{[K.el,K.anchor]=R(K.children,W,V,Q,K.el,K.anchor)},f=({el:K,anchor:W},V,Q)=>{let Y;for(;K&&K!==W;)Y=p(K),i(K,V,Q),K=Y;i(W,V,Q)},d=({el:K,anchor:W})=>{let V;for(;K&&K!==W;)V=p(K),r(K),K=V;r(W)},m=(K,W,V,Q,Y,Z,ne,q,re)=>{ne=ne||W.type==="svg",K==null?h(W,V,Q,Y,Z,ne,q,re):P(K,W,Y,Z,ne,q,re)},h=(K,W,V,Q,Y,Z,ne,q)=>{let re,J;const{type:le,props:oe,shapeFlag:ue,transition:ce,patchFlag:me,dirs:pe}=K;if(K.el&&O!==void 0&&me===-1)re=K.el=O(K.el);else{if(re=K.el=o(K.type,Z,oe&&oe.is,oe),ue&8?A(re,K.children):ue&16&&v(K.children,re,null,Q,Y,Z&&le!=="foreignObject",ne,q),pe&&mt(K,null,Q,"created"),oe){for(const Ee in oe)Ee!=="value"&&!on(Ee)&&s(re,Ee,null,oe[Ee],Z,K.children,Q,Y,$);"value"in oe&&s(re,"value",null,oe.value),(J=oe.onVnodeBeforeMount)&&Qe(J,Q,K)}c(re,K,K.scopeId,ne,Q)}pe&&mt(K,null,Q,"beforeMount");const ge=(!Y||Y&&!Y.pendingBranch)&&ce&&!ce.persisted;ge&&ce.beforeEnter(re),i(re,W,V),((J=oe&&oe.onVnodeMounted)||ge||pe)&&Ge(()=>{J&&Qe(J,Q,K),ge&&ce.enter(re),pe&&mt(K,null,Q,"mounted")},Y)},c=(K,W,V,Q,Y)=>{if(V&&L(K,V),Q)for(let Z=0;Z<Q.length;Z++)L(K,Q[Z]);if(Y){let Z=Y.subTree;if(W===Z){const ne=Y.vnode;c(K,ne,ne.scopeId,ne.slotScopeIds,Y.parent)}}},v=(K,W,V,Q,Y,Z,ne,q,re=0)=>{for(let J=re;J<K.length;J++){const le=K[J]=q?Bt(K[J]):nt(K[J]);T(null,le,W,V,Q,Y,Z,ne,q)}},P=(K,W,V,Q,Y,Z,ne)=>{const q=W.el=K.el;let{patchFlag:re,dynamicChildren:J,dirs:le}=W;re|=K.patchFlag&16;const oe=K.props||Se,ue=W.props||Se;let ce;V&&rr(V,!1),(ce=ue.onVnodeBeforeUpdate)&&Qe(ce,V,W,K),le&&mt(W,K,V,"beforeUpdate"),V&&rr(V,!0);const me=Y&&W.type!=="foreignObject";if(J?b(K.dynamicChildren,J,q,V,Q,me,Z):ne||w(K,W,q,null,V,Q,me,Z,!1),re>0){if(re&16)x(q,W,oe,ue,V,Q,Y);else if(re&2&&oe.class!==ue.class&&s(q,"class",null,ue.class,Y),re&4&&s(q,"style",oe.style,ue.style,Y),re&8){const pe=W.dynamicProps;for(let ge=0;ge<pe.length;ge++){const Ee=pe[ge],De=oe[Ee],Ne=ue[Ee];(Ne!==De||Ee==="value")&&s(q,Ee,De,Ne,Y,K.children,V,Q,$)}}re&1&&K.children!==W.children&&A(q,W.children)}else!ne&&J==null&&x(q,W,oe,ue,V,Q,Y);((ce=ue.onVnodeUpdated)||le)&&Ge(()=>{ce&&Qe(ce,V,W,K),le&&mt(W,K,V,"updated")},Q)},b=(K,W,V,Q,Y,Z,ne)=>{for(let q=0;q<W.length;q++){const re=K[q],J=W[q],le=re.el&&(re.type===Re||!pt(re,J)||re.shapeFlag&70)?_(re.el):V;T(re,J,le,null,Q,Y,Z,ne,!0)}},x=(K,W,V,Q,Y,Z,ne)=>{if(V!==Q){for(const q in Q){if(on(q))continue;const re=Q[q],J=V[q];re!==J&&q!=="value"&&s(K,q,J,re,ne,W.children,Y,Z,$)}if(V!==Se)for(const q in V)!on(q)&&!(q in Q)&&s(K,q,V[q],null,ne,W.children,Y,Z,$);"value"in Q&&s(K,"value",V.value,Q.value)}},S=(K,W,V,Q,Y,Z,ne,q,re)=>{const J=W.el=K?K.el:u(""),le=W.anchor=K?K.anchor:u("");let{patchFlag:oe,dynamicChildren:ue,slotScopeIds:ce}=W;ce&&(q=q?q.concat(ce):ce),K==null?(i(J,V,Q),i(le,V,Q),v(W.children,V,le,Y,Z,ne,q,re)):oe>0&&oe&64&&ue&&K.dynamicChildren?(b(K.dynamicChildren,ue,V,Y,Z,ne,q),(W.key!=null||Y&&W===Y.subTree)&&Ns(K,W,!0)):w(K,W,V,le,Y,Z,ne,q,re)},g=(K,W,V,Q,Y,Z,ne,q,re)=>{W.slotScopeIds=q,K==null?W.shapeFlag&512?Y.ctx.activate(W,V,Q,ne,re):E(W,V,Q,Y,Z,ne,re):I(K,W,re)},E=(K,W,V,Q,Y,Z,ne)=>{const q=K.component=_l(K,Q,Y);if(Rn(K)&&(q.ctx.renderer=X),bl(q),q.asyncDep){if(Y&&Y.registerDep(q,M),!K.el){const re=q.subTree=he(Ye);l(null,re,W,V)}return}M(q,K,W,V,Y,Z,ne)},I=(K,W,V)=>{const Q=W.component=K.component;if(ac(K,W,V))if(Q.asyncDep&&!Q.asyncResolved){F(Q,W,V);return}else Q.next=W,Zf(Q.update),Q.update();else W.component=K.component,W.el=K.el,Q.vnode=W},M=(K,W,V,Q,Y,Z,ne)=>{const q=()=>{if(K.isMounted){let{next:le,bu:oe,u:ue,parent:ce,vnode:me}=K,pe=le,ge;rr(K,!1),le?(le.el=me.el,F(K,le,ne)):le=me,oe&&Rr(oe),(ge=le.props&&le.props.onVnodeBeforeUpdate)&&Qe(ge,ce,le,me),rr(K,!0);const Ee=Hn(K),De=K.subTree;K.subTree=Ee,T(De,Ee,_(De.el),z(De),K,Y,Z),le.el=Ee.el,pe===null&&Is(K,Ee.el),ue&&Ge(ue,Y),(ge=le.props&&le.props.onVnodeUpdated)&&Ge(()=>Qe(ge,ce,le,me),Y)}else{let le;const{el:oe,props:ue}=W,{bm:ce,m:me,parent:pe}=K,ge=Br(W);if(rr(K,!1),ce&&Rr(ce),!ge&&(le=ue&&ue.onVnodeBeforeMount)&&Qe(le,pe,W),rr(K,!0),oe&&se){const Ee=()=>{K.subTree=Hn(K),se(oe,K.subTree,K,Y,null)};ge?W.type.__asyncLoader().then(()=>!K.isUnmounted&&Ee()):Ee()}else{const Ee=K.subTree=Hn(K);T(null,Ee,V,Q,K,Y,Z),W.el=Ee.el}if(me&&Ge(me,Y),!ge&&(le=ue&&ue.onVnodeMounted)){const Ee=W;Ge(()=>Qe(le,pe,Ee),Y)}W.shapeFlag&256&&K.a&&Ge(K.a,Y),K.isMounted=!0,W=V=Q=null}},re=K.effect=new fi(q,()=>Rs(K.update),K.scope),J=K.update=re.run.bind(re);J.id=K.uid,rr(K,!0),J()},F=(K,W,V)=>{W.component=K;const Q=K.vnode.props;K.vnode=W,K.next=null,Ic(K,W.props,Q,V),wc(K,W.children,V),hr(),Ps(void 0,K.update),vr()},w=(K,W,V,Q,Y,Z,ne,q,re=!1)=>{const J=K&&K.children,le=K?K.shapeFlag:0,oe=W.children,{patchFlag:ue,shapeFlag:ce}=W;if(ue>0){if(ue&128){B(J,oe,V,Q,Y,Z,ne,q,re);return}else if(ue&256){k(J,oe,V,Q,Y,Z,ne,q,re);return}}ce&8?(le&16&&$(J,Y,Z),oe!==J&&A(V,oe)):le&16?ce&16?B(J,oe,V,Q,Y,Z,ne,q,re):$(J,Y,Z,!0):(le&8&&A(V,""),ce&16&&v(oe,V,Q,Y,Z,ne,q,re))},k=(K,W,V,Q,Y,Z,ne,q,re)=>{K=K||Or,W=W||Or;const J=K.length,le=W.length,oe=Math.min(J,le);let ue;for(ue=0;ue<oe;ue++){const ce=W[ue]=re?Bt(W[ue]):nt(W[ue]);T(K[ue],ce,V,null,Y,Z,ne,q,re)}J>le?$(K,Y,Z,!0,!1,oe):v(W,V,Q,Y,Z,ne,q,re,oe)},B=(K,W,V,Q,Y,Z,ne,q,re)=>{let J=0;const le=W.length;let oe=K.length-1,ue=le-1;for(;J<=oe&&J<=ue;){const ce=K[J],me=W[J]=re?Bt(W[J]):nt(W[J]);if(pt(ce,me))T(ce,me,V,null,Y,Z,ne,q,re);else break;J++}for(;J<=oe&&J<=ue;){const ce=K[oe],me=W[ue]=re?Bt(W[ue]):nt(W[ue]);if(pt(ce,me))T(ce,me,V,null,Y,Z,ne,q,re);else break;oe--,ue--}if(J>oe){if(J<=ue){const ce=ue+1,me=ce<le?W[ce].el:Q;for(;J<=ue;)T(null,W[J]=re?Bt(W[J]):nt(W[J]),V,me,Y,Z,ne,q,re),J++}}else if(J>ue)for(;J<=oe;)j(K[J],Y,Z,!0),J++;else{const ce=J,me=J,pe=new Map;for(J=me;J<=ue;J++){const Ae=W[J]=re?Bt(W[J]):nt(W[J]);Ae.key!=null&&pe.set(Ae.key,J)}let ge,Ee=0;const De=ue-me+1;let Ne=!1,Oe=0;const Ie=new Array(De);for(J=0;J<De;J++)Ie[J]=0;for(J=ce;J<=oe;J++){const Ae=K[J];if(Ee>=De){j(Ae,Y,Z,!0);continue}let we;if(Ae.key!=null)we=pe.get(Ae.key);else for(ge=me;ge<=ue;ge++)if(Ie[ge-me]===0&&pt(Ae,W[ge])){we=ge;break}we===void 0?j(Ae,Y,Z,!0):(Ie[we-me]=J+1,we>=Oe?Oe=we:Ne=!0,T(Ae,W[we],V,null,Y,Z,ne,q,re),Ee++)}const We=Ne?jc(Ie):Or;for(ge=We.length-1,J=De-1;J>=0;J--){const Ae=me+J,we=W[Ae],Ue=Ae+1<le?W[Ae+1].el:Q;Ie[J]===0?T(null,we,V,Ue,Y,Z,ne,q,re):Ne&&(ge<0||J!==We[ge]?U(we,V,Ue,2):ge--)}}},U=(K,W,V,Q,Y=null)=>{const{el:Z,type:ne,transition:q,children:re,shapeFlag:J}=K;if(J&6){U(K.component.subTree,W,V,Q);return}if(J&128){K.suspense.move(W,V,Q);return}if(J&64){ne.move(K,W,V,X);return}if(ne===Re){i(Z,W,V);for(let oe=0;oe<re.length;oe++)U(re[oe],W,V,Q);i(K.anchor,W,V);return}if(ne===Mr){f(K,W,V);return}if(Q!==2&&J&1&&q)if(Q===0)q.beforeEnter(Z),i(Z,W,V),Ge(()=>q.enter(Z),Y);else{const{leave:oe,delayLeave:ue,afterLeave:ce}=q,me=()=>i(Z,W,V),pe=()=>{oe(Z,()=>{me(),ce&&ce()})};ue?ue(Z,me,pe):pe()}else i(Z,W,V)},j=(K,W,V,Q=!1,Y=!1)=>{const{type:Z,props:ne,ref:q,children:re,dynamicChildren:J,shapeFlag:le,patchFlag:oe,dirs:ue}=K;if(q!=null&&Jn(q,null,V,K,!0),le&256){W.ctx.deactivate(K);return}const ce=le&1&&ue,me=!Br(K);let pe;if(me&&(pe=ne&&ne.onVnodeBeforeUnmount)&&Qe(pe,W,K),le&6)G(K.component,V,Q);else{if(le&128){K.suspense.unmount(V,Q);return}ce&&mt(K,null,W,"beforeUnmount"),le&64?K.type.remove(K,W,V,Y,X,Q):J&&(Z!==Re||oe>0&&oe&64)?$(J,W,V,!1,!0):(Z===Re&&oe&384||!Y&&le&16)&&$(re,W,V),Q&&H(K)}(me&&(pe=ne&&ne.onVnodeUnmounted)||ce)&&Ge(()=>{pe&&Qe(pe,W,K),ce&&mt(K,null,W,"unmounted")},V)},H=K=>{const{type:W,el:V,anchor:Q,transition:Y}=K;if(W===Re){N(V,Q);return}if(W===Mr){d(K);return}const Z=()=>{r(V),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(K.shapeFlag&1&&Y&&!Y.persisted){const{leave:ne,delayLeave:q}=Y,re=()=>ne(V,Z);q?q(K.el,Z,re):re()}else Z()},N=(K,W)=>{let V;for(;K!==W;)V=p(K),r(K),K=V;r(W)},G=(K,W,V)=>{const{bum:Q,scope:Y,update:Z,subTree:ne,um:q}=K;Q&&Rr(Q),Y.stop(),Z&&(Z.active=!1,j(ne,K,W,V)),q&&Ge(q,W),Ge(()=>{K.isUnmounted=!0},W),W&&W.pendingBranch&&!W.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===W.pendingId&&(W.deps--,W.deps===0&&W.resolve())},$=(K,W,V,Q=!1,Y=!1,Z=0)=>{for(let ne=Z;ne<K.length;ne++)j(K[ne],W,V,Q,Y)},z=K=>K.shapeFlag&6?z(K.component.subTree):K.shapeFlag&128?K.suspense.next():p(K.anchor||K.el),ee=(K,W,V)=>{K==null?W._vnode&&j(W._vnode,null,null,!0):T(W._vnode||null,K,W,null,null,null,V),Qn(),W._vnode=K},X={p:T,um:j,m:U,r:H,mt:E,mc:v,pc:w,pbc:b,n:z,o:e};let te,se;return t&&([te,se]=t(X)),{render:ee,hydrate:te,createApp:kc(ee,te)}}function rr({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Ns(e,t,n=!1){const i=e.children,r=t.children;if(de(i)&&de(r))for(let s=0;s<i.length;s++){const o=i[s];let u=r[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=r[s]=Bt(r[s]),u.el=o.el),n||Ns(o,u))}}function jc(e){const t=e.slice(),n=[0];let i,r,s,o,u;const D=e.length;for(i=0;i<D;i++){const C=e[i];if(C!==0){if(r=n[n.length-1],e[r]<C){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)u=s+o>>1,e[n[u]]<C?s=u+1:o=u;C<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const Wc=e=>e.__isTeleport,dn=e=>e&&(e.disabled||e.disabled===""),Oa=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,ts=(e,t)=>{const n=e&&e.to;return Pe(n)?t?t(n):null:n},Hc={__isTeleport:!0,process(e,t,n,i,r,s,o,u,D,C){const{mc:A,pc:_,pbc:p,o:{insert:L,querySelector:O,createText:R,createComment:T}}=C,y=dn(t.props);let{shapeFlag:l,children:a,dynamicChildren:f}=t;if(e==null){const d=t.el=R(""),m=t.anchor=R("");L(d,n,i),L(m,n,i);const h=t.target=ts(t.props,O),c=t.targetAnchor=R("");h&&(L(c,h),o=o||Oa(h));const v=(P,b)=>{l&16&&A(a,P,b,r,s,o,u,D)};y?v(n,m):h&&v(h,c)}else{t.el=e.el;const d=t.anchor=e.anchor,m=t.target=e.target,h=t.targetAnchor=e.targetAnchor,c=dn(e.props),v=c?n:m,P=c?d:h;if(o=o||Oa(m),f?(p(e.dynamicChildren,f,v,r,s,o,u),Ns(e,t,!0)):D||_(e,t,v,P,r,s,o,u,!1),y)c||Un(t,n,d,C,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const b=t.target=ts(t.props,O);b&&Un(t,b,null,C,0)}else c&&Un(t,m,h,C,1)}},remove(e,t,n,i,{um:r,o:{remove:s}},o){const{shapeFlag:u,children:D,anchor:C,targetAnchor:A,target:_,props:p}=e;if(_&&s(A),(o||!dn(p))&&(s(C),u&16))for(let L=0;L<D.length;L++){const O=D[L];r(O,t,n,!0,!!O.dynamicChildren)}},move:Un,hydrate:Gc};function Un(e,t,n,{o:{insert:i},m:r},s=2){s===0&&i(e.targetAnchor,t,n);const{el:o,anchor:u,shapeFlag:D,children:C,props:A}=e,_=s===2;if(_&&i(o,t,n),(!_||dn(A))&&D&16)for(let p=0;p<C.length;p++)r(C[p],t,n,2);_&&i(u,t,n)}function Gc(e,t,n,i,r,s,{o:{nextSibling:o,parentNode:u,querySelector:D}},C){const A=t.target=ts(t.props,D);if(A){const _=A._lpa||A.firstChild;t.shapeFlag&16&&(dn(t.props)?(t.anchor=C(o(e),t,u(e),n,i,r,s),t.targetAnchor=_):(t.anchor=o(e),t.targetAnchor=C(_,t,A,n,i,r,s)),A._lpa=t.targetAnchor&&o(t.targetAnchor))}return t.anchor&&o(t.anchor)}const Ca=Hc,Ks="components",$c="directives";function Ce(e,t){return js(Ks,e,!0,t)||e}const El=Symbol();function Vc(e){return Pe(e)?js(Ks,e,!1)||e:e||El}function Ay(e){return js($c,e)}function js(e,t,n=!0,i=!1){const r=Ve||Ke;if(r){const s=r.type;if(e===Ks){const u=ti(s);if(u&&(u===t||u===ut(t)||u===ui(ut(t))))return s}const o=Ra(r[e]||s[e],t)||Ra(r.appContext[e],t);return!o&&i?s:o}}function Ra(e,t){return e&&(e[t]||e[ut(t)]||e[ui(ut(t))])}const Re=Symbol(void 0),An=Symbol(void 0),Ye=Symbol(void 0),Mr=Symbol(void 0),hn=[];let Tt=null;function ae(e=!1){hn.push(Tt=e?null:[])}function yl(){hn.pop(),Tt=hn[hn.length-1]||null}let kr=1;function Pa(e){kr+=e}function Tl(e){return e.dynamicChildren=kr>0?Tt||Or:null,yl(),kr>0&&Tt&&Tt.push(e),e}function fe(e,t,n,i,r,s){return Tl(ie(e,t,n,i,r,s,!0))}function Ze(e,t,n,i,r){return Tl(he(e,t,n,i,r,!0))}function cr(e){return e?e.__v_isVNode===!0:!1}function pt(e,t){return e.type===t.type&&e.key===t.key}function by(e){}const xi="__vInternal",xl=({key:e})=>e!=null?e:null,$n=({ref:e,ref_key:t,ref_for:n})=>e!=null?Pe(e)||je(e)||ve(e)?{i:Ve,r:e,k:t,f:!!n}:e:null;function ie(e,t=null,n=null,i=0,r=null,s=e===Re?0:1,o=!1,u=!1){const D={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&xl(t),ref:t&&$n(t),scopeId:pi,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null};return u?(Ws(D,n),s&128&&e.normalize(D)):n&&(D.shapeFlag|=Pe(n)?8:16),kr>0&&!o&&Tt&&(D.patchFlag>0||s&6)&&D.patchFlag!==32&&Tt.push(D),D}const he=zc;function zc(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===El)&&(e=Ye),cr(e)){const u=zt(e,t,!0);return n&&Ws(u,n),u}if(nd(e)&&(e=e.__vccOpts),t){t=Yc(t);let{class:u,style:D}=t;u&&!Pe(u)&&(t.class=_e(u)),Fe(D)&&(Vo(D)&&!de(D)&&(D=Me({},D)),t.style=Ht(D))}const o=Pe(e)?1:oc(e)?128:Wc(e)?64:Fe(e)?4:ve(e)?2:0;return ie(e,t,n,i,r,o,s,!0)}function Yc(e){return e?Vo(e)||xi in e?Me({},e):e:null}function zt(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=e,u=t?Xc(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&xl(u),ref:t&&t.ref?n&&r?de(r)?r.concat($n(t)):[r,$n(t)]:$n(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Re?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&zt(e.ssContent),ssFallback:e.ssFallback&&zt(e.ssFallback),el:e.el,anchor:e.anchor}}function st(e=" ",t=0){return he(An,null,e,t)}function Ly(e,t){const n=he(Mr,null,e);return n.staticCount=t,n}function ke(e="",t=!1){return t?(ae(),Ze(Ye,null,e)):he(Ye,null,e)}function nt(e){return e==null||typeof e=="boolean"?he(Ye):de(e)?he(Re,null,e.slice()):typeof e=="object"?Bt(e):he(An,null,String(e))}function Bt(e){return e.el===null||e.memo?e:zt(e)}function Ws(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(de(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),Ws(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(xi in t)?t._ctx=Ve:r===3&&Ve&&(Ve.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ve(t)?(t={default:t,_ctx:Ve},n=32):(t=String(t),i&64?(n=16,t=[st(t)]):n=8);e.children=t,e.shapeFlag|=n}function Xc(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=_e([t.class,i.class]));else if(r==="style")t.style=Ht([t.style,i.style]);else if(On(r)){const s=t[r],o=i[r];o&&s!==o&&!(de(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function Qe(e,t,n,i=null){lt(e,t,7,[n,i])}function Hs(e,t,n,i){let r;const s=n&&n[i];if(de(e)||Pe(e)){r=new Array(e.length);for(let o=0,u=e.length;o<u;o++)r[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){r=new Array(e);for(let o=0;o<e;o++)r[o]=t(o+1,o,void 0,s&&s[o])}else if(Fe(e))if(e[Symbol.iterator])r=Array.from(e,(o,u)=>t(o,u,void 0,s&&s[u]));else{const o=Object.keys(e);r=new Array(o.length);for(let u=0,D=o.length;u<D;u++){const C=o[u];r[u]=t(e[C],C,u,s&&s[u])}}else r=[];return n&&(n[i]=r),r}function Dy(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(de(i))for(let r=0;r<i.length;r++)e[i[r].name]=i[r].fn;else i&&(e[i.name]=i.fn)}return e}function Qt(e,t,n={},i,r){if(Ve.isCE||Ve.parent&&Br(Ve.parent)&&Ve.parent.isCE)return he("slot",t==="default"?null:{name:t},i&&i());let s=e[t];s&&s._c&&(s._d=!1),ae();const o=s&&Sl(s(n)),u=Ze(Re,{key:n.key||`_${t}`},o||(i?i():[]),o&&e._===1?64:-2);return!r&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),s&&s._c&&(s._d=!0),u}function Sl(e){return e.some(t=>cr(t)?!(t.type===Ye||t.type===Re&&!Sl(t.children)):!0)?e:null}function Oy(e){const t={};for(const n in e)t[jn(n)]=e[n];return t}const rs=e=>e?Al(e)?Si(e)||e.proxy:rs(e.parent):null,qn=Me(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>rs(e.parent),$root:e=>rs(e.root),$emit:e=>e.emit,$options:e=>fl(e),$forceUpdate:e=>()=>Rs(e.update),$nextTick:e=>Cs.bind(e.proxy),$watch:e=>vc.bind(e)}),ns={get({_:e},t){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:u,appContext:D}=e;let C;if(t[0]!=="$"){const L=o[t];if(L!==void 0)switch(L){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(i!==Se&&ye(i,t))return o[t]=1,i[t];if(r!==Se&&ye(r,t))return o[t]=2,r[t];if((C=e.propsOptions[0])&&ye(C,t))return o[t]=3,s[t];if(n!==Se&&ye(n,t))return o[t]=4,n[t];Ji&&(o[t]=0)}}const A=qn[t];let _,p;if(A)return t==="$attrs"&&at(e,"get",t),A(e);if((_=u.__cssModules)&&(_=_[t]))return _;if(n!==Se&&ye(n,t))return o[t]=4,n[t];if(p=D.config.globalProperties,ye(p,t))return p[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return r!==Se&&ye(r,t)?(r[t]=n,!0):i!==Se&&ye(i,t)?(i[t]=n,!0):ye(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let u;return!!n[o]||e!==Se&&ye(e,o)||t!==Se&&ye(t,o)||(u=s[0])&&ye(u,o)||ye(i,o)||ye(qn,o)||ye(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ye(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},Qc=Me({},ns,{get(e,t){if(t!==Symbol.unscopables)return ns.get(e,t,e)},has(e,t){return t[0]!=="_"&&!Yu(t)}}),Zc=ml();let Jc=0;function _l(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||Zc,s={uid:Jc++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ro(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dl(i,r),emitsOptions:rl(i,r),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:i.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=ec.bind(null,s),e.ce&&e.ce(s),s}let Ke=null;const gr=()=>Ke||Ve,Yt=e=>{Ke=e,e.scope.on()},Wt=()=>{Ke&&Ke.scope.off(),Ke=null};function Al(e){return e.vnode.shapeFlag&4}let Ur=!1;function bl(e,t=!1){Ur=t;const{props:n,children:i}=e.vnode,r=Al(e);Pc(e,n,r,t),Fc(e,i);const s=r?qc(e,t):void 0;return Ur=!1,s}function qc(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=zo(new Proxy(e.ctx,ns));const{setup:i}=n;if(i){const r=e.setupContext=i.length>1?Dl(e):null;Yt(e),hr();const s=Lt(i,e,0,[e.props,r]);if(vr(),Wt(),Ss(s)){if(s.then(Wt,Wt),t)return s.then(o=>{is(e,o,t)}).catch(o=>{$r(o,e,0)});e.asyncDep=s}else is(e,s,t)}else Ll(e,t)}function is(e,t,n){ve(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Fe(t)&&(e.setupState=Xo(t)),Ll(e,n)}let ei,ss;function Cy(e){ei=e,ss=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,Qc))}}const Ry=()=>!ei;function Ll(e,t,n){const i=e.type;if(!e.render){if(!t&&ei&&!i.render){const r=i.template;if(r){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:u,compilerOptions:D}=i,C=Me(Me({isCustomElement:s,delimiters:u},o),D);i.render=ei(r,C)}}e.render=i.render||vt,ss&&ss(e)}Yt(e),hr(),Lc(e),vr(),Wt()}function ed(e){return new Proxy(e.attrs,{get(t,n){return at(e,"get","$attrs"),t[n]}})}function Dl(e){const t=i=>{e.exposed=i||{}};let n;return{get attrs(){return n||(n=ed(e))},slots:e.slots,emit:e.emit,expose:t}}function Si(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Xo(zo(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qn)return qn[n](e)}}))}const td=/(?:^|[-_])(\w)/g,rd=e=>e.replace(td,t=>t.toUpperCase()).replace(/[-_]/g,"");function ti(e){return ve(e)&&e.displayName||e.name}function Ol(e,t,n=!1){let i=ti(t);if(!i&&t.__file){const r=t.__file.match(/([^/\\]+)\.\w+$/);r&&(i=r[1])}if(!i&&e&&e.parent){const r=s=>{for(const o in s)if(s[o]===t)return o};i=r(e.components||e.parent.type.components)||r(e.appContext.components)}return i?rd(i):n?"App":"Anonymous"}function nd(e){return ve(e)&&"__vccOpts"in e}const Et=(e,t)=>Hf(e,t,Ur);function Py(){return null}function Iy(){return null}function My(e){}function Fy(e,t){return null}function wy(){return Cl().slots}function By(){return Cl().attrs}function Cl(){const e=gr();return e.setupContext||(e.setupContext=Dl(e))}function ky(e,t){const n=de(e)?e.reduce((i,r)=>(i[r]={},i),{}):e;for(const i in t){const r=n[i];r?de(r)||ve(r)?n[i]={type:r,default:t[i]}:r.default=t[i]:r===null&&(n[i]={default:t[i]})}return n}function Uy(e,t){const n={};for(const i in e)t.includes(i)||Object.defineProperty(n,i,{enumerable:!0,get:()=>e[i]});return n}function Ny(e){const t=gr();let n=e();return Wt(),Ss(n)&&(n=n.catch(i=>{throw Yt(t),i})),[n,()=>Yt(t)]}function Gs(e,t,n){const i=arguments.length;return i===2?Fe(t)&&!de(t)?cr(t)?he(e,null,[t]):he(e,t):he(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&cr(n)&&(n=[n]),he(e,t,n))}const id=Symbol(""),Ky=()=>{{const e=Dt(id);return e||Gf("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function jy(){}function Wy(e,t,n,i){const r=n[i];if(r&&sd(r,e))return r;const s=t();return s.memo=e.slice(),n[i]=s}function sd(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return kr>0&&Tt&&Tt.push(e),!0}const ad="3.2.33",od={createComponentInstance:_l,setupComponent:bl,renderComponentRoot:Hn,setCurrentRenderingInstance:xn,isVNode:cr,normalizeVNode:nt},Hy=od,Gy=null,$y=null,ld="http://www.w3.org/2000/svg",ar=typeof document!="undefined"?document:null,Ia=ar&&ar.createElement("template"),ud={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?ar.createElementNS(ld,e):ar.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>ar.createTextNode(e),createComment:e=>ar.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ar.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{Ia.innerHTML=i?`<svg>${e}</svg>`:e;const u=Ia.content;if(i){const D=u.firstChild;for(;D.firstChild;)u.appendChild(D.firstChild);u.removeChild(D)}t.insertBefore(u,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function fd(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function cd(e,t,n){const i=e.style,r=Pe(n);if(n&&!r){for(const s in n)as(i,s,n[s]);if(t&&!Pe(t))for(const s in t)n[s]==null&&as(i,s,"")}else{const s=i.display;r?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const Ma=/\s*!important$/;function as(e,t,n){if(de(n))n.forEach(i=>as(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=dd(e,t);Ma.test(n)?e.setProperty(yt(i),n.replace(Ma,""),"important"):e[i]=n}}const Fa=["Webkit","Moz","ms"],Bi={};function dd(e,t){const n=Bi[t];if(n)return n;let i=ut(t);if(i!=="filter"&&i in e)return Bi[t]=i;i=ui(i);for(let r=0;r<Fa.length;r++){const s=Fa[r]+i;if(s in e)return Bi[t]=s}return t}const wa="http://www.w3.org/1999/xlink";function hd(e,t,n,i,r){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(wa,t.slice(6,t.length)):e.setAttributeNS(wa,t,n);else{const s=Qu(t);n==null||s&&!Lo(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function vd(e,t,n,i,r,s,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,r,s),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const D=n==null?"":n;(e.value!==D||e.tagName==="OPTION")&&(e.value=D),n==null&&e.removeAttribute(t);return}let u=!1;if(n===""||n==null){const D=typeof e[t];D==="boolean"?n=Lo(n):n==null&&D==="string"?(n="",u=!0):D==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(t)}const[Rl,gd]=(()=>{let e=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let os=0;const md=Promise.resolve(),pd=()=>{os=0},Ed=()=>os||(md.then(pd),os=Rl());function bt(e,t,n,i){e.addEventListener(t,n,i)}function yd(e,t,n,i){e.removeEventListener(t,n,i)}function Td(e,t,n,i,r=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[u,D]=xd(t);if(i){const C=s[t]=Sd(i,r);bt(e,u,C,D)}else o&&(yd(e,u,o,D),s[t]=void 0)}}const Ba=/(?:Once|Passive|Capture)$/;function xd(e){let t;if(Ba.test(e)){t={};let n;for(;n=e.match(Ba);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[yt(e.slice(2)),t]}function Sd(e,t){const n=i=>{const r=i.timeStamp||Rl();(gd||r>=n.attached-1)&&lt(_d(i,n.value),t,5,[i])};return n.value=e,n.attached=Ed(),n}function _d(e,t){if(de(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const ka=/^on[a-z]/,Ad=(e,t,n,i,r=!1,s,o,u,D)=>{t==="class"?fd(e,i,r):t==="style"?cd(e,n,i):On(t)?ys(t)||Td(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):bd(e,t,i,r))?vd(e,t,i,s,o,u,D):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),hd(e,t,i,r))};function bd(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&ka.test(t)&&ve(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||ka.test(t)&&Pe(n)?!1:t in e}function Ld(e,t){const n=Ei(e);class i extends $s{constructor(s){super(n,s,t)}}return i.def=n,i}const Vy=e=>Ld(e,$d),Dd=typeof HTMLElement!="undefined"?HTMLElement:class{};class $s extends Dd{constructor(t,n={},i){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&i?i(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,Cs(()=>{this._connected||(Ya(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);new MutationObserver(i=>{for(const r of i)this._setAttr(r.attributeName)}).observe(this,{attributes:!0});const t=i=>{const{props:r,styles:s}=i,o=!de(r),u=r?o?Object.keys(r):r:[];let D;if(o)for(const C in this._props){const A=r[C];(A===Number||A&&A.type===Number)&&(this._props[C]=$t(this._props[C]),(D||(D=Object.create(null)))[C]=!0)}this._numberProps=D;for(const C of Object.keys(this))C[0]!=="_"&&this._setProp(C,this[C],!0,!1);for(const C of u.map(ut))Object.defineProperty(this,C,{get(){return this._getProp(C)},set(A){this._setProp(C,A)}});this._applyStyles(s),this._update()},n=this._def.__asyncLoader;n?n().then(t):t(this._def)}_setAttr(t){let n=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(n=$t(n)),this._setProp(ut(t),n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,i=!0,r=!0){n!==this._props[t]&&(this._props[t]=n,r&&this._instance&&this._update(),i&&(n===!0?this.setAttribute(yt(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(yt(t),n+""):n||this.removeAttribute(yt(t))))}_update(){Ya(this._createVNode(),this.shadowRoot)}_createVNode(){const t=he(this._def,Me({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0,n.emit=(r,...s)=>{this.dispatchEvent(new CustomEvent(r,{detail:s}))};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof $s){n.parent=i._instance;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const i=document.createElement("style");i.textContent=n,this.shadowRoot.appendChild(i)})}}function zy(e="$style"){{const t=gr();if(!t)return Se;const n=t.type.__cssModules;if(!n)return Se;const i=n[e];return i||Se}}function Yy(e){const t=gr();if(!t)return;const n=()=>ls(t.subTree,e(t.proxy));hc(n),Ti(()=>{const i=new MutationObserver(n);i.observe(t.subTree.el.parentNode,{childList:!0}),ks(()=>i.disconnect())})}function ls(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{ls(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Ua(e.el,t);else if(e.type===Re)e.children.forEach(n=>ls(n,t));else if(e.type===Mr){let{el:n,anchor:i}=e;for(;n&&(Ua(n,t),n!==i);)n=n.nextSibling}}function Ua(e,t){if(e.nodeType===1){const n=e.style;for(const i in t)n.setProperty(`--${i}`,t[i])}}const It="transition",Zr="animation",bn=(e,{slots:t})=>Gs(al,Il(e),t);bn.displayName="Transition";const Pl={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Od=bn.props=Me({},al.props,Pl),nr=(e,t=[])=>{de(e)?e.forEach(n=>n(...t)):e&&e(...t)},Na=e=>e?de(e)?e.some(t=>t.length>1):e.length>1:!1;function Il(e){const t={};for(const x in e)x in Pl||(t[x]=e[x]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:u=`${n}-enter-to`,appearFromClass:D=s,appearActiveClass:C=o,appearToClass:A=u,leaveFromClass:_=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:L=`${n}-leave-to`}=e,O=Cd(r),R=O&&O[0],T=O&&O[1],{onBeforeEnter:y,onEnter:l,onEnterCancelled:a,onLeave:f,onLeaveCancelled:d,onBeforeAppear:m=y,onAppear:h=l,onAppearCancelled:c=a}=t,v=(x,S,g)=>{sr(x,S?A:u),sr(x,S?C:o),g&&g()},P=(x,S)=>{sr(x,L),sr(x,p),S&&S()},b=x=>(S,g)=>{const E=x?h:l,I=()=>v(S,x,g);nr(E,[S,I]),Ka(()=>{sr(S,x?D:s),_t(S,x?A:u),Na(E)||ja(S,i,R,I)})};return Me(t,{onBeforeEnter(x){nr(y,[x]),_t(x,s),_t(x,o)},onBeforeAppear(x){nr(m,[x]),_t(x,D),_t(x,C)},onEnter:b(!1),onAppear:b(!0),onLeave(x,S){const g=()=>P(x,S);_t(x,_),Fl(),_t(x,p),Ka(()=>{sr(x,_),_t(x,L),Na(f)||ja(x,i,T,g)}),nr(f,[x,g])},onEnterCancelled(x){v(x,!1),nr(a,[x])},onAppearCancelled(x){v(x,!0),nr(c,[x])},onLeaveCancelled(x){P(x),nr(d,[x])}})}function Cd(e){if(e==null)return null;if(Fe(e))return[ki(e.enter),ki(e.leave)];{const t=ki(e);return[t,t]}}function ki(e){return $t(e)}function _t(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function sr(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Ka(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Rd=0;function ja(e,t,n,i){const r=e._endId=++Rd,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:u,propCount:D}=Ml(e,t);if(!o)return i();const C=o+"end";let A=0;const _=()=>{e.removeEventListener(C,p),s()},p=L=>{L.target===e&&++A>=D&&_()};setTimeout(()=>{A<D&&_()},u+1),e.addEventListener(C,p)}function Ml(e,t){const n=window.getComputedStyle(e),i=O=>(n[O]||"").split(", "),r=i(It+"Delay"),s=i(It+"Duration"),o=Wa(r,s),u=i(Zr+"Delay"),D=i(Zr+"Duration"),C=Wa(u,D);let A=null,_=0,p=0;t===It?o>0&&(A=It,_=o,p=s.length):t===Zr?C>0&&(A=Zr,_=C,p=D.length):(_=Math.max(o,C),A=_>0?o>C?It:Zr:null,p=A?A===It?s.length:D.length:0);const L=A===It&&/\b(transform|all)(,|$)/.test(n[It+"Property"]);return{type:A,timeout:_,propCount:p,hasTransform:L}}function Wa(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>Ha(n)+Ha(e[i])))}function Ha(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Fl(){return document.body.offsetHeight}const wl=new WeakMap,Bl=new WeakMap,Pd={name:"TransitionGroup",props:Me({},Od,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=gr(),i=sl();let r,s;return ws(()=>{if(!r.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!Bd(r[0].el,n.vnode.el,o))return;r.forEach(Md),r.forEach(Fd);const u=r.filter(wd);Fl(),u.forEach(D=>{const C=D.el,A=C.style;_t(C,o),A.transform=A.webkitTransform=A.transitionDuration="";const _=C._moveCb=p=>{p&&p.target!==C||(!p||/transform$/.test(p.propertyName))&&(C.removeEventListener("transitionend",_),C._moveCb=null,sr(C,o))};C.addEventListener("transitionend",_)})}),()=>{const o=Te(e),u=Il(o);let D=o.tag||Re;r=s,s=t.default?Fs(t.default()):[];for(let C=0;C<s.length;C++){const A=s[C];A.key!=null&&wr(A,_n(A,u,i,n))}if(r)for(let C=0;C<r.length;C++){const A=r[C];wr(A,_n(A,u,i,n)),wl.set(A,A.el.getBoundingClientRect())}return he(D,null,s)}}},Id=Pd;function Md(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function Fd(e){Bl.set(e,e.el.getBoundingClientRect())}function wd(e){const t=wl.get(e),n=Bl.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",e}}function Bd(e,t,n){const i=e.cloneNode();e._vtc&&e._vtc.forEach(o=>{o.split(/\s+/).forEach(u=>u&&i.classList.remove(u))}),n.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(i);const{hasTransform:s}=Ml(i);return r.removeChild(i),s}const Xt=e=>{const t=e.props["onUpdate:modelValue"];return de(t)?n=>Rr(t,n):t};function kd(e){e.target.composing=!0}function Ga(e){const t=e.target;t.composing&&(t.composing=!1,Ud(t,"input"))}function Ud(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}const Ln={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e._assign=Xt(r);const s=i||r.props&&r.props.type==="number";bt(e,t?"change":"input",o=>{if(o.target.composing)return;let u=e.value;n?u=u.trim():s&&(u=$t(u)),e._assign(u)}),n&&bt(e,"change",()=>{e.value=e.value.trim()}),t||(bt(e,"compositionstart",kd),bt(e,"compositionend",Ga),bt(e,"change",Ga))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:r}},s){if(e._assign=Xt(s),e.composing||document.activeElement===e&&(n||i&&e.value.trim()===t||(r||e.type==="number")&&$t(e.value)===t))return;const o=t==null?"":t;e.value!==o&&(e.value=o)}},kl={deep:!0,created(e,t,n){e._assign=Xt(n),bt(e,"change",()=>{const i=e._modelValue,r=Nr(e),s=e.checked,o=e._assign;if(de(i)){const u=ai(i,r),D=u!==-1;if(s&&!D)o(i.concat(r));else if(!s&&D){const C=[...i];C.splice(u,1),o(C)}}else if(dr(i)){const u=new Set(i);s?u.add(r):u.delete(r),o(u)}else o(Nl(e,s))})},mounted:$a,beforeUpdate(e,t,n){e._assign=Xt(n),$a(e,t,n)}};function $a(e,{value:t,oldValue:n},i){e._modelValue=t,de(t)?e.checked=ai(t,i.props.value)>-1:dr(t)?e.checked=t.has(i.props.value):t!==n&&(e.checked=Gt(t,Nl(e,!0)))}const Ul={created(e,{value:t},n){e.checked=Gt(t,n.props.value),e._assign=Xt(n),bt(e,"change",()=>{e._assign(Nr(e))})},beforeUpdate(e,{value:t,oldValue:n},i){e._assign=Xt(i),t!==n&&(e.checked=Gt(t,i.props.value))}},Nd={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=dr(t);bt(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?$t(Nr(o)):Nr(o));e._assign(e.multiple?r?new Set(s):s:s[0])}),e._assign=Xt(i)},mounted(e,{value:t}){Va(e,t)},beforeUpdate(e,t,n){e._assign=Xt(n)},updated(e,{value:t}){Va(e,t)}};function Va(e,t){const n=e.multiple;if(!(n&&!de(t)&&!dr(t))){for(let i=0,r=e.options.length;i<r;i++){const s=e.options[i],o=Nr(s);if(n)de(t)?s.selected=ai(t,o)>-1:s.selected=t.has(o);else if(Gt(Nr(s),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Nr(e){return"_value"in e?e._value:e.value}function Nl(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Xy={created(e,t,n){Nn(e,t,n,null,"created")},mounted(e,t,n){Nn(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Nn(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Nn(e,t,n,i,"updated")}};function Nn(e,t,n,i,r){let s;switch(e.tagName){case"SELECT":s=Nd;break;case"TEXTAREA":s=Ln;break;default:switch(n.props&&n.props.type){case"checkbox":s=kl;break;case"radio":s=Ul;break;default:s=Ln}}const o=s[r];o&&o(e,t,n,i)}function Kd(){Ln.getSSRProps=({value:e})=>({value:e}),Ul.getSSRProps=({value:e},t)=>{if(t.props&&Gt(t.props.value,e))return{checked:!0}},kl.getSSRProps=({value:e},t)=>{if(de(e)){if(t.props&&ai(e,t.props.value)>-1)return{checked:!0}}else if(dr(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}}}const jd=["ctrl","shift","alt","meta"],Wd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>jd.some(n=>e[`${n}Key`]&&!t.includes(n))},Fr=(e,t)=>(n,...i)=>{for(let r=0;r<t.length;r++){const s=Wd[t[r]];if(s&&s(n,t))return}return e(n,...i)},Hd={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Qy=(e,t)=>n=>{if(!("key"in n))return;const i=yt(n.key);if(t.some(r=>r===i||Hd[r]===i))return e(n)},fr={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Jr(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Jr(e,!0),i.enter(e)):i.leave(e,()=>{Jr(e,!1)}):Jr(e,t))},beforeUnmount(e,{value:t}){Jr(e,t)}};function Jr(e,t){e.style.display=t?e._vod:"none"}function Gd(){fr.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const Kl=Me({patchProp:Ad},ud);let vn,za=!1;function jl(){return vn||(vn=Nc(Kl))}function Wl(){return vn=za?vn:Kc(Kl),za=!0,vn}const Ya=(...e)=>{jl().render(...e)},$d=(...e)=>{Wl().hydrate(...e)},Hl=(...e)=>{const t=jl().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=Gl(i);if(!r)return;const s=t._component;!ve(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t},Zy=(...e)=>{const t=Wl().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=Gl(i);if(r)return n(r,!0,r instanceof SVGElement)},t};function Gl(e){return Pe(e)?document.querySelector(e):e}let Xa=!1;const Jy=()=>{Xa||(Xa=!0,Kd(),Gd())};var xe=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n};const Vd={name:"App",mounted(){window.location.pathname.includes("/doc/theme")||this.$nextTick(()=>{this.$color.theme="light"})}};function zd(e,t,n,i,r,s){const o=Ce("router-view");return ae(),Ze(o)}var Yd=xe(Vd,[["render",zd]]);function Xd(){return $l().__VUE_DEVTOOLS_GLOBAL_HOOK__}function $l(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}const Qd=typeof Proxy=="function",Zd="devtools-plugin:setup",Jd="plugin:settings:set";let Tr,us;function qd(){var e;return Tr!==void 0||(typeof window!="undefined"&&window.performance?(Tr=!0,us=window.performance):typeof global!="undefined"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(Tr=!0,us=global.perf_hooks.performance):Tr=!1),Tr}function eh(){return qd()?us.now():Date.now()}class th{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const i={};if(t.settings)for(const o in t.settings){const u=t.settings[o];i[o]=u.defaultValue}const r=`__vue-devtools-plugin-settings__${t.id}`;let s=Object.assign({},i);try{const o=localStorage.getItem(r),u=JSON.parse(o);Object.assign(s,u)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}s=o},now(){return eh()}},n&&n.on(Jd,(o,u)=>{o===this.plugin.id&&this.fallbacks.setSettings(u)}),this.proxiedOn=new Proxy({},{get:(o,u)=>this.target?this.target.on[u]:(...D)=>{this.onQueue.push({method:u,args:D})}}),this.proxiedTarget=new Proxy({},{get:(o,u)=>this.target?this.target[u]:u==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(u)?(...D)=>(this.targetQueue.push({method:u,args:D,resolve:()=>{}}),this.fallbacks[u](...D)):(...D)=>new Promise(C=>{this.targetQueue.push({method:u,args:D,resolve:C})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function rh(e,t){const n=e,i=$l(),r=Xd(),s=Qd&&n.enableEarlyProxy;if(r&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))r.emit(Zd,e,t);else{const o=s?new th(n,r):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}/*!
  * vue-router v4.0.15
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Vl=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Vr=e=>Vl?Symbol(e):"_vr_"+e,nh=Vr("rvlm"),Qa=Vr("rvd"),Vs=Vr("r"),zl=Vr("rl"),fs=Vr("rvl"),Dr=typeof window!="undefined";function ih(e){return e.__esModule||Vl&&e[Symbol.toStringTag]==="Module"}const be=Object.assign;function Ui(e,t){const n={};for(const i in t){const r=t[i];n[i]=Array.isArray(r)?r.map(e):e(r)}return n}const gn=()=>{},sh=/\/$/,ah=e=>e.replace(sh,"");function Ni(e,t,n="/"){let i,r={},s="",o="";const u=t.indexOf("?"),D=t.indexOf("#",u>-1?u:0);return u>-1&&(i=t.slice(0,u),s=t.slice(u+1,D>-1?D:t.length),r=e(s)),D>-1&&(i=i||t.slice(0,D),o=t.slice(D,t.length)),i=fh(i!=null?i:t,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function oh(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Za(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function lh(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&Kr(t.matched[i],n.matched[r])&&Yl(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Kr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Yl(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!uh(e[n],t[n]))return!1;return!0}function uh(e,t){return Array.isArray(e)?Ja(e,t):Array.isArray(t)?Ja(t,e):e===t}function Ja(e,t){return Array.isArray(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function fh(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/");let r=n.length-1,s,o;for(s=0;s<i.length;s++)if(o=i[s],!(r===1||o==="."))if(o==="..")r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(s-(s===i.length?1:0)).join("/")}var Dn;(function(e){e.pop="pop",e.push="push"})(Dn||(Dn={}));var mn;(function(e){e.back="back",e.forward="forward",e.unknown=""})(mn||(mn={}));function ch(e){if(!e)if(Dr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ah(e)}const dh=/^[^#]+#/;function hh(e,t){return e.replace(dh,"#")+t}function vh(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const _i=()=>({left:window.pageXOffset,top:window.pageYOffset});function gh(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=vh(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function qa(e,t){return(history.state?history.state.position-t:-1)+e}const cs=new Map;function mh(e,t){cs.set(e,t)}function ph(e){const t=cs.get(e);return cs.delete(e),t}let Eh=()=>location.protocol+"//"+location.host;function Xl(e,t){const{pathname:n,search:i,hash:r}=t,s=e.indexOf("#");if(s>-1){let u=r.includes(e.slice(s))?e.slice(s).length:1,D=r.slice(u);return D[0]!=="/"&&(D="/"+D),Za(D,"")}return Za(n,e)+i+r}function yh(e,t,n,i){let r=[],s=[],o=null;const u=({state:p})=>{const L=Xl(e,location),O=n.value,R=t.value;let T=0;if(p){if(n.value=L,t.value=p,o&&o===O){o=null;return}T=R?p.position-R.position:0}else i(L);r.forEach(y=>{y(n.value,O,{delta:T,type:Dn.pop,direction:T?T>0?mn.forward:mn.back:mn.unknown})})};function D(){o=n.value}function C(p){r.push(p);const L=()=>{const O=r.indexOf(p);O>-1&&r.splice(O,1)};return s.push(L),L}function A(){const{history:p}=window;!p.state||p.replaceState(be({},p.state,{scroll:_i()}),"")}function _(){for(const p of s)p();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",A)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",A),{pauseListeners:D,listen:C,destroy:_}}function eo(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?_i():null}}function Th(e){const{history:t,location:n}=window,i={value:Xl(e,n)},r={value:t.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(D,C,A){const _=e.indexOf("#"),p=_>-1?(n.host&&document.querySelector("base")?e:e.slice(_))+D:Eh()+e+D;try{t[A?"replaceState":"pushState"](C,"",p),r.value=C}catch(L){console.error(L),n[A?"replace":"assign"](p)}}function o(D,C){const A=be({},t.state,eo(r.value.back,D,r.value.forward,!0),C,{position:r.value.position});s(D,A,!0),i.value=D}function u(D,C){const A=be({},r.value,t.state,{forward:D,scroll:_i()});s(A.current,A,!0);const _=be({},eo(i.value,D,null),{position:A.position+1},C);s(D,_,!1),i.value=D}return{location:i,state:r,push:u,replace:o}}function xh(e){e=ch(e);const t=Th(e),n=yh(e,t.state,t.location,t.replace);function i(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=be({location:"",base:e,go:i,createHref:hh.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function Sh(e){return typeof e=="string"||e&&typeof e=="object"}function Ql(e){return typeof e=="string"||typeof e=="symbol"}const Mt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Zl=Vr("nf");var to;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(to||(to={}));function jr(e,t){return be(new Error,{type:e,[Zl]:!0},t)}function Ft(e,t){return e instanceof Error&&Zl in e&&(t==null||!!(e.type&t))}const ro="[^/]+?",_h={sensitive:!1,strict:!1,start:!0,end:!0},Ah=/[.+*?^${}()[\]/\\]/g;function bh(e,t){const n=be({},_h,t),i=[];let r=n.start?"^":"";const s=[];for(const C of e){const A=C.length?[]:[90];n.strict&&!C.length&&(r+="/");for(let _=0;_<C.length;_++){const p=C[_];let L=40+(n.sensitive?.25:0);if(p.type===0)_||(r+="/"),r+=p.value.replace(Ah,"\\$&"),L+=40;else if(p.type===1){const{value:O,repeatable:R,optional:T,regexp:y}=p;s.push({name:O,repeatable:R,optional:T});const l=y||ro;if(l!==ro){L+=10;try{new RegExp(`(${l})`)}catch(f){throw new Error(`Invalid custom RegExp for param "${O}" (${l}): `+f.message)}}let a=R?`((?:${l})(?:/(?:${l}))*)`:`(${l})`;_||(a=T&&C.length<2?`(?:/${a})`:"/"+a),T&&(a+="?"),r+=a,L+=20,T&&(L+=-8),R&&(L+=-20),l===".*"&&(L+=-50)}A.push(L)}i.push(A)}if(n.strict&&n.end){const C=i.length-1;i[C][i[C].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function u(C){const A=C.match(o),_={};if(!A)return null;for(let p=1;p<A.length;p++){const L=A[p]||"",O=s[p-1];_[O.name]=L&&O.repeatable?L.split("/"):L}return _}function D(C){let A="",_=!1;for(const p of e){(!_||!A.endsWith("/"))&&(A+="/"),_=!1;for(const L of p)if(L.type===0)A+=L.value;else if(L.type===1){const{value:O,repeatable:R,optional:T}=L,y=O in C?C[O]:"";if(Array.isArray(y)&&!R)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const l=Array.isArray(y)?y.join("/"):y;if(!l)if(T)p.length<2&&e.length>1&&(A.endsWith("/")?A=A.slice(0,-1):_=!0);else throw new Error(`Missing required param "${O}"`);A+=l}}return A}return{re:o,score:i,keys:s,parse:u,stringify:D}}function Lh(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Dh(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const s=Lh(i[n],r[n]);if(s)return s;n++}return r.length-i.length}const Oh={type:0,value:""},Ch=/[a-zA-Z0-9_]/;function Rh(e){if(!e)return[[]];if(e==="/")return[[Oh]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(L){throw new Error(`ERR (${n})/"${C}": ${L}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let u=0,D,C="",A="";function _(){!C||(n===0?s.push({type:0,value:C}):n===1||n===2||n===3?(s.length>1&&(D==="*"||D==="+")&&t(`A repeatable param (${C}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:C,regexp:A,repeatable:D==="*"||D==="+",optional:D==="*"||D==="?"})):t("Invalid state to consume buffer"),C="")}function p(){C+=D}for(;u<e.length;){if(D=e[u++],D==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:D==="/"?(C&&_(),o()):D===":"?(_(),n=1):p();break;case 4:p(),n=i;break;case 1:D==="("?n=2:Ch.test(D)?p():(_(),n=0,D!=="*"&&D!=="?"&&D!=="+"&&u--);break;case 2:D===")"?A[A.length-1]=="\\"?A=A.slice(0,-1)+D:n=3:A+=D;break;case 3:_(),n=0,D!=="*"&&D!=="?"&&D!=="+"&&u--,A="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${C}"`),_(),o(),r}function Ph(e,t,n){const i=bh(Rh(e.path),n),r=be(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function Ih(e,t){const n=[],i=new Map;t=io({strict:!1,end:!0,sensitive:!1},t);function r(A){return i.get(A)}function s(A,_,p){const L=!p,O=Fh(A);O.aliasOf=p&&p.record;const R=io(t,A),T=[O];if("alias"in A){const a=typeof A.alias=="string"?[A.alias]:A.alias;for(const f of a)T.push(be({},O,{components:p?p.record.components:O.components,path:f,aliasOf:p?p.record:O}))}let y,l;for(const a of T){const{path:f}=a;if(_&&f[0]!=="/"){const d=_.record.path,m=d[d.length-1]==="/"?"":"/";a.path=_.record.path+(f&&m+f)}if(y=Ph(a,_,R),p?p.alias.push(y):(l=l||y,l!==y&&l.alias.push(y),L&&A.name&&!no(y)&&o(A.name)),"children"in O){const d=O.children;for(let m=0;m<d.length;m++)s(d[m],y,p&&p.children[m])}p=p||y,D(y)}return l?()=>{o(l)}:gn}function o(A){if(Ql(A)){const _=i.get(A);_&&(i.delete(A),n.splice(n.indexOf(_),1),_.children.forEach(o),_.alias.forEach(o))}else{const _=n.indexOf(A);_>-1&&(n.splice(_,1),A.record.name&&i.delete(A.record.name),A.children.forEach(o),A.alias.forEach(o))}}function u(){return n}function D(A){let _=0;for(;_<n.length&&Dh(A,n[_])>=0&&(A.record.path!==n[_].record.path||!Jl(A,n[_]));)_++;n.splice(_,0,A),A.record.name&&!no(A)&&i.set(A.record.name,A)}function C(A,_){let p,L={},O,R;if("name"in A&&A.name){if(p=i.get(A.name),!p)throw jr(1,{location:A});R=p.record.name,L=be(Mh(_.params,p.keys.filter(l=>!l.optional).map(l=>l.name)),A.params),O=p.stringify(L)}else if("path"in A)O=A.path,p=n.find(l=>l.re.test(O)),p&&(L=p.parse(O),R=p.record.name);else{if(p=_.name?i.get(_.name):n.find(l=>l.re.test(_.path)),!p)throw jr(1,{location:A,currentLocation:_});R=p.record.name,L=be({},_.params,A.params),O=p.stringify(L)}const T=[];let y=p;for(;y;)T.unshift(y.record),y=y.parent;return{name:R,path:O,params:L,matched:T,meta:Bh(T)}}return e.forEach(A=>s(A)),{addRoute:s,resolve:C,removeRoute:o,getRoutes:u,getRecordMatcher:r}}function Mh(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function Fh(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:wh(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function wh(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="boolean"?n:n[i];return t}function no(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Bh(e){return e.reduce((t,n)=>be(t,n.meta),{})}function io(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function Jl(e,t){return t.children.some(n=>n===e||Jl(e,n))}const ql=/#/g,kh=/&/g,Uh=/\//g,Nh=/=/g,Kh=/\?/g,eu=/\+/g,jh=/%5B/g,Wh=/%5D/g,tu=/%5E/g,Hh=/%60/g,ru=/%7B/g,Gh=/%7C/g,nu=/%7D/g,$h=/%20/g;function zs(e){return encodeURI(""+e).replace(Gh,"|").replace(jh,"[").replace(Wh,"]")}function Vh(e){return zs(e).replace(ru,"{").replace(nu,"}").replace(tu,"^")}function ds(e){return zs(e).replace(eu,"%2B").replace($h,"+").replace(ql,"%23").replace(kh,"%26").replace(Hh,"`").replace(ru,"{").replace(nu,"}").replace(tu,"^")}function zh(e){return ds(e).replace(Nh,"%3D")}function Yh(e){return zs(e).replace(ql,"%23").replace(Kh,"%3F")}function Xh(e){return e==null?"":Yh(e).replace(Uh,"%2F")}function ri(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Qh(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(eu," "),o=s.indexOf("="),u=ri(o<0?s:s.slice(0,o)),D=o<0?null:ri(s.slice(o+1));if(u in t){let C=t[u];Array.isArray(C)||(C=t[u]=[C]),C.push(D)}else t[u]=D}return t}function so(e){let t="";for(let n in e){const i=e[n];if(n=zh(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(i)?i.map(s=>s&&ds(s)):[i&&ds(i)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function Zh(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Array.isArray(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}function qr(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function kt(e,t,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,u)=>{const D=_=>{_===!1?u(jr(4,{from:n,to:t})):_ instanceof Error?u(_):Sh(_)?u(jr(2,{from:t,to:_})):(s&&i.enterCallbacks[r]===s&&typeof _=="function"&&s.push(_),o())},C=e.call(i&&i.instances[r],t,n,D);let A=Promise.resolve(C);e.length<3&&(A=A.then(D)),A.catch(_=>u(_))})}function Ki(e,t,n,i){const r=[];for(const s of e)for(const o in s.components){let u=s.components[o];if(!(t!=="beforeRouteEnter"&&!s.instances[o]))if(Jh(u)){const C=(u.__vccOpts||u)[t];C&&r.push(kt(C,n,i,s,o))}else{let D=u();r.push(()=>D.then(C=>{if(!C)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const A=ih(C)?C.default:C;s.components[o]=A;const p=(A.__vccOpts||A)[t];return p&&kt(p,n,i,s,o)()}))}}return r}function Jh(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function ao(e){const t=Dt(Vs),n=Dt(zl),i=Et(()=>t.resolve(ln(e.to))),r=Et(()=>{const{matched:D}=i.value,{length:C}=D,A=D[C-1],_=n.matched;if(!A||!_.length)return-1;const p=_.findIndex(Kr.bind(null,A));if(p>-1)return p;const L=oo(D[C-2]);return C>1&&oo(A)===L&&_[_.length-1].path!==L?_.findIndex(Kr.bind(null,D[C-2])):p}),s=Et(()=>r.value>-1&&rv(n.params,i.value.params)),o=Et(()=>r.value>-1&&r.value===n.matched.length-1&&Yl(n.params,i.value.params));function u(D={}){return tv(D)?t[ln(e.replace)?"replace":"push"](ln(e.to)).catch(gn):Promise.resolve()}return{route:i,href:Et(()=>i.value.href),isActive:s,isExactActive:o,navigate:u}}const qh=Ei({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ao,setup(e,{slots:t}){const n=ft(ao(e)),{options:i}=Dt(Vs),r=Et(()=>({[lo(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[lo(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:Gs("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),ev=qh;function tv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function rv(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!Array.isArray(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function oo(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const lo=(e,t,n)=>e!=null?e:t!=null?t:n,nv=Ei({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=Dt(fs),r=Et(()=>e.route||i.value),s=Dt(Qa,0),o=Et(()=>r.value.matched[s]);Gn(Qa,s+1),Gn(nh,o),Gn(fs,r);const u=Wn();return ur(()=>[u.value,o.value,e.name],([D,C,A],[_,p,L])=>{C&&(C.instances[A]=D,p&&p!==C&&D&&D===_&&(C.leaveGuards.size||(C.leaveGuards=p.leaveGuards),C.updateGuards.size||(C.updateGuards=p.updateGuards))),D&&C&&(!p||!Kr(C,p)||!_)&&(C.enterCallbacks[A]||[]).forEach(O=>O(D))},{flush:"post"}),()=>{const D=r.value,C=o.value,A=C&&C.components[e.name],_=e.name;if(!A)return uo(n.default,{Component:A,route:D});const p=C.props[e.name],L=p?p===!0?D.params:typeof p=="function"?p(D):p:null,R=Gs(A,be({},L,t,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(C.instances[_]=null)},ref:u}));return uo(n.default,{Component:R,route:D})||R}}});function uo(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const iv=nv;function sv(e){const t=Ih(e.routes,e),n=e.parseQuery||Qh,i=e.stringifyQuery||so,r=e.history,s=qr(),o=qr(),u=qr(),D=Bf(Mt);let C=Mt;Dr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const A=Ui.bind(null,N=>""+N),_=Ui.bind(null,Xh),p=Ui.bind(null,ri);function L(N,G){let $,z;return Ql(N)?($=t.getRecordMatcher(N),z=G):z=N,t.addRoute(z,$)}function O(N){const G=t.getRecordMatcher(N);G&&t.removeRoute(G)}function R(){return t.getRoutes().map(N=>N.record)}function T(N){return!!t.getRecordMatcher(N)}function y(N,G){if(G=be({},G||D.value),typeof N=="string"){const se=Ni(n,N,G.path),K=t.resolve({path:se.path},G),W=r.createHref(se.fullPath);return be(se,K,{params:p(K.params),hash:ri(se.hash),redirectedFrom:void 0,href:W})}let $;if("path"in N)$=be({},N,{path:Ni(n,N.path,G.path).path});else{const se=be({},N.params);for(const K in se)se[K]==null&&delete se[K];$=be({},N,{params:_(N.params)}),G.params=_(G.params)}const z=t.resolve($,G),ee=N.hash||"";z.params=A(p(z.params));const X=oh(i,be({},N,{hash:Vh(ee),path:z.path})),te=r.createHref(X);return be({fullPath:X,hash:ee,query:i===so?Zh(N.query):N.query||{}},z,{redirectedFrom:void 0,href:te})}function l(N){return typeof N=="string"?Ni(n,N,D.value.path):be({},N)}function a(N,G){if(C!==N)return jr(8,{from:G,to:N})}function f(N){return h(N)}function d(N){return f(be(l(N),{replace:!0}))}function m(N){const G=N.matched[N.matched.length-1];if(G&&G.redirect){const{redirect:$}=G;let z=typeof $=="function"?$(N):$;return typeof z=="string"&&(z=z.includes("?")||z.includes("#")?z=l(z):{path:z},z.params={}),be({query:N.query,hash:N.hash,params:N.params},z)}}function h(N,G){const $=C=y(N),z=D.value,ee=N.state,X=N.force,te=N.replace===!0,se=m($);if(se)return h(be(l(se),{state:ee,force:X,replace:te}),G||$);const K=$;K.redirectedFrom=G;let W;return!X&&lh(i,z,$)&&(W=jr(16,{to:K,from:z}),k(z,z,!0,!1)),(W?Promise.resolve(W):v(K,z)).catch(V=>Ft(V)?Ft(V,2)?V:w(V):M(V,K,z)).then(V=>{if(V){if(Ft(V,2))return h(be(l(V.to),{state:ee,force:X,replace:te}),G||K)}else V=b(K,z,!0,te,ee);return P(K,z,V),V})}function c(N,G){const $=a(N,G);return $?Promise.reject($):Promise.resolve()}function v(N,G){let $;const[z,ee,X]=av(N,G);$=Ki(z.reverse(),"beforeRouteLeave",N,G);for(const se of z)se.leaveGuards.forEach(K=>{$.push(kt(K,N,G))});const te=c.bind(null,N,G);return $.push(te),xr($).then(()=>{$=[];for(const se of s.list())$.push(kt(se,N,G));return $.push(te),xr($)}).then(()=>{$=Ki(ee,"beforeRouteUpdate",N,G);for(const se of ee)se.updateGuards.forEach(K=>{$.push(kt(K,N,G))});return $.push(te),xr($)}).then(()=>{$=[];for(const se of N.matched)if(se.beforeEnter&&!G.matched.includes(se))if(Array.isArray(se.beforeEnter))for(const K of se.beforeEnter)$.push(kt(K,N,G));else $.push(kt(se.beforeEnter,N,G));return $.push(te),xr($)}).then(()=>(N.matched.forEach(se=>se.enterCallbacks={}),$=Ki(X,"beforeRouteEnter",N,G),$.push(te),xr($))).then(()=>{$=[];for(const se of o.list())$.push(kt(se,N,G));return $.push(te),xr($)}).catch(se=>Ft(se,8)?se:Promise.reject(se))}function P(N,G,$){for(const z of u.list())z(N,G,$)}function b(N,G,$,z,ee){const X=a(N,G);if(X)return X;const te=G===Mt,se=Dr?history.state:{};$&&(z||te?r.replace(N.fullPath,be({scroll:te&&se&&se.scroll},ee)):r.push(N.fullPath,ee)),D.value=N,k(N,G,$,te),w()}let x;function S(){x||(x=r.listen((N,G,$)=>{const z=y(N),ee=m(z);if(ee){h(be(ee,{replace:!0}),z).catch(gn);return}C=z;const X=D.value;Dr&&mh(qa(X.fullPath,$.delta),_i()),v(z,X).catch(te=>Ft(te,12)?te:Ft(te,2)?(h(te.to,z).then(se=>{Ft(se,20)&&!$.delta&&$.type===Dn.pop&&r.go(-1,!1)}).catch(gn),Promise.reject()):($.delta&&r.go(-$.delta,!1),M(te,z,X))).then(te=>{te=te||b(z,X,!1),te&&($.delta?r.go(-$.delta,!1):$.type===Dn.pop&&Ft(te,20)&&r.go(-1,!1)),P(z,X,te)}).catch(gn)}))}let g=qr(),E=qr(),I;function M(N,G,$){w(N);const z=E.list();return z.length?z.forEach(ee=>ee(N,G,$)):console.error(N),Promise.reject(N)}function F(){return I&&D.value!==Mt?Promise.resolve():new Promise((N,G)=>{g.add([N,G])})}function w(N){return I||(I=!N,S(),g.list().forEach(([G,$])=>N?$(N):G()),g.reset()),N}function k(N,G,$,z){const{scrollBehavior:ee}=e;if(!Dr||!ee)return Promise.resolve();const X=!$&&ph(qa(N.fullPath,0))||(z||!$)&&history.state&&history.state.scroll||null;return Cs().then(()=>ee(N,G,X)).then(te=>te&&gh(te)).catch(te=>M(te,N,G))}const B=N=>r.go(N);let U;const j=new Set;return{currentRoute:D,addRoute:L,removeRoute:O,hasRoute:T,getRoutes:R,resolve:y,options:e,push:f,replace:d,go:B,back:()=>B(-1),forward:()=>B(1),beforeEach:s.add,beforeResolve:o.add,afterEach:u.add,onError:E.add,isReady:F,install(N){const G=this;N.component("RouterLink",ev),N.component("RouterView",iv),N.config.globalProperties.$router=G,Object.defineProperty(N.config.globalProperties,"$route",{enumerable:!0,get:()=>ln(D)}),Dr&&!U&&D.value===Mt&&(U=!0,f(r.location).catch(ee=>{}));const $={};for(const ee in Mt)$[ee]=Et(()=>D.value[ee]);N.provide(Vs,G),N.provide(zl,ft($)),N.provide(fs,D);const z=N.unmount;j.add(N),N.unmount=function(){j.delete(N),j.size<1&&(C=Mt,x&&x(),x=null,D.value=Mt,U=!1,I=!1),z()}}}}function xr(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function av(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const u=t.matched[o];u&&(e.matched.find(C=>Kr(C,u))?i.push(u):n.push(u));const D=e.matched[o];D&&(t.matched.find(C=>Kr(C,D))||r.push(D))}return[n,i,r]}const ov="modulepreload",fo={},lv="/",Be=function(t,n){return!n||n.length===0?t():Promise.all(n.map(i=>{if(i=`${lv}${i}`,i in fo)return;fo[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":ov,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((u,D)=>{o.addEventListener("load",u),o.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var uv="store";function zr(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function fv(e){return e!==null&&typeof e=="object"}function cv(e){return e&&typeof e.then=="function"}function dv(e,t){return function(){return e(t)}}function iu(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function su(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;Ai(e,n,[],e._modules.root,!0),Ys(e,n,t)}function Ys(e,t,n){var i=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,s={};zr(r,function(o,u){s[u]=dv(o,e),Object.defineProperty(e.getters,u,{get:function(){return s[u]()},enumerable:!0})}),e._state=ft({data:t}),e.strict&&pv(e),i&&n&&e._withCommit(function(){i.data=null})}function Ai(e,t,n,i,r){var s=!n.length,o=e._modules.getNamespace(n);if(i.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=i),!s&&!r){var u=Xs(t,n.slice(0,-1)),D=n[n.length-1];e._withCommit(function(){u[D]=i.state})}var C=i.context=hv(e,o,n);i.forEachMutation(function(A,_){var p=o+_;vv(e,p,A,C)}),i.forEachAction(function(A,_){var p=A.root?_:o+_,L=A.handler||A;gv(e,p,L,C)}),i.forEachGetter(function(A,_){var p=o+_;mv(e,p,A,C)}),i.forEachChild(function(A,_){Ai(e,t,n.concat(_),A,r)})}function hv(e,t,n){var i=t==="",r={dispatch:i?e.dispatch:function(s,o,u){var D=ni(s,o,u),C=D.payload,A=D.options,_=D.type;return(!A||!A.root)&&(_=t+_),e.dispatch(_,C)},commit:i?e.commit:function(s,o,u){var D=ni(s,o,u),C=D.payload,A=D.options,_=D.type;(!A||!A.root)&&(_=t+_),e.commit(_,C,A)}};return Object.defineProperties(r,{getters:{get:i?function(){return e.getters}:function(){return au(e,t)}},state:{get:function(){return Xs(e.state,n)}}}),r}function au(e,t){if(!e._makeLocalGettersCache[t]){var n={},i=t.length;Object.keys(e.getters).forEach(function(r){if(r.slice(0,i)===t){var s=r.slice(i);Object.defineProperty(n,s,{get:function(){return e.getters[r]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function vv(e,t,n,i){var r=e._mutations[t]||(e._mutations[t]=[]);r.push(function(o){n.call(e,i.state,o)})}function gv(e,t,n,i){var r=e._actions[t]||(e._actions[t]=[]);r.push(function(o){var u=n.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},o);return cv(u)||(u=Promise.resolve(u)),e._devtoolHook?u.catch(function(D){throw e._devtoolHook.emit("vuex:error",D),D}):u})}function mv(e,t,n,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(s){return n(i.state,i.getters,s.state,s.getters)})}function pv(e){ur(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Xs(e,t){return t.reduce(function(n,i){return n[i]},e)}function ni(e,t,n){return fv(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var Ev="vuex bindings",co="vuex:mutations",ji="vuex:actions",Sr="vuex",yv=0;function Tv(e,t){rh({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Ev]},function(n){n.addTimelineLayer({id:co,label:"Vuex Mutations",color:ho}),n.addTimelineLayer({id:ji,label:"Vuex Actions",color:ho}),n.addInspector({id:Sr,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(i){if(i.app===e&&i.inspectorId===Sr)if(i.filter){var r=[];fu(r,t._modules.root,i.filter,""),i.rootNodes=r}else i.rootNodes=[uu(t._modules.root,"")]}),n.on.getInspectorState(function(i){if(i.app===e&&i.inspectorId===Sr){var r=i.nodeId;au(t,r),i.state=_v(bv(t._modules,r),r==="root"?t.getters:t._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(i){if(i.app===e&&i.inspectorId===Sr){var r=i.nodeId,s=i.path;r!=="root"&&(s=r.split("/").filter(Boolean).concat(s)),t._withCommit(function(){i.set(t._state.data,s,i.state.value)})}}),t.subscribe(function(i,r){var s={};i.payload&&(s.payload=i.payload),s.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(Sr),n.sendInspectorState(Sr),n.addTimelineEvent({layerId:co,event:{time:Date.now(),title:i.type,data:s}})}),t.subscribeAction({before:function(i,r){var s={};i.payload&&(s.payload=i.payload),i._id=yv++,i._time=Date.now(),s.state=r,n.addTimelineEvent({layerId:ji,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:s}})},after:function(i,r){var s={},o=Date.now()-i._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(s.payload=i.payload),s.state=r,n.addTimelineEvent({layerId:ji,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:s}})}})})}var ho=8702998,xv=6710886,Sv=16777215,ou={label:"namespaced",textColor:Sv,backgroundColor:xv};function lu(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function uu(e,t){return{id:t||"root",label:lu(t),tags:e.namespaced?[ou]:[],children:Object.keys(e._children).map(function(n){return uu(e._children[n],t+n+"/")})}}function fu(e,t,n,i){i.includes(n)&&e.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:t.namespaced?[ou]:[]}),Object.keys(t._children).forEach(function(r){fu(e,t._children[r],n,i+r+"/")})}function _v(e,t,n){t=n==="root"?t:t[n];var i=Object.keys(t),r={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(i.length){var s=Av(t);r.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?lu(o):o,editable:!1,value:hs(function(){return s[o]})}})}return r}function Av(e){var t={};return Object.keys(e).forEach(function(n){var i=n.split("/");if(i.length>1){var r=t,s=i.pop();i.forEach(function(o){r[o]||(r[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),r=r[o]._custom.value}),r[s]=hs(function(){return e[n]})}else t[n]=hs(function(){return e[n]})}),t}function bv(e,t){var n=t.split("/").filter(function(i){return i});return n.reduce(function(i,r,s){var o=i[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+t+'".');return s===n.length-1?o:o._children},t==="root"?e:e.root._children)}function hs(e){try{return e()}catch(t){return t}}var gt=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=(typeof i=="function"?i():i)||{}},cu={namespaced:{configurable:!0}};cu.namespaced.get=function(){return!!this._rawModule.namespaced};gt.prototype.addChild=function(t,n){this._children[t]=n};gt.prototype.removeChild=function(t){delete this._children[t]};gt.prototype.getChild=function(t){return this._children[t]};gt.prototype.hasChild=function(t){return t in this._children};gt.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};gt.prototype.forEachChild=function(t){zr(this._children,t)};gt.prototype.forEachGetter=function(t){this._rawModule.getters&&zr(this._rawModule.getters,t)};gt.prototype.forEachAction=function(t){this._rawModule.actions&&zr(this._rawModule.actions,t)};gt.prototype.forEachMutation=function(t){this._rawModule.mutations&&zr(this._rawModule.mutations,t)};Object.defineProperties(gt.prototype,cu);var mr=function(t){this.register([],t,!1)};mr.prototype.get=function(t){return t.reduce(function(n,i){return n.getChild(i)},this.root)};mr.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(i,r){return n=n.getChild(r),i+(n.namespaced?r+"/":"")},"")};mr.prototype.update=function(t){du([],this.root,t)};mr.prototype.register=function(t,n,i){var r=this;i===void 0&&(i=!0);var s=new gt(n,i);if(t.length===0)this.root=s;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],s)}n.modules&&zr(n.modules,function(u,D){r.register(t.concat(D),u,i)})};mr.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),i=t[t.length-1],r=n.getChild(i);!r||!r.runtime||n.removeChild(i)};mr.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),i=t[t.length-1];return n?n.hasChild(i):!1};function du(e,t,n){if(t.update(n),n.modules)for(var i in n.modules){if(!t.getChild(i))return;du(e.concat(i),t.getChild(i),n.modules[i])}}function Lv(e){return new qe(e)}var qe=function(t){var n=this;t===void 0&&(t={});var i=t.plugins;i===void 0&&(i=[]);var r=t.strict;r===void 0&&(r=!1);var s=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new mr(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var o=this,u=this,D=u.dispatch,C=u.commit;this.dispatch=function(p,L){return D.call(o,p,L)},this.commit=function(p,L,O){return C.call(o,p,L,O)},this.strict=r;var A=this._modules.root.state;Ai(this,A,[],this._modules.root),Ys(this,A),i.forEach(function(_){return _(n)})},Qs={state:{configurable:!0}};qe.prototype.install=function(t,n){t.provide(n||uv,this),t.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&Tv(t,this)};Qs.state.get=function(){return this._state.data};Qs.state.set=function(e){};qe.prototype.commit=function(t,n,i){var r=this,s=ni(t,n,i),o=s.type,u=s.payload,D={type:o,payload:u},C=this._mutations[o];!C||(this._withCommit(function(){C.forEach(function(_){_(u)})}),this._subscribers.slice().forEach(function(A){return A(D,r.state)}))};qe.prototype.dispatch=function(t,n){var i=this,r=ni(t,n),s=r.type,o=r.payload,u={type:s,payload:o},D=this._actions[s];if(!!D){try{this._actionSubscribers.slice().filter(function(A){return A.before}).forEach(function(A){return A.before(u,i.state)})}catch{}var C=D.length>1?Promise.all(D.map(function(A){return A(o)})):D[0](o);return new Promise(function(A,_){C.then(function(p){try{i._actionSubscribers.filter(function(L){return L.after}).forEach(function(L){return L.after(u,i.state)})}catch{}A(p)},function(p){try{i._actionSubscribers.filter(function(L){return L.error}).forEach(function(L){return L.error(u,i.state,p)})}catch{}_(p)})})}};qe.prototype.subscribe=function(t,n){return iu(t,this._subscribers,n)};qe.prototype.subscribeAction=function(t,n){var i=typeof t=="function"?{before:t}:t;return iu(i,this._actionSubscribers,n)};qe.prototype.watch=function(t,n,i){var r=this;return ur(function(){return t(r.state,r.getters)},n,Object.assign({},i))};qe.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};qe.prototype.registerModule=function(t,n,i){i===void 0&&(i={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),Ai(this,this.state,t,this._modules.get(t),i.preserveState),Ys(this,this.state)};qe.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var i=Xs(n.state,t.slice(0,-1));delete i[t[t.length-1]]}),su(this)};qe.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};qe.prototype.hotUpdate=function(t){this._modules.update(t),su(this,!0)};qe.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(qe.prototype,Qs);var Dv={\u6307\u5357:[{name:"\u5F00\u59CB Start",prefix:"\u5F00\u59CB",suffix:"Start",path:"start",file:"/intro/start"},{name:"\u89C4\u8303 Standard",prefix:"\u89C4\u8303",suffix:"Standard",path:"standard",file:"/intro/standard"}],\u5C5E\u6027:[{name:"\u989C\u8272 Colors",prefix:"\u989C\u8272",suffix:"Colors",path:"colors",file:"/attribute/color"},{name:"\u5C3A\u5BF8 Sizing",prefix:"\u5C3A\u5BF8",suffix:"Sizing",path:"sizing",file:"/attribute/sizing"},{name:"\u76D2\u5B50 Box",prefix:"\u76D2\u5B50",suffix:"Box",path:"box",file:"/attribute/box"},{name:"\u6587\u5B57 Text",prefix:"\u6587\u5B57",suffix:"Text",path:"text",file:"/attribute/text"},{name:"\u6D4B\u8BD5 Test",prefix:"\u6D4B\u8BD5",suffix:"Test",path:"test",file:"/attribute/test"}],\u9884\u8BBE:[{name:"CSS Reset",prefix:"CSS",suffix:"Reset",path:"reset",file:"/preset/reset"},{name:"\u8499\u677F Matte",prefix:"\u8499\u677F",suffix:"Matte",path:"overlay",file:"/preset/matte"},{name:"\u4E3B\u9898 Theme",prefix:"\u4E3B\u9898",suffix:"Theme",path:"theme",file:"/preset/doc-theme"},{name:"\u6D88\u606F Message",prefix:"\u6D88\u606F",suffix:"Message",path:"message",file:"/preset/doc-message"}],\u5BB9\u5668:[{name:"\u81EA\u9002\u5E94 Fit",prefix:"\u81EA\u9002\u5E94",suffix:"Fit",path:"fit",file:"/container/doc-fit"},{name:"\u9648\u5217 Flex",prefix:"\u9648\u5217",suffix:" Flex",path:"flex",file:"/container/doc-flex",width:"45px"}],\u7EC4\u4EF6:[{name:"\u56FE\u6807 Ico",prefix:"\u56FE\u6807",suffix:"Ico",path:"icon",file:"/component/icon"},{name:"\u6309\u94AE Btn",prefix:"\u6309\u94AE",suffix:"Btn",path:"btn",file:"/component/btn"},{name:"\u89C6\u9891 Vid",prefix:"\u89C6\u9891",suffix:"Vid",path:"vid",file:"/component/vid"},{name:"\u5B57\u6BB5 Field",prefix:"\u5B57\u6BB5",suffix:"Field",path:"field",file:"/component/field"}],\u6307\u4EE4:[{name:"\u61D2\u52A0\u8F7D",prefix:"\u61D2\u52A0\u8F7D",suffix:"Lazy",path:"lazy",file:"/directive/doc-lazy"}]};const vs=Lv({state(){return{version:"1.3.1",doc:Dv}},mutations:{},getters:{},actions:{}}),Ov={"../views/documentation/content/attribute/box/index.js":()=>Be(()=>import("./index.ce499c60.js"),["assets/index.ce499c60.js","assets/index.787c4fe1.css"]),"../views/documentation/content/attribute/color/index.js":()=>Be(()=>import("./index.d1afc6fd.js"),["assets/index.d1afc6fd.js","assets/index.cb564bac.css"]),"../views/documentation/content/attribute/sizing/index.js":()=>Be(()=>import("./index.8dd97c3a.js"),["assets/index.8dd97c3a.js","assets/index.65786649.css"]),"../views/documentation/content/attribute/test/index.js":()=>Be(()=>import("./index.8e8c37f0.js"),["assets/index.8e8c37f0.js","assets/index.064c9e31.css"]),"../views/documentation/content/attribute/text/index.js":()=>Be(()=>import("./index.8fd524b5.js"),["assets/index.8fd524b5.js","assets/index.280cdcb3.css","assets/傍晚的林中小屋.548b2ab6.js"]),"../views/documentation/content/component/btn/index.js":()=>Be(()=>import("./index.21208e6b.js"),["assets/index.21208e6b.js","assets/index.f380794f.css"]),"../views/documentation/content/component/field/index.js":()=>Be(()=>import("./index.e1d90384.js"),["assets/index.e1d90384.js","assets/index.67244666.css"]),"../views/documentation/content/component/icon/index.js":()=>Be(()=>import("./index.f717fa2a.js"),["assets/index.f717fa2a.js","assets/index.7f18720e.css","assets/index.08dae2f5.js"]),"../views/documentation/content/component/vid/index.js":()=>Be(()=>import("./index.5562292e.js"),[]),"../views/documentation/content/container/doc-fit/index.js":()=>Be(()=>import("./index.714a3c0b.js"),["assets/index.714a3c0b.js","assets/index.340d88f0.css","assets/index.6750a1d4.js","assets/傍晚的林中小屋.548b2ab6.js"]),"../views/documentation/content/container/doc-flex/index.js":()=>Be(()=>import("./index.89591511.js"),["assets/index.89591511.js","assets/index.bb67fd5a.css","assets/index.6750a1d4.js"]),"../views/documentation/content/directive/doc-lazy/index.js":()=>Be(()=>import("./index.fa1f248d.js"),[]),"../views/documentation/content/intro/standard/index.js":()=>Be(()=>import("./index.f5de26e8.js"),["assets/index.f5de26e8.js","assets/index.eb0ebb9e.css"]),"../views/documentation/content/intro/start/index.js":()=>Be(()=>import("./index.5c77226a.js"),["assets/index.5c77226a.js","assets/index.1b97abef.css"]),"../views/documentation/content/preset/doc-message/index.js":()=>Be(()=>import("./index.013d77f8.js"),["assets/index.013d77f8.js","assets/index.0c112db5.css"]),"../views/documentation/content/preset/doc-theme/index.js":()=>Be(()=>import("./index.84664508.js"),["assets/index.84664508.js","assets/index.8cfaffd9.css"]),"../views/documentation/content/preset/matte/index.js":()=>Be(()=>import("./index.4f26622f.js"),["assets/index.4f26622f.js","assets/index.a56c22f9.css"]),"../views/documentation/content/preset/reset/index.js":()=>Be(()=>import("./index.74c0ee3b.js"),["assets/index.74c0ee3b.js","assets/index.924a1cc0.css"]),"../views/documentation/content/component/icon/names/index.js":()=>Be(()=>import("./index.08dae2f5.js"),[])};let hu=[];for(let e in vs.state.doc)for(let t of vs.state.doc[e])hu.push({name:t.name,path:t.path,component:Ov["../views/documentation/content"+t.file+"/index.js"]});let Cv=[{path:"/",name:"Home",component:()=>Be(()=>import("./index.90ce18af.js"),["assets/index.90ce18af.js","assets/index.099b4533.css"])},{path:"/doc",name:"Documentation",component:()=>Be(()=>import("./index.80019757.js"),["assets/index.80019757.js","assets/index.378cbd6a.css"]),children:[...hu]},{path:"/doc/:pathMatch(.*)*",name:"error",redirect:"/"},{path:"/:pathMatch(.*)*",name:"error",redirect:"/"}];var Zs=sv({history:xh(),routes:Cv});Zs.beforeEach((e,t,n)=>{n()});Zs.afterEach((e,t)=>{let n=e.name?" | "+e.name[0].toUpperCase()+e.name.slice(1):"";document.title="Mew"+n,document.documentElement.scrollTop=0});let an=ft({mobile:!1});{let e=function(n){if(n){console.log(0);let i=document.createAttribute("mobile");document.body.setAttributeNode(i)}else document.body.removeAttribute("mobile")},t=function(n,i){let r=null;return function(){let s=arguments;clearTimeout(r),r=setTimeout(()=>{n.apply(this,s)},i)}};window.addEventListener("load",()=>{(function(n){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(an.mobile=!0)})(navigator.userAgent||navigator.vendor||window.opera),e(an.mobile)}),window.addEventListener("resize",t(()=>{an.mobile=document.body.offsetWidth<1250,e(an.mobile)},50))}let vu=ft({keepFocus:!1,wrapper:null,target:null}),gu=ft({valid:!1,color:"white",image:"",text:"Loading",icon:"",size:1,next:null,target:null,config:null}),mu=ft({valid:!1,color:"white",image:"",text:"Pending",icon:"",size:1,next:null,target:null,config:null}),gs=ft({theme:"light"}),Nt=ft([]),dt=function(e){let t={id:Symbol()},n=e instanceof Object?e:{text:e.toString()};for(let i in n)t[i]=n[i];n.text||(n.text="No text !"),n.style||(n.style=""),Nt.push(t),Nt.length>8&&Nt.shift()};dt.__proto__.flag=!1,dt.__proto__.clear=function(e){if(!this.flag){this.flag=!0,Nt.length>0&&Nt.shift();let t=setInterval(()=>{Nt.length===0?(this.flag=!1,clearInterval(t)):Nt.shift()},200)}},dt.__proto__.message=function(e){let t={color:"blue",title:"\u6D88\u606F",text:"\u8FD9\u662F\u4E00\u4E2A\u6D88\u606F\u63D0\u793A\uFF01",icon:"state-hint-caution"};if(e instanceof Object)for(let n in e)t[n]=e[n];else e&&(t.text=e);dt(t)},dt.__proto__.success=function(e){let t={color:"green",title:"\u6210\u529F",text:"\u8FD9\u662F\u4E00\u4E2A\u6210\u529F\u63D0\u793A\uFF01",icon:"state-hint-achieve"};if(e instanceof Object)for(let n in e)t[n]=e[n];else e&&(t.text=e);dt(t)},dt.__proto__.caution=function(e){let t={color:"yellow",title:"\u6CE8\u610F",text:"\u8FD9\u662F\u4E00\u4E2A\u6CE8\u610F\u63D0\u793A\uFF01",icon:"state-hint-warning"};if(e instanceof Object)for(let n in e)t[n]=e[n];else e&&(t.text=e);dt(t)},dt.__proto__.failure=function(e){let t={color:"red",title:"\u9519\u8BEF",text:"\u8FD9\u662F\u4E00\u4E2A\u9519\u8BEF\u63D0\u793A\uFF01",icon:"state-hint-bad"};if(e instanceof Object)for(let n in e)t[n]=e[n];else e&&(t.text=e);dt(t)};const Rv={name:"mew-spinner",props:{color:{type:String,default:"white"}}},Pv={class:"mew-spinner"},Iv={fill:"",viewBox:"25 25 50 50"},Mv=["stroke"];function Fv(e,t,n,i,r,s){return ae(),fe("div",Pv,[(ae(),fe("svg",Iv,[ie("circle",{cx:"50",cy:"50",r:"1em",fill:"none",stroke:n.color},null,8,Mv)]))])}var pu=xe(Rv,[["render",Fv]]);const wv={name:"mew-icon",data(){return{tink:""}},props:{dense:{type:Boolean,default:!1}},watch:{name(){this.tink=this.tink==="foo"?"bar":"foo"}},computed:{name(){return this.$slots.default?"mew-icon-"+this.$slots.default()[0].children:""},still(){return this.dense?"dense":""}}};function Bv(e,t,n,i,r,s){return ae(),fe("i",{class:_e(["mew",[s.name,r.tink,s.still]])},null,2)}var Eu=xe(wv,[["render",Bv],["__scopeId","data-v-31f39191"]]);const kv={name:"mew-matte",mounted(){this.loading.target||(this.loading.target=this.body),this.pending.target||(this.pending.target=this.body)},components:{ico:Eu,spinner:pu},data(){return{loading:gu,pending:mu,body:document.body,tink_loading:0,tink_pending:0}},computed:{stat_loading(){let e=this.loading;return e.image+e.text+e.icon},stat_pending(){let e=this.pending;return e.image+e.text+e.icon}},watch:{stat_loading(){this.tink_loading=this.tink_loading===1?2:1},stat_pending(){this.tink_pending=this.tink_pending===1?2:1},"loading.config":function(e){this.reset("loading")},"pending.config":function(e){this.reset("pending")},"loading.valid":function(e){e||this.reset("loading")},"pending.valid":function(e){e||this.reset("pending")}},methods:{next(e){this[e].next&&this[e].next()},reset(e){let t=this[e].config?this[e].config:{color:"white",image:"",text:"Pending",icon:"",size:1,next:null,target:null};for(let n in t)this[e][n]=t[n]}}},Uv={key:0,class:"mew-matte"},Nv={key:0,class:"text"},Kv=["src"],jv={key:0,class:"mew-matte-pending-box",column:"",ac:""},Wv={key:0,class:"text"},Hv=["src"],Gv=ie("div",{class:"ellipsis"},[ie("i"),ie("i"),ie("i"),ie("i")],-1),$v={key:1,class:"mew-matte-pending-next"},Vv=["src"],zv={class:"steady"};function Yv(e,t,n,i,r,s){const o=Ce("ico"),u=Ce("spinner");return ae(),fe(Re,null,[r.loading.target?(ae(),Ze(Ca,{key:0,to:r.loading.target},[he(bn,{name:"fade"},{default:rt(()=>[r.loading.valid?(ae(),fe("div",Uv,[ie("div",{class:_e(["mew-matte-loading",{nudge:r.loading.target===r.body,steady:r.loading.next}]),style:Ht("--CLR:"+r.loading.color+";--SCL:"+r.loading.size),onClick:t[0]||(t[0]=D=>s.next("loading"))},[ie("div",{class:_e(["partten",{border:r.loading.image,foo:r.tink_loading===1,bar:r.tink_loading===2}])},[r.loading.next&&r.loading.icon||!r.loading.icon&&!r.loading.image?(ae(),fe("i",Nv,[r.loading.next&&r.loading.icon?(ae(),Ze(o,{key:0,class:"inlineIco",dense:""},{default:rt(()=>[st(Le(r.loading.icon),1)]),_:1})):ke("",!0),st(" "+Le(r.loading.text),1)])):r.loading.image?(ae(),fe("img",{key:1,src:r.loading.image},null,8,Kv)):(ae(),Ze(o,{key:2,dense:"",style:{"font-size":"58px"}},{default:rt(()=>[st(Le(r.loading.icon),1)]),_:1}))],2),he(u,{color:r.loading.color,style:{width:"164px",height:"164px"}},null,8,["color"])],6)])):ke("",!0)]),_:1})],8,["to"])):ke("",!0),r.pending.target?(ae(),Ze(Ca,{key:1,to:r.pending.target},[he(bn,{name:"fade"},{default:rt(()=>[r.pending.valid?(ae(),fe("div",{key:0,class:"mew-matte",onClick:t[1]||(t[1]=D=>s.next("pending"))},[ie("div",{class:_e(["mew-matte-pending",{nudge:r.pending.target===r.body}]),style:Ht("--CLR:"+r.pending.color+";--SCL:"+r.pending.size)},[r.pending.next?(ae(),fe("div",$v,[r.pending.image?(ae(),fe("img",{key:0,src:r.pending.image},null,8,Vv)):r.pending.icon?(ae(),Ze(o,{key:1,class:"icon",dense:"",style:{"font-size":"58px"}},{default:rt(()=>[st(Le(r.pending.icon),1)]),_:1})):ke("",!0),ie("i",zv,Le(r.pending.text),1)])):(ae(),fe("div",jv,[ie("div",{class:_e(["partten",{border:r.pending.image,foo:r.tink_pending===1,bar:r.tink_pending===2}])},[!r.pending.icon&&!r.pending.image?(ae(),fe("i",Wv,Le(r.pending.text),1)):r.pending.image?(ae(),fe("img",{key:1,src:r.pending.image},null,8,Hv)):(ae(),Ze(o,{key:2,dense:"",style:{"font-size":"58px"}},{default:rt(()=>[st(Le(r.pending.icon),1)]),_:1}))],2),Gv]))],6)])):ke("",!0)]),_:1})],8,["to"])):ke("",!0)],64)}var Xv=xe(kv,[["render",Yv]]);const Qv={name:"mew-color",mounted(){let e=localStorage.getItem("theme");e||(e="light"),this.setColor(e)},data(){return{color:gs}},watch:{"color.theme":function(e,t){t&&this.removeAttr(t),this.setColor(e),localStorage.setItem("theme",e)}},methods:{setColor(e){document.body.setAttribute("mew-theme",e),gs.theme=e,this.addAttr(e)},addAttr(e){document.body.setAttributeNode(document.createAttribute(e))},removeAttr(e){document.body.removeAttribute(e)}}};function Zv(e,t,n,i,r,s){return ke("",!0)}var Jv=xe(Qv,[["render",Zv]]);const qv={name:"toast-props",props:{color:{type:String,default:""},title:{type:[String,Boolean],default:""},close:{type:Boolean,default:!0},delay:{type:Number,default:4},stick:{type:Boolean,default:!1},icon:{type:[String,Boolean],default:"state-hint-achieve"},text:{type:String,default:"This is a message"},center:{type:Boolean,default:!1},class:{type:String,default:""},css:{type:String,default:""}}};var eg={red:{fontColor:"#e00000",backgroundColor:"rgba(255,234,234,.92)"},pink:{fontColor:"#d600a7",backgroundColor:"rgba(255,224,242,.92)"},purple:{fontColor:"#a000b2",backgroundColor:"rgba(250,220,255,.92)"},orange:{fontColor:"#ffffff",backgroundColor:"rgba(255,110,0,.92)"},cyan:{fontColor:"#005991",backgroundColor:"rgba(230,252,255,.92)"},lake:{fontColor:"#005b49",backgroundColor:"rgba(224,255,249,.92)"},green:{fontColor:"#007d03",backgroundColor:"rgba(236,255,236,.92)"},blue:{fontColor:"#0058c4",backgroundColor:"rgba(220,235,255,.92)"},indigo:{fontColor:"#003860",backgroundColor:"rgba(220,235,255,.92)"},grey:{fontColor:"#ffffff",backgroundColor:"rgba(74,101,127,.92)"},black:{fontColor:"#ffffff",backgroundColor:"rgba(30,30,30,.9)"},yellow:{fontColor:"#aa5800",backgroundColor:"rgba(255,253,225,.92)"},golden:{fontColor:"#844c03",backgroundColor:"rgba(255,238,205,.92)"},catskill:{fontColor:"#2e3f50",backgroundColor:"rgba(238,243,246,.92)"},white:{fontColor:"black",backgroundColor:"rgba(255,255,255,.92)"}};const tg={name:"mew-toast",emits:["remove"],mixins:[qv],data(){return{hold:!1,timer:null,trial:0}},mounted(){this.stick||(this.trial=parseInt(this.delay),this.timer=setInterval(()=>{this.hold||(this.trial-=1,this.trial<=0&&this.$emit("remove"))},1e3))},beforeUnmount(){clearInterval(this.timer)},computed:{theme(){return this.color?eg[this.color]:!1},sheet(){let e="";return this.theme&&(e+="color:"+this.theme.fontColor+";background-color:"+this.theme.backgroundColor+";"),this.css&&(e+=this.css),e},names(){let e="";return this.icon&&(e+="pl "),this.close&&(e+="pr "),this.title&&(e+="title "),e+this.class}}},rg={class:"mew-toast-ctx",flex:"",column:""},ng={key:0,class:"mew-toast-title"},ig={class:"mew-toast-texts"};function sg(e,t,n,i,r,s){return ae(),fe("li",{flex:"",relative:"",class:_e(["mew-toast",[s.names]]),style:Ht(s.sheet),onMouseenter:t[1]||(t[1]=o=>r.hold=!0),onMouseleave:t[2]||(t[2]=o=>r.hold=!1)},[e.icon?(ae(),fe("i",{key:0,class:_e(["mew-toast-icon",["mew-icon-"+e.icon]])},null,2)):ke("",!0),ie("div",rg,[e.title?(ae(),fe("i",ng,Le(e.title),1)):ke("",!0),ie("i",ig,Le(e.text),1)]),e.close?(ae(),fe("i",{key:1,class:"mew-icon-form-close",onClick:t[0]||(t[0]=o=>e.$emit("remove"))})):ke("",!0)],38)}var ag=xe(tg,[["render",sg]]);const og={name:"mew-notes",mounted(){},components:{toast:ag},data(){return{notes:Nt}},methods:{remove(e){for(let t=0;t<this.notes.length;t++)if(this.notes[t].id===e){this.notes.splice(t,1);break}}}},lg={class:"mew-notify",noselect:""};function ug(e,t,n,i,r,s){const o=Ce("toast");return ae(),fe("div",lg,[he(Id,{name:"tikup",tag:"ul"},{default:rt(()=>[(ae(!0),fe(Re,null,Hs(r.notes,(u,D)=>(ae(),Ze(o,{close:u.close,class:_e(u.class),color:u.color,title:u.title,stick:u.stick,delay:u.delay,text:u.text,icon:u.icon,css:u.style,key:u.id,onRemove:C=>s.remove(u.id)},null,8,["close","class","color","title","stick","delay","text","icon","css","onRemove"]))),128))]),_:1})])}var fg=xe(og,[["render",ug]]);const cg={name:"mew-field-wrapper",created(){this.selecting.wrapper=this},data(){return{selecting:vu}},methods:{unload(){this.$el.style.paddingLeft="",this.$el.style.paddingTop="",this.$refs.shadow.style="",this.$refs.shadow.parentNode.replaceChild(this.selecting.target.$el,this.$refs.shadow),this.$el.appendChild(this.$refs.shadow),this.selecting.keepFocus&&this.selecting.target.$el.getElementsByTagName(this.selecting.target.area?"textarea":"input")[0].focus(),this.selecting.target=null}},watch:{"selecting.target":function(e){if(e){let t=this.selecting.target.$el.getElementsByClassName("mew-field-dropList")[0],n=getComputedStyle(t);n.left==="auto"&&t.style.setProperty("--bl",0),n.top==="auto"&&t.style.setProperty("--bt",0),n.width==="auto"&&(t.style.setProperty("--bl",0),t.style.setProperty("--br",0));let i=getComputedStyle(this.selecting.target.$el),r=this.selecting.target.$el.getBoundingClientRect(),s="vertical-align:top;";s+="width:"+Math.round(r.width)+"px;height:"+Math.round(r.height)+"px;position:"+i.position+";left:"+i.left+";right:"+i.right+";transform:"+i.transform,this.$refs.shadow.style=s,t.style.setProperty("--boxShadow",i.boxShadow),this.selecting.target.$el.parentNode.replaceChild(this.$refs.shadow,this.selecting.target.$el),this.$el.appendChild(this.selecting.target.$el),this.$el.style.paddingLeft=r.x+"px",this.$el.style.paddingTop=r.y+"px",this.selecting.keepFocus=!0,this.$nextTick(()=>{if(e){t.style.setProperty("--paddingTop",this.selecting.target.$el.offsetHeight+"px");let o=n.color.split(","),u=o[0]+","+o[1]+","+parseInt(o[2])+", 0.04)";t.style.setProperty("--hoverColor",u)}})}}}},dg={ref:"shadow","inline-block":""};function hg(e,t,n,i,r,s){return ae(),fe("div",{id:"mew-field-wrapper",class:_e({valid:r.selecting.target}),onClick:t[0]||(t[0]=Fr((...o)=>s.unload&&s.unload(...o),["self"])),onMousewheel:t[1]||(t[1]=Fr((...o)=>s.unload&&s.unload(...o),["self"]))},[ie("div",dg,null,512)],34)}var vg=xe(cg,[["render",hg]]);const gg={name:"app",components:{matte:Xv,color:Jv,notes:fg,fieldWrapper:vg}};function mg(e,t,n,i,r,s){const o=Ce("color"),u=Ce("matte"),D=Ce("notes"),C=Ce("field-wrapper");return ae(),fe(Re,null,[he(o),he(u),he(D),he(C)],64)}var pg=xe(gg,[["render",mg]]);let Js=document.createElement("div");Js.setAttribute("id","mew");document.body.appendChild(Js);Hl(pg).mount(Js);const Eg={name:"mew-btn",emits:["click"],props:{disabled:{type:Boolean,default:!1},vanilla:{type:Boolean,default:!1}},data(){return{n:0}},methods:{click(){this.$emit("click"),this.n=this.n===1?2:1}}};function yg(e,t,n,i,r,s){return ae(),fe("button",{class:_e(["mew-btn",{vanilla:n.vanilla,disabled:n.disabled,foo:r.n===1,bar:r.n===2}]),onClick:t[0]||(t[0]=(...o)=>s.click&&s.click(...o))},[Qt(e.$slots,"default",{},void 0,!0)],2)}var Tg=xe(Eg,[["render",yg],["__scopeId","data-v-a064d9ca"]]);const xg={name:"mew-vid-err"},Sg={white:"",lighten:"",column:"",jc:"",ac:""},_g=ie("div",{jc:""}," Sorry, your browser does not support this video. ",-1),Ag=ie("div",{jc:""},[st(" Please try other "),ie("a",{href:"https://videojs.com/html5-video-support/",target:"_blank","pl-sm":""},"web browsers")],-1),bg=[_g,Ag];function Lg(e,t,n,i,r,s){return ae(),fe("div",Sg,bg)}var Dg=xe(xg,[["render",Lg]]);const Og={name:"mew-vid-mxvideo",components:{err:Dg},inject:["v"],emits:["load"],mounted(){this.v.el=this.$el},watch:{"v.playing":function(e){this.$parent.$emit(e?"play":"pause")}},methods:{initialize(){this.$el.playbackRate=1,this.v.time=0,this.v.rate="1.0",this.v.loop||(this.v.playing=!1)},updateTime(){this.v.time=this.$el.currentTime},autoplay(){this.v.autoplay&&(this.v.volume=0,this.v.playing=!0)}}},Cg=["autoplay","volume","poster","loop"];function Rg(e,t,n,i,r,s){const o=Ce("err");return ae(),fe("video",{fill:"",onContextmenu:t[0]||(t[0]=Fr(()=>{},["prevent"])),controlsList:"nodownload",onLoadstart:t[1]||(t[1]=(...u)=>s.initialize&&s.initialize(...u)),onLoadedmetadata:t[2]||(t[2]=u=>{s.v.duration=e.$el.duration,e.$parent.$emit("load",e.$el.duration),s.autoplay()}),onTimeupdate:t[3]||(t[3]=u=>{s.updateTime(),e.$parent.$emit("playing",s.v.time)}),onEnded:t[4]||(t[4]=u=>{s.initialize(),e.$parent.$emit("end")}),onWaiting:t[5]||(t[5]=u=>{s.v.loading=!0,e.$parent.$emit("wait")}),onCanplay:t[6]||(t[6]=u=>s.v.loading=!1),autoplay:s.v.autoplay,volume:s.v.volume,poster:s.v.poster,loop:s.v.loop,type:"video/mp4"},[he(o)],40,Cg)}var Pg=xe(Og,[["render",Rg]]);const Ig={name:"timeline",inject:["v"],data(){return{time:0}},watch:{"v.time":function(e){this.time=e}},methods:{}},Mg={class:"mew-vid-timeline"},Fg=["value","max"],wg=["value","max"],Bg=["max"];function kg(e,t,n,i,r,s){return ae(),fe("div",Mg,[ie("progress",{class:"loaded",value:s.v.buffered,max:s.v.duration},null,8,Fg),ie("progress",{class:"played",value:s.v.time,max:s.v.duration},null,8,wg),jt(ie("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.v.time=o),onInput:t[1]||(t[1]=o=>s.v.el.currentTime=r.time),max:s.v.duration,min:"0",type:"range",step:"any"},null,40,Bg),[[Ln,s.v.time]])])}var Ug=xe(Ig,[["render",kg]]);const Ng={name:"playBtn",inject:["v"],watch:{"v.playing":function(e){this.v.el[e?"play":"pause"]()}}},Kg={class:"mew-vid-playBtn",ac:"",jc:""},jg=["title"],Wg={key:0,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},Hg=ie("path",{d:"M11.446 10.302C11.446 7.10226 15.0164 5.1977 17.6739 6.97978L38.1548 20.7141C40.5203 22.3004 40.5171 25.7807 38.1485 27.3626L17.6676 41.0413C15.0096 42.8165 11.446 40.9112 11.446 37.7149V10.302Z",fill:"white"},null,-1),Gg=[Hg],$g={key:1,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},Vg=ie("path",{d:"M11.9189 8.96134C11.9189 7.30449 13.2621 5.96134 14.9189 5.96134H17.7406C19.3975 5.96134 20.7406 7.30448 20.7406 8.96134V39.0387C20.7406 40.6955 19.3975 42.0387 17.7406 42.0387H14.9189C13.2621 42.0387 11.9189 40.6955 11.9189 39.0387V8.96134Z",fill:"white"},null,-1),zg=ie("path",{d:"M27.2594 8.96134C27.2594 7.30449 28.6025 5.96133 30.2594 5.96133H33.0811C34.7379 5.96133 36.0811 7.30448 36.0811 8.96133V39.0387C36.0811 40.6955 34.7379 42.0387 33.0811 42.0387H30.2594C28.6025 42.0387 27.2594 40.6955 27.2594 39.0387V8.96134Z",fill:"white"},null,-1),Yg=[Vg,zg];function Xg(e,t,n,i,r,s){return ae(),fe("div",Kg,[ie("i",{onClick:t[0]||(t[0]=o=>s.v.playing=!s.v.playing),title:s.v.playing?"Pause (space)":"Play (space)"},[he(bn,{name:"tikLeft"},{default:rt(()=>[s.v.playing?(ae(),fe("svg",$g,Yg)):(ae(),fe("svg",Wg,Gg))]),_:1})],8,jg)])}var Qg=xe(Ng,[["render",Xg]]);const Zg={name:"mew-vid-clock",inject:["v"],computed:{time(){return this.parse(this.v.time)},duration(){return this.parse(this.v.duration)}},methods:{parse(e){let t=parseInt(e/60);t<10&&(t="0"+t);let n=parseInt(e%60);return n<10&&(n="0"+n),t+":"+n}}},Jg={class:"mew-vid-clock",jc:""};function qg(e,t,n,i,r,s){return ae(),fe("div",Jg,[ie("i",null,Le(s.time),1),ie("i",null,Le(s.duration),1)])}var em=xe(Zg,[["render",qg]]);const tm={name:"mew-vid-rates",inject:["v"],data(){return{valid:!0}},watch:{valid(e){if(!e){let t=setTimeout(()=>{this.valid=!0,clearTimeout(t)},500)}},"v.rate":function(e){this.valid=!1,this.v.el.playbackRate=Number(e)}}},rm={class:"mew-vid-rates"},nm={class:"mew-vid-rates-value",xs:""},im=["onClick"];function sm(e,t,n,i,r,s){return ae(),fe("div",rm,[ie("div",nm,Le(s.v.rate),1),jt(ie("ul",{onMouseleave:t[0]||(t[0]=o=>r.valid=!1)},[(ae(!0),fe(Re,null,Hs(s.v.rates,o=>(ae(),fe("li",{class:_e({current:o===s.v.rate}),onClick:u=>s.v.rate=o},Le(o),11,im))),256))],544),[[fr,r.valid]])])}var am=xe(tm,[["render",sm]]);const om={name:"mew-vid-setting",inject:["v"],mounted(){this.v.loop=localStorage.getItem("mew-vid-replay")!=="false"},data(){return{valid:!1,flag:!1}},methods:{toggle(){this.valid=!this.valid},blur(e){this.valid=e}},watch:{valid(e){e&&this.$nextTick(()=>{this.$refs.option.focus()})},"v.loop":function(e){localStorage.setItem("mew-vid-replay",e)}}},lm={class:"icon",title:"Settings"},um=ie("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M33.4 20C33.4 20.66 33.36 21.28 33.28 21.88L37.3 25.04C37.68 25.32 37.78 25.82 37.54 26.26L33.7 32.9C33.46 33.34 32.96 33.5 32.52 33.34L27.74 31.42C26.76 32.18 25.68 32.82 24.5 33.3L23.78 38.38C23.72 38.86 23.32 39.2 22.84 39.2H15.16C14.68 39.2 14.3 38.86 14.2 38.38L13.48 33.3C12.3 32.82 11.24 32.18 10.24 31.42L5.46 33.34C5.02 33.48 4.52 33.34 4.28 32.9L0.44 26.26C0.22 25.86 0.32 25.32 0.68 25.04L4.74 21.88C4.64 21.28 4.6 20.62 4.6 20C4.6 19.38 4.68 18.72 4.78 18.12L0.72 14.96C0.32 14.68 0.24 14.16 0.48 13.74L4.3 7.1C4.54 6.66 5.04 6.5 5.48 6.66L10.26 8.58C11.24 7.84 12.32 7.18 13.5 6.7L14.22 1.62C14.3 1.14 14.68 0.8 15.16 0.8H22.84C23.32 0.8 23.72 1.14 23.8 1.62L24.52 6.7C25.7 7.18 26.76 7.82 27.76 8.58L32.54 6.66C32.98 6.52 33.48 6.66 33.72 7.1L37.56 13.74C37.78 14.14 37.68 14.68 37.32 14.96L33.26 18.12C33.36 18.72 33.4 19.36 33.4 20ZM19 26.0599C22.3468 26.0599 25.0599 23.3468 25.0599 20C25.0599 16.6532 22.3468 13.9401 19 13.9401C15.6532 13.9401 12.9401 16.6532 12.9401 20C12.9401 23.3468 15.6532 26.0599 19 26.0599Z"},null,-1),fm=[um],cm=ie("i",{class:"name"},"Replay",-1),dm={key:0,class:"info",ac:"",jc:""};function hm(e,t,n,i,r,s){const o=Ce("ico");return ae(),fe("div",{class:_e(["mew-vid-setting",{mobile:e.$global.mobile}]),jc:"",ac:""},[ie("i",lm,[(ae(),fe("svg",{width:"38",height:"40",viewBox:"0 0 38 40",fill:"none",onClick:t[0]||(t[0]=(...u)=>s.toggle&&s.toggle(...u)),onMouseenter:t[1]||(t[1]=u=>r.flag=!0),onMouseleave:t[2]||(t[2]=u=>r.flag=!1)},fm,32)),jt(ie("ul",{ref:"option",tabindex:"0",onBlur:t[4]||(t[4]=u=>s.blur(r.flag))},[ie("li",{class:_e(["replay",{green:s.v.loop}]),jsb:"",ac:"",onClick:t[3]||(t[3]=u=>s.v.loop=!s.v.loop)},[cm,he(o,{class:"switch",dense:""},{default:rt(()=>[st(Le(s.v.loop?"setting-switch-right":"setting-switch-left"),1)]),_:1})],2),s.v.info?(ae(),fe("li",dm,[ie("i",null,Le(s.v.info),1)])):ke("",!0)],544),[[fr,r.valid]])])],2)}var vm=xe(om,[["render",hm]]);const gm={name:"volume",inject:["v"],mounted(){let e=localStorage.getItem("volume");this.v.volume=e||1},data(){return{tink:"",temp:0}},watch:{"v.volume":function(e){localStorage.setItem("volume",e)}},methods:{toggle(){this.tink=this.tink==="foo"?"bar":"foo",this.v.volume>0?(this.temp=this.v.volume,this.v.volume=0):this.v.volume=this.temp?this.temp:.2}}},mm={key:0,class:"mew-vid-volume"},pm={class:"mew-vid-volume-wrapper"},Em={class:"slider"},ym=["value"],Tm=["title"],xm={key:0,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},Sm=ie("path",{d:"M7 16V31.0641H12L23 41V6L12 16H7ZM32.143 24C32.143 20.1653 29.9087 16.8723 26.6669 15.2691V32.7092C29.9087 31.1277 32.143 27.8347 32.143 24ZM26.6669 5V9.46294C32.9973 11.3261 37.6191 17.1323 37.6191 24C37.6191 30.8677 32.9973 36.6739 26.6669 38.5371V43C35.4506 41.0285 42 33.2725 42 24C42 14.7275 35.4506 6.97149 26.6669 5Z"},null,-1),_m=[Sm],Am={key:1,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},bm=ie("path",{d:"M26.6669 5V9.46294C32.9973 11.3261 37.6191 17.1323 37.6191 24C37.6191 30.8677 32.9973 36.6739 26.6669 38.5371V43C35.4506 41.0285 42 33.2725 42 24C42 14.7275 35.4506 6.97149 26.6669 5Z","fill-opacity":"0.5"},null,-1),Lm=ie("path",{d:"M7 16V31.0641H12L23 41V6L12 16H7ZM32.143 24C32.143 20.1653 29.9087 16.8723 26.6669 15.2691V32.7092C29.9087 31.1277 32.143 27.8347 32.143 24Z"},null,-1),Dm=[bm,Lm],Om={key:2,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},Cm=ie("path",{d:"M26.6669 5V9.46294C32.9973 11.3261 37.6191 17.1323 37.6191 24C37.6191 30.8677 32.9973 36.6739 26.6669 38.5371V43C35.4506 41.0285 42 33.2725 42 24C42 14.7275 35.4506 6.97149 26.6669 5Z","fill-opacity":"0.5"},null,-1),Rm=ie("path",{d:"M32.143 24C32.143 20.1653 29.9087 16.8723 26.6669 15.2691V32.7092C29.9087 31.1277 32.143 27.8347 32.143 24Z","fill-opacity":"0.5"},null,-1),Pm=ie("path",{d:"M7 16V31.0641H12L23 41V6L12 16H7Z"},null,-1),Im=[Cm,Rm,Pm],Mm={key:3,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},Fm=ie("path",{d:"M26.6669 5V9.46294C32.9973 11.3261 37.6191 17.1323 37.6191 24C37.6191 30.8677 32.9973 36.6739 26.6669 38.5371V43C35.4506 41.0285 42 33.2725 42 24C42 14.7275 35.4506 6.97149 26.6669 5Z",fill:"white","fill-opacity":"0.5"},null,-1),wm=ie("path",{d:"M32.143 24C32.143 20.1653 29.9087 16.8723 26.6669 15.2691V32.7092C29.9087 31.1277 32.143 27.8347 32.143 24Z",fill:"white","fill-opacity":"0.5"},null,-1),Bm=ie("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.8702 10.6634L23 16V6L17.8702 10.6634Z",fill:"white"},null,-1),km=ie("path",{d:"M7 16V31.0641H12L23 41V28.2069L33.8064 39.0133L37.0133 35.8064L7.2069 6L4 9.2069L10.7931 16H7Z",fill:"white"},null,-1),Um=[Fm,wm,Bm,km];function Nm(e,t,n,i,r,s){return e.$global.mobile?ke("",!0):(ae(),fe("div",mm,[ie("div",pm,[ie("div",Em,[ie("progress",{value:s.v.volume,max:"1"},null,8,ym),jt(ie("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=o=>s.v.volume=o),step:"any",min:"0",max:"1"},null,512),[[Ln,s.v.volume]])]),ie("i",{class:_e([r.tink]),onClick:t[1]||(t[1]=(...o)=>s.toggle&&s.toggle(...o)),title:s.v.volume===0?"Unmute (M)":"Mute (M)"},[s.v.volume>=.6?(ae(),fe("svg",xm,_m)):s.v.volume>=.3&&s.v.volume<.6?(ae(),fe("svg",Am,Dm)):s.v.volume>0&&s.v.volume<.3?(ae(),fe("svg",Om,Im)):(ae(),fe("svg",Mm,Um))],10,Tm)])]))}var Km=xe(gm,[["render",Nm]]);const jm={name:"mew-vid-screen",inject:["v"],mounted(){this.prev=this.v.$el.previousSibling,this.next=this.v.$el.nextSibling,this.wrap=this.v.$el.parentNode;let e=this;document.addEventListener("fullscreenchange",e.checkFullScreen)},beforeUnmount(){let e=this;document.removeEventListener("fullscreenchange",e.checkFullScreen)},data(){return{prev:null,next:null,wrap:null,fullScreened:!1}},watch:{"v.cinematic":function(e){e?document.getElementById("mew").appendChild(this.v.$el):this.prev?this.wrap.insertBefore(this.v.$el,this.prev.nextSibling):this.next?this.wrap.insertBefore(this.v.$el,this.next):this.wrap.appendChild(this.v.$el),this.$parent.$el.focus()}},methods:{togglePinP(){document.pictureInPictureElement?document.exitPictureInPicture():this.v.el.requestPictureInPicture()},toggle(){document.fullscreenElement?document.exitFullscreen():this.v.$el.requestFullscreen().catch(e=>{console.log(e)})},checkFullScreen(){this.fullScreened=Boolean(document.fullscreenElement)}}},Wm={key:0,class:"mew-vid-screen mew-vid-picture",jc:""},Hm=ie("svg",{width:"35",height:"29",viewBox:"0 0 35 29",fill:"none"},[ie("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M35 0H0V29H35V0ZM32 3H3V26H32V3Z"}),ie("path",{d:"M16 13H30V24H16V13Z"})],-1),Gm=[Hm],$m={class:"mew-vid-screen mew-vid-cinema",jc:""},Vm=["title"],zm=ie("svg",{width:"35",height:"29",viewBox:"0 0 35 29",fill:"none"},[ie("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M35 0H0V29H35V0ZM32 3H3V26H32V3Z"}),ie("path",{d:"M7 7H28V22H7V7Z"})],-1),Ym=[zm],Xm={class:"mew-vid-screen mew-vid-fullscreen",jc:""},Qm=["title"],Zm={key:0,width:"30",height:"29",viewBox:"0 0 30 29",fill:"none"},Jm=ie("path",{d:"M9.89965 3.5H3.54751L3.5 11H0L0.0474933 0H9.89963L9.89965 3.5Z"},null,-1),qm=ie("path",{d:"M26.5475 3.5H19.3717L19.3716 0H29.9999L29.9524 11H26.5L26.5475 3.5Z"},null,-1),ep=ie("path",{d:"M26.5475 25.5V19H29.9999L30 29H19.3717L19.3717 25.5H26.5475Z"},null,-1),tp=ie("path",{d:"M0.0475038 19L0.0475259 29H9.70961L9.70959 25.5H3.50001L3.50001 19H0.0475038Z"},null,-1),rp=[Jm,qm,ep,tp],np={key:1,width:"30",height:"29",viewBox:"0 0 30 29",fill:"none"},ip=ie("path",{d:"M0.0476086 7.5H6.39974L6.44726 0H9.94726L9.89976 11H0.0476295L0.0476086 7.5Z"},null,-1),sp=ie("path",{d:"M22.8241 7.5H30L30 11H19.3717L19.4192 0H22.8716L22.8241 7.5Z"},null,-1),ap=ie("path",{d:"M22.8242 22.5V29H19.3718L19.3718 19H30L30.0001 22.5H22.8242Z"},null,-1),op=ie("path",{d:"M9.70971 29L9.70969 19H0.0476074L0.0476303 22.5H6.25721L6.25721 29H9.70971Z"},null,-1),lp=[ip,sp,ap,op];function up(e,t,n,i,r,s){return ae(),fe(Re,null,[e.$global.mobile?ke("",!0):(ae(),fe("div",Wm,[ie("i",{onClick:t[0]||(t[0]=(...o)=>s.togglePinP&&s.togglePinP(...o)),title:"Mini player and always front"},Gm)])),ie("div",$m,[ie("i",{title:s.v.cinematic?"Default view (V)":"Theater mode (V)",onClick:t[1]||(t[1]=o=>s.v.cinematic=!s.v.cinematic)},Ym,8,Vm)]),ie("div",Xm,[ie("i",{title:r.fullScreened?"Exit fullscreen (F)":"Enter fullscreen (F)",onClick:t[2]||(t[2]=(...o)=>s.toggle&&s.toggle(...o))},[r.fullScreened?(ae(),fe("svg",np,lp)):(ae(),fe("svg",Zm,rp))],8,Qm)])],64)}var fp=xe(jm,[["render",up]]);const cp={name:"mew-vid-info",inject:["v"],props:["x","y"],computed:{style(){return"left: "+this.x+"px;top:"+this.y+"px"}}},dp=["innerHTML"];function hp(e,t,n,i,r,s){return ae(),fe("div",{class:"mew-vid-info",innerHTML:s.v.info,style:Ht(s.style)},null,12,dp)}var vp=xe(cp,[["render",hp]]);const gp={name:"mew-vid-control",inject:["v"],components:{spinner:pu,timeline:Ug,playBtn:Qg,clock:em,rates:am,setting:vm,volume:Km,screen:fp,info:vp},mounted(){this.$el.focus()},beforeUnmount(){this.timers.forEach(e=>{e&&clearTimeout(e)})},data(){return{stopped:!0,actived:!1,hovered:!1,timers:[null,null,null],contextmenu:{x:0,y:0,valid:!1}}},watch:{"v.playing":function(e){this.timers[0]&&clearTimeout(this.timers[0]),e?this.timers[0]=setTimeout(()=>{this.stopped=!1,clearTimeout(this.timers[0]),this.timers[0]=null},2500):this.stopped=!0},actived:function(e){e&&(this.timers[1]=setTimeout(()=>{this.actived=!1,clearTimeout(this.timers[1]),this.timers[1]=null},2500))},hovered:function(e){e&&this.timers[2]&&(console.log(1),clearTimeout(this.timers[2]),this.timers[2]=null)}},computed:{visible(){return this.stopped||this.actived||this.hovered}},methods:{showInfo(e){this.v.info&&(this.contextmenu.x=e.offsetX,this.contextmenu.y=e.offsetY,this.contextmenu.valid=!0,this.$nextTick(()=>{this.$refs.info.$el.focus()}))},keydown(){switch(event.code){case"Escape":this.v.cinematic=!1;break;case"ArrowRight":this.v.el.currentTime+=2;break;case"ArrowLeft":this.v.el.currentTime-=2;break;case"Enter":case"Space":this.v.playing=!this.v.playing;break;case"ArrowUp":this.v.volume=this.v.volume<.9?Number(this.v.volume)+.1:1;break;case"ArrowDown":this.v.volume=this.v.volume>.1?this.v.volume-.1:0;break;case"KeyM":this.$.components.volume.methods.toggle.call(this);break;case"KeyF":this.$.components.screen.methods.toggle.call(this);break;case"KeyV":this.v.cinematic=!this.v.cinematic;break}},handle(e){e==="mouseenter"?(this.timers[2]&&(clearTimeout(this.timers[2]),this.timers[2]=null),this.hovered=!0):this.timers[2]=setTimeout(()=>{this.hovered=!1,clearTimeout(this.timers[2]),this.timers[2]=null},1e3)}}},mp={key:0,class:"mew-vid-loading",jc:"",ac:""},pp={ac:"","col-25":"",style:{position:"relative","z-index":"10"}},Ep=ie("div",{style:{"flex-grow":"1"}},null,-1);function yp(e,t,n,i,r,s){const o=Ce("spinner"),u=Ce("timeline"),D=Ce("playBtn"),C=Ce("clock"),A=Ce("rates"),_=Ce("setting"),p=Ce("volume"),L=Ce("screen"),O=Ce("info");return ae(),fe("div",{class:_e(["mew-vid-control",{visible:s.visible}]),fill:"",column:"",je:"",tabindex:"0",onKeydown:t[8]||(t[8]=Fr((...R)=>s.keydown&&s.keydown(...R),["prevent"])),onMouseenter:t[9]||(t[9]=R=>{e.$el.focus(),r.actived=!0})},[ie("div",{class:"mew-vid-viewport",onClick:t[0]||(t[0]=R=>s.v.playing=!s.v.playing),jc:"",ac:"",onDblclick:t[1]||(t[1]=R=>e.$.components.screen.methods.toggle.call(this)),onMousemove:t[2]||(t[2]=R=>r.actived=!0),onContextmenu:t[3]||(t[3]=Fr((...R)=>s.showInfo&&s.showInfo(...R),["prevent"]))},[s.v.loading?(ae(),fe("div",mp,[he(o,{fill:""})])):ke("",!0)],32),jt(ie("div",{class:"mew-vid-bench",column:"",je:"",onMouseenter:t[4]||(t[4]=R=>s.handle("mouseenter")),onContextmenu:t[5]||(t[5]=Fr(()=>{},["prevent"])),onMouseleave:t[6]||(t[6]=R=>s.handle("mouseleave"))},[he(u),ie("div",pp,[he(D),he(C),Ep,he(A),he(_),he(p),he(L)])],544),[[fr,s.visible]]),jt(he(u,{"nd-md":"",style:{"pointer-events":"none"}},null,512),[[fr,!s.visible]]),s.v.info?jt((ae(),Ze(O,{key:0,ref:"info",tabindex:"0",onBlur:t[7]||(t[7]=R=>r.contextmenu.valid=!1),x:r.contextmenu.x,y:r.contextmenu.y},null,8,["x","y"])),[[fr,r.contextmenu.valid]]):ke("",!0)],34)}var Tp=xe(gp,[["render",yp]]),ms=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function xp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qy(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),t}var yu={exports:{}};(function(e,t){typeof window!="undefined"&&function(i,r){e.exports=r()}(ms,function(){return function(n){var i={};function r(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=i,r.d=function(s,o,u){r.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:u})},r.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,o){if(o&1&&(s=r(s)),o&8||o&4&&typeof s=="object"&&s&&s.__esModule)return s;var u=Object.create(null);if(r.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:s}),o&2&&typeof s!="string")for(var D in s)r.d(u,D,function(C){return s[C]}.bind(null,D));return u},r.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(o,"a",o),o},r.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(n,i,r){var s=Object.prototype.hasOwnProperty,o="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(o=!1));function D(p,L,O){this.fn=p,this.context=L,this.once=O||!1}function C(p,L,O,R,T){if(typeof O!="function")throw new TypeError("The listener must be a function");var y=new D(O,R||p,T),l=o?o+L:L;return p._events[l]?p._events[l].fn?p._events[l]=[p._events[l],y]:p._events[l].push(y):(p._events[l]=y,p._eventsCount++),p}function A(p,L){--p._eventsCount===0?p._events=new u:delete p._events[L]}function _(){this._events=new u,this._eventsCount=0}_.prototype.eventNames=function(){var L=[],O,R;if(this._eventsCount===0)return L;for(R in O=this._events)s.call(O,R)&&L.push(o?R.slice(1):R);return Object.getOwnPropertySymbols?L.concat(Object.getOwnPropertySymbols(O)):L},_.prototype.listeners=function(L){var O=o?o+L:L,R=this._events[O];if(!R)return[];if(R.fn)return[R.fn];for(var T=0,y=R.length,l=new Array(y);T<y;T++)l[T]=R[T].fn;return l},_.prototype.listenerCount=function(L){var O=o?o+L:L,R=this._events[O];return R?R.fn?1:R.length:0},_.prototype.emit=function(L,O,R,T,y,l){var a=o?o+L:L;if(!this._events[a])return!1;var f=this._events[a],d=arguments.length,m,h;if(f.fn){switch(f.once&&this.removeListener(L,f.fn,void 0,!0),d){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,O),!0;case 3:return f.fn.call(f.context,O,R),!0;case 4:return f.fn.call(f.context,O,R,T),!0;case 5:return f.fn.call(f.context,O,R,T,y),!0;case 6:return f.fn.call(f.context,O,R,T,y,l),!0}for(h=1,m=new Array(d-1);h<d;h++)m[h-1]=arguments[h];f.fn.apply(f.context,m)}else{var c=f.length,v;for(h=0;h<c;h++)switch(f[h].once&&this.removeListener(L,f[h].fn,void 0,!0),d){case 1:f[h].fn.call(f[h].context);break;case 2:f[h].fn.call(f[h].context,O);break;case 3:f[h].fn.call(f[h].context,O,R);break;case 4:f[h].fn.call(f[h].context,O,R,T);break;default:if(!m)for(v=1,m=new Array(d-1);v<d;v++)m[v-1]=arguments[v];f[h].fn.apply(f[h].context,m)}}return!0},_.prototype.on=function(L,O,R){return C(this,L,O,R,!1)},_.prototype.once=function(L,O,R){return C(this,L,O,R,!0)},_.prototype.removeListener=function(L,O,R,T){var y=o?o+L:L;if(!this._events[y])return this;if(!O)return A(this,y),this;var l=this._events[y];if(l.fn)l.fn===O&&(!T||l.once)&&(!R||l.context===R)&&A(this,y);else{for(var a=0,f=[],d=l.length;a<d;a++)(l[a].fn!==O||T&&!l[a].once||R&&l[a].context!==R)&&f.push(l[a]);f.length?this._events[y]=f.length===1?f[0]:f:A(this,y)}return this},_.prototype.removeAllListeners=function(L){var O;return L?(O=o?o+L:L,this._events[O]&&A(this,O)):(this._events=new u,this._eventsCount=0),this},_.prototype.off=_.prototype.removeListener,_.prototype.addListener=_.prototype.on,_.prefixed=o,_.EventEmitter=_,n.exports=_},"./node_modules/url-toolkit/src/url-toolkit.js":function(n,i,r){(function(s){var o=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,u=/^(?=([^\/?#]*))\1([^]*)$/,D=/(?:\/|^)\.(?=\/)/g,C=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,A={buildAbsoluteURL:function(_,p,L){if(L=L||{},_=_.trim(),p=p.trim(),!p){if(!L.alwaysNormalize)return _;var O=A.parseURL(_);if(!O)throw new Error("Error trying to parse base URL.");return O.path=A.normalizePath(O.path),A.buildURLFromParts(O)}var R=A.parseURL(p);if(!R)throw new Error("Error trying to parse relative URL.");if(R.scheme)return L.alwaysNormalize?(R.path=A.normalizePath(R.path),A.buildURLFromParts(R)):p;var T=A.parseURL(_);if(!T)throw new Error("Error trying to parse base URL.");if(!T.netLoc&&T.path&&T.path[0]!=="/"){var y=u.exec(T.path);T.netLoc=y[1],T.path=y[2]}T.netLoc&&!T.path&&(T.path="/");var l={scheme:T.scheme,netLoc:R.netLoc,path:null,params:R.params,query:R.query,fragment:R.fragment};if(!R.netLoc&&(l.netLoc=T.netLoc,R.path[0]!=="/"))if(!R.path)l.path=T.path,R.params||(l.params=T.params,R.query||(l.query=T.query));else{var a=T.path,f=a.substring(0,a.lastIndexOf("/")+1)+R.path;l.path=A.normalizePath(f)}return l.path===null&&(l.path=L.alwaysNormalize?A.normalizePath(R.path):R.path),A.buildURLFromParts(l)},parseURL:function(_){var p=o.exec(_);return p?{scheme:p[1]||"",netLoc:p[2]||"",path:p[3]||"",params:p[4]||"",query:p[5]||"",fragment:p[6]||""}:null},normalizePath:function(_){for(_=_.split("").reverse().join("").replace(D,"");_.length!==(_=_.replace(C,"")).length;);return _.split("").reverse().join("")},buildURLFromParts:function(_){return _.scheme+_.netLoc+_.path+_.params+_.query+_.fragment}};n.exports=A})()},"./node_modules/webworkify-webpack/index.js":function(n,i,r){function s(L){var O={};function R(y){if(O[y])return O[y].exports;var l=O[y]={i:y,l:!1,exports:{}};return L[y].call(l.exports,l,l.exports,R),l.l=!0,l.exports}R.m=L,R.c=O,R.i=function(y){return y},R.d=function(y,l,a){R.o(y,l)||Object.defineProperty(y,l,{configurable:!1,enumerable:!0,get:a})},R.r=function(y){Object.defineProperty(y,"__esModule",{value:!0})},R.n=function(y){var l=y&&y.__esModule?function(){return y.default}:function(){return y};return R.d(l,"a",l),l},R.o=function(y,l){return Object.prototype.hasOwnProperty.call(y,l)},R.p="/",R.oe=function(y){throw console.error(y),y};var T=R(R.s=ENTRY_MODULE);return T.default||T}var o="[\\.|\\-|\\+|\\w|/|@]+",u="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+o+").*?\\)";function D(L){return(L+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function C(L){return!isNaN(1*L)}function A(L,O,R){var T={};T[R]=[];var y=O.toString(),l=y.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return T;for(var a=l[1],f=new RegExp("(\\\\n|\\W)"+D(a)+u,"g"),d;d=f.exec(y);)d[3]!=="dll-reference"&&T[R].push(d[3]);for(f=new RegExp("\\("+D(a)+'\\("(dll-reference\\s('+o+'))"\\)\\)'+u,"g");d=f.exec(y);)L[d[2]]||(T[R].push(d[1]),L[d[2]]=r(d[1]).m),T[d[2]]=T[d[2]]||[],T[d[2]].push(d[4]);for(var m=Object.keys(T),h=0;h<m.length;h++)for(var c=0;c<T[m[h]].length;c++)C(T[m[h]][c])&&(T[m[h]][c]=1*T[m[h]][c]);return T}function _(L){var O=Object.keys(L);return O.reduce(function(R,T){return R||L[T].length>0},!1)}function p(L,O){for(var R={main:[O]},T={main:[]},y={main:{}};_(R);)for(var l=Object.keys(R),a=0;a<l.length;a++){var f=l[a],d=R[f],m=d.pop();if(y[f]=y[f]||{},!(y[f][m]||!L[f][m])){y[f][m]=!0,T[f]=T[f]||[],T[f].push(m);for(var h=A(L,L[f][m],f),c=Object.keys(h),v=0;v<c.length;v++)R[c[v]]=R[c[v]]||[],R[c[v]]=R[c[v]].concat(h[c[v]])}}return T}n.exports=function(L,O){O=O||{};var R={main:r.m},T=O.all?{main:Object.keys(R.main)}:p(R,L),y="";Object.keys(T).filter(function(m){return m!=="main"}).forEach(function(m){for(var h=0;T[m][h];)h++;T[m].push(h),R[m][h]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",y=y+"var "+m+" = ("+s.toString().replace("ENTRY_MODULE",JSON.stringify(h))+")({"+T[m].map(function(c){return""+JSON.stringify(c)+": "+R[m][c].toString()}).join(",")+`});
`}),y=y+"new (("+s.toString().replace("ENTRY_MODULE",JSON.stringify(L))+")({"+T.main.map(function(m){return""+JSON.stringify(m)+": "+R.main[m].toString()}).join(",")+"}))(self);";var l=new window.Blob([y],{type:"text/javascript"});if(O.bare)return l;var a=window.URL||window.webkitURL||window.mozURL||window.msURL,f=a.createObjectURL(l),d=new window.Worker(f);return d.objectURL=f,d}},"./src/config.ts":function(n,i,r){r.r(i),r.d(i,"hlsDefaultConfig",function(){return v}),r.d(i,"mergeConfig",function(){return b}),r.d(i,"enableStreamingMode",function(){return x});var s=r("./src/controller/abr-controller.ts"),o=r("./src/controller/audio-stream-controller.ts"),u=r("./src/controller/audio-track-controller.ts"),D=r("./src/controller/subtitle-stream-controller.ts"),C=r("./src/controller/subtitle-track-controller.ts"),A=r("./src/controller/buffer-controller.ts"),_=r("./src/controller/timeline-controller.ts"),p=r("./src/controller/cap-level-controller.ts"),L=r("./src/controller/fps-controller.ts"),O=r("./src/controller/eme-controller.ts"),R=r("./src/controller/cmcd-controller.ts"),T=r("./src/utils/xhr-loader.ts"),y=r("./src/utils/fetch-loader.ts"),l=r("./src/utils/cues.ts"),a=r("./src/utils/mediakeys-helper.ts"),f=r("./src/utils/logger.ts");function d(){return d=Object.assign?Object.assign.bind():function(S){for(var g=1;g<arguments.length;g++){var E=arguments[g];for(var I in E)Object.prototype.hasOwnProperty.call(E,I)&&(S[I]=E[I])}return S},d.apply(this,arguments)}function m(S,g){var E=Object.keys(S);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(S);g&&(I=I.filter(function(M){return Object.getOwnPropertyDescriptor(S,M).enumerable})),E.push.apply(E,I)}return E}function h(S){for(var g=1;g<arguments.length;g++){var E=arguments[g]!=null?arguments[g]:{};g%2?m(Object(E),!0).forEach(function(I){c(S,I,E[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(E)):m(Object(E)).forEach(function(I){Object.defineProperty(S,I,Object.getOwnPropertyDescriptor(E,I))})}return S}function c(S,g,E){return g in S?Object.defineProperty(S,g,{value:E,enumerable:!0,configurable:!0,writable:!0}):S[g]=E,S}var v=h(h({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:T.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:s.default,bufferController:A.default,capLevelController:p.default,fpsController:L.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:a.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},P()),{},{subtitleStreamController:D.SubtitleStreamController,subtitleTrackController:C.default,timelineController:_.TimelineController,audioStreamController:o.default,audioTrackController:u.default,emeController:O.default,cmcdController:R.default});function P(){return{cueHandler:l.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function b(S,g){if((g.liveSyncDurationCount||g.liveMaxLatencyDurationCount)&&(g.liveSyncDuration||g.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(g.liveMaxLatencyDurationCount!==void 0&&(g.liveSyncDurationCount===void 0||g.liveMaxLatencyDurationCount<=g.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(g.liveMaxLatencyDuration!==void 0&&(g.liveSyncDuration===void 0||g.liveMaxLatencyDuration<=g.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return d({},S,g)}function x(S){var g=S.loader;if(g!==y.default&&g!==T.default)f.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),S.progressive=!1;else{var E=Object(y.fetchSupported)();E&&(S.loader=y.default,S.progressive=!0,S.enableSoftwareAES=!0,f.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}}},"./src/controller/abr-controller.ts":function(n,i,r){r.r(i);var s=r("./src/polyfills/number.ts"),o=r("./src/utils/ewma-bandwidth-estimator.ts"),u=r("./src/events.ts"),D=r("./src/utils/buffer-helper.ts"),C=r("./src/errors.ts"),A=r("./src/types/loader.ts"),_=r("./src/utils/logger.ts");function p(R,T){for(var y=0;y<T.length;y++){var l=T[y];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(R,l.key,l)}}function L(R,T,y){return T&&p(R.prototype,T),y&&p(R,y),Object.defineProperty(R,"prototype",{writable:!1}),R}var O=function(){function R(y){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=y;var l=y.config;this.bwEstimator=new o.default(l.abrEwmaSlowVoD,l.abrEwmaFastVoD,l.abrEwmaDefaultEstimate),this.registerListeners()}var T=R.prototype;return T.registerListeners=function(){var l=this.hls;l.on(u.Events.FRAG_LOADING,this.onFragLoading,this),l.on(u.Events.FRAG_LOADED,this.onFragLoaded,this),l.on(u.Events.FRAG_BUFFERED,this.onFragBuffered,this),l.on(u.Events.LEVEL_LOADED,this.onLevelLoaded,this),l.on(u.Events.ERROR,this.onError,this)},T.unregisterListeners=function(){var l=this.hls;l.off(u.Events.FRAG_LOADING,this.onFragLoading,this),l.off(u.Events.FRAG_LOADED,this.onFragLoaded,this),l.off(u.Events.FRAG_BUFFERED,this.onFragBuffered,this),l.off(u.Events.LEVEL_LOADED,this.onLevelLoaded,this),l.off(u.Events.ERROR,this.onError,this)},T.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},T.onFragLoading=function(l,a){var f=a.frag;if(f.type===A.PlaylistLevelType.MAIN&&!this.timer){var d;this.fragCurrent=f,this.partCurrent=(d=a.part)!=null?d:null,this.timer=self.setInterval(this.onCheck,100)}},T.onLevelLoaded=function(l,a){var f=this.hls.config;a.details.live?this.bwEstimator.update(f.abrEwmaSlowLive,f.abrEwmaFastLive):this.bwEstimator.update(f.abrEwmaSlowVoD,f.abrEwmaFastVoD)},T._abandonRulesCheck=function(){var l=this.fragCurrent,a=this.partCurrent,f=this.hls,d=f.autoLevelEnabled,m=f.config,h=f.media;if(!(!l||!h)){var c=a?a.stats:l.stats,v=a?a.duration:l.duration;if(c.aborted){_.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;return}if(!(!d||h.paused||!h.playbackRate||!h.readyState)){var P=performance.now()-c.loading.start,b=Math.abs(h.playbackRate);if(!(P<=500*v/b)){var x=f.levels,S=f.minAutoLevel,g=x[l.level],E=c.total||Math.max(c.loaded,Math.round(v*g.maxBitrate/8)),I=Math.max(1,c.bwEstimate?c.bwEstimate/8:c.loaded*1e3/P),M=(E-c.loaded)/I,F=h.currentTime,w=(D.BufferHelper.bufferInfo(h,F,m.maxBufferHole).end-F)/b;if(!(w>=2*v/b||M<=w)){var k=Number.POSITIVE_INFINITY,B;for(B=l.level-1;B>S;B--){var U=x[B].maxBitrate;if(k=v*U/(8*.8*I),k<w)break}if(!(k>=M)){var j=this.bwEstimator.getEstimate();_.logger.warn("Fragment "+l.sn+(a?" part "+a.index:"")+" of level "+l.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+B+`
      Current BW estimate: `+(Object(s.isFiniteNumber)(j)?(j/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+M.toFixed(3)+` s
      Estimated load time for the next fragment: `+k.toFixed(3)+` s
      Time to underbuffer: `+w.toFixed(3)+" s"),f.nextLoadLevel=B,this.bwEstimator.sample(P,c.loaded),this.clearTimer(),l.loader&&(this.fragCurrent=this.partCurrent=null,l.loader.abort()),f.trigger(u.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:l,part:a,stats:c})}}}}}},T.onFragLoaded=function(l,a){var f=a.frag,d=a.part;if(f.type===A.PlaylistLevelType.MAIN&&Object(s.isFiniteNumber)(f.sn)){var m=d?d.stats:f.stats,h=d?d.duration:f.duration;if(this.clearTimer(),this.lastLoadedFragLevel=f.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var c=this.hls.levels[f.level],v=(c.loaded?c.loaded.bytes:0)+m.loaded,P=(c.loaded?c.loaded.duration:0)+h;c.loaded={bytes:v,duration:P},c.realBitrate=Math.round(8*v/P)}if(f.bitrateTest){var b={stats:m,frag:f,part:d,id:f.type};this.onFragBuffered(u.Events.FRAG_BUFFERED,b),f.bitrateTest=!1}}},T.onFragBuffered=function(l,a){var f=a.frag,d=a.part,m=d?d.stats:f.stats;if(!m.aborted&&!(f.type!==A.PlaylistLevelType.MAIN||f.sn==="initSegment")){var h=m.parsing.end-m.loading.start;this.bwEstimator.sample(h,m.loaded),m.bwEstimate=this.bwEstimator.getEstimate(),f.bitrateTest?this.bitrateTestDelay=h/1e3:this.bitrateTestDelay=0}},T.onError=function(l,a){switch(a.details){case C.ErrorDetails.FRAG_LOAD_ERROR:case C.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer();break}},T.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},T.getNextABRAutoLevel=function(){var l=this.fragCurrent,a=this.partCurrent,f=this.hls,d=f.maxAutoLevel,m=f.config,h=f.minAutoLevel,c=f.media,v=a?a.duration:l?l.duration:0,P=c?c.currentTime:0,b=c&&c.playbackRate!==0?Math.abs(c.playbackRate):1,x=this.bwEstimator?this.bwEstimator.getEstimate():m.abrEwmaDefaultEstimate,S=(D.BufferHelper.bufferInfo(c,P,m.maxBufferHole).end-P)/b,g=this.findBestLevel(x,h,d,S,m.abrBandWidthFactor,m.abrBandWidthUpFactor);if(g>=0)return g;_.logger.trace((S?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var E=v?Math.min(v,m.maxStarvationDelay):m.maxStarvationDelay,I=m.abrBandWidthFactor,M=m.abrBandWidthUpFactor;if(!S){var F=this.bitrateTestDelay;if(F){var w=v?Math.min(v,m.maxLoadingDelay):m.maxLoadingDelay;E=w-F,_.logger.trace("bitrate test took "+Math.round(1e3*F)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*E)+" ms"),I=M=1}}return g=this.findBestLevel(x,h,d,S+E,I,M),Math.max(g,0)},T.findBestLevel=function(l,a,f,d,m,h){for(var c,v=this.fragCurrent,P=this.partCurrent,b=this.lastLoadedFragLevel,x=this.hls.levels,S=x[b],g=!!(S!=null&&(c=S.details)!==null&&c!==void 0&&c.live),E=S==null?void 0:S.codecSet,I=P?P.duration:v?v.duration:0,M=f;M>=a;M--){var F=x[M];if(!(!F||E&&F.codecSet!==E)){var w=F.details,k=(P?w==null?void 0:w.partTarget:w==null?void 0:w.averagetargetduration)||I,B=void 0;M<=b?B=m*l:B=h*l;var U=x[M].maxBitrate,j=U*k/B;if(_.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+M+"/"+Math.round(B)+"/"+U+"/"+k+"/"+d+"/"+j),B>U&&(!j||g&&!this.bitrateTestDelay||j<d))return M}}return-1},L(R,[{key:"nextAutoLevel",get:function(){var l=this._nextAutoLevel,a=this.bwEstimator;if(l!==-1&&(!a||!a.canEstimate()))return l;var f=this.getNextABRAutoLevel();return l!==-1&&(f=Math.min(l,f)),f},set:function(l){this._nextAutoLevel=l}}]),R}();i.default=O},"./src/controller/audio-stream-controller.ts":function(n,i,r){r.r(i);var s=r("./src/polyfills/number.ts"),o=r("./src/controller/base-stream-controller.ts"),u=r("./src/events.ts"),D=r("./src/utils/buffer-helper.ts"),C=r("./src/controller/fragment-tracker.ts"),A=r("./src/types/level.ts"),_=r("./src/types/loader.ts"),p=r("./src/loader/fragment.ts"),L=r("./src/demux/chunk-cache.ts"),O=r("./src/demux/transmuxer-interface.ts"),R=r("./src/types/transmuxer.ts"),T=r("./src/controller/fragment-finders.ts"),y=r("./src/utils/discontinuities.ts"),l=r("./src/errors.ts"),a=r("./src/utils/logger.ts");function f(){return f=Object.assign?Object.assign.bind():function(v){for(var P=1;P<arguments.length;P++){var b=arguments[P];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(v[x]=b[x])}return v},f.apply(this,arguments)}function d(v,P){v.prototype=Object.create(P.prototype),v.prototype.constructor=v,m(v,P)}function m(v,P){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,S){return x.__proto__=S,x},m(v,P)}var h=100,c=function(v){d(P,v);function P(x,S){var g;return g=v.call(this,x,S,"[audio-stream-controller]")||this,g.videoBuffer=null,g.videoTrackCC=-1,g.waitingVideoCC=-1,g.audioSwitch=!1,g.trackId=-1,g.waitingData=null,g.mainDetails=null,g.bufferFlushed=!1,g.cachedTrackLoadedData=null,g._registerListeners(),g}var b=P.prototype;return b.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},b._registerListeners=function(){var S=this.hls;S.on(u.Events.MEDIA_ATTACHED,this.onMediaAttached,this),S.on(u.Events.MEDIA_DETACHING,this.onMediaDetaching,this),S.on(u.Events.MANIFEST_LOADING,this.onManifestLoading,this),S.on(u.Events.LEVEL_LOADED,this.onLevelLoaded,this),S.on(u.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),S.on(u.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),S.on(u.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),S.on(u.Events.ERROR,this.onError,this),S.on(u.Events.BUFFER_RESET,this.onBufferReset,this),S.on(u.Events.BUFFER_CREATED,this.onBufferCreated,this),S.on(u.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),S.on(u.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),S.on(u.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b._unregisterListeners=function(){var S=this.hls;S.off(u.Events.MEDIA_ATTACHED,this.onMediaAttached,this),S.off(u.Events.MEDIA_DETACHING,this.onMediaDetaching,this),S.off(u.Events.MANIFEST_LOADING,this.onManifestLoading,this),S.off(u.Events.LEVEL_LOADED,this.onLevelLoaded,this),S.off(u.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),S.off(u.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),S.off(u.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),S.off(u.Events.ERROR,this.onError,this),S.off(u.Events.BUFFER_RESET,this.onBufferReset,this),S.off(u.Events.BUFFER_CREATED,this.onBufferCreated,this),S.off(u.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),S.off(u.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),S.off(u.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b.onInitPtsFound=function(S,g){var E=g.frag,I=g.id,M=g.initPTS;if(I==="main"){var F=E.cc;this.initPTS[E.cc]=M,this.log("InitPTS for cc: "+F+" found from main: "+M),this.videoTrackCC=F,this.state===o.State.WAITING_INIT_PTS&&this.tick()}},b.startLoad=function(S){if(!this.levels){this.startPosition=S,this.state=o.State.STOPPED;return}var g=this.lastCurrentTime;this.stopLoad(),this.setInterval(h),this.fragLoadError=0,g>0&&S===-1?(this.log("Override startPosition with lastCurrentTime @"+g.toFixed(3)),this.state=o.State.IDLE):(this.loadedmetadata=!1,this.state=o.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=S,this.tick()},b.doTick=function(){switch(this.state){case o.State.IDLE:this.doTickIdle();break;case o.State.WAITING_TRACK:{var S,g=this.levels,E=this.trackId,I=g==null||(S=g[E])===null||S===void 0?void 0:S.details;if(I){if(this.waitForCdnTuneIn(I))break;this.state=o.State.WAITING_INIT_PTS}break}case o.State.FRAG_LOADING_WAITING_RETRY:{var M,F=performance.now(),w=this.retryDate;(!w||F>=w||(M=this.media)!==null&&M!==void 0&&M.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=o.State.IDLE);break}case o.State.WAITING_INIT_PTS:{var k=this.waitingData;if(k){var B=k.frag,U=k.part,j=k.cache,H=k.complete;if(this.initPTS[B.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=o.State.FRAG_LOADING;var N=j.flush(),G={frag:B,part:U,payload:N,networkDetails:null};this._handleFragmentLoadProgress(G),H&&v.prototype._handleFragmentLoadComplete.call(this,G)}else if(this.videoTrackCC!==this.waitingVideoCC)a.logger.log("Waiting fragment cc ("+B.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var $=this.getLoadPosition(),z=D.BufferHelper.bufferInfo(this.mediaBuffer,$,this.config.maxBufferHole),ee=Object(T.fragmentWithinToleranceTest)(z.end,this.config.maxFragLookUpTolerance,B);ee<0&&(a.logger.log("Waiting fragment cc ("+B.cc+") @ "+B.start+" cancelled because another fragment at "+z.end+" is needed"),this.clearWaitingFragment())}}else this.state=o.State.IDLE}}this.onTickEnd()},b.clearWaitingFragment=function(){var S=this.waitingData;S&&(this.fragmentTracker.removeFragment(S.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=o.State.IDLE)},b.onTickEnd=function(){var S=this.media;if(!(!S||!S.readyState)){var g=this.mediaBuffer?this.mediaBuffer:S,E=g.buffered;!this.loadedmetadata&&E.length&&(this.loadedmetadata=!0),this.lastCurrentTime=S.currentTime}},b.doTickIdle=function(){var S,g,E=this.hls,I=this.levels,M=this.media,F=this.trackId,w=E.config;if(!(!I||!I[F])&&!(!M&&(this.startFragRequested||!w.startFragPrefetch))){var k=I[F],B=k.details;if(!B||B.live&&this.levelLastLoaded!==F||this.waitForCdnTuneIn(B)){this.state=o.State.WAITING_TRACK;return}this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,p.ElementaryStreamTypes.AUDIO,_.PlaylistLevelType.AUDIO));var U=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,_.PlaylistLevelType.AUDIO);if(U!==null){var j=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,_.PlaylistLevelType.MAIN),H=U.len,N=this.getMaxBufferLength(j==null?void 0:j.len),G=this.audioSwitch;if(!(H>=N&&!G)){if(!G&&this._streamEnded(U,B)){E.trigger(u.Events.BUFFER_EOS,{type:"audio"}),this.state=o.State.ENDED;return}var $=B.fragments,z=$[0].start,ee=U.end;if(G){var X=this.getLoadPosition();ee=X,B.PTSKnown&&X<z&&(U.end>z||U.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),M.currentTime=z+.05)}if(!(j&&ee>j.end+B.targetduration)&&!((!j||!j.len)&&U.len)){var te=this.getNextFragment(ee,B);if(!te){this.bufferFlushed=!0;return}((S=te.decryptdata)===null||S===void 0?void 0:S.keyFormat)==="identity"&&!((g=te.decryptdata)!==null&&g!==void 0&&g.key)?this.loadKey(te,B):this.loadFragment(te,B,ee)}}}}},b.getMaxBufferLength=function(S){var g=v.prototype.getMaxBufferLength.call(this);return S?Math.max(g,S):g},b.onMediaDetaching=function(){this.videoBuffer=null,v.prototype.onMediaDetaching.call(this)},b.onAudioTracksUpdated=function(S,g){var E=g.audioTracks;this.resetTransmuxer(),this.levels=E.map(function(I){return new A.Level(I)})},b.onAudioTrackSwitching=function(S,g){var E=!!g.url;this.trackId=g.id;var I=this.fragCurrent;I!=null&&I.loader&&I.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),E?this.setInterval(h):this.resetTransmuxer(),E?(this.audioSwitch=!0,this.state=o.State.IDLE):this.state=o.State.STOPPED,this.tick()},b.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},b.onLevelLoaded=function(S,g){this.mainDetails=g.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(u.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},b.onAudioTrackLoaded=function(S,g){var E;if(this.mainDetails==null){this.cachedTrackLoadedData=g;return}var I=this.levels,M=g.details,F=g.id;if(!I){this.warn("Audio tracks were reset while loading level "+F);return}this.log("Track "+F+" loaded ["+M.startSN+","+M.endSN+"],duration:"+M.totalduration);var w=I[F],k=0;if(M.live||(E=w.details)!==null&&E!==void 0&&E.live){var B=this.mainDetails;if(M.fragments[0]||(M.deltaUpdateFailed=!0),M.deltaUpdateFailed||!B)return;!w.details&&M.hasProgramDateTime&&B.hasProgramDateTime?(Object(y.alignMediaPlaylistByPDT)(M,B),k=M.fragments[0].start):k=this.alignPlaylists(M,w.details)}w.details=M,this.levelLastLoaded=F,!this.startFragRequested&&(this.mainDetails||!M.live)&&this.setStartPosition(w.details,k),this.state===o.State.WAITING_TRACK&&!this.waitForCdnTuneIn(M)&&(this.state=o.State.IDLE),this.tick()},b._handleFragmentLoadProgress=function(S){var g,E=S.frag,I=S.part,M=S.payload,F=this.config,w=this.trackId,k=this.levels;if(!k){this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+E.sn+" of level "+E.level+" will not be buffered");return}var B=k[w];console.assert(B,"Audio track is defined on fragment load progress");var U=B.details;console.assert(U,"Audio track details are defined on fragment load progress");var j=F.defaultAudioCodec||B.audioCodec||"mp4a.40.2",H=this.transmuxer;H||(H=this.transmuxer=new O.default(this.hls,_.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var N=this.initPTS[E.cc],G=(g=E.initSegment)===null||g===void 0?void 0:g.data;if(N!==void 0){var $=!1,z=I?I.index:-1,ee=z!==-1,X=new R.ChunkMetadata(E.level,E.sn,E.stats.chunkCount,M.byteLength,z,ee);H.push(M,G,j,"",E,I,U.totalduration,$,X,N)}else{a.logger.log("Unknown video PTS for cc "+E.cc+", waiting for video PTS before demuxing audio frag "+E.sn+" of ["+U.startSN+" ,"+U.endSN+"],track "+w);var te=this.waitingData=this.waitingData||{frag:E,part:I,cache:new L.default,complete:!1},se=te.cache;se.push(new Uint8Array(M)),this.waitingVideoCC=this.videoTrackCC,this.state=o.State.WAITING_INIT_PTS}},b._handleFragmentLoadComplete=function(S){if(this.waitingData){this.waitingData.complete=!0;return}v.prototype._handleFragmentLoadComplete.call(this,S)},b.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},b.onBufferCreated=function(S,g){var E=g.tracks.audio;E&&(this.mediaBuffer=E.buffer),g.tracks.video&&(this.videoBuffer=g.tracks.video.buffer)},b.onFragBuffered=function(S,g){var E=g.frag,I=g.part;if(E.type===_.PlaylistLevelType.AUDIO){if(this.fragContextChanged(E)){this.warn("Fragment "+E.sn+(I?" p: "+I.index:"")+" of level "+E.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);return}E.sn!=="initSegment"&&(this.fragPrevious=E,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(u.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(E,I)}},b.onError=function(S,g){switch(g.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(_.PlaylistLevelType.AUDIO,g);break;case l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case l.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==o.State.ERROR&&this.state!==o.State.STOPPED&&(this.state=g.fatal?o.State.ERROR:o.State.IDLE,this.warn(g.details+" while loading frag, switching to "+this.state+" state"));break;case l.ErrorDetails.BUFFER_FULL_ERROR:if(g.parent==="audio"&&(this.state===o.State.PARSING||this.state===o.State.PARSED)){var E=!0,I=this.getFwdBufferInfo(this.mediaBuffer,_.PlaylistLevelType.AUDIO);I&&I.len>.5&&(E=!this.reduceMaxBufferLength(I.len)),E&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,v.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}break}},b.onBufferFlushed=function(S,g){var E=g.type;E===p.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},b._handleTransmuxComplete=function(S){var g,E="audio",I=this.hls,M=S.remuxResult,F=S.chunkMeta,w=this.getCurrentContext(F);if(!w){this.warn("The loading context changed while buffering fragment "+F.sn+" of level "+F.level+". This chunk will not be buffered."),this.resetLiveStartWhenNotLoaded(F.level);return}var k=w.frag,B=w.part,U=w.level.details,j=M.audio,H=M.text,N=M.id3,G=M.initSegment;if(!(this.fragContextChanged(k)||!U)){if(this.state=o.State.PARSING,this.audioSwitch&&j&&this.completeAudioSwitch(),G!=null&&G.tracks&&(this._bufferInitSegment(G.tracks,k,F),I.trigger(u.Events.FRAG_PARSING_INIT_SEGMENT,{frag:k,id:E,tracks:G.tracks})),j){var $=j.startPTS,z=j.endPTS,ee=j.startDTS,X=j.endDTS;B&&(B.elementaryStreams[p.ElementaryStreamTypes.AUDIO]={startPTS:$,endPTS:z,startDTS:ee,endDTS:X}),k.setElementaryStreamInfo(p.ElementaryStreamTypes.AUDIO,$,z,ee,X),this.bufferFragmentData(j,k,B,F)}if(N!=null&&(g=N.samples)!==null&&g!==void 0&&g.length){var te=f({id:E,frag:k,details:U},N);I.trigger(u.Events.FRAG_PARSING_METADATA,te)}if(H){var se=f({id:E,frag:k,details:U},H);I.trigger(u.Events.FRAG_PARSING_USERDATA,se)}}},b._bufferInitSegment=function(S,g,E){if(this.state===o.State.PARSING){S.video&&delete S.video;var I=S.audio;if(!!I){I.levelCodec=I.codec,I.id="audio",this.log("Init audio buffer, container:"+I.container+", codecs[parsed]=["+I.codec+"]"),this.hls.trigger(u.Events.BUFFER_CODECS,S);var M=I.initSegment;if(M!=null&&M.byteLength){var F={type:"audio",frag:g,part:null,chunkMeta:E,parent:g.type,data:M};this.hls.trigger(u.Events.BUFFER_APPENDING,F)}this.tick()}}},b.loadFragment=function(S,g,E){var I=this.fragmentTracker.getState(S);this.fragCurrent=S,(this.audioSwitch||I===C.FragmentState.NOT_LOADED||I===C.FragmentState.PARTIAL)&&(S.sn==="initSegment"?this._loadInitSegment(S):g.live&&!Object(s.isFiniteNumber)(this.initPTS[S.cc])?(this.log("Waiting for video PTS in continuity counter "+S.cc+" of live stream before loading audio fragment "+S.sn+" of level "+this.trackId),this.state=o.State.WAITING_INIT_PTS):(this.startFragRequested=!0,v.prototype.loadFragment.call(this,S,g,E)))},b.completeAudioSwitch=function(){var S=this.hls,g=this.media,E=this.trackId;g&&(this.log("Switching audio track : flushing all audio"),v.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,S.trigger(u.Events.AUDIO_TRACK_SWITCHED,{id:E})},P}(o.default);i.default=c},"./src/controller/audio-track-controller.ts":function(n,i,r){r.r(i);var s=r("./src/events.ts"),o=r("./src/errors.ts"),u=r("./src/controller/base-playlist-controller.ts"),D=r("./src/types/loader.ts");function C(O,R){for(var T=0;T<R.length;T++){var y=R[T];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(O,y.key,y)}}function A(O,R,T){return R&&C(O.prototype,R),T&&C(O,T),Object.defineProperty(O,"prototype",{writable:!1}),O}function _(O,R){O.prototype=Object.create(R.prototype),O.prototype.constructor=O,p(O,R)}function p(O,R){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,l){return y.__proto__=l,y},p(O,R)}var L=function(O){_(R,O);function R(y){var l;return l=O.call(this,y,"[audio-track-controller]")||this,l.tracks=[],l.groupId=null,l.tracksInGroup=[],l.trackId=-1,l.trackName="",l.selectDefaultTrack=!0,l.registerListeners(),l}var T=R.prototype;return T.registerListeners=function(){var l=this.hls;l.on(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),l.on(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),l.on(s.Events.LEVEL_LOADING,this.onLevelLoading,this),l.on(s.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),l.on(s.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),l.on(s.Events.ERROR,this.onError,this)},T.unregisterListeners=function(){var l=this.hls;l.off(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),l.off(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),l.off(s.Events.LEVEL_LOADING,this.onLevelLoading,this),l.off(s.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),l.off(s.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),l.off(s.Events.ERROR,this.onError,this)},T.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,O.prototype.destroy.call(this)},T.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},T.onManifestParsed=function(l,a){this.tracks=a.audioTracks||[]},T.onAudioTrackLoaded=function(l,a){var f=a.id,d=a.details,m=this.tracksInGroup[f];if(!m){this.warn("Invalid audio track id "+f);return}var h=m.details;m.details=a.details,this.log("audioTrack "+f+" loaded ["+d.startSN+"-"+d.endSN+"]"),f===this.trackId&&(this.retryCount=0,this.playlistLoaded(f,a,h))},T.onLevelLoading=function(l,a){this.switchLevel(a.level)},T.onLevelSwitching=function(l,a){this.switchLevel(a.level)},T.switchLevel=function(l){var a=this.hls.levels[l];if(!!(a!=null&&a.audioGroupIds)){var f=a.audioGroupIds[a.urlId];if(this.groupId!==f){this.groupId=f;var d=this.tracks.filter(function(h){return!f||h.groupId===f});this.selectDefaultTrack&&!d.some(function(h){return h.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=d;var m={audioTracks:d};this.log("Updating audio tracks, "+d.length+' track(s) found in "'+f+'" group-id'),this.hls.trigger(s.Events.AUDIO_TRACKS_UPDATED,m),this.selectInitialTrack()}}},T.onError=function(l,a){O.prototype.onError.call(this,l,a),!(a.fatal||!a.context)&&a.context.type===D.PlaylistContextType.AUDIO_TRACK&&a.context.id===this.trackId&&a.context.groupId===this.groupId&&this.retryLoadingOrFail(a)},T.setAudioTrack=function(l){var a=this.tracksInGroup;if(l<0||l>=a.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();var f=a[this.trackId];this.log("Now switching to audio-track index "+l);var d=a[l],m=d.id,h=d.groupId,c=h===void 0?"":h,v=d.name,P=d.type,b=d.url;if(this.trackId=l,this.trackName=v,this.selectDefaultTrack=!1,this.hls.trigger(s.Events.AUDIO_TRACK_SWITCHING,{id:m,groupId:c,name:v,type:P,url:b}),!(d.details&&!d.details.live)){var x=this.switchParams(d.url,f==null?void 0:f.details);this.loadPlaylist(x)}},T.selectInitialTrack=function(){var l=this.tracksInGroup;console.assert(l.length,"Initial audio track should be selected when tracks are known");var a=this.trackName,f=this.findTrackId(a)||this.findTrackId();f!==-1?this.setAudioTrack(f):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},T.findTrackId=function(l){for(var a=this.tracksInGroup,f=0;f<a.length;f++){var d=a[f];if((!this.selectDefaultTrack||d.default)&&(!l||l===d.name))return d.id}return-1},T.loadPlaylist=function(l){var a=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(a)){var f=a.id,d=a.groupId,m=a.url;if(l)try{m=l.addDirectives(m)}catch(h){this.warn("Could not construct new URL with HLS Delivery Directives: "+h)}this.log("loading audio-track playlist for id: "+f),this.clearTimer(),this.hls.trigger(s.Events.AUDIO_TRACK_LOADING,{url:m,id:f,groupId:d,deliveryDirectives:l||null})}},A(R,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(l){this.selectDefaultTrack=!1,this.setAudioTrack(l)}}]),R}(u.default);i.default=L},"./src/controller/base-playlist-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return A});var s=r("./src/polyfills/number.ts"),o=r("./src/types/level.ts"),u=r("./src/controller/level-helper.ts"),D=r("./src/utils/logger.ts"),C=r("./src/errors.ts"),A=function(){function _(L,O){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=D.logger.log.bind(D.logger,O+":"),this.warn=D.logger.warn.bind(D.logger,O+":"),this.hls=L}var p=_.prototype;return p.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},p.onError=function(O,R){R.fatal&&R.type===C.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},p.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},p.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},p.stopLoad=function(){this.canLoad=!1,this.clearTimer()},p.switchParams=function(O,R){var T=R==null?void 0:R.renditionReports;if(T)for(var y=0;y<T.length;y++){var l=T[y],a=""+l.URI;if(a===O.slice(-a.length)){var f=parseInt(l["LAST-MSN"]),d=parseInt(l["LAST-PART"]);if(R&&this.hls.config.lowLatencyMode){var m=Math.min(R.age-R.partTarget,R.targetduration);d!==void 0&&m>R.partTarget&&(d+=1)}if(Object(s.isFiniteNumber)(f))return new o.HlsUrlParameters(f,Object(s.isFiniteNumber)(d)?d:void 0,o.HlsSkip.No)}}},p.loadPlaylist=function(O){},p.shouldLoadTrack=function(O){return this.canLoad&&O&&!!O.url&&(!O.details||O.details.live)},p.playlistLoaded=function(O,R,T){var y=this,l=R.details,a=R.stats,f=a.loading.end?Math.max(0,self.performance.now()-a.loading.end):0;if(l.advancedDateTime=Date.now()-f,l.live||T!=null&&T.live){if(l.reloaded(T),T&&this.log("live playlist "+O+" "+(l.advanced?"REFRESHED "+l.lastPartSn+"-"+l.lastPartIndex:"MISSED")),T&&l.fragments.length>0&&Object(u.mergeDetails)(T,l),!this.canLoad||!l.live)return;var d,m=void 0,h=void 0;if(l.canBlockReload&&l.endSN&&l.advanced){var c=this.hls.config.lowLatencyMode,v=l.lastPartSn,P=l.endSN,b=l.lastPartIndex,x=b!==-1,S=v===P,g=c?0:b;x?(m=S?P+1:v,h=S?g:b+1):m=P+1;var E=l.age,I=E+l.ageHeader,M=Math.min(I-l.partTarget,l.targetduration*1.5);if(M>0){if(T&&M>T.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+T.tuneInGoal+" to: "+M+" with playlist age: "+l.age),M=0;else{var F=Math.floor(M/l.targetduration);if(m+=F,h!==void 0){var w=Math.round(M%l.targetduration/l.partTarget);h+=w}this.log("CDN Tune-in age: "+l.ageHeader+"s last advanced "+E.toFixed(2)+"s goal: "+M+" skip sn "+F+" to part "+h)}l.tuneInGoal=M}if(d=this.getDeliveryDirectives(l,R.deliveryDirectives,m,h),c||!S){this.loadPlaylist(d);return}}else d=this.getDeliveryDirectives(l,R.deliveryDirectives,m,h);var k=Object(u.computeReloadInterval)(l,a);m!==void 0&&l.canBlockReload&&(k-=l.partTarget||1),this.log("reload live playlist "+O+" in "+Math.round(k)+" ms"),this.timer=self.setTimeout(function(){return y.loadPlaylist(d)},k)}else this.clearTimer()},p.getDeliveryDirectives=function(O,R,T,y){var l=Object(o.getSkipValue)(O,T);return R!=null&&R.skip&&O.deltaUpdateFailed&&(T=R.msn,y=R.part,l=o.HlsSkip.No),new o.HlsUrlParameters(T,y,l)},p.retryLoadingOrFail=function(O){var R=this,T=this.hls.config,y=this.retryCount<T.levelLoadingMaxRetry;if(y){var l;if(this.retryCount++,O.details.indexOf("LoadTimeOut")>-1&&(l=O.context)!==null&&l!==void 0&&l.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+O.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*T.levelLoadingRetryDelay,T.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return R.loadPlaylist()},a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+O.details+'"')}}else this.warn('cannot recover from error "'+O.details+'"'),this.clearTimer(),O.fatal=!0;return y},_}()},"./src/controller/base-stream-controller.ts":function(n,i,r){r.r(i),r.d(i,"State",function(){return P}),r.d(i,"default",function(){return b});var s=r("./src/polyfills/number.ts"),o=r("./src/task-loop.ts"),u=r("./src/controller/fragment-tracker.ts"),D=r("./src/utils/buffer-helper.ts"),C=r("./src/utils/logger.ts"),A=r("./src/events.ts"),_=r("./src/errors.ts"),p=r("./src/types/transmuxer.ts"),L=r("./src/utils/mp4-tools.ts"),O=r("./src/utils/discontinuities.ts"),R=r("./src/controller/fragment-finders.ts"),T=r("./src/controller/level-helper.ts"),y=r("./src/loader/fragment-loader.ts"),l=r("./src/crypt/decrypter.ts"),a=r("./src/utils/time-ranges.ts"),f=r("./src/types/loader.ts");function d(x,S){for(var g=0;g<S.length;g++){var E=S[g];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(x,E.key,E)}}function m(x,S,g){return S&&d(x.prototype,S),g&&d(x,g),Object.defineProperty(x,"prototype",{writable:!1}),x}function h(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function c(x,S){x.prototype=Object.create(S.prototype),x.prototype.constructor=x,v(x,S)}function v(x,S){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,I){return E.__proto__=I,E},v(x,S)}var P={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},b=function(x){c(S,x);function S(E,I,M){var F;return F=x.call(this)||this,F.hls=void 0,F.fragPrevious=null,F.fragCurrent=null,F.fragmentTracker=void 0,F.transmuxer=null,F._state=P.STOPPED,F.media=void 0,F.mediaBuffer=void 0,F.config=void 0,F.bitrateTest=!1,F.lastCurrentTime=0,F.nextLoadPosition=0,F.startPosition=0,F.loadedmetadata=!1,F.fragLoadError=0,F.retryDate=0,F.levels=null,F.fragmentLoader=void 0,F.levelLastLoaded=null,F.startFragRequested=!1,F.decrypter=void 0,F.initPTS=[],F.onvseeking=null,F.onvended=null,F.logPrefix="",F.log=void 0,F.warn=void 0,F.logPrefix=M,F.log=C.logger.log.bind(C.logger,M+":"),F.warn=C.logger.warn.bind(C.logger,M+":"),F.hls=E,F.fragmentLoader=new y.default(E.config),F.fragmentTracker=I,F.config=E.config,F.decrypter=new l.default(E,E.config),E.on(A.Events.KEY_LOADED,F.onKeyLoaded,h(F)),F}var g=S.prototype;return g.doTick=function(){this.onTickEnd()},g.onTickEnd=function(){},g.startLoad=function(I){},g.stopLoad=function(){this.fragmentLoader.abort();var I=this.fragCurrent;I&&this.fragmentTracker.removeFragment(I),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=P.STOPPED},g._streamEnded=function(I,M){var F=this.fragCurrent,w=this.fragmentTracker;if(!M.live&&F&&F.sn>=M.endSN&&!I.nextStart){var k=M.partList;if(k!=null&&k.length){var B=k[k.length-1],U=D.BufferHelper.isBuffered(this.media,B.start+B.duration/2);return U}var j=w.getState(F);return j===u.FragmentState.PARTIAL||j===u.FragmentState.OK}return!1},g.onMediaAttached=function(I,M){var F=this.media=this.mediaBuffer=M.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),F.addEventListener("seeking",this.onvseeking),F.addEventListener("ended",this.onvended);var w=this.config;this.levels&&w.autoStartLoad&&this.state===P.STOPPED&&this.startLoad(w.startPosition)},g.onMediaDetaching=function(){var I=this.media;I!=null&&I.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),I&&(I.removeEventListener("seeking",this.onvseeking),I.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},g.onMediaSeeking=function(){var I=this.config,M=this.fragCurrent,F=this.media,w=this.mediaBuffer,k=this.state,B=F?F.currentTime:0,U=D.BufferHelper.bufferInfo(w||F,B,I.maxBufferHole);if(this.log("media seeking to "+(Object(s.isFiniteNumber)(B)?B.toFixed(3):B)+", state: "+k),k===P.ENDED)this.resetLoadingState();else if(M&&!U.len){var j=I.maxFragLookUpTolerance,H=M.start-j,N=M.start+M.duration+j,G=B>N;(B<H||G)&&(G&&M.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),M.loader.abort()),this.resetLoadingState())}F&&(this.lastCurrentTime=B),!this.loadedmetadata&&!U.len&&(this.nextLoadPosition=this.startPosition=B),this.tickImmediate()},g.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},g.onKeyLoaded=function(I,M){if(!(this.state!==P.KEY_LOADING||M.frag!==this.fragCurrent||!this.levels)){this.state=P.IDLE;var F=this.levels[M.frag.level].details;F&&this.loadFragment(M.frag,F,M.frag.start)}},g.onHandlerDestroying=function(){this.stopLoad(),x.prototype.onHandlerDestroying.call(this)},g.onHandlerDestroyed=function(){this.state=P.STOPPED,this.hls.off(A.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,x.prototype.onHandlerDestroyed.call(this)},g.loadKey=function(I,M){this.log("Loading key for "+I.sn+" of ["+M.startSN+"-"+M.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+I.level),this.state=P.KEY_LOADING,this.fragCurrent=I,this.hls.trigger(A.Events.KEY_LOADING,{frag:I})},g.loadFragment=function(I,M,F){this._loadFragForPlayback(I,M,F)},g._loadFragForPlayback=function(I,M,F){var w=this,k=function(U){if(w.fragContextChanged(I)){w.warn("Fragment "+I.sn+(U.part?" p: "+U.part.index:"")+" of level "+I.level+" was dropped during download."),w.fragmentTracker.removeFragment(I);return}I.stats.chunkCount++,w._handleFragmentLoadProgress(U)};this._doFragLoad(I,M,F,k).then(function(B){if(!!B){w.fragLoadError=0;var U=w.state;if(w.fragContextChanged(I)){(U===P.FRAG_LOADING||!w.fragCurrent&&U===P.PARSING)&&(w.fragmentTracker.removeFragment(I),w.state=P.IDLE);return}"payload"in B&&(w.log("Loaded fragment "+I.sn+" of level "+I.level),w.hls.trigger(A.Events.FRAG_LOADED,B)),w._handleFragmentLoadComplete(B)}}).catch(function(B){w.state!==P.STOPPED&&(w.warn(B),w.resetFragmentLoading(I))})},g.flushMainBuffer=function(I,M,F){if(F===void 0&&(F=null),!!(I-M)){var w={startOffset:I,endOffset:M,type:F};this.fragLoadError=0,this.hls.trigger(A.Events.BUFFER_FLUSHING,w)}},g._loadInitSegment=function(I){var M=this;this._doFragLoad(I).then(function(F){if(!F||M.fragContextChanged(I)||!M.levels)throw new Error("init load aborted");return F}).then(function(F){var w=M.hls,k=F.payload,B=I.decryptdata;if(k&&k.byteLength>0&&B&&B.key&&B.iv&&B.method==="AES-128"){var U=self.performance.now();return M.decrypter.webCryptoDecrypt(new Uint8Array(k),B.key.buffer,B.iv.buffer).then(function(j){var H=self.performance.now();return w.trigger(A.Events.FRAG_DECRYPTED,{frag:I,payload:j,stats:{tstart:U,tdecrypt:H}}),F.payload=j,F})}return F}).then(function(F){var w=M.fragCurrent,k=M.hls,B=M.levels;if(!B)throw new Error("init load aborted, missing levels");var U=B[I.level].details;console.assert(U,"Level details are defined when init segment is loaded");var j=I.stats;M.state=P.IDLE,M.fragLoadError=0,I.data=new Uint8Array(F.payload),j.parsing.start=j.buffering.start=self.performance.now(),j.parsing.end=j.buffering.end=self.performance.now(),F.frag===w&&k.trigger(A.Events.FRAG_BUFFERED,{stats:j,frag:w,part:null,id:I.type}),M.tick()}).catch(function(F){M.warn(F),M.resetFragmentLoading(I)})},g.fragContextChanged=function(I){var M=this.fragCurrent;return!I||!M||I.level!==M.level||I.sn!==M.sn||I.urlId!==M.urlId},g.fragBufferedComplete=function(I,M){var F=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+I.type+" sn: "+I.sn+(M?" part: "+M.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+I.level+" "+a.default.toString(D.BufferHelper.getBuffered(F))),this.state=P.IDLE,this.tick()},g._handleFragmentLoadComplete=function(I){var M=this.transmuxer;if(!!M){var F=I.frag,w=I.part,k=I.partsLoaded,B=!k||k.length===0||k.some(function(j){return!j}),U=new p.ChunkMetadata(F.level,F.sn,F.stats.chunkCount+1,0,w?w.index:-1,!B);M.flush(U)}},g._handleFragmentLoadProgress=function(I){},g._doFragLoad=function(I,M,F,w){var k=this;if(F===void 0&&(F=null),!this.levels)throw new Error("frag load aborted, missing levels");if(F=Math.max(I.start,F||0),this.config.lowLatencyMode&&M){var B=M.partList;if(B&&w){F>I.end&&M.fragmentHint&&(I=M.fragmentHint);var U=this.getNextPart(B,I,F);if(U>-1){var j=B[U];return this.log("Loading part sn: "+I.sn+" p: "+j.index+" cc: "+I.cc+" of playlist ["+M.startSN+"-"+M.endSN+"] parts [0-"+U+"-"+(B.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+I.level+", target: "+parseFloat(F.toFixed(3))),this.nextLoadPosition=j.start+j.duration,this.state=P.FRAG_LOADING,this.hls.trigger(A.Events.FRAG_LOADING,{frag:I,part:B[U],targetBufferTime:F}),this.doFragPartsLoad(I,B,U,w).catch(function(H){return k.handleFragLoadError(H)})}else if(!I.url||this.loadedEndOfParts(B,F))return Promise.resolve(null)}}return this.log("Loading fragment "+I.sn+" cc: "+I.cc+" "+(M?"of ["+M.startSN+"-"+M.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+I.level+", target: "+parseFloat(F.toFixed(3))),Object(s.isFiniteNumber)(I.sn)&&!this.bitrateTest&&(this.nextLoadPosition=I.start+I.duration),this.state=P.FRAG_LOADING,this.hls.trigger(A.Events.FRAG_LOADING,{frag:I,targetBufferTime:F}),this.fragmentLoader.load(I,w).catch(function(H){return k.handleFragLoadError(H)})},g.doFragPartsLoad=function(I,M,F,w){var k=this;return new Promise(function(B,U){var j=[],H=function N(G){var $=M[G];k.fragmentLoader.loadPart(I,$,w).then(function(z){j[$.index]=z;var ee=z.part;k.hls.trigger(A.Events.FRAG_LOADED,z);var X=M[G+1];if(X&&X.fragment===I)N(G+1);else return B({frag:I,part:ee,partsLoaded:j})}).catch(U)};H(F)})},g.handleFragLoadError=function(I){var M=I.data;return M&&M.details===_.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(M.frag,M.part):this.hls.trigger(A.Events.ERROR,M),null},g._handleTransmuxerFlush=function(I){var M=this.getCurrentContext(I);if(!M||this.state!==P.PARSING){this.fragCurrent||(this.state=P.IDLE);return}var F=M.frag,w=M.part,k=M.level,B=self.performance.now();F.stats.parsing.end=B,w&&(w.stats.parsing.end=B),this.updateLevelTiming(F,w,k,I.partial)},g.getCurrentContext=function(I){var M=this.levels,F=I.level,w=I.sn,k=I.part;if(!M||!M[F])return this.warn("Levels object was unset while buffering fragment "+w+" of level "+F+". The current chunk will not be buffered."),null;var B=M[F],U=k>-1?Object(T.getPartWith)(B,w,k):null,j=U?U.fragment:Object(T.getFragmentWithSN)(B,w,this.fragCurrent);return j?{frag:j,part:U,level:B}:null},g.bufferFragmentData=function(I,M,F,w){if(!(!I||this.state!==P.PARSING)){var k=I.data1,B=I.data2,U=k;if(k&&B&&(U=Object(L.appendUint8Array)(k,B)),!(!U||!U.length)){var j={type:I.type,frag:M,part:F,chunkMeta:w,parent:M.type,data:U};this.hls.trigger(A.Events.BUFFER_APPENDING,j),I.dropped&&I.independent&&!F&&this.flushBufferGap(M)}}},g.flushBufferGap=function(I){var M=this.media;if(!!M){if(!D.BufferHelper.isBuffered(M,M.currentTime)){this.flushMainBuffer(0,I.start);return}var F=M.currentTime,w=D.BufferHelper.bufferInfo(M,F,0),k=I.duration,B=Math.min(this.config.maxFragLookUpTolerance*2,k*.25),U=Math.max(Math.min(I.start-B,w.end-B),F+B);I.start-U>B&&this.flushMainBuffer(U,I.start)}},g.getFwdBufferInfo=function(I,M){var F=this.config,w=this.getLoadPosition();if(!Object(s.isFiniteNumber)(w))return null;var k=D.BufferHelper.bufferInfo(I,w,F.maxBufferHole);if(k.len===0&&k.nextStart!==void 0){var B=this.fragmentTracker.getBufferedFrag(w,M);if(B&&k.nextStart<B.end)return D.BufferHelper.bufferInfo(I,w,Math.max(k.nextStart,F.maxBufferHole))}return k},g.getMaxBufferLength=function(I){var M=this.config,F;return I?F=Math.max(8*M.maxBufferSize/I,M.maxBufferLength):F=M.maxBufferLength,Math.min(F,M.maxMaxBufferLength)},g.reduceMaxBufferLength=function(I){var M=this.config,F=I||M.maxBufferLength;return M.maxMaxBufferLength>=F?(M.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+M.maxMaxBufferLength+"s"),!0):!1},g.getNextFragment=function(I,M){var F,w,k=M.fragments,B=k.length;if(!B)return null;var U=this.config,j=k[0].start,H;if(M.live){var N=U.initialLiveManifestSize;if(B<N)return this.warn("Not enough fragments to start playback (have: "+B+", need: "+N+")"),null;!M.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(H=this.getInitialLiveFragment(M,k),this.startPosition=H?this.hls.liveSyncPosition||H.start:I)}else I<=j&&(H=k[0]);if(!H){var G=U.lowLatencyMode?M.partEnd:M.fragmentEnd;H=this.getFragmentAtPosition(I,G,M)}return(F=H)!==null&&F!==void 0&&F.initSegment&&!((w=H)!==null&&w!==void 0&&w.initSegment.data)&&!this.bitrateTest&&(H=H.initSegment),H},g.getNextPart=function(I,M,F){for(var w=-1,k=!1,B=!0,U=0,j=I.length;U<j;U++){var H=I[U];if(B=B&&!H.independent,w>-1&&F<H.start)break;var N=H.loaded;!N&&(k||H.independent||B)&&H.fragment===M&&(w=U),k=N}return w},g.loadedEndOfParts=function(I,M){var F=I[I.length-1];return F&&M>F.start&&F.loaded},g.getInitialLiveFragment=function(I,M){var F=this.fragPrevious,w=null;if(F){if(I.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+F.programDateTime),w=Object(R.findFragmentByPDT)(M,F.endProgramDateTime,this.config.maxFragLookUpTolerance)),!w){var k=F.sn+1;if(k>=I.startSN&&k<=I.endSN){var B=M[k-I.startSN];F.cc===B.cc&&(w=B,this.log("Live playlist, switching playlist, load frag with next SN: "+w.sn))}w||(w=Object(R.findFragWithCC)(M,F.cc),w&&this.log("Live playlist, switching playlist, load frag with same CC: "+w.sn))}}else{var U=this.hls.liveSyncPosition;U!==null&&(w=this.getFragmentAtPosition(U,this.bitrateTest?I.fragmentEnd:I.edge,I))}return w},g.getFragmentAtPosition=function(I,M,F){var w=this.config,k=this.fragPrevious,B=F.fragments,U=F.endSN,j=F.fragmentHint,H=w.maxFragLookUpTolerance,N=!!(w.lowLatencyMode&&F.partList&&j);N&&j&&!this.bitrateTest&&(B=B.concat(j),U=j.sn);var G;if(I<M){var $=I>M-H?0:H;G=Object(R.findFragmentByPTS)(k,B,I,$)}else G=B[B.length-1];if(G){var z=G.sn-F.startSN,ee=k&&G.level===k.level,X=B[z+1];k&&G.sn===k.sn&&!N&&ee&&(G.sn<U&&this.fragmentTracker.getState(X)!==u.FragmentState.OK?(this.log("SN "+G.sn+" just loaded, load next one: "+X.sn),G=X):G=null)}return G},g.synchronizeToLiveEdge=function(I){var M=this.config,F=this.media;if(!!F){var w=this.hls.liveSyncPosition,k=F.currentTime,B=I.fragments[0].start,U=I.edge,j=k>=B-M.maxFragLookUpTolerance&&k<=U;if(w!==null&&F.duration>w&&(k<w||!j)){var H=M.liveMaxLatencyDuration!==void 0?M.liveMaxLatencyDuration:M.liveMaxLatencyDurationCount*I.targetduration;(!j&&F.readyState<4||k<U-H)&&(this.loadedmetadata||(this.nextLoadPosition=w),F.readyState&&(this.warn("Playback: "+k.toFixed(3)+" is located too far from the end of live sliding playlist: "+U+", reset currentTime to : "+w.toFixed(3)),F.currentTime=w))}}},g.alignPlaylists=function(I,M){var F=this.levels,w=this.levelLastLoaded,k=this.fragPrevious,B=w!==null?F[w]:null,U=I.fragments.length;if(!U)return this.warn("No fragments in live playlist"),0;var j=I.fragments[0].start,H=!M,N=I.alignedSliding&&Object(s.isFiniteNumber)(j);if(H||!N&&!j){Object(O.alignStream)(k,B,I);var G=I.fragments[0].start;return this.log("Live playlist sliding: "+G.toFixed(2)+" start-sn: "+(M?M.startSN:"na")+"->"+I.startSN+" prev-sn: "+(k?k.sn:"na")+" fragments: "+U),G}return j},g.waitForCdnTuneIn=function(I){var M=3;return I.live&&I.canBlockReload&&I.partTarget&&I.tuneInGoal>Math.max(I.partHoldBack,I.partTarget*M)},g.setStartPosition=function(I,M){var F=this.startPosition;if(F<M&&(F=-1),F===-1||this.lastCurrentTime===-1){var w=I.startTimeOffset;Object(s.isFiniteNumber)(w)?(F=M+w,w<0&&(F+=I.totalduration),F=Math.min(Math.max(M,F),M+I.totalduration),this.log("Start time offset "+w+" found in playlist, adjust startPosition to "+F),this.startPosition=F):I.live?F=this.hls.liveSyncPosition||M:this.startPosition=F=0,this.lastCurrentTime=F}this.nextLoadPosition=F},g.getLoadPosition=function(){var I=this.media,M=0;return this.loadedmetadata&&I?M=I.currentTime:this.nextLoadPosition&&(M=this.nextLoadPosition),M},g.handleFragLoadAborted=function(I,M){this.transmuxer&&I.sn!=="initSegment"&&I.stats.aborted&&(this.warn("Fragment "+I.sn+(M?" part"+M.index:"")+" of level "+I.level+" was aborted"),this.resetFragmentLoading(I))},g.resetFragmentLoading=function(I){(!this.fragCurrent||!this.fragContextChanged(I))&&(this.state=P.IDLE)},g.onFragmentOrKeyLoadError=function(I,M){if(!M.fatal){var F=M.frag;if(!(!F||F.type!==I)){var w=this.fragCurrent;console.assert(w&&F.sn===w.sn&&F.level===w.level&&F.urlId===w.urlId,"Frag load error must match current frag to retry");var k=this.config;if(this.fragLoadError+1<=k.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(F.level))return;var B=Math.min(Math.pow(2,this.fragLoadError)*k.fragLoadingRetryDelay,k.fragLoadingMaxRetryTimeout);this.warn("Fragment "+F.sn+" of "+I+" "+F.level+" failed to load, retrying in "+B+"ms"),this.retryDate=self.performance.now()+B,this.fragLoadError++,this.state=P.FRAG_LOADING_WAITING_RETRY}else M.levelRetry?(I===f.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=P.IDLE):(C.logger.error(M.details+" reaches max retry, redispatch as fatal ..."),M.fatal=!0,this.hls.stopLoad(),this.state=P.ERROR)}}},g.afterBufferFlushed=function(I,M,F){if(!!I){var w=D.BufferHelper.getBuffered(I);this.fragmentTracker.detectEvictedFragments(M,w,F),this.state===P.ENDED&&this.resetLoadingState()}},g.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=P.IDLE},g.resetLiveStartWhenNotLoaded=function(I){if(!this.loadedmetadata){this.startFragRequested=!1;var M=this.levels?this.levels[I].details:null;if(M!=null&&M.live)return this.startPosition=-1,this.setStartPosition(M,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},g.updateLevelTiming=function(I,M,F,w){var k=this,B=F.details;console.assert(!!B,"level.details must be defined");var U=Object.keys(I.elementaryStreams).reduce(function(j,H){var N=I.elementaryStreams[H];if(N){var G=N.endPTS-N.startPTS;if(G<=0)return k.warn("Could not parse fragment "+I.sn+" "+H+" duration reliably ("+G+")"),j||!1;var $=w?0:Object(T.updateFragPTSDTS)(B,I,N.startPTS,N.endPTS,N.startDTS,N.endDTS);return k.hls.trigger(A.Events.LEVEL_PTS_UPDATED,{details:B,level:F,drift:$,type:H,frag:I,start:N.startPTS,end:N.endPTS}),!0}return j},!1);U||(this.warn("Found no media in fragment "+I.sn+" of level "+F.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=P.PARSED,this.hls.trigger(A.Events.FRAG_PARSED,{frag:I,part:M})},g.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},m(S,[{key:"state",get:function(){return this._state},set:function(I){var M=this._state;M!==I&&(this._state=I,this.log(M+"->"+I))}}]),S}(o.default)},"./src/controller/buffer-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return R});var s=r("./src/polyfills/number.ts"),o=r("./src/events.ts"),u=r("./src/utils/logger.ts"),D=r("./src/errors.ts"),C=r("./src/utils/buffer-helper.ts"),A=r("./src/utils/mediasource-helper.ts"),_=r("./src/loader/fragment.ts"),p=r("./src/controller/buffer-operation-queue.ts"),L=Object(A.getMediaSource)(),O=/([ha]vc.)(?:\.[^.,]+)+/,R=function(){function T(l){var a=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var f=a.hls,d=a.media,m=a.mediaSource;u.logger.log("[buffer-controller]: Media source opened"),d&&(a.updateMediaElementDuration(),f.trigger(o.Events.MEDIA_ATTACHED,{media:d})),m&&m.removeEventListener("sourceopen",a._onMediaSourceOpen),a.checkPendingTracks()},this._onMediaSourceClose=function(){u.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){u.logger.log("[buffer-controller]: Media source ended")},this.hls=l,this._initSourceBuffer(),this.registerListeners()}var y=T.prototype;return y.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},y.destroy=function(){this.unregisterListeners(),this.details=null},y.registerListeners=function(){var a=this.hls;a.on(o.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),a.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),a.on(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),a.on(o.Events.BUFFER_RESET,this.onBufferReset,this),a.on(o.Events.BUFFER_APPENDING,this.onBufferAppending,this),a.on(o.Events.BUFFER_CODECS,this.onBufferCodecs,this),a.on(o.Events.BUFFER_EOS,this.onBufferEos,this),a.on(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),a.on(o.Events.LEVEL_UPDATED,this.onLevelUpdated,this),a.on(o.Events.FRAG_PARSED,this.onFragParsed,this),a.on(o.Events.FRAG_CHANGED,this.onFragChanged,this)},y.unregisterListeners=function(){var a=this.hls;a.off(o.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),a.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),a.off(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),a.off(o.Events.BUFFER_RESET,this.onBufferReset,this),a.off(o.Events.BUFFER_APPENDING,this.onBufferAppending,this),a.off(o.Events.BUFFER_CODECS,this.onBufferCodecs,this),a.off(o.Events.BUFFER_EOS,this.onBufferEos,this),a.off(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),a.off(o.Events.LEVEL_UPDATED,this.onLevelUpdated,this),a.off(o.Events.FRAG_PARSED,this.onFragParsed,this),a.off(o.Events.FRAG_CHANGED,this.onFragChanged,this)},y._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new p.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},y.onManifestParsed=function(a,f){var d=2;(f.audio&&!f.video||!f.altAudio)&&(d=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=d,this.details=null,u.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},y.onMediaAttaching=function(a,f){var d=this.media=f.media;if(d&&L){var m=this.mediaSource=new L;m.addEventListener("sourceopen",this._onMediaSourceOpen),m.addEventListener("sourceended",this._onMediaSourceEnded),m.addEventListener("sourceclose",this._onMediaSourceClose),d.src=self.URL.createObjectURL(m),this._objectUrl=d.src}},y.onMediaDetaching=function(){var a=this.media,f=this.mediaSource,d=this._objectUrl;if(f){if(u.logger.log("[buffer-controller]: media source detaching"),f.readyState==="open")try{f.endOfStream()}catch(m){u.logger.warn("[buffer-controller]: onMediaDetaching: "+m.message+" while calling endOfStream")}this.onBufferReset(),f.removeEventListener("sourceopen",this._onMediaSourceOpen),f.removeEventListener("sourceended",this._onMediaSourceEnded),f.removeEventListener("sourceclose",this._onMediaSourceClose),a&&(d&&self.URL.revokeObjectURL(d),a.src===d?(a.removeAttribute("src"),a.load()):u.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(o.Events.MEDIA_DETACHED,void 0)},y.onBufferReset=function(){var a=this;this.getSourceBufferTypes().forEach(function(f){var d=a.sourceBuffer[f];try{d&&(a.removeBufferListeners(f),a.mediaSource&&a.mediaSource.removeSourceBuffer(d),a.sourceBuffer[f]=void 0)}catch(m){u.logger.warn("[buffer-controller]: Failed to reset the "+f+" buffer",m)}}),this._initSourceBuffer()},y.onBufferCodecs=function(a,f){var d=this,m=this.getSourceBufferTypes().length;Object.keys(f).forEach(function(h){if(m){var c=d.tracks[h];if(c&&typeof c.buffer.changeType=="function"){var v=f[h],P=v.id,b=v.codec,x=v.levelCodec,S=v.container,g=v.metadata,E=(c.levelCodec||c.codec).replace(O,"$1"),I=(x||b).replace(O,"$1");if(E!==I){var M=S+";codecs="+(x||b);d.appendChangeType(h,M),u.logger.log("[buffer-controller]: switching codec "+E+" to "+I),d.tracks[h]={buffer:c.buffer,codec:b,container:S,levelCodec:x,metadata:g,id:P}}}}else d.pendingTracks[h]=f[h]}),!m&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},y.appendChangeType=function(a,f){var d=this,m=this.operationQueue,h={execute:function(){var v=d.sourceBuffer[a];v&&(u.logger.log("[buffer-controller]: changing "+a+" sourceBuffer type to "+f),v.changeType(f)),m.shiftAndExecuteNext(a)},onStart:function(){},onComplete:function(){},onError:function(v){u.logger.warn("[buffer-controller]: Failed to change "+a+" SourceBuffer type",v)}};m.append(h,a)},y.onBufferAppending=function(a,f){var d=this,m=this.hls,h=this.operationQueue,c=this.tracks,v=f.data,P=f.type,b=f.frag,x=f.part,S=f.chunkMeta,g=S.buffering[P],E=self.performance.now();g.start=E;var I=b.stats.buffering,M=x?x.stats.buffering:null;I.start===0&&(I.start=E),M&&M.start===0&&(M.start=E);var F=c.audio,w=P==="audio"&&S.id===1&&(F==null?void 0:F.container)==="audio/mpeg",k={execute:function(){if(g.executeStart=self.performance.now(),w){var U=d.sourceBuffer[P];if(U){var j=b.start-U.timestampOffset;Math.abs(j)>=.1&&(u.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+b.start+" (delta: "+j+") sn: "+b.sn+")"),U.timestampOffset=b.start)}}d.appendExecutor(v,P)},onStart:function(){},onComplete:function(){var U=self.performance.now();g.executeEnd=g.end=U,I.first===0&&(I.first=U),M&&M.first===0&&(M.first=U);var j=d.sourceBuffer,H={};for(var N in j)H[N]=C.BufferHelper.getBuffered(j[N]);d.appendError=0,d.hls.trigger(o.Events.BUFFER_APPENDED,{type:P,frag:b,part:x,chunkMeta:S,parent:b.type,timeRanges:H})},onError:function(U){u.logger.error("[buffer-controller]: Error encountered while trying to append to the "+P+" SourceBuffer",U);var j={type:D.ErrorTypes.MEDIA_ERROR,parent:b.type,details:D.ErrorDetails.BUFFER_APPEND_ERROR,err:U,fatal:!1};U.code===DOMException.QUOTA_EXCEEDED_ERR?j.details=D.ErrorDetails.BUFFER_FULL_ERROR:(d.appendError++,j.details=D.ErrorDetails.BUFFER_APPEND_ERROR,d.appendError>m.config.appendErrorMaxRetry&&(u.logger.error("[buffer-controller]: Failed "+m.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),j.fatal=!0)),m.trigger(o.Events.ERROR,j)}};h.append(k,P)},y.onBufferFlushing=function(a,f){var d=this,m=this.operationQueue,h=function(v){return{execute:d.removeExecutor.bind(d,v,f.startOffset,f.endOffset),onStart:function(){},onComplete:function(){d.hls.trigger(o.Events.BUFFER_FLUSHED,{type:v})},onError:function(b){u.logger.warn("[buffer-controller]: Failed to remove from "+v+" SourceBuffer",b)}}};f.type?m.append(h(f.type),f.type):this.getSourceBufferTypes().forEach(function(c){m.append(h(c),c)})},y.onFragParsed=function(a,f){var d=this,m=f.frag,h=f.part,c=[],v=h?h.elementaryStreams:m.elementaryStreams;v[_.ElementaryStreamTypes.AUDIOVIDEO]?c.push("audiovideo"):(v[_.ElementaryStreamTypes.AUDIO]&&c.push("audio"),v[_.ElementaryStreamTypes.VIDEO]&&c.push("video"));var P=function(){var x=self.performance.now();m.stats.buffering.end=x,h&&(h.stats.buffering.end=x);var S=h?h.stats:m.stats;d.hls.trigger(o.Events.FRAG_BUFFERED,{frag:m,part:h,stats:S,id:m.type})};c.length===0&&u.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+m.type+" level: "+m.level+" sn: "+m.sn),this.blockBuffers(P,c)},y.onFragChanged=function(a,f){this.flushBackBuffer()},y.onBufferEos=function(a,f){var d=this,m=this.getSourceBufferTypes().reduce(function(h,c){var v=d.sourceBuffer[c];return(!f.type||f.type===c)&&v&&!v.ended&&(v.ended=!0,u.logger.log("[buffer-controller]: "+c+" sourceBuffer now EOS")),h&&!!(!v||v.ended)},!0);m&&this.blockBuffers(function(){var h=d.mediaSource;!h||h.readyState!=="open"||h.endOfStream()})},y.onLevelUpdated=function(a,f){var d=f.details;!d.fragments.length||(this.details=d,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},y.flushBackBuffer=function(){var a=this.hls,f=this.details,d=this.media,m=this.sourceBuffer;if(!(!d||f===null)){var h=this.getSourceBufferTypes();if(!!h.length){var c=f.live&&a.config.liveBackBufferLength!==null?a.config.liveBackBufferLength:a.config.backBufferLength;if(!(!Object(s.isFiniteNumber)(c)||c<0)){var v=d.currentTime,P=f.levelTargetDuration,b=Math.max(c,P),x=Math.floor(v/P)*P-b;h.forEach(function(S){var g=m[S];if(g){var E=C.BufferHelper.getBuffered(g);E.length>0&&x>E.start(0)&&(a.trigger(o.Events.BACK_BUFFER_REACHED,{bufferEnd:x}),f.live&&a.trigger(o.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:x}),a.trigger(o.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:x,type:S}))}})}}}},y.updateMediaElementDuration=function(){if(!(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")){var a=this.details,f=this.hls,d=this.media,m=this.mediaSource,h=a.fragments[0].start+a.totalduration,c=d.duration,v=Object(s.isFiniteNumber)(m.duration)?m.duration:0;a.live&&f.config.liveDurationInfinity?(u.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),m.duration=1/0,this.updateSeekableRange(a)):(h>v&&h>c||!Object(s.isFiniteNumber)(c))&&(u.logger.log("[buffer-controller]: Updating Media Source duration to "+h.toFixed(3)),m.duration=h)}},y.updateSeekableRange=function(a){var f=this.mediaSource,d=a.fragments,m=d.length;if(m&&a.live&&f!==null&&f!==void 0&&f.setLiveSeekableRange){var h=Math.max(0,d[0].start),c=Math.max(h,h+a.totalduration);f.setLiveSeekableRange(h,c)}},y.checkPendingTracks=function(){var a=this.bufferCodecEventsExpected,f=this.operationQueue,d=this.pendingTracks,m=Object.keys(d).length;if(m&&!a||m===2){this.createSourceBuffers(d),this.pendingTracks={};var h=this.getSourceBufferTypes();if(h.length===0){this.hls.trigger(o.Events.ERROR,{type:D.ErrorTypes.MEDIA_ERROR,details:D.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});return}h.forEach(function(c){f.executeNext(c)})}},y.createSourceBuffers=function(a){var f=this.sourceBuffer,d=this.mediaSource;if(!d)throw Error("createSourceBuffers called when mediaSource was null");var m=0;for(var h in a)if(!f[h]){var c=a[h];if(!c)throw Error("source buffer exists for track "+h+", however track does not");var v=c.levelCodec||c.codec,P=c.container+";codecs="+v;u.logger.log("[buffer-controller]: creating sourceBuffer("+P+")");try{var b=f[h]=d.addSourceBuffer(P),x=h;this.addBufferListener(x,"updatestart",this._onSBUpdateStart),this.addBufferListener(x,"updateend",this._onSBUpdateEnd),this.addBufferListener(x,"error",this._onSBUpdateError),this.tracks[h]={buffer:b,codec:v,container:c.container,levelCodec:c.levelCodec,metadata:c.metadata,id:c.id},m++}catch(S){u.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+S.message),this.hls.trigger(o.Events.ERROR,{type:D.ErrorTypes.MEDIA_ERROR,details:D.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:S,mimeType:P})}}m&&this.hls.trigger(o.Events.BUFFER_CREATED,{tracks:this.tracks})},y._onSBUpdateStart=function(a){var f=this.operationQueue,d=f.current(a);d.onStart()},y._onSBUpdateEnd=function(a){var f=this.operationQueue,d=f.current(a);d.onComplete(),f.shiftAndExecuteNext(a)},y._onSBUpdateError=function(a,f){u.logger.error("[buffer-controller]: "+a+" SourceBuffer error",f),this.hls.trigger(o.Events.ERROR,{type:D.ErrorTypes.MEDIA_ERROR,details:D.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var d=this.operationQueue.current(a);d&&d.onError(f)},y.removeExecutor=function(a,f,d){var m=this.media,h=this.mediaSource,c=this.operationQueue,v=this.sourceBuffer,P=v[a];if(!m||!h||!P){u.logger.warn("[buffer-controller]: Attempting to remove from the "+a+" SourceBuffer, but it does not exist"),c.shiftAndExecuteNext(a);return}var b=Object(s.isFiniteNumber)(m.duration)?m.duration:1/0,x=Object(s.isFiniteNumber)(h.duration)?h.duration:1/0,S=Math.max(0,f),g=Math.min(d,b,x);g>S?(u.logger.log("[buffer-controller]: Removing ["+S+","+g+"] from the "+a+" SourceBuffer"),console.assert(!P.updating,a+" sourceBuffer must not be updating"),P.remove(S,g)):c.shiftAndExecuteNext(a)},y.appendExecutor=function(a,f){var d=this.operationQueue,m=this.sourceBuffer,h=m[f];if(!h){u.logger.warn("[buffer-controller]: Attempting to append to the "+f+" SourceBuffer, but it does not exist"),d.shiftAndExecuteNext(f);return}h.ended=!1,console.assert(!h.updating,f+" sourceBuffer must not be updating"),h.appendBuffer(a)},y.blockBuffers=function(a,f){var d=this;if(f===void 0&&(f=this.getSourceBufferTypes()),!f.length){u.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(a);return}var m=this.operationQueue,h=f.map(function(c){return m.appendBlocker(c)});Promise.all(h).then(function(){a(),f.forEach(function(c){var v=d.sourceBuffer[c];(!v||!v.updating)&&m.shiftAndExecuteNext(c)})})},y.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},y.addBufferListener=function(a,f,d){var m=this.sourceBuffer[a];if(!!m){var h=d.bind(this,a);this.listeners[a].push({event:f,listener:h}),m.addEventListener(f,h)}},y.removeBufferListeners=function(a){var f=this.sourceBuffer[a];!f||this.listeners[a].forEach(function(d){f.removeEventListener(d.event,d.listener)})},T}()},"./src/controller/buffer-operation-queue.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return o});var s=r("./src/utils/logger.ts"),o=function(){function u(C){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=C}var D=u.prototype;return D.append=function(A,_){var p=this.queues[_];p.push(A),p.length===1&&this.buffers[_]&&this.executeNext(_)},D.insertAbort=function(A,_){var p=this.queues[_];p.unshift(A),this.executeNext(_)},D.appendBlocker=function(A){var _,p=new Promise(function(O){_=O}),L={execute:_,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(L,A),p},D.executeNext=function(A){var _=this.buffers,p=this.queues,L=_[A],O=p[A];if(O.length){var R=O[0];try{R.execute()}catch(T){s.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),R.onError(T),(!L||!L.updating)&&(O.shift(),this.executeNext(A))}}},D.shiftAndExecuteNext=function(A){this.queues[A].shift(),this.executeNext(A)},D.current=function(A){return this.queues[A][0]},u}()},"./src/controller/cap-level-controller.ts":function(n,i,r){r.r(i);var s=r("./src/events.ts");function o(C,A){for(var _=0;_<A.length;_++){var p=A[_];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(C,p.key,p)}}function u(C,A,_){return A&&o(C.prototype,A),_&&o(C,_),Object.defineProperty(C,"prototype",{writable:!1}),C}var D=function(){function C(_){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=_,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var A=C.prototype;return A.setStreamController=function(p){this.streamController=p},A.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},A.registerListeners=function(){var p=this.hls;p.on(s.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),p.on(s.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),p.on(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),p.on(s.Events.BUFFER_CODECS,this.onBufferCodecs,this),p.on(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},A.unregisterListener=function(){var p=this.hls;p.off(s.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),p.off(s.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),p.off(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),p.off(s.Events.BUFFER_CODECS,this.onBufferCodecs,this),p.off(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},A.onFpsDropLevelCapping=function(p,L){C.isLevelAllowed(L.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(L.droppedLevel)},A.onMediaAttaching=function(p,L){this.media=L.media instanceof HTMLVideoElement?L.media:null},A.onManifestParsed=function(p,L){var O=this.hls;this.restrictedLevels=[],this.firstLevel=L.firstLevel,O.config.capLevelToPlayerSize&&L.video&&this.startCapping()},A.onBufferCodecs=function(p,L){var O=this.hls;O.config.capLevelToPlayerSize&&L.video&&this.startCapping()},A.onMediaDetaching=function(){this.stopCapping()},A.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var p=this.hls.levels;if(p.length){var L=this.hls;L.autoLevelCapping=this.getMaxLevel(p.length-1),L.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=L.autoLevelCapping}}},A.getMaxLevel=function(p){var L=this,O=this.hls.levels;if(!O.length)return-1;var R=O.filter(function(T,y){return C.isLevelAllowed(y,L.restrictedLevels)&&y<=p});return this.clientRect=null,C.getMaxLevelByMediaSize(R,this.mediaWidth,this.mediaHeight)},A.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},A.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},A.getDimensions=function(){if(this.clientRect)return this.clientRect;var p=this.media,L={width:0,height:0};if(p){var O=p.getBoundingClientRect();L.width=O.width,L.height=O.height,!L.width&&!L.height&&(L.width=O.right-O.left||p.width||0,L.height=O.bottom-O.top||p.height||0)}return this.clientRect=L,L},C.isLevelAllowed=function(p,L){return L===void 0&&(L=[]),L.indexOf(p)===-1},C.getMaxLevelByMediaSize=function(p,L,O){if(!p||!p.length)return-1;for(var R=function(f,d){return d?f.width!==d.width||f.height!==d.height:!0},T=p.length-1,y=0;y<p.length;y+=1){var l=p[y];if((l.width>=L||l.height>=O)&&R(l,p[y+1])){T=y;break}}return T},u(C,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var p=1;if(!this.hls.config.ignoreDevicePixelRatio)try{p=self.devicePixelRatio}catch{}return p}}]),C}();i.default=D},"./src/controller/cmcd-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return R});var s=r("./src/events.ts"),o=r("./src/types/cmcd.ts"),u=r("./src/utils/buffer-helper.ts"),D=r("./src/utils/logger.ts");function C(T,y){for(var l=0;l<y.length;l++){var a=y[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(T,a.key,a)}}function A(T,y,l){return y&&C(T.prototype,y),l&&C(T,l),Object.defineProperty(T,"prototype",{writable:!1}),T}function _(T,y){var l=typeof Symbol!="undefined"&&T[Symbol.iterator]||T["@@iterator"];if(l)return(l=l.call(T)).next.bind(l);if(Array.isArray(T)||(l=p(T))||y&&T&&typeof T.length=="number"){l&&(T=l);var a=0;return function(){return a>=T.length?{done:!0}:{done:!1,value:T[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(T,y){if(!!T){if(typeof T=="string")return L(T,y);var l=Object.prototype.toString.call(T).slice(8,-1);if(l==="Object"&&T.constructor&&(l=T.constructor.name),l==="Map"||l==="Set")return Array.from(T);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return L(T,y)}}function L(T,y){(y==null||y>T.length)&&(y=T.length);for(var l=0,a=new Array(y);l<y;l++)a[l]=T[l];return a}function O(){return O=Object.assign?Object.assign.bind():function(T){for(var y=1;y<arguments.length;y++){var l=arguments[y];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(T[a]=l[a])}return T},O.apply(this,arguments)}var R=function(){function T(l){var a=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){a.initialized&&(a.starved=!0),a.buffering=!0},this.onPlaying=function(){a.initialized||(a.initialized=!0),a.buffering=!1},this.applyPlaylistData=function(m){try{a.apply(m,{ot:o.CMCDObjectType.MANIFEST,su:!a.initialized})}catch(h){D.logger.warn("Could not generate manifest CMCD data.",h)}},this.applyFragmentData=function(m){try{var h=m.frag,c=a.hls.levels[h.level],v=a.getObjectType(h),P={d:h.duration*1e3,ot:v};(v===o.CMCDObjectType.VIDEO||v===o.CMCDObjectType.AUDIO||v==o.CMCDObjectType.MUXED)&&(P.br=c.bitrate/1e3,P.tb=a.getTopBandwidth(v)/1e3,P.bl=a.getBufferLength(v)),a.apply(m,P)}catch(b){D.logger.warn("Could not generate segment CMCD data.",b)}},this.hls=l;var f=this.config=l.config,d=f.cmcd;d!=null&&(f.pLoader=this.createPlaylistLoader(),f.fLoader=this.createFragmentLoader(),this.sid=d.sessionId||T.uuid(),this.cid=d.contentId,this.useHeaders=d.useHeaders===!0,this.registerListeners())}var y=T.prototype;return y.registerListeners=function(){var a=this.hls;a.on(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),a.on(s.Events.MEDIA_DETACHED,this.onMediaDetached,this),a.on(s.Events.BUFFER_CREATED,this.onBufferCreated,this)},y.unregisterListeners=function(){var a=this.hls;a.off(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),a.off(s.Events.MEDIA_DETACHED,this.onMediaDetached,this),a.off(s.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},y.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},y.onMediaAttached=function(a,f){this.media=f.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},y.onMediaDetached=function(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},y.onBufferCreated=function(a,f){var d,m;this.audioBuffer=(d=f.tracks.audio)===null||d===void 0?void 0:d.buffer,this.videoBuffer=(m=f.tracks.video)===null||m===void 0?void 0:m.buffer},y.createData=function(){var a;return{v:o.CMCDVersion,sf:o.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(a=this.media)===null||a===void 0?void 0:a.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},y.apply=function(a,f){f===void 0&&(f={}),O(f,this.createData());var d=f.ot===o.CMCDObjectType.INIT||f.ot===o.CMCDObjectType.VIDEO||f.ot===o.CMCDObjectType.MUXED;if(this.starved&&d&&(f.bs=!0,f.su=!0,this.starved=!1),f.su==null&&(f.su=this.buffering),this.useHeaders){var m=T.toHeaders(f);if(!Object.keys(m).length)return;a.headers||(a.headers={}),O(a.headers,m)}else{var h=T.toQuery(f);if(!h)return;a.url=T.appendQueryToUri(a.url,h)}},y.getObjectType=function(a){var f=a.type;if(f==="subtitle")return o.CMCDObjectType.TIMED_TEXT;if(a.sn==="initSegment")return o.CMCDObjectType.INIT;if(f==="audio")return o.CMCDObjectType.AUDIO;if(f==="main")return this.hls.audioTracks.length?o.CMCDObjectType.VIDEO:o.CMCDObjectType.MUXED},y.getTopBandwidth=function(a){var f=0,d,m=this.hls;if(a===o.CMCDObjectType.AUDIO)d=m.audioTracks;else{var h=m.maxAutoLevel,c=h>-1?h+1:m.levels.length;d=m.levels.slice(0,c)}for(var v=_(d),P;!(P=v()).done;){var b=P.value;b.bitrate>f&&(f=b.bitrate)}return f>0?f:NaN},y.getBufferLength=function(a){var f=this.hls.media,d=a===o.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;if(!d||!f)return NaN;var m=u.BufferHelper.bufferInfo(d,f.currentTime,this.config.maxBufferHole);return m.len*1e3},y.createPlaylistLoader=function(){var a=this.config.pLoader,f=this.applyPlaylistData,d=a||this.config.loader;return function(){function m(c){this.loader=void 0,this.loader=new d(c)}var h=m.prototype;return h.destroy=function(){this.loader.destroy()},h.abort=function(){this.loader.abort()},h.load=function(v,P,b){f(v),this.loader.load(v,P,b)},A(m,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),m}()},y.createFragmentLoader=function(){var a=this.config.fLoader,f=this.applyFragmentData,d=a||this.config.loader;return function(){function m(c){this.loader=void 0,this.loader=new d(c)}var h=m.prototype;return h.destroy=function(){this.loader.destroy()},h.abort=function(){this.loader.abort()},h.load=function(v,P,b){f(v),this.loader.load(v,P,b)},A(m,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),m}()},T.uuid=function(){var a=URL.createObjectURL(new Blob),f=a.toString();return URL.revokeObjectURL(a),f.slice(f.lastIndexOf("/")+1)},T.serialize=function(a){for(var f=[],d=function(w){return!Number.isNaN(w)&&w!=null&&w!==""&&w!==!1},m=function(w){return Math.round(w)},h=function(w){return m(w/100)*100},c=function(w){return encodeURIComponent(w)},v={br:m,d:m,bl:h,dl:h,mtp:h,nor:c,rtp:h,tb:m},P=Object.keys(a||{}).sort(),b=_(P),x;!(x=b()).done;){var S=x.value,g=a[S];if(!!d(g)&&!(S==="v"&&g===1)&&!(S=="pr"&&g===1)){var E=v[S];E&&(g=E(g));var I=typeof g,M=void 0;S==="ot"||S==="sf"||S==="st"?M=S+"="+g:I==="boolean"?M=S:I==="number"?M=S+"="+g:M=S+"="+JSON.stringify(g),f.push(M)}}return f.join(",")},T.toHeaders=function(a){for(var f=Object.keys(a),d={},m=["Object","Request","Session","Status"],h=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},v=0,P=f;v<P.length;v++){var b=P[v],x=c[b]!=null?c[b]:1;h[x][b]=a[b]}for(var S=0;S<h.length;S++){var g=T.serialize(h[S]);g&&(d["CMCD-"+m[S]]=g)}return d},T.toQuery=function(a){return"CMCD="+encodeURIComponent(T.serialize(a))},T.appendQueryToUri=function(a,f){if(!f)return a;var d=a.includes("?")?"&":"?";return""+a+d+f},T}()},"./src/controller/eme-controller.ts":function(n,i,r){r.r(i);var s=r("./src/events.ts"),o=r("./src/errors.ts"),u=r("./src/utils/logger.ts"),D=r("./src/utils/mediakeys-helper.ts");function C(R,T){for(var y=0;y<T.length;y++){var l=T[y];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(R,l.key,l)}}function A(R,T,y){return T&&C(R.prototype,T),y&&C(R,y),Object.defineProperty(R,"prototype",{writable:!1}),R}var _=3,p=function(T,y,l){var a={audioCapabilities:[],videoCapabilities:[]};return T.forEach(function(f){a.audioCapabilities.push({contentType:'audio/mp4; codecs="'+f+'"',robustness:l.audioRobustness||""})}),y.forEach(function(f){a.videoCapabilities.push({contentType:'video/mp4; codecs="'+f+'"',robustness:l.videoRobustness||""})}),[a]},L=function(T,y,l,a){switch(T){case D.KeySystems.WIDEVINE:return p(y,l,a);default:throw new Error("Unknown key-system: "+T)}},O=function(){function R(y){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=y,this._config=y.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var T=R.prototype;return T.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},T._registerListeners=function(){this.hls.on(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(s.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(s.Events.MANIFEST_PARSED,this.onManifestParsed,this)},T._unregisterListeners=function(){this.hls.off(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(s.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(s.Events.MANIFEST_PARSED,this.onManifestParsed,this)},T.getLicenseServerUrl=function(l){switch(l){case D.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+l+'"')},T._attemptKeySystemAccess=function(l,a,f){var d=this,m=L(l,a,f,this._drmSystemOptions);u.logger.log("Requesting encrypted media key-system access");var h=this.requestMediaKeySystemAccess(l,m);this.mediaKeysPromise=h.then(function(c){return d._onMediaKeySystemAccessObtained(l,c)}),h.catch(function(c){u.logger.error('Failed to obtain key-system "'+l+'" access:',c)})},T._onMediaKeySystemAccessObtained=function(l,a){var f=this;u.logger.log('Access for key-system "'+l+'" obtained');var d={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:a,mediaKeySystemDomain:l};this._mediaKeysList.push(d);var m=Promise.resolve().then(function(){return a.createMediaKeys()}).then(function(h){return d.mediaKeys=h,u.logger.log('Media-keys created for key-system "'+l+'"'),f._onMediaKeysCreated(),h});return m.catch(function(h){u.logger.error("Failed to create media-keys:",h)}),m},T._onMediaKeysCreated=function(){var l=this;this._mediaKeysList.forEach(function(a){a.mediaKeysSession||(a.mediaKeysSession=a.mediaKeys.createSession(),l._onNewMediaKeySession(a.mediaKeysSession))})},T._onNewMediaKeySession=function(l){var a=this;u.logger.log("New key-system session "+l.sessionId),l.addEventListener("message",function(f){a._onKeySessionMessage(l,f.message)},!1)},T._onKeySessionMessage=function(l,a){u.logger.log("Got EME message event, creating license request"),this._requestLicense(a,function(f){u.logger.log("Received license data (length: "+(f&&f.byteLength)+"), updating key-session"),l.update(f).catch(function(d){u.logger.warn("Updating key-session failed: "+d)})})},T.onMediaEncrypted=function(l){var a=this;if(u.logger.log('Media is encrypted using "'+l.initDataType+'" init data type'),!this.mediaKeysPromise){u.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}var f=function(m){!a._media||(a._attemptSetMediaKeys(m),a._generateRequestWithPreferredKeySession(l.initDataType,l.initData))};this.mediaKeysPromise.then(f).catch(f)},T._attemptSetMediaKeys=function(l){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var a=this._mediaKeysList[0];if(!a||!a.mediaKeys){u.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}u.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(a.mediaKeys),this._hasSetMediaKeys=!0}},T._generateRequestWithPreferredKeySession=function(l,a){var f=this,d=this._mediaKeysList[0];if(!d){u.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(d.mediaKeysSessionInitialized){u.logger.warn("Key-Session already initialized but requested again");return}var m=d.mediaKeysSession;if(!m){u.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});return}if(!a){u.logger.warn("Fatal: initData required for generating a key session is null"),this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});return}u.logger.log('Generating key-session request for "'+l+'" init data type'),d.mediaKeysSessionInitialized=!0,m.generateRequest(l,a).then(function(){u.logger.debug("Key-session generation succeeded")}).catch(function(h){u.logger.error("Error generating key-session request:",h),f.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},T._createLicenseXhr=function(l,a,f){var d=new XMLHttpRequest;d.responseType="arraybuffer",d.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,d,l,a,f);var m=this._licenseXhrSetup;if(m)try{m.call(this.hls,d,l),m=void 0}catch(h){u.logger.error(h)}try{d.readyState||d.open("POST",l,!0),m&&m.call(this.hls,d,l)}catch(h){throw new Error("issue setting up KeySystem license XHR "+h)}return d},T._onLicenseRequestReadyStageChange=function(l,a,f,d){switch(l.readyState){case 4:if(l.status===200){this._requestLicenseFailureCount=0,u.logger.log("License request succeeded");var m=l.response,h=this._licenseResponseCallback;if(h)try{m=h.call(this.hls,l,a)}catch(v){u.logger.error(v)}d(m)}else{if(u.logger.error("License Request XHR failed ("+a+"). Status: "+l.status+" ("+l.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>_){this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}var c=_-this._requestLicenseFailureCount+1;u.logger.warn("Retrying license request, "+c+" attempts left"),this._requestLicense(f,d)}break}},T._generateLicenseRequestChallenge=function(l,a){switch(l.mediaKeySystemDomain){case D.KeySystems.WIDEVINE:return a}throw new Error("unsupported key-system: "+l.mediaKeySystemDomain)},T._requestLicense=function(l,a){u.logger.log("Requesting content license for key-system");var f=this._mediaKeysList[0];if(!f){u.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}try{var d=this.getLicenseServerUrl(f.mediaKeySystemDomain),m=this._createLicenseXhr(d,l,a);u.logger.log("Sending license request to URL: "+d);var h=this._generateLicenseRequestChallenge(f,l);m.send(h)}catch(c){u.logger.error("Failure requesting DRM license: "+c),this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},T.onMediaAttached=function(l,a){if(!!this._emeEnabled){var f=a.media;this._media=f,f.addEventListener("encrypted",this._onMediaEncrypted)}},T.onMediaDetached=function(){var l=this._media,a=this._mediaKeysList;!l||(l.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(a.map(function(f){if(f.mediaKeysSession)return f.mediaKeysSession.close().catch(function(){})})).then(function(){return l.setMediaKeys(null)}).catch(function(){}))},T.onManifestParsed=function(l,a){if(!!this._emeEnabled){var f=a.levels.map(function(m){return m.audioCodec}).filter(function(m){return!!m}),d=a.levels.map(function(m){return m.videoCodec}).filter(function(m){return!!m});this._attemptKeySystemAccess(D.KeySystems.WIDEVINE,f,d)}},A(R,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),R}();i.default=O},"./src/controller/fps-controller.ts":function(n,i,r){r.r(i);var s=r("./src/events.ts"),o=r("./src/utils/logger.ts"),u=function(){function D(A){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=A,this.registerListeners()}var C=D.prototype;return C.setStreamController=function(_){this.streamController=_},C.registerListeners=function(){this.hls.on(s.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},C.unregisterListeners=function(){this.hls.off(s.Events.MEDIA_ATTACHING,this.onMediaAttaching)},C.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},C.onMediaAttaching=function(_,p){var L=this.hls.config;if(L.capLevelOnFPSDrop){var O=p.media instanceof self.HTMLVideoElement?p.media:null;this.media=O,O&&typeof O.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),L.fpsDroppedMonitoringPeriod)}},C.checkFPS=function(_,p,L){var O=performance.now();if(p){if(this.lastTime){var R=O-this.lastTime,T=L-this.lastDroppedFrames,y=p-this.lastDecodedFrames,l=1e3*T/R,a=this.hls;if(a.trigger(s.Events.FPS_DROP,{currentDropped:T,currentDecoded:y,totalDroppedFrames:L}),l>0&&T>a.config.fpsDroppedMonitoringThreshold*y){var f=a.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(a.autoLevelCapping===-1||a.autoLevelCapping>=f)&&(f=f-1,a.trigger(s.Events.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:a.currentLevel}),a.autoLevelCapping=f,this.streamController.nextLevelSwitch())}}this.lastTime=O,this.lastDroppedFrames=L,this.lastDecodedFrames=p}},C.checkFPSInterval=function(){var _=this.media;if(_)if(this.isVideoPlaybackQualityAvailable){var p=_.getVideoPlaybackQuality();this.checkFPS(_,p.totalVideoFrames,p.droppedVideoFrames)}else this.checkFPS(_,_.webkitDecodedFrameCount,_.webkitDroppedFrameCount)},D}();i.default=u},"./src/controller/fragment-finders.ts":function(n,i,r){r.r(i),r.d(i,"findFragmentByPDT",function(){return u}),r.d(i,"findFragmentByPTS",function(){return D}),r.d(i,"fragmentWithinToleranceTest",function(){return C}),r.d(i,"pdtWithinToleranceTest",function(){return A}),r.d(i,"findFragWithCC",function(){return _});var s=r("./src/polyfills/number.ts"),o=r("./src/utils/binary-search.ts");function u(p,L,O){if(L===null||!Array.isArray(p)||!p.length||!Object(s.isFiniteNumber)(L))return null;var R=p[0].programDateTime;if(L<(R||0))return null;var T=p[p.length-1].endProgramDateTime;if(L>=(T||0))return null;O=O||0;for(var y=0;y<p.length;++y){var l=p[y];if(A(L,O,l))return l}return null}function D(p,L,O,R){O===void 0&&(O=0),R===void 0&&(R=0);var T=null;if(p?T=L[p.sn-L[0].sn+1]||null:O===0&&L[0].start===0&&(T=L[0]),T&&C(O,R,T)===0)return T;var y=o.default.search(L,C.bind(null,O,R));return y||T}function C(p,L,O){p===void 0&&(p=0),L===void 0&&(L=0);var R=Math.min(L,O.duration+(O.deltaPTS?O.deltaPTS:0));return O.start+O.duration-R<=p?1:O.start-R>p&&O.start?-1:0}function A(p,L,O){var R=Math.min(L,O.duration+(O.deltaPTS?O.deltaPTS:0))*1e3,T=O.endProgramDateTime||0;return T-R>p}function _(p,L){return o.default.search(p,function(O){return O.cc<L?1:O.cc>L?-1:0})}},"./src/controller/fragment-tracker.ts":function(n,i,r){r.r(i),r.d(i,"FragmentState",function(){return u}),r.d(i,"FragmentTracker",function(){return D});var s=r("./src/events.ts"),o=r("./src/types/loader.ts"),u;(function(_){_.NOT_LOADED="NOT_LOADED",_.APPENDING="APPENDING",_.PARTIAL="PARTIAL",_.OK="OK"})(u||(u={}));var D=function(){function _(L){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=L,this._registerListeners()}var p=_.prototype;return p._registerListeners=function(){var O=this.hls;O.on(s.Events.BUFFER_APPENDED,this.onBufferAppended,this),O.on(s.Events.FRAG_BUFFERED,this.onFragBuffered,this),O.on(s.Events.FRAG_LOADED,this.onFragLoaded,this)},p._unregisterListeners=function(){var O=this.hls;O.off(s.Events.BUFFER_APPENDED,this.onBufferAppended,this),O.off(s.Events.FRAG_BUFFERED,this.onFragBuffered,this),O.off(s.Events.FRAG_LOADED,this.onFragLoaded,this)},p.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},p.getAppendedFrag=function(O,R){if(R===o.PlaylistLevelType.MAIN){var T=this.activeFragment,y=this.activeParts;if(!T)return null;if(y)for(var l=y.length;l--;){var a=y[l],f=a?a.end:T.appendedPTS;if(a.start<=O&&f!==void 0&&O<=f)return l>9&&(this.activeParts=y.slice(l-9)),a}else if(T.start<=O&&T.appendedPTS!==void 0&&O<=T.appendedPTS)return T}return this.getBufferedFrag(O,R)},p.getBufferedFrag=function(O,R){for(var T=this.fragments,y=Object.keys(T),l=y.length;l--;){var a=T[y[l]];if((a==null?void 0:a.body.type)===R&&a.buffered){var f=a.body;if(f.start<=O&&O<=f.end)return f}}return null},p.detectEvictedFragments=function(O,R,T){var y=this;Object.keys(this.fragments).forEach(function(l){var a=y.fragments[l];if(!!a){if(!a.buffered){a.body.type===T&&y.removeFragment(a.body);return}var f=a.range[O];!f||f.time.some(function(d){var m=!y.isTimeBuffered(d.startPTS,d.endPTS,R);return m&&y.removeFragment(a.body),m})}})},p.detectPartialFragments=function(O){var R=this,T=this.timeRanges,y=O.frag,l=O.part;if(!(!T||y.sn==="initSegment")){var a=A(y),f=this.fragments[a];!f||(Object.keys(T).forEach(function(d){var m=y.elementaryStreams[d];if(!!m){var h=T[d],c=l!==null||m.partial===!0;f.range[d]=R.getBufferedTimes(y,l,c,h)}}),f.loaded=null,Object.keys(f.range).length?f.buffered=!0:this.removeFragment(f.body))}},p.fragBuffered=function(O){var R=A(O),T=this.fragments[R];T&&(T.loaded=null,T.buffered=!0)},p.getBufferedTimes=function(O,R,T,y){for(var l={time:[],partial:T},a=R?R.start:O.start,f=R?R.end:O.end,d=O.minEndPTS||f,m=O.maxStartPTS||a,h=0;h<y.length;h++){var c=y.start(h)-this.bufferPadding,v=y.end(h)+this.bufferPadding;if(m>=c&&d<=v){l.time.push({startPTS:Math.max(a,y.start(h)),endPTS:Math.min(f,y.end(h))});break}else if(a<v&&f>c)l.partial=!0,l.time.push({startPTS:Math.max(a,y.start(h)),endPTS:Math.min(f,y.end(h))});else if(f<=c)break}return l},p.getPartialFragment=function(O){var R=null,T,y,l,a=0,f=this.bufferPadding,d=this.fragments;return Object.keys(d).forEach(function(m){var h=d[m];!h||C(h)&&(y=h.body.start-f,l=h.body.end+f,O>=y&&O<=l&&(T=Math.min(O-y,l-O),a<=T&&(R=h.body,a=T)))}),R},p.getState=function(O){var R=A(O),T=this.fragments[R];return T?T.buffered?C(T)?u.PARTIAL:u.OK:u.APPENDING:u.NOT_LOADED},p.isTimeBuffered=function(O,R,T){for(var y,l,a=0;a<T.length;a++){if(y=T.start(a)-this.bufferPadding,l=T.end(a)+this.bufferPadding,O>=y&&R<=l)return!0;if(R<=y)return!1}return!1},p.onFragLoaded=function(O,R){var T=R.frag,y=R.part;if(!(T.sn==="initSegment"||T.bitrateTest||y)){var l=A(T);this.fragments[l]={body:T,loaded:R,buffered:!1,range:Object.create(null)}}},p.onBufferAppended=function(O,R){var T=this,y=R.frag,l=R.part,a=R.timeRanges;if(y.type===o.PlaylistLevelType.MAIN)if(this.activeFragment=y,l){var f=this.activeParts;f||(this.activeParts=f=[]),f.push(l)}else this.activeParts=null;this.timeRanges=a,Object.keys(a).forEach(function(d){var m=a[d];if(T.detectEvictedFragments(d,m),!l)for(var h=0;h<m.length;h++)y.appendedPTS=Math.max(m.end(h),y.appendedPTS||0)})},p.onFragBuffered=function(O,R){this.detectPartialFragments(R)},p.hasFragment=function(O){var R=A(O);return!!this.fragments[R]},p.removeFragmentsInRange=function(O,R,T){var y=this;Object.keys(this.fragments).forEach(function(l){var a=y.fragments[l];if(!!a&&a.buffered){var f=a.body;f.type===T&&f.start<R&&f.end>O&&y.removeFragment(f)}})},p.removeFragment=function(O){var R=A(O);O.stats.loaded=0,O.clearElementaryStreamInfo(),delete this.fragments[R]},p.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},_}();function C(_){var p,L;return _.buffered&&(((p=_.range.video)===null||p===void 0?void 0:p.partial)||((L=_.range.audio)===null||L===void 0?void 0:L.partial))}function A(_){return _.type+"_"+_.level+"_"+_.urlId+"_"+_.sn}},"./src/controller/gap-controller.ts":function(n,i,r){r.r(i),r.d(i,"STALL_MINIMUM_DURATION_MS",function(){return C}),r.d(i,"MAX_START_GAP_JUMP",function(){return A}),r.d(i,"SKIP_BUFFER_HOLE_STEP_SECONDS",function(){return _}),r.d(i,"SKIP_BUFFER_RANGE_START",function(){return p}),r.d(i,"default",function(){return L});var s=r("./src/utils/buffer-helper.ts"),o=r("./src/errors.ts"),u=r("./src/events.ts"),D=r("./src/utils/logger.ts"),C=250,A=2,_=.1,p=.05,L=function(){function O(T,y,l,a){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=T,this.media=y,this.fragmentTracker=l,this.hls=a}var R=O.prototype;return R.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},R.poll=function(y,l){var a=this.config,f=this.media,d=this.stalled;if(f!==null){var m=f.currentTime,h=f.seeking,c=this.seeking&&!h,v=!this.seeking&&h;if(this.seeking=h,m!==y){if(this.moved=!0,d!==null){if(this.stallReported){var P=self.performance.now()-d;D.logger.warn("playback not stuck anymore @"+m+", after "+Math.round(P)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((v||c)&&(this.stalled=null),!(f.paused&&!h||f.ended||f.playbackRate===0||!s.BufferHelper.getBuffered(f).length)){var b=s.BufferHelper.bufferInfo(f,m,0),x=b.len>0,S=b.nextStart||0;if(!(!x&&!S)){if(h){var g=b.len>A,E=!S||l&&l.start<=m||S-m>A&&!this.fragmentTracker.getPartialFragment(m);if(g||E)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var I,M=Math.max(S,b.start||0)-m,F=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,w=F==null||(I=F.details)===null||I===void 0?void 0:I.live,k=w?F.details.targetduration*2:A;if(M>0&&M<=k){this._trySkipBufferHole(null);return}}var B=self.performance.now();if(d===null){this.stalled=B;return}var U=B-d;if(!(!h&&U>=C&&(this._reportStall(b),!this.media))){var j=s.BufferHelper.bufferInfo(f,m,a.maxBufferHole);this._tryFixBufferStall(j,U)}}}}},R._tryFixBufferStall=function(y,l){var a=this.config,f=this.fragmentTracker,d=this.media;if(d!==null){var m=d.currentTime,h=f.getPartialFragment(m);if(h){var c=this._trySkipBufferHole(h);if(c||!this.media)return}y.len>a.maxBufferHole&&l>a.highBufferWatchdogPeriod*1e3&&(D.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},R._reportStall=function(y){var l=this.hls,a=this.media,f=this.stallReported;!f&&a&&(this.stallReported=!0,D.logger.warn("Playback stalling at @"+a.currentTime+" due to low buffer ("+JSON.stringify(y)+")"),l.trigger(u.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:y.len}))},R._trySkipBufferHole=function(y){var l=this.config,a=this.hls,f=this.media;if(f===null)return 0;for(var d=f.currentTime,m=0,h=s.BufferHelper.getBuffered(f),c=0;c<h.length;c++){var v=h.start(c);if(d+l.maxBufferHole>=m&&d<v){var P=Math.max(v+p,f.currentTime+_);return D.logger.warn("skipping hole, adjusting currentTime from "+d+" to "+P),this.moved=!0,this.stalled=null,f.currentTime=P,y&&a.trigger(u.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+d+" to "+P,frag:y}),P}m=h.end(c)}return 0},R._tryNudgeBuffer=function(){var y=this.config,l=this.hls,a=this.media,f=this.nudgeRetry;if(a!==null){var d=a.currentTime;if(this.nudgeRetry++,f<y.nudgeMaxRetry){var m=d+(f+1)*y.nudgeOffset;D.logger.warn("Nudging 'currentTime' from "+d+" to "+m),a.currentTime=m,l.trigger(u.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else D.logger.error("Playhead still not moving while enough data buffered @"+d+" after "+y.nudgeMaxRetry+" nudges"),l.trigger(u.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},O}()},"./src/controller/id3-track-controller.ts":function(n,i,r){r.r(i);var s=r("./src/polyfills/number.ts"),o=r("./src/events.ts"),u=r("./src/utils/texttrack-utils.ts"),D=r("./src/demux/id3.ts"),C=r("./src/loader/date-range.ts"),A=r("./src/types/demuxer.ts"),_=.25;function p(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}function L(T,y){return T.getTime()/1e3-y}function O(T){return Uint8Array.from(T.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var R=function(){function T(l){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=l,this._registerListeners()}var y=T.prototype;return y.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},y._registerListeners=function(){var a=this.hls;a.on(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),a.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),a.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),a.on(o.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),a.on(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),a.on(o.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},y._unregisterListeners=function(){var a=this.hls;a.off(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),a.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),a.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),a.off(o.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),a.off(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),a.off(o.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},y.onMediaAttached=function(a,f){this.media=f.media},y.onMediaDetaching=function(){!this.id3Track||(Object(u.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},y.onManifestLoading=function(){this.dateRangeCuesAppended={}},y.createTrack=function(a){var f=this.getID3Track(a.textTracks);return f.mode="hidden",f},y.getID3Track=function(a){if(!!this.media){for(var f=0;f<a.length;f++){var d=a[f];if(d.kind==="metadata"&&d.label==="id3")return Object(u.sendAddTrackEvent)(d,this.media),d}return this.media.addTextTrack("metadata","id3")}},y.onFragParsingMetadata=function(a,f){if(!!this.media){var d=this.hls.config,m=d.enableEmsgMetadataCues,h=d.enableID3MetadataCues;if(!(!m&&!h)){var c=f.frag,v=f.samples,P=f.details;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var b=P.edge||c.end,x=p(),S=!1,g={},E=0;E<v.length;E++){var I=v[E].type;if(!(I===A.MetadataSchema.emsg&&!m||!h)){var M=D.getID3Frames(v[E].data);if(M){var F=v[E].pts,w=b,k=w-F;k<=0&&(w=F+_);for(var B=0;B<M.length;B++){var U=M[B];if(!D.isTimeStampFrame(U)){var j=new x(F,w,"");j.value=U,I&&(j.type=I),this.id3Track.addCue(j),g[U.key]=null,S=!0}}}}}S&&this.updateId3CueEnds(g)}}},y.updateId3CueEnds=function(a){var f,d=(f=this.id3Track)===null||f===void 0?void 0:f.cues;if(d)for(var m=d.length;m--;){var h,c=d[m],v=(h=c.value)===null||h===void 0?void 0:h.key;if(v&&v in a){var P=a[v];P&&c.endTime!==P&&(c.endTime=P),a[v]=c.startTime}}},y.onBufferFlushing=function(a,f){var d=f.startOffset,m=f.endOffset,h=f.type,c=this.id3Track,v=this.hls;if(!!v){var P=v.config,b=P.enableEmsgMetadataCues,x=P.enableID3MetadataCues;if(c&&(b||x)){var S;h==="audio"?S=function(E){return E.type===A.MetadataSchema.audioId3&&x}:h==="video"?S=function(E){return E.type===A.MetadataSchema.emsg&&b}:S=function(E){return E.type===A.MetadataSchema.audioId3&&x||E.type===A.MetadataSchema.emsg&&b},Object(u.removeCuesInRange)(c,d,m,S)}}},y.onLevelUpdated=function(a,f){var d=this,m=f.details;if(!(!this.media||!m.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)){var h=this.dateRangeCuesAppended,c=this.id3Track,v=m.dateRanges,P=Object.keys(v);if(c)for(var b=Object.keys(h).filter(function(k){return!P.includes(k)}),x=function(B){var U=b[B];Object.keys(h[U].cues).forEach(function(j){c.removeCue(h[U].cues[j])}),delete h[U]},S=b.length;S--;)x(S);var g=m.fragments[m.fragments.length-1];if(!(P.length===0||!Object(s.isFiniteNumber)(g==null?void 0:g.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var E=g.programDateTime/1e3-g.start,I=m.edge||g.end,M=p(),F=function(B){var U=P[B],j=v[U],H=h[U],N=(H==null?void 0:H.cues)||{},G=(H==null?void 0:H.durationKnown)||!1,$=L(j.startDate,E),z=I,ee=j.endDate;if(ee)z=L(ee,E),G=!0;else if(j.endOnNext&&!G){var X=P.reduce(function(Q,Y){var Z=v[Y];return Z.class===j.class&&Z.id!==Y&&Z.startDate>j.startDate&&Q.push(Z),Q},[]).sort(function(Q,Y){return Q.startDate.getTime()-Y.startDate.getTime()})[0];X&&(z=L(X.startDate,E),G=!0)}for(var te=Object.keys(j.attr),se=0;se<te.length;se++){var K=te[se];if(!(K===C.DateRangeAttribute.ID||K===C.DateRangeAttribute.CLASS||K===C.DateRangeAttribute.START_DATE||K===C.DateRangeAttribute.DURATION||K===C.DateRangeAttribute.END_DATE||K===C.DateRangeAttribute.END_ON_NEXT)){var W=N[K];if(W)G&&!H.durationKnown&&(W.endTime=z);else{var V=j.attr[K];W=new M($,z,""),(K===C.DateRangeAttribute.SCTE35_OUT||K===C.DateRangeAttribute.SCTE35_IN)&&(V=O(V)),W.value={key:K,data:V},W.type=A.MetadataSchema.dateRange,d.id3Track.addCue(W),N[K]=W}}}h[U]={cues:N,dateRange:j,durationKnown:G}},w=0;w<P.length;w++)F(w)}}},T}();i.default=R},"./src/controller/latency-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return A});var s=r("./src/errors.ts"),o=r("./src/events.ts"),u=r("./src/utils/logger.ts");function D(_,p){for(var L=0;L<p.length;L++){var O=p[L];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,O.key,O)}}function C(_,p,L){return p&&D(_.prototype,p),L&&D(_,L),Object.defineProperty(_,"prototype",{writable:!1}),_}var A=function(){function _(L){var O=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return O.timeupdate()},this.hls=L,this.config=L.config,this.registerListeners()}var p=_.prototype;return p.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},p.registerListeners=function(){this.hls.on(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(o.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(o.Events.ERROR,this.onError,this)},p.unregisterListeners=function(){this.hls.off(o.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(o.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(o.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(o.Events.ERROR,this.onError)},p.onMediaAttached=function(O,R){this.media=R.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},p.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},p.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},p.onLevelUpdated=function(O,R){var T=R.details;this.levelDetails=T,T.advanced&&this.timeupdate(),!T.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},p.onError=function(O,R){R.details===s.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,u.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},p.timeupdate=function(){var O=this.media,R=this.levelDetails;if(!(!O||!R)){this.currentTime=O.currentTime;var T=this.computeLatency();if(T!==null){this._latency=T;var y=this.config,l=y.lowLatencyMode,a=y.maxLiveSyncPlaybackRate;if(!(!l||a===1)){var f=this.targetLatency;if(f!==null){var d=T-f,m=Math.min(this.maxLatency,f+R.targetduration),h=d<m;if(R.live&&h&&d>.05&&this.forwardBufferLength>1){var c=Math.min(2,Math.max(1,a)),v=Math.round(2/(1+Math.exp(-.75*d-this.edgeStalled))*20)/20;O.playbackRate=Math.min(c,Math.max(1,v))}else O.playbackRate!==1&&O.playbackRate!==0&&(O.playbackRate=1)}}}}},p.estimateLiveEdge=function(){var O=this.levelDetails;return O===null?null:O.edge+O.age},p.computeLatency=function(){var O=this.estimateLiveEdge();return O===null?null:O-this.currentTime},C(_,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var O=this.config,R=this.levelDetails;return O.liveMaxLatencyDuration!==void 0?O.liveMaxLatencyDuration:R?O.liveMaxLatencyDurationCount*R.targetduration:0}},{key:"targetLatency",get:function(){var O=this.levelDetails;if(O===null)return null;var R=O.holdBack,T=O.partHoldBack,y=O.targetduration,l=this.config,a=l.liveSyncDuration,f=l.liveSyncDurationCount,d=l.lowLatencyMode,m=this.hls.userConfig,h=d&&T||R;(m.liveSyncDuration||m.liveSyncDurationCount||h===0)&&(h=a!==void 0?a:f*y);var c=y,v=1;return h+Math.min(this.stallCount*v,c)}},{key:"liveSyncPosition",get:function(){var O=this.estimateLiveEdge(),R=this.targetLatency,T=this.levelDetails;if(O===null||R===null||T===null)return null;var y=T.edge,l=O-R-this.edgeStalled,a=y-T.totalduration,f=y-(this.config.lowLatencyMode&&T.partTarget||T.targetduration);return Math.min(Math.max(a,l),f)}},{key:"drift",get:function(){var O=this.levelDetails;return O===null?1:O.drift}},{key:"edgeStalled",get:function(){var O=this.levelDetails;if(O===null)return 0;var R=(this.config.lowLatencyMode&&O.partTarget||O.targetduration)*3;return Math.max(O.age-R,0)}},{key:"forwardBufferLength",get:function(){var O=this.media,R=this.levelDetails;if(!O||!R)return 0;var T=O.buffered.length;return(T?O.buffered.end(T-1):R.edge)-this.currentTime}}]),_}()},"./src/controller/level-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return l});var s=r("./src/types/level.ts"),o=r("./src/events.ts"),u=r("./src/errors.ts"),D=r("./src/utils/codecs.ts"),C=r("./src/controller/level-helper.ts"),A=r("./src/controller/base-playlist-controller.ts"),_=r("./src/types/loader.ts");function p(){return p=Object.assign?Object.assign.bind():function(a){for(var f=1;f<arguments.length;f++){var d=arguments[f];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(a[m]=d[m])}return a},p.apply(this,arguments)}function L(a,f){for(var d=0;d<f.length;d++){var m=f[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(a,m.key,m)}}function O(a,f,d){return f&&L(a.prototype,f),d&&L(a,d),Object.defineProperty(a,"prototype",{writable:!1}),a}function R(a,f){a.prototype=Object.create(f.prototype),a.prototype.constructor=a,T(a,f)}function T(a,f){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,h){return m.__proto__=h,m},T(a,f)}var y=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),l=function(a){R(f,a);function f(m){var h;return h=a.call(this,m,"[level-controller]")||this,h._levels=[],h._firstLevel=-1,h._startLevel=void 0,h.currentLevelIndex=-1,h.manualLevelIndex=-1,h.onParsedComplete=void 0,h._registerListeners(),h}var d=f.prototype;return d._registerListeners=function(){var h=this.hls;h.on(o.Events.MANIFEST_LOADED,this.onManifestLoaded,this),h.on(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),h.on(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),h.on(o.Events.FRAG_LOADED,this.onFragLoaded,this),h.on(o.Events.ERROR,this.onError,this)},d._unregisterListeners=function(){var h=this.hls;h.off(o.Events.MANIFEST_LOADED,this.onManifestLoaded,this),h.off(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),h.off(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),h.off(o.Events.FRAG_LOADED,this.onFragLoaded,this),h.off(o.Events.ERROR,this.onError,this)},d.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,a.prototype.destroy.call(this)},d.startLoad=function(){var h=this._levels;h.forEach(function(c){c.loadError=0}),a.prototype.startLoad.call(this)},d.onManifestLoaded=function(h,c){var v=[],P=[],b=[],x,S={},g,E=!1,I=!1,M=!1;if(c.levels.forEach(function(B){var U=B.attrs;E=E||!!(B.width&&B.height),I=I||!!B.videoCodec,M=M||!!B.audioCodec,y&&B.audioCodec&&B.audioCodec.indexOf("mp4a.40.34")!==-1&&(B.audioCodec=void 0);var j=B.bitrate+"-"+B.attrs.RESOLUTION+"-"+B.attrs.CODECS;g=S[j],g?g.url.push(B.url):(g=new s.Level(B),S[j]=g,v.push(g)),U&&(U.AUDIO&&Object(C.addGroupId)(g,"audio",U.AUDIO),U.SUBTITLES&&Object(C.addGroupId)(g,"text",U.SUBTITLES))}),(E||I)&&M&&(v=v.filter(function(B){var U=B.videoCodec,j=B.width,H=B.height;return!!U||!!(j&&H)})),v=v.filter(function(B){var U=B.audioCodec,j=B.videoCodec;return(!U||Object(D.isCodecSupportedInMp4)(U,"audio"))&&(!j||Object(D.isCodecSupportedInMp4)(j,"video"))}),c.audioTracks&&(P=c.audioTracks.filter(function(B){return!B.audioCodec||Object(D.isCodecSupportedInMp4)(B.audioCodec,"audio")}),Object(C.assignTrackIdsByGroup)(P)),c.subtitles&&(b=c.subtitles,Object(C.assignTrackIdsByGroup)(b)),v.length>0){x=v[0].bitrate,v.sort(function(B,U){return B.bitrate-U.bitrate}),this._levels=v;for(var F=0;F<v.length;F++)if(v[F].bitrate===x){this._firstLevel=F,this.log("manifest loaded, "+v.length+" level(s) found, first bitrate: "+x);break}var w=M&&!I,k={levels:v,audioTracks:P,subtitleTracks:b,firstLevel:this._firstLevel,stats:c.stats,audio:M,video:I,altAudio:!w&&P.some(function(B){return!!B.url})};this.hls.trigger(o.Events.MANIFEST_PARSED,k),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(o.Events.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:c.url,reason:"no level with compatible codecs found in manifest"})},d.onError=function(h,c){if(a.prototype.onError.call(this,h,c),!c.fatal){var v=c.context,P=this._levels[this.currentLevelIndex];if(v&&(v.type===_.PlaylistContextType.AUDIO_TRACK&&P.audioGroupIds&&v.groupId===P.audioGroupIds[P.urlId]||v.type===_.PlaylistContextType.SUBTITLE_TRACK&&P.textGroupIds&&v.groupId===P.textGroupIds[P.urlId])){this.redundantFailover(this.currentLevelIndex);return}var b=!1,x=!0,S;switch(c.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:if(c.frag){var g=this._levels[c.frag.level];g?(g.fragmentError++,g.fragmentError>this.hls.config.fragLoadingMaxRetry&&(S=c.frag.level)):S=c.frag.level}break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:v&&(v.deliveryDirectives&&(x=!1),S=v.level),b=!0;break;case u.ErrorDetails.REMUX_ALLOC_ERROR:S=c.level,b=!0;break}S!==void 0&&this.recoverLevel(c,S,b,x)}},d.recoverLevel=function(h,c,v,P){var b=h.details,x=this._levels[c];if(x.loadError++,v){var S=this.retryLoadingOrFail(h);if(S)h.levelRetry=!0;else{this.currentLevelIndex=-1;return}}if(P){var g=x.url.length;if(g>1&&x.loadError<g)h.levelRetry=!0,this.redundantFailover(c);else if(this.manualLevelIndex===-1){var E=c===0?this._levels.length-1:c-1;this.currentLevelIndex!==E&&this._levels[E].loadError===0&&(this.warn(b+": switch to "+E),h.levelRetry=!0,this.hls.nextAutoLevel=E)}}},d.redundantFailover=function(h){var c=this._levels[h],v=c.url.length;if(v>1){var P=(c.urlId+1)%v;this.warn("Switching to redundant URL-id "+P),this._levels.forEach(function(b){b.urlId=P}),this.level=h}},d.onFragLoaded=function(h,c){var v=c.frag;if(v!==void 0&&v.type===_.PlaylistLevelType.MAIN){var P=this._levels[v.level];P!==void 0&&(P.fragmentError=0,P.loadError=0)}},d.onLevelLoaded=function(h,c){var v,P=c.level,b=c.details,x=this._levels[P];if(!x){var S;this.warn("Invalid level index "+P),(S=c.deliveryDirectives)!==null&&S!==void 0&&S.skip&&(b.deltaUpdateFailed=!0);return}P===this.currentLevelIndex?(x.fragmentError===0&&(x.loadError=0,this.retryCount=0),this.playlistLoaded(P,c,x.details)):(v=c.deliveryDirectives)!==null&&v!==void 0&&v.skip&&(b.deltaUpdateFailed=!0)},d.onAudioTrackSwitched=function(h,c){var v=this.hls.levels[this.currentLevelIndex];if(!!v&&v.audioGroupIds){for(var P=-1,b=this.hls.audioTracks[c.id].groupId,x=0;x<v.audioGroupIds.length;x++)if(v.audioGroupIds[x]===b){P=x;break}P!==v.urlId&&(v.urlId=P,this.startLoad())}},d.loadPlaylist=function(h){var c=this.currentLevelIndex,v=this._levels[c];if(this.canLoad&&v&&v.url.length>0){var P=v.urlId,b=v.url[P];if(h)try{b=h.addDirectives(b)}catch(x){this.warn("Could not construct new URL with HLS Delivery Directives: "+x)}this.log("Attempt loading level index "+c+(h?" at sn "+h.msn+" part "+h.part:"")+" with URL-id "+P+" "+b),this.clearTimer(),this.hls.trigger(o.Events.LEVEL_LOADING,{url:b,level:c,id:P,deliveryDirectives:h||null})}},d.removeLevel=function(h,c){var v=function(x,S){return S!==c},P=this._levels.filter(function(b,x){return x!==h?!0:b.url.length>1&&c!==void 0?(b.url=b.url.filter(v),b.audioGroupIds&&(b.audioGroupIds=b.audioGroupIds.filter(v)),b.textGroupIds&&(b.textGroupIds=b.textGroupIds.filter(v)),b.urlId=0,!0):!1}).map(function(b,x){var S=b.details;return S!=null&&S.fragments&&S.fragments.forEach(function(g){g.level=x}),b});this._levels=P,this.hls.trigger(o.Events.LEVELS_UPDATED,{levels:P})},O(f,[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(h){var c,v=this._levels;if(v.length!==0&&!(this.currentLevelIndex===h&&(c=v[h])!==null&&c!==void 0&&c.details)){if(h<0||h>=v.length){var P=h<0;if(this.hls.trigger(o.Events.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.LEVEL_SWITCH_ERROR,level:h,fatal:P,reason:"invalid level idx"}),P)return;h=Math.min(h,v.length-1)}this.clearTimer();var b=this.currentLevelIndex,x=v[b],S=v[h];this.log("switching to level "+h+" from "+b),this.currentLevelIndex=h;var g=p({},S,{level:h,maxBitrate:S.maxBitrate,uri:S.uri,urlId:S.urlId});delete g._urlId,this.hls.trigger(o.Events.LEVEL_SWITCHING,g);var E=S.details;if(!E||E.live){var I=this.switchParams(S.uri,x==null?void 0:x.details);this.loadPlaylist(I)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(h){this.manualLevelIndex=h,this._startLevel===void 0&&(this._startLevel=h),h!==-1&&(this.level=h)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(h){this._firstLevel=h}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var h=this.hls.config.startLevel;return h!==void 0?h:this._firstLevel}else return this._startLevel},set:function(h){this._startLevel=h}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(h){this.level=h,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=h)}}]),f}(A.default)},"./src/controller/level-helper.ts":function(n,i,r){r.r(i),r.d(i,"addGroupId",function(){return C}),r.d(i,"assignTrackIdsByGroup",function(){return A}),r.d(i,"updatePTS",function(){return _}),r.d(i,"updateFragPTSDTS",function(){return L}),r.d(i,"mergeDetails",function(){return O}),r.d(i,"mapPartIntersection",function(){return T}),r.d(i,"mapFragmentIntersection",function(){return y}),r.d(i,"adjustSliding",function(){return l}),r.d(i,"addSliding",function(){return a}),r.d(i,"computeReloadInterval",function(){return f}),r.d(i,"getFragmentWithSN",function(){return d}),r.d(i,"getPartWith",function(){return m});var s=r("./src/polyfills/number.ts"),o=r("./src/utils/logger.ts"),u=r("./src/loader/date-range.ts");function D(){return D=Object.assign?Object.assign.bind():function(h){for(var c=1;c<arguments.length;c++){var v=arguments[c];for(var P in v)Object.prototype.hasOwnProperty.call(v,P)&&(h[P]=v[P])}return h},D.apply(this,arguments)}function C(h,c,v){switch(c){case"audio":h.audioGroupIds||(h.audioGroupIds=[]),h.audioGroupIds.push(v);break;case"text":h.textGroupIds||(h.textGroupIds=[]),h.textGroupIds.push(v);break}}function A(h){var c={};h.forEach(function(v){var P=v.groupId||"";v.id=c[P]=c[P]||0,c[P]++})}function _(h,c,v){var P=h[c],b=h[v];p(P,b)}function p(h,c){var v=c.startPTS;if(Object(s.isFiniteNumber)(v)){var P=0,b;c.sn>h.sn?(P=v-h.start,b=h):(P=h.start-v,b=c),b.duration!==P&&(b.duration=P)}else if(c.sn>h.sn){var x=h.cc===c.cc;x&&h.minEndPTS?c.start=h.start+(h.minEndPTS-h.start):c.start=h.start+h.duration}else c.start=Math.max(h.start-c.duration,0)}function L(h,c,v,P,b,x){var S=P-v;S<=0&&(o.logger.warn("Fragment should have a positive duration",c),P=v+c.duration,x=b+c.duration);var g=v,E=P,I=c.startPTS,M=c.endPTS;if(Object(s.isFiniteNumber)(I)){var F=Math.abs(I-v);Object(s.isFiniteNumber)(c.deltaPTS)?c.deltaPTS=Math.max(F,c.deltaPTS):c.deltaPTS=F,g=Math.max(v,I),v=Math.min(v,I),b=Math.min(b,c.startDTS),E=Math.min(P,M),P=Math.max(P,M),x=Math.max(x,c.endDTS)}c.duration=P-v;var w=v-c.start;c.appendedPTS=P,c.start=c.startPTS=v,c.maxStartPTS=g,c.startDTS=b,c.endPTS=P,c.minEndPTS=E,c.endDTS=x;var k=c.sn;if(!h||k<h.startSN||k>h.endSN)return 0;var B,U=k-h.startSN,j=h.fragments;for(j[U]=c,B=U;B>0;B--)p(j[B],j[B-1]);for(B=U;B<j.length-1;B++)p(j[B],j[B+1]);return h.fragmentHint&&p(j[j.length-1],h.fragmentHint),h.PTSKnown=h.alignedSliding=!0,w}function O(h,c){for(var v=null,P=h.fragments,b=P.length-1;b>=0;b--){var x=P[b].initSegment;if(x){v=x;break}}h.fragmentHint&&delete h.fragmentHint.endPTS;var S=0,g;if(y(h,c,function(B,U){B.relurl&&(S=B.cc-U.cc),Object(s.isFiniteNumber)(B.startPTS)&&Object(s.isFiniteNumber)(B.endPTS)&&(U.start=U.startPTS=B.startPTS,U.startDTS=B.startDTS,U.appendedPTS=B.appendedPTS,U.maxStartPTS=B.maxStartPTS,U.endPTS=B.endPTS,U.endDTS=B.endDTS,U.minEndPTS=B.minEndPTS,U.duration=B.endPTS-B.startPTS,U.duration&&(g=U),c.PTSKnown=c.alignedSliding=!0),U.elementaryStreams=B.elementaryStreams,U.loader=B.loader,U.stats=B.stats,U.urlId=B.urlId,B.initSegment&&(U.initSegment=B.initSegment,v=B.initSegment)}),v){var E=c.fragmentHint?c.fragments.concat(c.fragmentHint):c.fragments;E.forEach(function(B){var U;(!B.initSegment||B.initSegment.relurl===((U=v)===null||U===void 0?void 0:U.relurl))&&(B.initSegment=v)})}if(c.skippedSegments)if(c.deltaUpdateFailed=c.fragments.some(function(B){return!B}),c.deltaUpdateFailed){o.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var I=c.skippedSegments;I--;)c.fragments.shift();c.startSN=c.fragments[0].sn,c.startCC=c.fragments[0].cc}else c.canSkipDateRanges&&(c.dateRanges=R(h.dateRanges,c.dateRanges,c.recentlyRemovedDateranges));var M=c.fragments;if(S){o.logger.warn("discontinuity sliding from playlist, take drift into account");for(var F=0;F<M.length;F++)M[F].cc+=S}c.skippedSegments&&(c.startCC=c.fragments[0].cc),T(h.partList,c.partList,function(B,U){U.elementaryStreams=B.elementaryStreams,U.stats=B.stats}),g?L(c,g,g.startPTS,g.endPTS,g.startDTS,g.endDTS):l(h,c),M.length&&(c.totalduration=c.edge-M[0].start),c.driftStartTime=h.driftStartTime,c.driftStart=h.driftStart;var w=c.advancedDateTime;if(c.advanced&&w){var k=c.edge;c.driftStart||(c.driftStartTime=w,c.driftStart=k),c.driftEndTime=w,c.driftEnd=k}else c.driftEndTime=h.driftEndTime,c.driftEnd=h.driftEnd,c.advancedDateTime=h.advancedDateTime}function R(h,c,v){var P=D({},h);return v&&v.forEach(function(b){delete P[b]}),Object.keys(c).forEach(function(b){var x=new u.DateRange(c[b].attr,P[b]);x.isValid?P[b]=x:o.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(c[b].attr)+'"')}),P}function T(h,c,v){if(h&&c)for(var P=0,b=0,x=h.length;b<=x;b++){var S=h[b],g=c[b+P];S&&g&&S.index===g.index&&S.fragment.sn===g.fragment.sn?v(S,g):P--}}function y(h,c,v){for(var P=c.skippedSegments,b=Math.max(h.startSN,c.startSN)-c.startSN,x=(h.fragmentHint?1:0)+(P?c.endSN:Math.min(h.endSN,c.endSN))-c.startSN,S=c.startSN-h.startSN,g=c.fragmentHint?c.fragments.concat(c.fragmentHint):c.fragments,E=h.fragmentHint?h.fragments.concat(h.fragmentHint):h.fragments,I=b;I<=x;I++){var M=E[S+I],F=g[I];P&&!F&&I<P&&(F=c.fragments[I]=M),M&&F&&v(M,F)}}function l(h,c){var v=c.startSN+c.skippedSegments-h.startSN,P=h.fragments;v<0||v>=P.length||a(c,P[v].start)}function a(h,c){if(c){for(var v=h.fragments,P=h.skippedSegments;P<v.length;P++)v[P].start+=c;h.fragmentHint&&(h.fragmentHint.start+=c)}}function f(h,c){var v=1e3*h.levelTargetDuration,P=v/2,b=h.age,x=b>0&&b<v*3,S=c.loading.end-c.loading.start,g,E=h.availabilityDelay;if(h.updated===!1)if(x){var I=333*h.misses;g=Math.max(Math.min(P,S*2),I),h.availabilityDelay=(h.availabilityDelay||0)+g}else g=P;else x?(E=Math.min(E||v/2,b),h.availabilityDelay=E,g=E+v-b):g=v-S;return Math.round(g)}function d(h,c,v){if(!h||!h.details)return null;var P=h.details,b=P.fragments[c-P.startSN];return b||(b=P.fragmentHint,b&&b.sn===c)?b:c<P.startSN&&v&&v.sn===c?v:null}function m(h,c,v){if(!h||!h.details)return null;var P=h.details.partList;if(P)for(var b=P.length;b--;){var x=P[b];if(x.index===v&&x.fragment.sn===c)return x}return null}},"./src/controller/stream-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return h});var s=r("./src/polyfills/number.ts"),o=r("./src/controller/base-stream-controller.ts"),u=r("./src/is-supported.ts"),D=r("./src/events.ts"),C=r("./src/utils/buffer-helper.ts"),A=r("./src/controller/fragment-tracker.ts"),_=r("./src/types/loader.ts"),p=r("./src/loader/fragment.ts"),L=r("./src/demux/transmuxer-interface.ts"),O=r("./src/types/transmuxer.ts"),R=r("./src/controller/gap-controller.ts"),T=r("./src/errors.ts"),y=r("./src/utils/logger.ts");function l(c,v){for(var P=0;P<v.length;P++){var b=v[P];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}function a(c,v,P){return v&&l(c.prototype,v),P&&l(c,P),Object.defineProperty(c,"prototype",{writable:!1}),c}function f(c,v){c.prototype=Object.create(v.prototype),c.prototype.constructor=c,d(c,v)}function d(c,v){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,x){return b.__proto__=x,b},d(c,v)}var m=100,h=function(c){f(v,c);function v(b,x){var S;return S=c.call(this,b,x,"[stream-controller]")||this,S.audioCodecSwap=!1,S.gapController=null,S.level=-1,S._forceStartLoad=!1,S.altAudio=!1,S.audioOnly=!1,S.fragPlaying=null,S.onvplaying=null,S.onvseeked=null,S.fragLastKbps=0,S.stalled=!1,S.couldBacktrack=!1,S.backtrackFragment=null,S.audioCodecSwitch=!1,S.videoBuffer=null,S._registerListeners(),S}var P=v.prototype;return P._registerListeners=function(){var x=this.hls;x.on(D.Events.MEDIA_ATTACHED,this.onMediaAttached,this),x.on(D.Events.MEDIA_DETACHING,this.onMediaDetaching,this),x.on(D.Events.MANIFEST_LOADING,this.onManifestLoading,this),x.on(D.Events.MANIFEST_PARSED,this.onManifestParsed,this),x.on(D.Events.LEVEL_LOADING,this.onLevelLoading,this),x.on(D.Events.LEVEL_LOADED,this.onLevelLoaded,this),x.on(D.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),x.on(D.Events.ERROR,this.onError,this),x.on(D.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),x.on(D.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),x.on(D.Events.BUFFER_CREATED,this.onBufferCreated,this),x.on(D.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),x.on(D.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),x.on(D.Events.FRAG_BUFFERED,this.onFragBuffered,this)},P._unregisterListeners=function(){var x=this.hls;x.off(D.Events.MEDIA_ATTACHED,this.onMediaAttached,this),x.off(D.Events.MEDIA_DETACHING,this.onMediaDetaching,this),x.off(D.Events.MANIFEST_LOADING,this.onManifestLoading,this),x.off(D.Events.MANIFEST_PARSED,this.onManifestParsed,this),x.off(D.Events.LEVEL_LOADED,this.onLevelLoaded,this),x.off(D.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),x.off(D.Events.ERROR,this.onError,this),x.off(D.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),x.off(D.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),x.off(D.Events.BUFFER_CREATED,this.onBufferCreated,this),x.off(D.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),x.off(D.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),x.off(D.Events.FRAG_BUFFERED,this.onFragBuffered,this)},P.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},P.startLoad=function(x){if(this.levels){var S=this.lastCurrentTime,g=this.hls;if(this.stopLoad(),this.setInterval(m),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var E=g.startLevel;E===-1&&(g.config.testBandwidth?(E=0,this.bitrateTest=!0):E=g.nextAutoLevel),this.level=g.nextLoadLevel=E,this.loadedmetadata=!1}S>0&&x===-1&&(this.log("Override startPosition with lastCurrentTime @"+S.toFixed(3)),x=S),this.state=o.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=x,this.tick()}else this._forceStartLoad=!0,this.state=o.State.STOPPED},P.stopLoad=function(){this._forceStartLoad=!1,c.prototype.stopLoad.call(this)},P.doTick=function(){switch(this.state){case o.State.IDLE:this.doTickIdle();break;case o.State.WAITING_LEVEL:{var x,S=this.levels,g=this.level,E=S==null||(x=S[g])===null||x===void 0?void 0:x.details;if(E&&(!E.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(E))break;this.state=o.State.IDLE;break}break}case o.State.FRAG_LOADING_WAITING_RETRY:{var I,M=self.performance.now(),F=this.retryDate;(!F||M>=F||(I=this.media)!==null&&I!==void 0&&I.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=o.State.IDLE)}break}this.onTickEnd()},P.onTickEnd=function(){c.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},P.doTickIdle=function(){var x,S,g=this.hls,E=this.levelLastLoaded,I=this.levels,M=this.media,F=g.config,w=g.nextLoadLevel;if(!(E===null||!M&&(this.startFragRequested||!F.startFragPrefetch))&&!(this.altAudio&&this.audioOnly)&&!(!I||!I[w])){var k=I[w];this.level=g.nextLoadLevel=w;var B=k.details;if(!B||this.state===o.State.WAITING_LEVEL||B.live&&this.levelLastLoaded!==w){this.state=o.State.WAITING_LEVEL;return}var U=this.getMainFwdBufferInfo();if(U!==null){var j=U.len,H=this.getMaxBufferLength(k.maxBitrate);if(!(j>=H)){if(this._streamEnded(U,B)){var N={};this.altAudio&&(N.type="video"),this.hls.trigger(D.Events.BUFFER_EOS,N),this.state=o.State.ENDED;return}this.backtrackFragment&&this.backtrackFragment.start>U.end&&(this.backtrackFragment=null);var G=this.backtrackFragment?this.backtrackFragment.start:U.end,$=this.getNextFragment(G,B);if(this.couldBacktrack&&!this.fragPrevious&&$&&$.sn!=="initSegment"&&this.fragmentTracker.getState($)!==A.FragmentState.OK){var z,ee=((z=this.backtrackFragment)!=null?z:$).sn,X=ee-B.startSN,te=B.fragments[X-1];te&&$.cc===te.cc&&($=te,this.fragmentTracker.removeFragment(te))}else this.backtrackFragment&&U.len&&(this.backtrackFragment=null);if($&&this.fragmentTracker.getState($)===A.FragmentState.OK&&this.nextLoadPosition>G){var se=this.audioOnly&&!this.altAudio?p.ElementaryStreamTypes.AUDIO:p.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(M,se,_.PlaylistLevelType.MAIN),$=this.getNextFragment(this.nextLoadPosition,B)}!$||($.initSegment&&!$.initSegment.data&&!this.bitrateTest&&($=$.initSegment),((x=$.decryptdata)===null||x===void 0?void 0:x.keyFormat)==="identity"&&!((S=$.decryptdata)!==null&&S!==void 0&&S.key)?this.loadKey($,B):this.loadFragment($,B,G))}}}},P.loadFragment=function(x,S,g){var E,I=this.fragmentTracker.getState(x);this.fragCurrent=x,I===A.FragmentState.NOT_LOADED||I===A.FragmentState.PARTIAL?x.sn==="initSegment"?this._loadInitSegment(x):this.bitrateTest?(x.bitrateTest=!0,this.log("Fragment "+x.sn+" of level "+x.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(x)):(this.startFragRequested=!0,c.prototype.loadFragment.call(this,x,S,g)):I===A.FragmentState.APPENDING?this.reduceMaxBufferLength(x.duration)&&this.fragmentTracker.removeFragment(x):((E=this.media)===null||E===void 0?void 0:E.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},P.getAppendedFrag=function(x){var S=this.fragmentTracker.getAppendedFrag(x,_.PlaylistLevelType.MAIN);return S&&"fragment"in S?S.fragment:S},P.getBufferedFrag=function(x){return this.fragmentTracker.getBufferedFrag(x,_.PlaylistLevelType.MAIN)},P.followingBufferedFrag=function(x){return x?this.getBufferedFrag(x.end+.5):null},P.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},P.nextLevelSwitch=function(){var x=this.levels,S=this.media;if(S!=null&&S.readyState){var g,E=this.getAppendedFrag(S.currentTime);if(E&&E.start>1&&this.flushMainBuffer(0,E.start-1),!S.paused&&x){var I=this.hls.nextLoadLevel,M=x[I],F=this.fragLastKbps;F&&this.fragCurrent?g=this.fragCurrent.duration*M.maxBitrate/(1e3*F)+1:g=0}else g=0;var w=this.getBufferedFrag(S.currentTime+g);if(w){var k=this.followingBufferedFrag(w);if(k){this.abortCurrentFrag();var B=k.maxStartPTS?k.maxStartPTS:k.start,U=k.duration,j=Math.max(w.end,B+Math.min(Math.max(U-this.config.maxFragLookUpTolerance,U*.5),U*.75));this.flushMainBuffer(j,Number.POSITIVE_INFINITY)}}}},P.abortCurrentFrag=function(){var x=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,x!=null&&x.loader&&x.loader.abort(),this.state){case o.State.KEY_LOADING:case o.State.FRAG_LOADING:case o.State.FRAG_LOADING_WAITING_RETRY:case o.State.PARSING:case o.State.PARSED:this.state=o.State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()},P.flushMainBuffer=function(x,S){c.prototype.flushMainBuffer.call(this,x,S,this.altAudio?"video":null)},P.onMediaAttached=function(x,S){c.prototype.onMediaAttached.call(this,x,S);var g=S.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),g.addEventListener("playing",this.onvplaying),g.addEventListener("seeked",this.onvseeked),this.gapController=new R.default(this.config,g,this.fragmentTracker,this.hls)},P.onMediaDetaching=function(){var x=this.media;x&&(x.removeEventListener("playing",this.onvplaying),x.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),c.prototype.onMediaDetaching.call(this)},P.onMediaPlaying=function(){this.tick()},P.onMediaSeeked=function(){var x=this.media,S=x?x.currentTime:null;Object(s.isFiniteNumber)(S)&&this.log("Media seeked to "+S.toFixed(3)),this.tick()},P.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(D.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},P.onManifestParsed=function(x,S){var g=!1,E=!1,I;S.levels.forEach(function(M){I=M.audioCodec,I&&(I.indexOf("mp4a.40.2")!==-1&&(g=!0),I.indexOf("mp4a.40.5")!==-1&&(E=!0))}),this.audioCodecSwitch=g&&E&&!Object(u.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=S.levels,this.startFragRequested=!1},P.onLevelLoading=function(x,S){var g=this.levels;if(!(!g||this.state!==o.State.IDLE)){var E=g[S.level];(!E.details||E.details.live&&this.levelLastLoaded!==S.level||this.waitForCdnTuneIn(E.details))&&(this.state=o.State.WAITING_LEVEL)}},P.onLevelLoaded=function(x,S){var g,E=this.levels,I=S.level,M=S.details,F=M.totalduration;if(!E){this.warn("Levels were reset while loading level "+I);return}this.log("Level "+I+" loaded ["+M.startSN+","+M.endSN+"], cc ["+M.startCC+", "+M.endCC+"] duration:"+F);var w=this.fragCurrent;w&&(this.state===o.State.FRAG_LOADING||this.state===o.State.FRAG_LOADING_WAITING_RETRY)&&w.level!==S.level&&w.loader&&(this.state=o.State.IDLE,this.backtrackFragment=null,w.loader.abort());var k=E[I],B=0;if(M.live||(g=k.details)!==null&&g!==void 0&&g.live){if(M.fragments[0]||(M.deltaUpdateFailed=!0),M.deltaUpdateFailed)return;B=this.alignPlaylists(M,k.details)}if(k.details=M,this.levelLastLoaded=I,this.hls.trigger(D.Events.LEVEL_UPDATED,{details:M,level:I}),this.state===o.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(M))return;this.state=o.State.IDLE}this.startFragRequested?M.live&&this.synchronizeToLiveEdge(M):this.setStartPosition(M,B),this.tick()},P._handleFragmentLoadProgress=function(x){var S,g=x.frag,E=x.part,I=x.payload,M=this.levels;if(!M){this.warn("Levels were reset while fragment load was in progress. Fragment "+g.sn+" of level "+g.level+" will not be buffered");return}var F=M[g.level],w=F.details;if(!w){this.warn("Dropping fragment "+g.sn+" of level "+g.level+" after level details were reset");return}var k=F.videoCodec,B=w.PTSKnown||!w.live,U=(S=g.initSegment)===null||S===void 0?void 0:S.data,j=this._getAudioCodec(F),H=this.transmuxer=this.transmuxer||new L.default(this.hls,_.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),N=E?E.index:-1,G=N!==-1,$=new O.ChunkMetadata(g.level,g.sn,g.stats.chunkCount,I.byteLength,N,G),z=this.initPTS[g.cc];H.push(I,U,j,k,g,E,w.totalduration,B,$,z)},P.onAudioTrackSwitching=function(x,S){var g=this.altAudio,E=!!S.url,I=S.id;if(!E){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var M=this.fragCurrent;M!=null&&M.loader&&(this.log("Switching to main audio track, cancel main fragment load"),M.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var F=this.hls;g&&F.trigger(D.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),F.trigger(D.Events.AUDIO_TRACK_SWITCHED,{id:I})}},P.onAudioTrackSwitched=function(x,S){var g=S.id,E=!!this.hls.audioTracks[g].url;if(E){var I=this.videoBuffer;I&&this.mediaBuffer!==I&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=I)}this.altAudio=E,this.tick()},P.onBufferCreated=function(x,S){var g=S.tracks,E,I,M=!1;for(var F in g){var w=g[F];if(w.id==="main"){if(I=F,E=w,F==="video"){var k=g[F];k&&(this.videoBuffer=k.buffer)}}else M=!0}M&&E?(this.log("Alternate track found, use "+I+".buffered to schedule main fragment loading"),this.mediaBuffer=E.buffer):this.mediaBuffer=this.media},P.onFragBuffered=function(x,S){var g=S.frag,E=S.part;if(!(g&&g.type!==_.PlaylistLevelType.MAIN)){if(this.fragContextChanged(g)){this.warn("Fragment "+g.sn+(E?" p: "+E.index:"")+" of level "+g.level+" finished buffering, but was aborted. state: "+this.state),this.state===o.State.PARSED&&(this.state=o.State.IDLE);return}var I=E?E.stats:g.stats;this.fragLastKbps=Math.round(8*I.total/(I.buffering.end-I.loading.first)),g.sn!=="initSegment"&&(this.fragPrevious=g),this.fragBufferedComplete(g,E)}},P.onError=function(x,S){switch(S.details){case T.ErrorDetails.FRAG_LOAD_ERROR:case T.ErrorDetails.FRAG_LOAD_TIMEOUT:case T.ErrorDetails.KEY_LOAD_ERROR:case T.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(_.PlaylistLevelType.MAIN,S);break;case T.ErrorDetails.LEVEL_LOAD_ERROR:case T.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==o.State.ERROR&&(S.fatal?(this.warn(""+S.details),this.state=o.State.ERROR):!S.levelRetry&&this.state===o.State.WAITING_LEVEL&&(this.state=o.State.IDLE));break;case T.ErrorDetails.BUFFER_FULL_ERROR:if(S.parent==="main"&&(this.state===o.State.PARSING||this.state===o.State.PARSED)){var g=!0,E=this.getFwdBufferInfo(this.media,_.PlaylistLevelType.MAIN);E&&E.len>.5&&(g=!this.reduceMaxBufferLength(E.len)),g&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}break}},P.checkBuffer=function(){var x=this.media,S=this.gapController;if(!(!x||!S||!x.readyState)){var g=C.BufferHelper.getBuffered(x);if(!this.loadedmetadata&&g.length)this.loadedmetadata=!0,this.seekToStartPos();else{var E=this.state!==o.State.IDLE?this.fragCurrent:null;S.poll(this.lastCurrentTime,E)}this.lastCurrentTime=x.currentTime}},P.onFragLoadEmergencyAborted=function(){this.state=o.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},P.onBufferFlushed=function(x,S){var g=S.type;if(g!==p.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var E=(g===p.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(E,g,_.PlaylistLevelType.MAIN)}},P.onLevelsUpdated=function(x,S){this.levels=S.levels},P.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},P.seekToStartPos=function(){var x=this.media,S=x.currentTime,g=this.startPosition;if(g>=0&&S<g){if(x.seeking){y.logger.log("could not seek to "+g+", already seeking at "+S);return}var E=C.BufferHelper.getBuffered(x),I=E.length?E.start(0):0,M=I-g;M>0&&(M<this.config.maxBufferHole||M<this.config.maxFragLookUpTolerance)&&(y.logger.log("adjusting start position by "+M+" to match buffer start"),g+=M,this.startPosition=g),this.log("seek to target start position "+g+" from current time "+S),x.currentTime=g}},P._getAudioCodec=function(x){var S=this.config.defaultAudioCodec||x.audioCodec;return this.audioCodecSwap&&S&&(this.log("Swapping audio codec"),S.indexOf("mp4a.40.5")!==-1?S="mp4a.40.2":S="mp4a.40.5"),S},P._loadBitrateTestFrag=function(x){var S=this;this._doFragLoad(x).then(function(g){var E=S.hls;if(!(!g||E.nextLoadLevel||S.fragContextChanged(x))){S.fragLoadError=0,S.state=o.State.IDLE,S.startFragRequested=!1,S.bitrateTest=!1;var I=x.stats;I.parsing.start=I.parsing.end=I.buffering.start=I.buffering.end=self.performance.now(),E.trigger(D.Events.FRAG_LOADED,g)}})},P._handleTransmuxComplete=function(x){var S,g="main",E=this.hls,I=x.remuxResult,M=x.chunkMeta,F=this.getCurrentContext(M);if(!F){this.warn("The loading context changed while buffering fragment "+M.sn+" of level "+M.level+". This chunk will not be buffered."),this.resetLiveStartWhenNotLoaded(M.level);return}var w=F.frag,k=F.part,B=F.level,U=I.video,j=I.text,H=I.id3,N=I.initSegment,G=B.details,$=this.altAudio?void 0:I.audio;if(!this.fragContextChanged(w)){if(this.state=o.State.PARSING,N){N.tracks&&(this._bufferInitSegment(B,N.tracks,w,M),E.trigger(D.Events.FRAG_PARSING_INIT_SEGMENT,{frag:w,id:g,tracks:N.tracks}));var z=N.initPTS,ee=N.timescale;Object(s.isFiniteNumber)(z)&&(this.initPTS[w.cc]=z,E.trigger(D.Events.INIT_PTS_FOUND,{frag:w,id:g,initPTS:z,timescale:ee}))}if(U&&I.independent!==!1){if(G){var X=U.startPTS,te=U.endPTS,se=U.startDTS,K=U.endDTS;if(k)k.elementaryStreams[U.type]={startPTS:X,endPTS:te,startDTS:se,endDTS:K};else if(U.firstKeyFrame&&U.independent&&(this.couldBacktrack=!0),U.dropped&&U.independent){var W=this.getMainFwdBufferInfo(),V=(W?W.end:this.getLoadPosition())+this.config.maxBufferHole,Q=U.firstKeyFramePTS?U.firstKeyFramePTS:X;if(V<Q-this.config.maxBufferHole){this.backtrack(w);return}w.setElementaryStreamInfo(U.type,w.start,te,w.start,K,!0)}w.setElementaryStreamInfo(U.type,X,te,se,K),this.backtrackFragment&&(this.backtrackFragment=w),this.bufferFragmentData(U,w,k,M)}}else if(I.independent===!1){this.backtrack(w);return}if($){var Y=$.startPTS,Z=$.endPTS,ne=$.startDTS,q=$.endDTS;k&&(k.elementaryStreams[p.ElementaryStreamTypes.AUDIO]={startPTS:Y,endPTS:Z,startDTS:ne,endDTS:q}),w.setElementaryStreamInfo(p.ElementaryStreamTypes.AUDIO,Y,Z,ne,q),this.bufferFragmentData($,w,k,M)}if(G&&H!==null&&H!==void 0&&(S=H.samples)!==null&&S!==void 0&&S.length){var re={id:g,frag:w,details:G,samples:H.samples};E.trigger(D.Events.FRAG_PARSING_METADATA,re)}if(G&&j){var J={id:g,frag:w,details:G,samples:j.samples};E.trigger(D.Events.FRAG_PARSING_USERDATA,J)}}},P._bufferInitSegment=function(x,S,g,E){var I=this;if(this.state===o.State.PARSING){this.audioOnly=!!S.audio&&!S.video,this.altAudio&&!this.audioOnly&&delete S.audio;var M=S.audio,F=S.video,w=S.audiovideo;if(M){var k=x.audioCodec,B=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(k&&(k.indexOf("mp4a.40.5")!==-1?k="mp4a.40.2":k="mp4a.40.5"),M.metadata.channelCount!==1&&B.indexOf("firefox")===-1&&(k="mp4a.40.5")),B.indexOf("android")!==-1&&M.container!=="audio/mpeg"&&(k="mp4a.40.2",this.log("Android: force audio codec to "+k)),x.audioCodec&&x.audioCodec!==k&&this.log('Swapping manifest audio codec "'+x.audioCodec+'" for "'+k+'"'),M.levelCodec=k,M.id="main",this.log("Init audio buffer, container:"+M.container+", codecs[selected/level/parsed]=["+(k||"")+"/"+(x.audioCodec||"")+"/"+M.codec+"]")}F&&(F.levelCodec=x.videoCodec,F.id="main",this.log("Init video buffer, container:"+F.container+", codecs[level/parsed]=["+(x.videoCodec||"")+"/"+F.codec+"]")),w&&this.log("Init audiovideo buffer, container:"+w.container+", codecs[level/parsed]=["+(x.attrs.CODECS||"")+"/"+w.codec+"]"),this.hls.trigger(D.Events.BUFFER_CODECS,S),Object.keys(S).forEach(function(U){var j=S[U],H=j.initSegment;H!=null&&H.byteLength&&I.hls.trigger(D.Events.BUFFER_APPENDING,{type:U,data:H,frag:g,part:null,chunkMeta:E,parent:g.type})}),this.tick()}},P.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,_.PlaylistLevelType.MAIN)},P.backtrack=function(x){this.couldBacktrack=!0,this.backtrackFragment=x,this.resetTransmuxer(),this.flushBufferGap(x),this.fragmentTracker.removeFragment(x),this.fragPrevious=null,this.nextLoadPosition=x.start,this.state=o.State.IDLE},P.checkFragmentChanged=function(){var x=this.media,S=null;if(x&&x.readyState>1&&x.seeking===!1){var g=x.currentTime;if(C.BufferHelper.isBuffered(x,g)?S=this.getAppendedFrag(g):C.BufferHelper.isBuffered(x,g+.1)&&(S=this.getAppendedFrag(g+.1)),S){this.backtrackFragment=null;var E=this.fragPlaying,I=S.level;(!E||S.sn!==E.sn||E.level!==I||S.urlId!==E.urlId)&&(this.hls.trigger(D.Events.FRAG_CHANGED,{frag:S}),(!E||E.level!==I)&&this.hls.trigger(D.Events.LEVEL_SWITCHED,{level:I}),this.fragPlaying=S)}}},a(v,[{key:"nextLevel",get:function(){var x=this.nextBufferedFrag;return x?x.level:-1}},{key:"currentFrag",get:function(){var x=this.media;return x?this.fragPlaying||this.getAppendedFrag(x.currentTime):null}},{key:"currentProgramDateTime",get:function(){var x=this.media;if(x){var S=x.currentTime,g=this.currentFrag;if(g&&Object(s.isFiniteNumber)(S)&&Object(s.isFiniteNumber)(g.programDateTime)){var E=g.programDateTime+(S-g.start)*1e3;return new Date(E)}}return null}},{key:"currentLevel",get:function(){var x=this.currentFrag;return x?x.level:-1}},{key:"nextBufferedFrag",get:function(){var x=this.currentFrag;return x?this.followingBufferedFrag(x):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),v}(o.default)},"./src/controller/subtitle-stream-controller.ts":function(n,i,r){r.r(i),r.d(i,"SubtitleStreamController",function(){return a});var s=r("./src/events.ts"),o=r("./src/utils/buffer-helper.ts"),u=r("./src/controller/fragment-finders.ts"),D=r("./src/utils/discontinuities.ts"),C=r("./src/controller/level-helper.ts"),A=r("./src/controller/fragment-tracker.ts"),_=r("./src/controller/base-stream-controller.ts"),p=r("./src/types/loader.ts"),L=r("./src/types/level.ts");function O(f,d){for(var m=0;m<d.length;m++){var h=d[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}function R(f,d,m){return d&&O(f.prototype,d),m&&O(f,m),Object.defineProperty(f,"prototype",{writable:!1}),f}function T(f,d){f.prototype=Object.create(d.prototype),f.prototype.constructor=f,y(f,d)}function y(f,d){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,c){return h.__proto__=c,h},y(f,d)}var l=500,a=function(f){T(d,f);function d(h,c){var v;return v=f.call(this,h,c,"[subtitle-stream-controller]")||this,v.levels=[],v.currentTrackId=-1,v.tracksBuffered=[],v.mainDetails=null,v._registerListeners(),v}var m=d.prototype;return m.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},m._registerListeners=function(){var c=this.hls;c.on(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.on(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.on(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.on(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.on(s.Events.ERROR,this.onError,this),c.on(s.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),c.on(s.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),c.on(s.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),c.on(s.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),c.on(s.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},m._unregisterListeners=function(){var c=this.hls;c.off(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.off(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.off(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.off(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.off(s.Events.ERROR,this.onError,this),c.off(s.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),c.off(s.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),c.off(s.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),c.off(s.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),c.off(s.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},m.startLoad=function(){this.stopLoad(),this.state=_.State.IDLE,this.setInterval(l),this.tick()},m.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},m.onLevelLoaded=function(c,v){this.mainDetails=v.details},m.onSubtitleFragProcessed=function(c,v){var P=v.frag,b=v.success;if(this.fragPrevious=P,this.state=_.State.IDLE,!!b){var x=this.tracksBuffered[this.currentTrackId];if(!!x){for(var S,g=P.start,E=0;E<x.length;E++)if(g>=x[E].start&&g<=x[E].end){S=x[E];break}var I=P.start+P.duration;S?S.end=I:(S={start:g,end:I},x.push(S)),this.fragmentTracker.fragBuffered(P)}}},m.onBufferFlushing=function(c,v){var P=v.startOffset,b=v.endOffset;if(P===0&&b!==Number.POSITIVE_INFINITY){var x=this.currentTrackId,S=this.levels;if(!S.length||!S[x]||!S[x].details)return;var g=S[x].details,E=g.targetduration,I=b-E;if(I<=0)return;v.endOffsetSubtitles=Math.max(0,I),this.tracksBuffered.forEach(function(M){for(var F=0;F<M.length;){if(M[F].end<=I){M.shift();continue}else if(M[F].start<I)M[F].start=I;else break;F++}}),this.fragmentTracker.removeFragmentsInRange(P,I,p.PlaylistLevelType.SUBTITLE)}},m.onError=function(c,v){var P,b=v.frag;!b||b.type!==p.PlaylistLevelType.SUBTITLE||((P=this.fragCurrent)!==null&&P!==void 0&&P.loader&&this.fragCurrent.loader.abort(),this.state=_.State.IDLE)},m.onSubtitleTracksUpdated=function(c,v){var P=this,b=v.subtitleTracks;this.tracksBuffered=[],this.levels=b.map(function(x){return new L.Level(x)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(x){P.tracksBuffered[x.id]=[]}),this.mediaBuffer=null},m.onSubtitleTrackSwitch=function(c,v){if(this.currentTrackId=v.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}var P=this.levels[this.currentTrackId];P!=null&&P.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,P&&this.setInterval(l)},m.onSubtitleTrackLoaded=function(c,v){var P,b=v.details,x=v.id,S=this.currentTrackId,g=this.levels;if(!!g.length){var E=g[S];if(!(x>=g.length||x!==S||!E)){if(this.mediaBuffer=this.mediaBufferTimeRanges,b.live||(P=E.details)!==null&&P!==void 0&&P.live){var I=this.mainDetails;if(b.deltaUpdateFailed||!I)return;var M=I.fragments[0];if(!E.details)b.hasProgramDateTime&&I.hasProgramDateTime?Object(D.alignMediaPlaylistByPDT)(b,I):M&&Object(C.addSliding)(b,M.start);else{var F=this.alignPlaylists(b,E.details);F===0&&M&&Object(C.addSliding)(b,M.start)}}if(E.details=b,this.levelLastLoaded=x,this.tick(),b.live&&!this.fragCurrent&&this.media&&this.state===_.State.IDLE){var w=Object(u.findFragmentByPTS)(null,b.fragments,this.media.currentTime,0);w||(this.warn("Subtitle playlist not aligned with playback"),E.details=void 0)}}}},m._handleFragmentLoadComplete=function(c){var v=c.frag,P=c.payload,b=v.decryptdata,x=this.hls;if(!this.fragContextChanged(v)&&P&&P.byteLength>0&&b&&b.key&&b.iv&&b.method==="AES-128"){var S=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(P),b.key.buffer,b.iv.buffer).then(function(g){var E=performance.now();x.trigger(s.Events.FRAG_DECRYPTED,{frag:v,payload:g,stats:{tstart:S,tdecrypt:E}})})}},m.doTick=function(){if(!this.media){this.state=_.State.IDLE;return}if(this.state===_.State.IDLE){var c,v=this.currentTrackId,P=this.levels;if(!P.length||!P[v]||!P[v].details)return;var b=P[v].details,x=b.targetduration,S=this.config,g=this.media,E=o.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,g.currentTime-x,S.maxBufferHole),I=E.end,M=E.len,F=this.getMaxBufferLength()+x;if(M>F)return;console.assert(b,"Subtitle track details are defined on idle subtitle stream controller tick");var w=b.fragments,k=w.length,B=b.edge,U,j=this.fragPrevious;if(I<B){var H=S.maxFragLookUpTolerance;U=Object(u.findFragmentByPTS)(j,w,Math.max(w[0].start,I),H),!U&&j&&j.start<w[0].start&&(U=w[0])}else U=w[k-1];(c=U)!==null&&c!==void 0&&c.encrypted?this.loadKey(U,b):U&&this.fragmentTracker.getState(U)===A.FragmentState.NOT_LOADED&&this.loadFragment(U,b,I)}},m.loadFragment=function(c,v,P){this.fragCurrent=c,f.prototype.loadFragment.call(this,c,v,P)},R(d,[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}]),d}(_.default)},"./src/controller/subtitle-track-controller.ts":function(n,i,r){r.r(i);var s=r("./src/events.ts"),o=r("./src/utils/texttrack-utils.ts"),u=r("./src/controller/base-playlist-controller.ts"),D=r("./src/types/loader.ts");function C(R,T){for(var y=0;y<T.length;y++){var l=T[y];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(R,l.key,l)}}function A(R,T,y){return T&&C(R.prototype,T),y&&C(R,y),Object.defineProperty(R,"prototype",{writable:!1}),R}function _(R,T){R.prototype=Object.create(T.prototype),R.prototype.constructor=R,p(R,T)}function p(R,T){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,a){return l.__proto__=a,l},p(R,T)}var L=function(R){_(T,R);function T(l){var a;return a=R.call(this,l,"[subtitle-track-controller]")||this,a.media=null,a.tracks=[],a.groupId=null,a.tracksInGroup=[],a.trackId=-1,a.selectDefaultTrack=!0,a.queuedDefaultTrack=-1,a.trackChangeListener=function(){return a.onTextTracksChanged()},a.asyncPollTrackChange=function(){return a.pollTrackChange(0)},a.useTextTrackPolling=!1,a.subtitlePollingInterval=-1,a._subtitleDisplay=!0,a.registerListeners(),a}var y=T.prototype;return y.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,R.prototype.destroy.call(this)},y.registerListeners=function(){var a=this.hls;a.on(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),a.on(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),a.on(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),a.on(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),a.on(s.Events.LEVEL_LOADING,this.onLevelLoading,this),a.on(s.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),a.on(s.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),a.on(s.Events.ERROR,this.onError,this)},y.unregisterListeners=function(){var a=this.hls;a.off(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),a.off(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),a.off(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),a.off(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),a.off(s.Events.LEVEL_LOADING,this.onLevelLoading,this),a.off(s.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),a.off(s.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),a.off(s.Events.ERROR,this.onError,this)},y.onMediaAttached=function(a,f){this.media=f.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},y.pollTrackChange=function(a){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,a)},y.onMediaDetaching=function(){if(!!this.media){self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);var a=O(this.media.textTracks);a.forEach(function(f){Object(o.clearCurrentCues)(f)}),this.subtitleTrack=-1,this.media=null}},y.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},y.onManifestParsed=function(a,f){this.tracks=f.subtitleTracks},y.onSubtitleTrackLoaded=function(a,f){var d=f.id,m=f.details,h=this.trackId,c=this.tracksInGroup[h];if(!c){this.warn("Invalid subtitle track id "+d);return}var v=c.details;c.details=f.details,this.log("subtitle track "+d+" loaded ["+m.startSN+"-"+m.endSN+"]"),d===this.trackId&&(this.retryCount=0,this.playlistLoaded(d,f,v))},y.onLevelLoading=function(a,f){this.switchLevel(f.level)},y.onLevelSwitching=function(a,f){this.switchLevel(f.level)},y.switchLevel=function(a){var f=this.hls.levels[a];if(!!(f!=null&&f.textGroupIds)){var d=f.textGroupIds[f.urlId];if(this.groupId!==d){var m=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,h=this.tracks.filter(function(P){return!d||P.groupId===d});this.tracksInGroup=h;var c=this.findTrackId(m==null?void 0:m.name)||this.findTrackId();this.groupId=d;var v={subtitleTracks:h};this.log("Updating subtitle tracks, "+h.length+' track(s) found in "'+d+'" group-id'),this.hls.trigger(s.Events.SUBTITLE_TRACKS_UPDATED,v),c!==-1&&this.setSubtitleTrack(c,m)}}},y.findTrackId=function(a){for(var f=this.tracksInGroup,d=0;d<f.length;d++){var m=f[d];if((!this.selectDefaultTrack||m.default)&&(!a||a===m.name))return m.id}return-1},y.onError=function(a,f){R.prototype.onError.call(this,a,f),!(f.fatal||!f.context)&&f.context.type===D.PlaylistContextType.SUBTITLE_TRACK&&f.context.id===this.trackId&&f.context.groupId===this.groupId&&this.retryLoadingOrFail(f)},y.loadPlaylist=function(a){var f=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(f)){var d=f.id,m=f.groupId,h=f.url;if(a)try{h=a.addDirectives(h)}catch(c){this.warn("Could not construct new URL with HLS Delivery Directives: "+c)}this.log("Loading subtitle playlist for id "+d),this.hls.trigger(s.Events.SUBTITLE_TRACK_LOADING,{url:h,id:d,groupId:m,deliveryDirectives:a||null})}},y.toggleTrackModes=function(a){var f=this,d=this.media,m=this.trackId;if(!!d){var h=O(d.textTracks),c=h.filter(function(b){return b.groupId===f.groupId});if(a===-1)[].slice.call(h).forEach(function(b){b.mode="disabled"});else{var v=c[m];v&&(v.mode="disabled")}var P=c[a];P&&(P.mode=this.subtitleDisplay?"showing":"hidden")}},y.setSubtitleTrack=function(a,f){var d,m=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=a;return}if(this.trackId!==a&&this.toggleTrackModes(a),!(this.trackId===a&&(a===-1||(d=m[a])!==null&&d!==void 0&&d.details)||a<-1||a>=m.length)){this.clearTimer();var h=m[a];if(this.log("Switching to subtitle track "+a),this.trackId=a,h){var c=h.id,v=h.groupId,P=v===void 0?"":v,b=h.name,x=h.type,S=h.url;this.hls.trigger(s.Events.SUBTITLE_TRACK_SWITCH,{id:c,groupId:P,name:b,type:x,url:S});var g=this.switchParams(h.url,f==null?void 0:f.details);this.loadPlaylist(g)}else this.hls.trigger(s.Events.SUBTITLE_TRACK_SWITCH,{id:a})}},y.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var a=-1,f=O(this.media.textTracks),d=0;d<f.length;d++)if(f[d].mode==="hidden")a=d;else if(f[d].mode==="showing"){a=d;break}this.subtitleTrack!==a&&(this.subtitleTrack=a)}},A(T,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(a){this._subtitleDisplay=a,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(a){this.selectDefaultTrack=!1;var f=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(a,f)}}]),T}(u.default);function O(R){for(var T=[],y=0;y<R.length;y++){var l=R[y];l.kind==="subtitles"&&l.label&&T.push(R[y])}return T}i.default=L},"./src/controller/timeline-controller.ts":function(n,i,r){r.r(i),r.d(i,"TimelineController",function(){return O});var s=r("./src/polyfills/number.ts"),o=r("./src/events.ts"),u=r("./src/utils/cea-608-parser.ts"),D=r("./src/utils/output-filter.ts"),C=r("./src/utils/webvtt-parser.ts"),A=r("./src/utils/texttrack-utils.ts"),_=r("./src/utils/imsc1-ttml-parser.ts"),p=r("./src/types/loader.ts"),L=r("./src/utils/logger.ts"),O=function(){function l(f){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=y(),this.captionsProperties=void 0,this.hls=f,this.config=f.config,this.Cues=f.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var d=new D.default(this,"textTrack1"),m=new D.default(this,"textTrack2"),h=new D.default(this,"textTrack3"),c=new D.default(this,"textTrack4");this.cea608Parser1=new u.default(1,d,m),this.cea608Parser2=new u.default(3,h,c)}f.on(o.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),f.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.on(o.Events.MANIFEST_LOADED,this.onManifestLoaded,this),f.on(o.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),f.on(o.Events.FRAG_LOADING,this.onFragLoading,this),f.on(o.Events.FRAG_LOADED,this.onFragLoaded,this),f.on(o.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),f.on(o.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),f.on(o.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),f.on(o.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),f.on(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var a=l.prototype;return a.destroy=function(){var d=this.hls;d.off(o.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),d.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),d.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),d.off(o.Events.MANIFEST_LOADED,this.onManifestLoaded,this),d.off(o.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),d.off(o.Events.FRAG_LOADING,this.onFragLoading,this),d.off(o.Events.FRAG_LOADED,this.onFragLoaded,this),d.off(o.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),d.off(o.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),d.off(o.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),d.off(o.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),d.off(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},a.addCues=function(d,m,h,c,v){for(var P=!1,b=v.length;b--;){var x=v[b],S=T(x[0],x[1],m,h);if(S>=0&&(x[0]=Math.min(x[0],m),x[1]=Math.max(x[1],h),P=!0,S/(h-m)>.5))return}if(P||v.push([m,h]),this.config.renderTextTracksNatively){var g=this.captionsTracks[d];this.Cues.newCue(g,m,h,c)}else{var E=this.Cues.newCue(null,m,h,c);this.hls.trigger(o.Events.CUES_PARSED,{type:"captions",cues:E,track:d})}},a.onInitPtsFound=function(d,m){var h=this,c=m.frag,v=m.id,P=m.initPTS,b=m.timescale,x=this.unparsedVttFrags;v==="main"&&(this.initPTS[c.cc]=P,this.timescale[c.cc]=b),x.length&&(this.unparsedVttFrags=[],x.forEach(function(S){h.onFragLoaded(o.Events.FRAG_LOADED,S)}))},a.getExistingTrack=function(d){var m=this.media;if(m)for(var h=0;h<m.textTracks.length;h++){var c=m.textTracks[h];if(c[d])return c}return null},a.createCaptionsTrack=function(d){this.config.renderTextTracksNatively?this.createNativeTrack(d):this.createNonNativeTrack(d)},a.createNativeTrack=function(d){if(!this.captionsTracks[d]){var m=this.captionsProperties,h=this.captionsTracks,c=this.media,v=m[d],P=v.label,b=v.languageCode,x=this.getExistingTrack(d);if(x)h[d]=x,Object(A.clearCurrentCues)(h[d]),Object(A.sendAddTrackEvent)(h[d],c);else{var S=this.createTextTrack("captions",P,b);S&&(S[d]=!0,h[d]=S)}}},a.createNonNativeTrack=function(d){if(!this.nonNativeCaptionsTracks[d]){var m=this.captionsProperties[d];if(!!m){var h=m.label,c={_id:d,label:h,kind:"captions",default:m.media?!!m.media.default:!1,closedCaptions:m.media};this.nonNativeCaptionsTracks[d]=c,this.hls.trigger(o.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[c]})}}},a.createTextTrack=function(d,m,h){var c=this.media;if(!!c)return c.addTextTrack(d,m,h)},a.onMediaAttaching=function(d,m){this.media=m.media,this._cleanTracks()},a.onMediaDetaching=function(){var d=this.captionsTracks;Object.keys(d).forEach(function(m){Object(A.clearCurrentCues)(d[m]),delete d[m]}),this.nonNativeCaptionsTracks={}},a.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=y(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},a._cleanTracks=function(){var d=this.media;if(!!d){var m=d.textTracks;if(m)for(var h=0;h<m.length;h++)Object(A.clearCurrentCues)(m[h])}},a.onSubtitleTracksUpdated=function(d,m){var h=this;this.textTracks=[];var c=m.subtitleTracks||[],v=c.some(function(S){return S.textCodec===_.IMSC1_CODEC});if(this.config.enableWebVTT||v&&this.config.enableIMSC1){var P=this.tracks&&c&&this.tracks.length===c.length;if(this.tracks=c||[],this.config.renderTextTracksNatively){var b=this.media?this.media.textTracks:[];this.tracks.forEach(function(S,g){var E;if(g<b.length){for(var I=null,M=0;M<b.length;M++)if(R(b[M],S)){I=b[M];break}I&&(E=I)}E?Object(A.clearCurrentCues)(E):(E=h.createTextTrack("subtitles",S.name,S.lang),E&&(E.mode="disabled")),E&&(E.groupId=S.groupId,h.textTracks.push(E))})}else if(!P&&this.tracks&&this.tracks.length){var x=this.tracks.map(function(S){return{label:S.name,kind:S.type.toLowerCase(),default:S.default,subtitleTrack:S}});this.hls.trigger(o.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:x})}}},a.onManifestLoaded=function(d,m){var h=this;this.config.enableCEA708Captions&&m.captions&&m.captions.forEach(function(c){var v=/(?:CC|SERVICE)([1-4])/.exec(c.instreamId);if(!!v){var P="textTrack"+v[1],b=h.captionsProperties[P];!b||(b.label=c.name,c.lang&&(b.languageCode=c.lang),b.media=c)}})},a.onFragLoading=function(d,m){var h=this.cea608Parser1,c=this.cea608Parser2,v=this.lastSn,P=this.lastPartIndex;if(!(!this.enabled||!(h&&c))&&m.frag.type===p.PlaylistLevelType.MAIN){var b,x,S=m.frag.sn,g=(b=m==null||(x=m.part)===null||x===void 0?void 0:x.index)!=null?b:-1;S===v+1||S===v&&g===P+1||(h.reset(),c.reset()),this.lastSn=S,this.lastPartIndex=g}},a.onFragLoaded=function(d,m){var h=m.frag,c=m.payload,v=this.initPTS,P=this.unparsedVttFrags;if(h.type===p.PlaylistLevelType.SUBTITLE)if(c.byteLength){if(!Object(s.isFiniteNumber)(v[h.cc])){P.push(m),v.length&&this.hls.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:h,error:new Error("Missing initial subtitle PTS")});return}var b=h.decryptdata,x="stats"in m;if(b==null||b.key==null||b.method!=="AES-128"||x){var S=this.tracks[h.level],g=this.vttCCs;g[h.cc]||(g[h.cc]={start:h.start,prevCC:this.prevCC,new:!0},this.prevCC=h.cc),S&&S.textCodec===_.IMSC1_CODEC?this._parseIMSC1(h,c):this._parseVTTs(h,c,g)}}else this.hls.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:h,error:new Error("Empty subtitle payload")})},a._parseIMSC1=function(d,m){var h=this,c=this.hls;Object(_.parseIMSC1)(m,this.initPTS[d.cc],this.timescale[d.cc],function(v){h._appendCues(v,d.level),c.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:d})},function(v){L.logger.log("Failed to parse IMSC1: "+v),c.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:d,error:v})})},a._parseVTTs=function(d,m,h){var c=this,v=this.hls;Object(C.parseWebVTT)(m,this.initPTS[d.cc],this.timescale[d.cc],h,d.cc,d.start,function(P){c._appendCues(P,d.level),v.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:d})},function(P){c._fallbackToIMSC1(d,m),L.logger.log("Failed to parse VTT cue: "+P),v.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:d,error:P})})},a._fallbackToIMSC1=function(d,m){var h=this,c=this.tracks[d.level];c.textCodec||Object(_.parseIMSC1)(m,this.initPTS[d.cc],this.timescale[d.cc],function(){c.textCodec=_.IMSC1_CODEC,h._parseIMSC1(d,m)},function(){c.textCodec="wvtt"})},a._appendCues=function(d,m){var h=this.hls;if(this.config.renderTextTracksNatively){var c=this.textTracks[m];if(!c||c.mode==="disabled")return;d.forEach(function(b){return Object(A.addCueToTrack)(c,b)})}else{var v=this.tracks[m];if(!v)return;var P=v.default?"default":"subtitles"+m;h.trigger(o.Events.CUES_PARSED,{type:"subtitles",cues:d,track:P})}},a.onFragDecrypted=function(d,m){var h=m.frag;if(h.type===p.PlaylistLevelType.SUBTITLE){if(!Object(s.isFiniteNumber)(this.initPTS[h.cc])){this.unparsedVttFrags.push(m);return}this.onFragLoaded(o.Events.FRAG_LOADED,m)}},a.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},a.onFragParsingUserdata=function(d,m){var h=this.cea608Parser1,c=this.cea608Parser2;if(!(!this.enabled||!(h&&c)))for(var v=0;v<m.samples.length;v++){var P=m.samples[v].bytes;if(P){var b=this.extractCea608Data(P);h.addData(m.samples[v].pts,b[0]),c.addData(m.samples[v].pts,b[1])}}},a.onBufferFlushing=function(d,m){var h=m.startOffset,c=m.endOffset,v=m.endOffsetSubtitles,P=m.type,b=this.media;if(!(!b||b.currentTime<c)){if(!P||P==="video"){var x=this.captionsTracks;Object.keys(x).forEach(function(g){return Object(A.removeCuesInRange)(x[g],h,c)})}if(this.config.renderTextTracksNatively&&h===0&&v!==void 0){var S=this.textTracks;Object.keys(S).forEach(function(g){return Object(A.removeCuesInRange)(S[g],h,v)})}}},a.extractCea608Data=function(d){for(var m=[[],[]],h=d[0]&31,c=2,v=0;v<h;v++){var P=d[c++],b=127&d[c++],x=127&d[c++];if(!(b===0&&x===0)){var S=(4&P)!==0;if(S){var g=3&P;(g===0||g===1)&&(m[g].push(b),m[g].push(x))}}}return m},l}();function R(l,a){return l&&l.label===a.name&&!(l.textTrack1||l.textTrack2)}function T(l,a,f,d){return Math.min(a,d)-Math.max(l,f)}function y(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}},"./src/crypt/aes-crypto.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return s});var s=function(){function o(D,C){this.subtle=void 0,this.aesIV=void 0,this.subtle=D,this.aesIV=C}var u=o.prototype;return u.decrypt=function(C,A){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},A,C)},o}()},"./src/crypt/aes-decryptor.ts":function(n,i,r){r.r(i),r.d(i,"removePadding",function(){return o}),r.d(i,"default",function(){return u});var s=r("./src/utils/typed-array.ts");function o(D){var C=D.byteLength,A=C&&new DataView(D.buffer).getUint8(C-1);return A?Object(s.sliceUint8)(D,0,C-A):D}var u=function(){function D(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var C=D.prototype;return C.uint8ArrayToUint32Array_=function(_){for(var p=new DataView(_),L=new Uint32Array(4),O=0;O<4;O++)L[O]=p.getUint32(O*4);return L},C.initTable=function(){var _=this.sBox,p=this.invSBox,L=this.subMix,O=L[0],R=L[1],T=L[2],y=L[3],l=this.invSubMix,a=l[0],f=l[1],d=l[2],m=l[3],h=new Uint32Array(256),c=0,v=0,P=0;for(P=0;P<256;P++)P<128?h[P]=P<<1:h[P]=P<<1^283;for(P=0;P<256;P++){var b=v^v<<1^v<<2^v<<3^v<<4;b=b>>>8^b&255^99,_[c]=b,p[b]=c;var x=h[c],S=h[x],g=h[S],E=h[b]*257^b*16843008;O[c]=E<<24|E>>>8,R[c]=E<<16|E>>>16,T[c]=E<<8|E>>>24,y[c]=E,E=g*16843009^S*65537^x*257^c*16843008,a[b]=E<<24|E>>>8,f[b]=E<<16|E>>>16,d[b]=E<<8|E>>>24,m[b]=E,c?(c=x^h[h[h[g^x]]],v^=h[h[v]]):c=v=1}},C.expandKey=function(_){for(var p=this.uint8ArrayToUint32Array_(_),L=!0,O=0;O<p.length&&L;)L=p[O]===this.key[O],O++;if(!L){this.key=p;var R=this.keySize=p.length;if(R!==4&&R!==6&&R!==8)throw new Error("Invalid aes key size="+R);var T=this.ksRows=(R+6+1)*4,y,l,a=this.keySchedule=new Uint32Array(T),f=this.invKeySchedule=new Uint32Array(T),d=this.sBox,m=this.rcon,h=this.invSubMix,c=h[0],v=h[1],P=h[2],b=h[3],x,S;for(y=0;y<T;y++){if(y<R){x=a[y]=p[y];continue}S=x,y%R===0?(S=S<<8|S>>>24,S=d[S>>>24]<<24|d[S>>>16&255]<<16|d[S>>>8&255]<<8|d[S&255],S^=m[y/R|0]<<24):R>6&&y%R===4&&(S=d[S>>>24]<<24|d[S>>>16&255]<<16|d[S>>>8&255]<<8|d[S&255]),a[y]=x=(a[y-R]^S)>>>0}for(l=0;l<T;l++)y=T-l,l&3?S=a[y]:S=a[y-4],l<4||y<=4?f[l]=S:f[l]=c[d[S>>>24]]^v[d[S>>>16&255]]^P[d[S>>>8&255]]^b[d[S&255]],f[l]=f[l]>>>0}},C.networkToHostOrderSwap=function(_){return _<<24|(_&65280)<<8|(_&16711680)>>8|_>>>24},C.decrypt=function(_,p,L){for(var O=this.keySize+6,R=this.invKeySchedule,T=this.invSBox,y=this.invSubMix,l=y[0],a=y[1],f=y[2],d=y[3],m=this.uint8ArrayToUint32Array_(L),h=m[0],c=m[1],v=m[2],P=m[3],b=new Int32Array(_),x=new Int32Array(b.length),S,g,E,I,M,F,w,k,B,U,j,H,N,G,$=this.networkToHostOrderSwap;p<b.length;){for(B=$(b[p]),U=$(b[p+1]),j=$(b[p+2]),H=$(b[p+3]),M=B^R[0],F=H^R[1],w=j^R[2],k=U^R[3],N=4,G=1;G<O;G++)S=l[M>>>24]^a[F>>16&255]^f[w>>8&255]^d[k&255]^R[N],g=l[F>>>24]^a[w>>16&255]^f[k>>8&255]^d[M&255]^R[N+1],E=l[w>>>24]^a[k>>16&255]^f[M>>8&255]^d[F&255]^R[N+2],I=l[k>>>24]^a[M>>16&255]^f[F>>8&255]^d[w&255]^R[N+3],M=S,F=g,w=E,k=I,N=N+4;S=T[M>>>24]<<24^T[F>>16&255]<<16^T[w>>8&255]<<8^T[k&255]^R[N],g=T[F>>>24]<<24^T[w>>16&255]<<16^T[k>>8&255]<<8^T[M&255]^R[N+1],E=T[w>>>24]<<24^T[k>>16&255]<<16^T[M>>8&255]<<8^T[F&255]^R[N+2],I=T[k>>>24]<<24^T[M>>16&255]<<16^T[F>>8&255]<<8^T[w&255]^R[N+3],x[p]=$(S^h),x[p+1]=$(I^c),x[p+2]=$(E^v),x[p+3]=$(g^P),h=B,c=U,v=j,P=H,p=p+4}return x.buffer},D}()},"./src/crypt/decrypter.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return p});var s=r("./src/crypt/aes-crypto.ts"),o=r("./src/crypt/fast-aes-key.ts"),u=r("./src/crypt/aes-decryptor.ts"),D=r("./src/utils/logger.ts"),C=r("./src/utils/mp4-tools.ts"),A=r("./src/utils/typed-array.ts"),_=16,p=function(){function L(R,T,y){var l=y===void 0?{}:y,a=l.removePKCS7Padding,f=a===void 0?!0:a;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=R,this.config=T,this.removePKCS7Padding=f,f)try{var d=self.crypto;d&&(this.subtle=d.subtle||d.webkitSubtle)}catch{}this.subtle===null&&(this.config.enableSoftwareAES=!0)}var O=L.prototype;return O.destroy=function(){this.observer=null},O.isSync=function(){return this.config.enableSoftwareAES},O.flush=function(){var T=this.currentResult;if(!T){this.reset();return}var y=new Uint8Array(T);return this.reset(),this.removePKCS7Padding?Object(u.removePadding)(y):y},O.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},O.decrypt=function(T,y,l,a){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(T),y,l);var f=this.flush();f&&a(f.buffer)}else this.webCryptoDecrypt(new Uint8Array(T),y,l).then(a)},O.softwareDecrypt=function(T,y,l){var a=this.currentIV,f=this.currentResult,d=this.remainderData;this.logOnce("JS AES decrypt"),d&&(T=Object(C.appendUint8Array)(d,T),this.remainderData=null);var m=this.getValidChunk(T);if(!m.length)return null;a&&(l=a);var h=this.softwareDecrypter;h||(h=this.softwareDecrypter=new u.default),h.expandKey(y);var c=f;return this.currentResult=h.decrypt(m.buffer,0,l),this.currentIV=Object(A.sliceUint8)(m,-16).buffer,c||null},O.webCryptoDecrypt=function(T,y,l){var a=this,f=this.subtle;return(this.key!==y||!this.fastAesKey)&&(this.key=y,this.fastAesKey=new o.default(f,y)),this.fastAesKey.expandKey().then(function(d){if(!f)return Promise.reject(new Error("web crypto not initialized"));var m=new s.default(f,l);return m.decrypt(T.buffer,d)}).catch(function(d){return a.onWebCryptoError(d,T,y,l)})},O.onWebCryptoError=function(T,y,l,a){return D.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",T),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(y,l,a)},O.getValidChunk=function(T){var y=T,l=T.length-T.length%_;return l!==T.length&&(y=Object(A.sliceUint8)(T,0,l),this.remainderData=Object(A.sliceUint8)(T,l)),y},O.logOnce=function(T){!this.logEnabled||(D.logger.log("[decrypter.ts]: "+T),this.logEnabled=!1)},L}()},"./src/crypt/fast-aes-key.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return s});var s=function(){function o(D,C){this.subtle=void 0,this.key=void 0,this.subtle=D,this.key=C}var u=o.prototype;return u.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},o}()},"./src/demux/aacdemuxer.ts":function(n,i,r){r.r(i);var s=r("./src/demux/base-audio-demuxer.ts"),o=r("./src/demux/adts.ts"),u=r("./src/utils/logger.ts"),D=r("./src/demux/id3.ts");function C(p,L){p.prototype=Object.create(L.prototype),p.prototype.constructor=p,A(p,L)}function A(p,L){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,T){return R.__proto__=T,R},A(p,L)}var _=function(p){C(L,p);function L(R,T){var y;return y=p.call(this)||this,y.observer=void 0,y.config=void 0,y.observer=R,y.config=T,y}var O=L.prototype;return O.resetInitSegment=function(T,y,l,a){p.prototype.resetInitSegment.call(this,T,y,l,a),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:y,duration:a,inputTimeScale:9e4,dropped:0}},L.probe=function(T){if(!T)return!1;for(var y=D.getID3Data(T,0)||[],l=y.length,a=T.length;l<a;l++)if(o.probe(T,l))return u.logger.log("ADTS sync word found !"),!0;return!1},O.canParse=function(T,y){return o.canParse(T,y)},O.appendFrame=function(T,y,l){o.initTrackConfig(T,this.observer,y,l,T.manifestCodec);var a=o.appendFrame(T,y,l,this.initPTS,this.frameIndex);if(a&&a.missing===0)return a},L}(s.default);_.minProbeByteLength=9,i.default=_},"./src/demux/adts.ts":function(n,i,r){r.r(i),r.d(i,"getAudioConfig",function(){return D}),r.d(i,"isHeaderPattern",function(){return C}),r.d(i,"getHeaderLength",function(){return A}),r.d(i,"getFullFrameLength",function(){return _}),r.d(i,"canGetFrameLength",function(){return p}),r.d(i,"isHeader",function(){return L}),r.d(i,"canParse",function(){return O}),r.d(i,"probe",function(){return R}),r.d(i,"initTrackConfig",function(){return T}),r.d(i,"getFrameDuration",function(){return y}),r.d(i,"parseFrameHeader",function(){return l}),r.d(i,"appendFrame",function(){return a});var s=r("./src/utils/logger.ts"),o=r("./src/errors.ts"),u=r("./src/events.ts");function D(f,d,m,h){var c,v,P,b,x=navigator.userAgent.toLowerCase(),S=h,g=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];c=((d[m+2]&192)>>>6)+1;var E=(d[m+2]&60)>>>2;if(E>g.length-1){f.trigger(u.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+E});return}return P=(d[m+2]&1)<<2,P|=(d[m+3]&192)>>>6,s.logger.log("manifest codec:"+h+", ADTS type:"+c+", samplingIndex:"+E),/firefox/i.test(x)?E>=6?(c=5,b=new Array(4),v=E-3):(c=2,b=new Array(2),v=E):x.indexOf("android")!==-1?(c=2,b=new Array(2),v=E):(c=5,b=new Array(4),h&&(h.indexOf("mp4a.40.29")!==-1||h.indexOf("mp4a.40.5")!==-1)||!h&&E>=6?v=E-3:((h&&h.indexOf("mp4a.40.2")!==-1&&(E>=6&&P===1||/vivaldi/i.test(x))||!h&&P===1)&&(c=2,b=new Array(2)),v=E)),b[0]=c<<3,b[0]|=(E&14)>>1,b[1]|=(E&1)<<7,b[1]|=P<<3,c===5&&(b[1]|=(v&14)>>1,b[2]=(v&1)<<7,b[2]|=2<<2,b[3]=0),{config:b,samplerate:g[E],channelCount:P,codec:"mp4a.40."+c,manifestCodec:S}}function C(f,d){return f[d]===255&&(f[d+1]&246)===240}function A(f,d){return f[d+1]&1?7:9}function _(f,d){return(f[d+3]&3)<<11|f[d+4]<<3|(f[d+5]&224)>>>5}function p(f,d){return d+5<f.length}function L(f,d){return d+1<f.length&&C(f,d)}function O(f,d){return p(f,d)&&C(f,d)&&_(f,d)<=f.length-d}function R(f,d){if(L(f,d)){var m=A(f,d);if(d+m>=f.length)return!1;var h=_(f,d);if(h<=m)return!1;var c=d+h;return c===f.length||L(f,c)}return!1}function T(f,d,m,h,c){if(!f.samplerate){var v=D(d,m,h,c);if(!v)return;f.config=v.config,f.samplerate=v.samplerate,f.channelCount=v.channelCount,f.codec=v.codec,f.manifestCodec=v.manifestCodec,s.logger.log("parsed codec:"+f.codec+", rate:"+v.samplerate+", channels:"+v.channelCount)}}function y(f){return 1024*9e4/f}function l(f,d){var m=A(f,d);if(d+m<=f.length){var h=_(f,d)-m;if(h>0)return{headerLength:m,frameLength:h}}}function a(f,d,m,h,c){var v=y(f.samplerate),P=h+c*v,b=l(d,m),x;if(b){var S=b.frameLength,g=b.headerLength,E=g+S,I=Math.max(0,m+E-d.length);I?(x=new Uint8Array(E-g),x.set(d.subarray(m+g,d.length),0)):x=d.subarray(m+g,m+E);var M={unit:x,pts:P};return I||f.samples.push(M),{sample:M,length:E,missing:I}}var F=d.length-m;x=new Uint8Array(F),x.set(d.subarray(m,d.length),0);var w={unit:x,pts:P};return{sample:w,length:F,missing:-1}}},"./src/demux/base-audio-demuxer.ts":function(n,i,r){r.r(i),r.d(i,"initPTSFn",function(){return p});var s=r("./src/polyfills/number.ts"),o=r("./src/demux/id3.ts"),u=r("./src/types/demuxer.ts"),D=r("./src/demux/dummy-demuxed-track.ts"),C=r("./src/utils/mp4-tools.ts"),A=r("./src/utils/typed-array.ts"),_=function(){function L(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var O=L.prototype;return O.resetInitSegment=function(T,y,l,a){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},O.resetTimeStamp=function(){},O.resetContiguity=function(){},O.canParse=function(T,y){return!1},O.appendFrame=function(T,y,l){},O.demux=function(T,y){this.cachedData&&(T=Object(C.appendUint8Array)(this.cachedData,T),this.cachedData=null);var l=o.getID3Data(T,0),a=l?l.length:0,f,d,m=this._audioTrack,h=this._id3Track,c=l?o.getTimeStamp(l):void 0,v=T.length;for((this.frameIndex===0||this.initPTS===null)&&(this.initPTS=p(c,y)),l&&l.length>0&&h.samples.push({pts:this.initPTS,dts:this.initPTS,data:l,type:u.MetadataSchema.audioId3}),d=this.initPTS;a<v;){if(this.canParse(T,a)){var P=this.appendFrame(m,T,a);P?(this.frameIndex++,d=P.sample.pts,a+=P.length,f=a):a=v}else o.canParse(T,a)?(l=o.getID3Data(T,a),h.samples.push({pts:d,dts:d,data:l,type:u.MetadataSchema.audioId3}),a+=l.length,f=a):a++;if(a===v&&f!==v){var b=Object(A.sliceUint8)(T,f);this.cachedData?this.cachedData=Object(C.appendUint8Array)(this.cachedData,b):this.cachedData=b}}return{audioTrack:m,videoTrack:Object(D.dummyTrack)(),id3Track:h,textTrack:Object(D.dummyTrack)()}},O.demuxSampleAes=function(T,y,l){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},O.flush=function(T){var y=this.cachedData;return y&&(this.cachedData=null,this.demux(y,0)),this.frameIndex=0,{audioTrack:this._audioTrack,videoTrack:Object(D.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(D.dummyTrack)()}},O.destroy=function(){},L}(),p=function(O,R){return Object(s.isFiniteNumber)(O)?O*90:R*9e4};i.default=_},"./src/demux/chunk-cache.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return s});var s=function(){function u(){this.chunks=[],this.dataLength=0}var D=u.prototype;return D.push=function(A){this.chunks.push(A),this.dataLength+=A.length},D.flush=function(){var A=this.chunks,_=this.dataLength,p;if(A.length)A.length===1?p=A[0]:p=o(A,_);else return new Uint8Array(0);return this.reset(),p},D.reset=function(){this.chunks.length=0,this.dataLength=0},u}();function o(u,D){for(var C=new Uint8Array(D),A=0,_=0;_<u.length;_++){var p=u[_];C.set(p,A),A+=p.length}return C}},"./src/demux/dummy-demuxed-track.ts":function(n,i,r){r.r(i),r.d(i,"dummyTrack",function(){return s});function s(o,u){return o===void 0&&(o=""),u===void 0&&(u=9e4),{type:o,id:-1,pid:-1,inputTimeScale:u,sequenceNumber:-1,samples:[],dropped:0}}},"./src/demux/exp-golomb.ts":function(n,i,r){r.r(i);var s=r("./src/utils/logger.ts"),o=function(){function u(C){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=C,this.bytesAvailable=C.byteLength,this.word=0,this.bitsAvailable=0}var D=u.prototype;return D.loadWord=function(){var A=this.data,_=this.bytesAvailable,p=A.byteLength-_,L=new Uint8Array(4),O=Math.min(4,_);if(O===0)throw new Error("no bytes available");L.set(A.subarray(p,p+O)),this.word=new DataView(L.buffer).getUint32(0),this.bitsAvailable=O*8,this.bytesAvailable-=O},D.skipBits=function(A){var _;this.bitsAvailable>A?(this.word<<=A,this.bitsAvailable-=A):(A-=this.bitsAvailable,_=A>>3,A-=_>>3,this.bytesAvailable-=_,this.loadWord(),this.word<<=A,this.bitsAvailable-=A)},D.readBits=function(A){var _=Math.min(this.bitsAvailable,A),p=this.word>>>32-_;return A>32&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=_,this.bitsAvailable>0?this.word<<=_:this.bytesAvailable>0&&this.loadWord(),_=A-_,_>0&&this.bitsAvailable?p<<_|this.readBits(_):p},D.skipLZ=function(){var A;for(A=0;A<this.bitsAvailable;++A)if((this.word&2147483648>>>A)!==0)return this.word<<=A,this.bitsAvailable-=A,A;return this.loadWord(),A+this.skipLZ()},D.skipUEG=function(){this.skipBits(1+this.skipLZ())},D.skipEG=function(){this.skipBits(1+this.skipLZ())},D.readUEG=function(){var A=this.skipLZ();return this.readBits(A+1)-1},D.readEG=function(){var A=this.readUEG();return 1&A?1+A>>>1:-1*(A>>>1)},D.readBoolean=function(){return this.readBits(1)===1},D.readUByte=function(){return this.readBits(8)},D.readUShort=function(){return this.readBits(16)},D.readUInt=function(){return this.readBits(32)},D.skipScalingList=function(A){for(var _=8,p=8,L,O=0;O<A;O++)p!==0&&(L=this.readEG(),p=(_+L+256)%256),_=p===0?_:p},D.readSPS=function(){var A=0,_=0,p=0,L=0,O,R,T,y=this.readUByte.bind(this),l=this.readBits.bind(this),a=this.readUEG.bind(this),f=this.readBoolean.bind(this),d=this.skipBits.bind(this),m=this.skipEG.bind(this),h=this.skipUEG.bind(this),c=this.skipScalingList.bind(this);y();var v=y();if(l(5),d(3),y(),h(),v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128){var P=a();if(P===3&&d(1),h(),h(),d(1),f())for(R=P!==3?8:12,T=0;T<R;T++)f()&&(T<6?c(16):c(64))}h();var b=a();if(b===0)a();else if(b===1)for(d(1),m(),m(),O=a(),T=0;T<O;T++)m();h(),d(1);var x=a(),S=a(),g=l(1);g===0&&d(1),d(1),f()&&(A=a(),_=a(),p=a(),L=a());var E=[1,1];if(f()&&f()){var I=y();switch(I){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:{E=[y()<<8|y(),y()<<8|y()];break}}}return{width:Math.ceil((x+1)*16-A*2-_*2),height:(2-g)*(S+1)*16-(g?2:4)*(p+L),pixelRatio:E}},D.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},u}();i.default=o},"./src/demux/id3.ts":function(n,i,r){r.r(i),r.d(i,"isHeader",function(){return s}),r.d(i,"isFooter",function(){return o}),r.d(i,"getID3Data",function(){return u}),r.d(i,"canParse",function(){return C}),r.d(i,"getTimeStamp",function(){return A}),r.d(i,"isTimeStampFrame",function(){return _}),r.d(i,"getID3Frames",function(){return L}),r.d(i,"decodeFrame",function(){return O}),r.d(i,"utf8ArrayToStr",function(){return a}),r.d(i,"testables",function(){return f});var s=function(c,v){return v+10<=c.length&&c[v]===73&&c[v+1]===68&&c[v+2]===51&&c[v+3]<255&&c[v+4]<255&&c[v+6]<128&&c[v+7]<128&&c[v+8]<128&&c[v+9]<128},o=function(c,v){return v+10<=c.length&&c[v]===51&&c[v+1]===68&&c[v+2]===73&&c[v+3]<255&&c[v+4]<255&&c[v+6]<128&&c[v+7]<128&&c[v+8]<128&&c[v+9]<128},u=function(c,v){for(var P=v,b=0;s(c,v);){b+=10;var x=D(c,v+6);b+=x,o(c,v+10)&&(b+=10),v+=b}if(b>0)return c.subarray(P,P+b)},D=function(c,v){var P=0;return P=(c[v]&127)<<21,P|=(c[v+1]&127)<<14,P|=(c[v+2]&127)<<7,P|=c[v+3]&127,P},C=function(c,v){return s(c,v)&&D(c,v+6)+10<=c.length-v},A=function(c){for(var v=L(c),P=0;P<v.length;P++){var b=v[P];if(_(b))return l(b)}},_=function(c){return c&&c.key==="PRIV"&&c.info==="com.apple.streaming.transportStreamTimestamp"},p=function(c){var v=String.fromCharCode(c[0],c[1],c[2],c[3]),P=D(c,4),b=10;return{type:v,size:P,data:c.subarray(b,b+P)}},L=function(c){for(var v=0,P=[];s(c,v);){var b=D(c,v+6);v+=10;for(var x=v+b;v+8<x;){var S=p(c.subarray(v)),g=O(S);g&&P.push(g),v+=S.size+10}o(c,v)&&(v+=10)}return P},O=function(c){return c.type==="PRIV"?R(c):c.type[0]==="W"?y(c):T(c)},R=function(c){if(!(c.size<2)){var v=a(c.data,!0),P=new Uint8Array(c.data.subarray(v.length+1));return{key:c.type,info:v,data:P.buffer}}},T=function(c){if(!(c.size<2)){if(c.type==="TXXX"){var v=1,P=a(c.data.subarray(v),!0);v+=P.length+1;var b=a(c.data.subarray(v));return{key:c.type,info:P,data:b}}var x=a(c.data.subarray(1));return{key:c.type,data:x}}},y=function(c){if(c.type==="WXXX"){if(c.size<2)return;var v=1,P=a(c.data.subarray(v),!0);v+=P.length+1;var b=a(c.data.subarray(v));return{key:c.type,info:P,data:b}}var x=a(c.data);return{key:c.type,data:x}},l=function(c){if(c.data.byteLength===8){var v=new Uint8Array(c.data),P=v[3]&1,b=(v[4]<<23)+(v[5]<<15)+(v[6]<<7)+v[7];return b/=45,P&&(b+=4772185884e-2),Math.round(b)}},a=function(c,v){v===void 0&&(v=!1);var P=m();if(P){var b=P.decode(c);if(v){var x=b.indexOf("\0");return x!==-1?b.substring(0,x):b}return b.replace(/\0/g,"")}for(var S=c.length,g,E,I,M="",F=0;F<S;){if(g=c[F++],g===0&&v)return M;if(g===0||g===3)continue;switch(g>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:M+=String.fromCharCode(g);break;case 12:case 13:E=c[F++],M+=String.fromCharCode((g&31)<<6|E&63);break;case 14:E=c[F++],I=c[F++],M+=String.fromCharCode((g&15)<<12|(E&63)<<6|(I&63)<<0);break}}return M},f={decodeTextFrame:T},d;function m(){return!d&&typeof self.TextDecoder!="undefined"&&(d=new self.TextDecoder("utf-8")),d}},"./src/demux/mp3demuxer.ts":function(n,i,r){r.r(i);var s=r("./src/demux/base-audio-demuxer.ts"),o=r("./src/demux/id3.ts"),u=r("./src/utils/logger.ts"),D=r("./src/demux/mpegaudio.ts");function C(p,L){p.prototype=Object.create(L.prototype),p.prototype.constructor=p,A(p,L)}function A(p,L){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,T){return R.__proto__=T,R},A(p,L)}var _=function(p){C(L,p);function L(){return p.apply(this,arguments)||this}var O=L.prototype;return O.resetInitSegment=function(T,y,l,a){p.prototype.resetInitSegment.call(this,T,y,l,a),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:y,duration:a,inputTimeScale:9e4,dropped:0}},L.probe=function(T){if(!T)return!1;for(var y=o.getID3Data(T,0)||[],l=y.length,a=T.length;l<a;l++)if(D.probe(T,l))return u.logger.log("MPEG Audio sync word found !"),!0;return!1},O.canParse=function(T,y){return D.canParse(T,y)},O.appendFrame=function(T,y,l){if(this.initPTS!==null)return D.appendFrame(T,y,l,this.initPTS,this.frameIndex)},L}(s.default);_.minProbeByteLength=4,i.default=_},"./src/demux/mp4demuxer.ts":function(n,i,r){r.r(i);var s=r("./src/polyfills/number.ts"),o=r("./src/types/demuxer.ts"),u=r("./src/utils/mp4-tools.ts"),D=r("./src/demux/dummy-demuxed-track.ts"),C=/\/emsg[-/]ID3/i,A=function(){function _(L,O){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=O}var p=_.prototype;return p.resetTimeStamp=function(){},p.resetInitSegment=function(O,R,T,y){var l=Object(u.parseInitSegment)(O),a=this.videoTrack=Object(D.dummyTrack)("video",1),f=this.audioTrack=Object(D.dummyTrack)("audio",1),d=this.txtTrack=Object(D.dummyTrack)("text",1);if(this.id3Track=Object(D.dummyTrack)("id3",1),this.timeOffset=0,l.video){var m=l.video,h=m.id,c=m.timescale,v=m.codec;a.id=h,a.timescale=d.timescale=c,a.codec=v}if(l.audio){var P=l.audio,b=P.id,x=P.timescale,S=P.codec;f.id=b,f.timescale=x,f.codec=S}d.id=u.RemuxerTrackIdConfig.text,a.sampleDuration=0,a.duration=f.duration=y},p.resetContiguity=function(){},_.probe=function(O){return O=O.length>16384?O.subarray(0,16384):O,Object(u.findBox)(O,["moof"]).length>0},p.demux=function(O,R){this.timeOffset=R;var T=O,y=this.videoTrack,l=this.txtTrack;if(this.config.progressive){this.remainderData&&(T=Object(u.appendUint8Array)(this.remainderData,O));var a=Object(u.segmentValidRange)(T);this.remainderData=a.remainder,y.samples=a.valid||new Uint8Array}else y.samples=T;var f=this.extractID3Track(y,R);return l.samples=Object(u.parseSamples)(R,y),{videoTrack:y,audioTrack:this.audioTrack,id3Track:f,textTrack:this.txtTrack}},p.flush=function(){var O=this.timeOffset,R=this.videoTrack,T=this.txtTrack;R.samples=this.remainderData||new Uint8Array,this.remainderData=null;var y=this.extractID3Track(R,this.timeOffset);return T.samples=Object(u.parseSamples)(O,R),{videoTrack:R,audioTrack:Object(D.dummyTrack)(),id3Track:y,textTrack:Object(D.dummyTrack)()}},p.extractID3Track=function(O,R){var T=this.id3Track;if(O.samples.length){var y=Object(u.findBox)(O.samples,["emsg"]);y&&y.forEach(function(l){var a=Object(u.parseEmsg)(l);if(C.test(a.schemeIdUri)){var f=Object(s.isFiniteNumber)(a.presentationTime)?a.presentationTime/a.timeScale:R+a.presentationTimeDelta/a.timeScale,d=a.payload;T.samples.push({data:d,len:d.byteLength,dts:f,pts:f,type:o.MetadataSchema.emsg})}})}return T},p.demuxSampleAes=function(O,R,T){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},p.destroy=function(){},_}();A.minProbeByteLength=1024,i.default=A},"./src/demux/mpegaudio.ts":function(n,i,r){r.r(i),r.d(i,"appendFrame",function(){return A}),r.d(i,"parseHeader",function(){return _}),r.d(i,"isHeaderPattern",function(){return p}),r.d(i,"isHeader",function(){return L}),r.d(i,"canParse",function(){return O}),r.d(i,"probe",function(){return R});var s=null,o=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],u=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],D=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],C=[0,1,1,4];function A(T,y,l,a,f){if(!(l+24>y.length)){var d=_(y,l);if(d&&l+d.frameLength<=y.length){var m=d.samplesPerFrame*9e4/d.sampleRate,h=a+f*m,c={unit:y.subarray(l,l+d.frameLength),pts:h,dts:h};return T.config=[],T.channelCount=d.channelCount,T.samplerate=d.sampleRate,T.samples.push(c),{sample:c,length:d.frameLength,missing:0}}}}function _(T,y){var l=T[y+1]>>3&3,a=T[y+1]>>1&3,f=T[y+2]>>4&15,d=T[y+2]>>2&3;if(l!==1&&f!==0&&f!==15&&d!==3){var m=T[y+2]>>1&1,h=T[y+3]>>6,c=l===3?3-a:a===3?3:4,v=o[c*14+f-1]*1e3,P=l===3?0:l===2?1:2,b=u[P*3+d],x=h===3?1:2,S=D[l][a],g=C[a],E=S*8*g,I=Math.floor(S*v/b+m)*g;if(s===null){var M=navigator.userAgent||"",F=M.match(/Chrome\/(\d+)/i);s=F?parseInt(F[1]):0}var w=!!s&&s<=87;return w&&a===2&&v>=224e3&&h===0&&(T[y+3]=T[y+3]|128),{sampleRate:b,channelCount:x,frameLength:I,samplesPerFrame:E}}}function p(T,y){return T[y]===255&&(T[y+1]&224)===224&&(T[y+1]&6)!==0}function L(T,y){return y+1<T.length&&p(T,y)}function O(T,y){var l=4;return p(T,y)&&l<=T.length-y}function R(T,y){if(y+1<T.length&&p(T,y)){var l=4,a=_(T,y),f=l;a!=null&&a.frameLength&&(f=a.frameLength);var d=y+f;return d===T.length||L(T,d)}return!1}},"./src/demux/sample-aes.ts":function(n,i,r){r.r(i);var s=r("./src/crypt/decrypter.ts"),o=r("./src/demux/tsdemuxer.ts"),u=function(){function D(A,_,p){this.keyData=void 0,this.decrypter=void 0,this.keyData=p,this.decrypter=new s.default(A,_,{removePKCS7Padding:!1})}var C=D.prototype;return C.decryptBuffer=function(_,p){this.decrypter.decrypt(_,this.keyData.key.buffer,this.keyData.iv.buffer,p)},C.decryptAacSample=function(_,p,L,O){var R=_[p].unit;if(!(R.length<=16)){var T=R.subarray(16,R.length-R.length%16),y=T.buffer.slice(T.byteOffset,T.byteOffset+T.length),l=this;this.decryptBuffer(y,function(a){var f=new Uint8Array(a);R.set(f,16),O||l.decryptAacSamples(_,p+1,L)})}},C.decryptAacSamples=function(_,p,L){for(;;p++){if(p>=_.length){L();return}if(!(_[p].unit.length<32)){var O=this.decrypter.isSync();if(this.decryptAacSample(_,p,L,O),!O)return}}},C.getAvcEncryptedData=function(_){for(var p=Math.floor((_.length-48)/160)*16+16,L=new Int8Array(p),O=0,R=32;R<_.length-16;R+=160,O+=16)L.set(_.subarray(R,R+16),O);return L},C.getAvcDecryptedUnit=function(_,p){for(var L=new Uint8Array(p),O=0,R=32;R<_.length-16;R+=160,O+=16)_.set(L.subarray(O,O+16),R);return _},C.decryptAvcSample=function(_,p,L,O,R,T){var y=Object(o.discardEPB)(R.data),l=this.getAvcEncryptedData(y),a=this;this.decryptBuffer(l.buffer,function(f){R.data=a.getAvcDecryptedUnit(y,f),T||a.decryptAvcSamples(_,p,L+1,O)})},C.decryptAvcSamples=function(_,p,L,O){if(_ instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;p++,L=0){if(p>=_.length){O();return}for(var R=_[p].units;!(L>=R.length);L++){var T=R[L];if(!(T.data.length<=48||T.type!==1&&T.type!==5)){var y=this.decrypter.isSync();if(this.decryptAvcSample(_,p,L,O,T,y),!y)return}}}},D}();i.default=u},"./src/demux/transmuxer-interface.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return L});var s=r("./node_modules/webworkify-webpack/index.js"),o=r("./src/events.ts"),u=r("./src/demux/transmuxer.ts"),D=r("./src/utils/logger.ts"),C=r("./src/errors.ts"),A=r("./src/utils/mediasource-helper.ts"),_=r("./node_modules/eventemitter3/index.js"),p=Object(A.getMediaSource)()||{isTypeSupported:function(){return!1}},L=function(){function O(T,y,l,a){var f=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=T,this.id=y,this.onTransmuxComplete=l,this.onFlush=a;var d=T.config,m=function(b,x){x=x||{},x.frag=f.frag,x.id=f.id,T.trigger(b,x)};this.observer=new _.EventEmitter,this.observer.on(o.Events.FRAG_DECRYPTED,m),this.observer.on(o.Events.ERROR,m);var h={mp4:p.isTypeSupported("video/mp4"),mpeg:p.isTypeSupported("audio/mpeg"),mp3:p.isTypeSupported('audio/mp4; codecs="mp3"')},c=navigator.vendor;if(d.enableWorker&&typeof Worker!="undefined"){D.logger.log("demuxing in webworker");var v;try{v=this.worker=s("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerror=function(P){T.trigger(o.Events.ERROR,{type:C.ErrorTypes.OTHER_ERROR,details:C.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(P.message+"  ("+P.filename+":"+P.lineno+")")})},v.postMessage({cmd:"init",typeSupported:h,vendor:c,id:y,config:JSON.stringify(d)})}catch(P){D.logger.warn("Error in worker:",P),D.logger.error("Error while initializing DemuxerWorker, fallback to inline"),v&&self.URL.revokeObjectURL(v.objectURL),this.transmuxer=new u.default(this.observer,h,d,c,y),this.worker=null}}else this.transmuxer=new u.default(this.observer,h,d,c,y)}var R=O.prototype;return R.destroy=function(){var y=this.worker;if(y)y.removeEventListener("message",this.onwmsg),y.terminate(),this.worker=null,this.onwmsg=void 0;else{var l=this.transmuxer;l&&(l.destroy(),this.transmuxer=null)}var a=this.observer;a&&a.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},R.push=function(y,l,a,f,d,m,h,c,v,P){var b,x,S=this;v.transmuxing.start=self.performance.now();var g=this.transmuxer,E=this.worker,I=m?m.start:d.start,M=d.decryptdata,F=this.frag,w=!(F&&d.cc===F.cc),k=!(F&&v.level===F.level),B=F?v.sn-F.sn:-1,U=this.part?v.part-this.part.index:-1,j=!k&&(B===1||B===0&&U===1),H=self.performance.now();(k||B||d.stats.parsing.start===0)&&(d.stats.parsing.start=H),m&&(U||!j)&&(m.stats.parsing.start=H);var N=!(F&&((b=d.initSegment)===null||b===void 0?void 0:b.url)===((x=F.initSegment)===null||x===void 0?void 0:x.url)),G=new u.TransmuxState(w,j,c,k,I,N);if(!j||w||N){D.logger.log("[transmuxer-interface, "+d.type+"]: Starting new transmux session for sn: "+v.sn+" p: "+v.part+" level: "+v.level+" id: "+v.id+`
        discontinuity: `+w+`
        trackSwitch: `+k+`
        contiguous: `+j+`
        accurateTimeOffset: `+c+`
        timeOffset: `+I+`
        initSegmentChange: `+N);var $=new u.TransmuxConfig(a,f,l,h,P);this.configureTransmuxer($)}if(this.frag=d,this.part=m,E)E.postMessage({cmd:"demux",data:y,decryptdata:M,chunkMeta:v,state:G},y instanceof ArrayBuffer?[y]:[]);else if(g){var z=g.push(y,M,v,G);Object(u.isPromise)(z)?z.then(function(ee){S.handleTransmuxComplete(ee)}):this.handleTransmuxComplete(z)}},R.flush=function(y){var l=this;y.transmuxing.start=self.performance.now();var a=this.transmuxer,f=this.worker;if(f)f.postMessage({cmd:"flush",chunkMeta:y});else if(a){var d=a.flush(y);Object(u.isPromise)(d)?d.then(function(m){l.handleFlushResult(m,y)}):this.handleFlushResult(d,y)}},R.handleFlushResult=function(y,l){var a=this;y.forEach(function(f){a.handleTransmuxComplete(f)}),this.onFlush(l)},R.onWorkerMessage=function(y){var l=y.data,a=this.hls;switch(l.event){case"init":{self.URL.revokeObjectURL(this.worker.objectURL);break}case"transmuxComplete":{this.handleTransmuxComplete(l.data);break}case"flush":{this.onFlush(l.data);break}default:{l.data=l.data||{},l.data.frag=this.frag,l.data.id=this.id,a.trigger(l.event,l.data);break}}},R.configureTransmuxer=function(y){var l=this.worker,a=this.transmuxer;l?l.postMessage({cmd:"configure",config:y}):a&&a.configure(y)},R.handleTransmuxComplete=function(y){y.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(y)},O}()},"./src/demux/transmuxer-worker.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return C});var s=r("./src/demux/transmuxer.ts"),o=r("./src/events.ts"),u=r("./src/utils/logger.ts"),D=r("./node_modules/eventemitter3/index.js");function C(O){var R=new D.EventEmitter,T=function(l,a){O.postMessage({event:l,data:a})};R.on(o.Events.FRAG_DECRYPTED,T),R.on(o.Events.ERROR,T),O.addEventListener("message",function(y){var l=y.data;switch(l.cmd){case"init":{var a=JSON.parse(l.config);O.transmuxer=new s.default(R,l.typeSupported,a,l.vendor,l.id),Object(u.enableLogs)(a.debug),T("init",null);break}case"configure":{O.transmuxer.configure(l.config);break}case"demux":{var f=O.transmuxer.push(l.data,l.decryptdata,l.chunkMeta,l.state);Object(s.isPromise)(f)?f.then(function(h){A(O,h)}):A(O,f);break}case"flush":{var d=l.chunkMeta,m=O.transmuxer.flush(d);Object(s.isPromise)(m)?m.then(function(h){p(O,h,d)}):p(O,m,d);break}}})}function A(O,R){if(L(R.remuxResult))return!1;var T=[],y=R.remuxResult,l=y.audio,a=y.video;return l&&_(T,l),a&&_(T,a),O.postMessage({event:"transmuxComplete",data:R},T),!0}function _(O,R){R.data1&&O.push(R.data1.buffer),R.data2&&O.push(R.data2.buffer)}function p(O,R,T){var y=R.reduce(function(l,a){return A(O,a)||l},!1);y||O.postMessage({event:"transmuxComplete",data:R[0]}),O.postMessage({event:"flush",data:T})}function L(O){return!O.audio&&!O.video&&!O.text&&!O.id3&&!O.initSegment}},"./src/demux/transmuxer.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return f}),r.d(i,"isPromise",function(){return h}),r.d(i,"TransmuxConfig",function(){return c}),r.d(i,"TransmuxState",function(){return v});var s=r("./src/events.ts"),o=r("./src/errors.ts"),u=r("./src/crypt/decrypter.ts"),D=r("./src/demux/aacdemuxer.ts"),C=r("./src/demux/mp4demuxer.ts"),A=r("./src/demux/tsdemuxer.ts"),_=r("./src/demux/mp3demuxer.ts"),p=r("./src/remux/mp4-remuxer.ts"),L=r("./src/remux/passthrough-remuxer.ts"),O=r("./src/demux/chunk-cache.ts"),R=r("./src/utils/mp4-tools.ts"),T=r("./src/utils/logger.ts"),y;try{y=self.performance.now.bind(self.performance)}catch{T.logger.debug("Unable to use Performance API on this environment"),y=self.Date.now}var l=[{demux:A.default,remux:p.default},{demux:C.default,remux:L.default},{demux:D.default,remux:p.default},{demux:_.default,remux:p.default}],a=1024;l.forEach(function(P){var b=P.demux;a=Math.max(a,b.minProbeByteLength)});var f=function(){function P(x,S,g,E,I){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new O.default,this.observer=x,this.typeSupported=S,this.config=g,this.vendor=E,this.id=I}var b=P.prototype;return b.configure=function(S){this.transmuxConfig=S,this.decrypter&&this.decrypter.reset()},b.push=function(S,g,E,I){var M=this,F=E.transmuxing;F.executeStart=y();var w=new Uint8Array(S),k=this.cache,B=this.config,U=this.currentTransmuxState,j=this.transmuxConfig;I&&(this.currentTransmuxState=I);var H=d(w,g);if(H&&H.method==="AES-128"){var N=this.getDecrypter();if(B.enableSoftwareAES){var G=N.softwareDecrypt(w,H.key.buffer,H.iv.buffer);if(!G)return F.executeEnd=y(),m(E);w=new Uint8Array(G)}else return this.decryptionPromise=N.webCryptoDecrypt(w,H.key.buffer,H.iv.buffer).then(function(J){var le=M.push(J,null,E);return M.decryptionPromise=null,le}),this.decryptionPromise}var $=I||U,z=$.contiguous,ee=$.discontinuity,X=$.trackSwitch,te=$.accurateTimeOffset,se=$.timeOffset,K=$.initSegmentChange,W=j.audioCodec,V=j.videoCodec,Q=j.defaultInitPts,Y=j.duration,Z=j.initSegmentData;if((ee||X||K)&&this.resetInitSegment(Z,W,V,Y),(ee||K)&&this.resetInitialTimestamp(Q),z||this.resetContiguity(),this.needsProbing(w,ee,X)){if(k.dataLength){var ne=k.flush();w=Object(R.appendUint8Array)(ne,w)}this.configureTransmuxer(w,j)}var q=this.transmux(w,H,se,te,E),re=this.currentTransmuxState;return re.contiguous=!0,re.discontinuity=!1,re.trackSwitch=!1,F.executeEnd=y(),q},b.flush=function(S){var g=this,E=S.transmuxing;E.executeStart=y();var I=this.decrypter,M=this.cache,F=this.currentTransmuxState,w=this.decryptionPromise;if(w)return w.then(function(){return g.flush(S)});var k=[],B=F.timeOffset;if(I){var U=I.flush();U&&k.push(this.push(U,null,S))}var j=M.dataLength;M.reset();var H=this.demuxer,N=this.remuxer;if(!H||!N)return j>=a&&this.observer.emit(s.Events.ERROR,s.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),E.executeEnd=y(),[m(S)];var G=H.flush(B);return h(G)?G.then(function($){return g.flushRemux(k,$,S),k}):(this.flushRemux(k,G,S),k)},b.flushRemux=function(S,g,E){var I=g.audioTrack,M=g.videoTrack,F=g.id3Track,w=g.textTrack,k=this.currentTransmuxState,B=k.accurateTimeOffset,U=k.timeOffset;T.logger.log("[transmuxer.ts]: Flushed fragment "+E.sn+(E.part>-1?" p: "+E.part:"")+" of level "+E.level);var j=this.remuxer.remux(I,M,F,w,U,B,!0,this.id);S.push({remuxResult:j,chunkMeta:E}),E.transmuxing.executeEnd=y()},b.resetInitialTimestamp=function(S){var g=this.demuxer,E=this.remuxer;!g||!E||(g.resetTimeStamp(S),E.resetTimeStamp(S))},b.resetContiguity=function(){var S=this.demuxer,g=this.remuxer;!S||!g||(S.resetContiguity(),g.resetNextTimestamp())},b.resetInitSegment=function(S,g,E,I){var M=this.demuxer,F=this.remuxer;!M||!F||(M.resetInitSegment(S,g,E,I),F.resetInitSegment(S,g,E))},b.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},b.transmux=function(S,g,E,I,M){var F;return g&&g.method==="SAMPLE-AES"?F=this.transmuxSampleAes(S,g,E,I,M):F=this.transmuxUnencrypted(S,E,I,M),F},b.transmuxUnencrypted=function(S,g,E,I){var M=this.demuxer.demux(S,g,!1,!this.config.progressive),F=M.audioTrack,w=M.videoTrack,k=M.id3Track,B=M.textTrack,U=this.remuxer.remux(F,w,k,B,g,E,!1,this.id);return{remuxResult:U,chunkMeta:I}},b.transmuxSampleAes=function(S,g,E,I,M){var F=this;return this.demuxer.demuxSampleAes(S,g,E).then(function(w){var k=F.remuxer.remux(w.audioTrack,w.videoTrack,w.id3Track,w.textTrack,E,I,!1,F.id);return{remuxResult:k,chunkMeta:M}})},b.configureTransmuxer=function(S,g){for(var E=this.config,I=this.observer,M=this.typeSupported,F=this.vendor,w=g.audioCodec,k=g.defaultInitPts,B=g.duration,U=g.initSegmentData,j=g.videoCodec,H,N=0,G=l.length;N<G;N++)if(l[N].demux.probe(S)){H=l[N];break}H||(T.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),H={demux:C.default,remux:L.default});var $=this.demuxer,z=this.remuxer,ee=H.remux,X=H.demux;(!z||!(z instanceof ee))&&(this.remuxer=new ee(I,E,M,F)),(!$||!($ instanceof X))&&(this.demuxer=new X(I,E,M),this.probe=X.probe),this.resetInitSegment(U,w,j,B),this.resetInitialTimestamp(k)},b.needsProbing=function(S,g,E){return!this.demuxer||!this.remuxer||g||E},b.getDecrypter=function(){var S=this.decrypter;return S||(S=this.decrypter=new u.default(this.observer,this.config)),S},P}();function d(P,b){var x=null;return P.byteLength>0&&b!=null&&b.key!=null&&b.iv!==null&&b.method!=null&&(x=b),x}var m=function(b){return{remuxResult:{},chunkMeta:b}};function h(P){return"then"in P&&P.then instanceof Function}var c=function(b,x,S,g,E){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=b,this.videoCodec=x,this.initSegmentData=S,this.duration=g,this.defaultInitPts=E},v=function(b,x,S,g,E,I){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=b,this.contiguous=x,this.accurateTimeOffset=S,this.trackSwitch=g,this.timeOffset=E,this.initSegmentChange=I}},"./src/demux/tsdemuxer.ts":function(n,i,r){r.r(i),r.d(i,"discardEPB",function(){return d});var s=r("./src/demux/adts.ts"),o=r("./src/demux/mpegaudio.ts"),u=r("./src/demux/exp-golomb.ts"),D=r("./src/demux/sample-aes.ts"),C=r("./src/events.ts"),A=r("./src/utils/mp4-tools.ts"),_=r("./src/utils/logger.ts"),p=r("./src/errors.ts"),L=r("./src/types/demuxer.ts");function O(){return O=Object.assign?Object.assign.bind():function(m){for(var h=1;h<arguments.length;h++){var c=arguments[h];for(var v in c)Object.prototype.hasOwnProperty.call(c,v)&&(m[v]=c[v])}return m},O.apply(this,arguments)}var R=function(){function m(c,v,P){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=c,this.config=v,this.typeSupported=P}m.probe=function(v){var P=m.syncOffset(v);return P<0?!1:(P&&_.logger.warn("MPEG2-TS detected but first sync word found @ offset "+P+", junk ahead ?"),!0)},m.syncOffset=function(v){for(var P=Math.min(1e3,v.length-564),b=0;b<P;){if(v[b]===71&&v[b+188]===71&&v[b+2*188]===71)return b;b++}return-1},m.createTrack=function(v,P){return{container:v==="video"||v==="audio"?"video/mp2t":void 0,type:v,id:A.RemuxerTrackIdConfig[v],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:v==="audio"?P:void 0}};var h=m.prototype;return h.resetInitSegment=function(v,P,b,x){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=m.createTrack("video"),this._audioTrack=m.createTrack("audio",x),this._id3Track=m.createTrack("id3"),this._txtTrack=m.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.audioCodec=P,this.videoCodec=b,this._duration=x},h.resetTimeStamp=function(){},h.resetContiguity=function(){var v=this._audioTrack,P=this._avcTrack,b=this._id3Track;v&&(v.pesData=null),P&&(P.pesData=null),b&&(b.pesData=null),this.aacOverFlow=null},h.demux=function(v,P,b,x){b===void 0&&(b=!1),x===void 0&&(x=!1),b||(this.sampleAes=null);var S,g=this._avcTrack,E=this._audioTrack,I=this._id3Track,M=this._txtTrack,F=g.pid,w=g.pesData,k=E.pid,B=I.pid,U=E.pesData,j=I.pesData,H=!1,N=this.pmtParsed,G=this._pmtId,$=v.length;if(this.remainderData&&(v=Object(A.appendUint8Array)(this.remainderData,v),$=v.length,this.remainderData=null),$<188&&!x)return this.remainderData=v,{audioTrack:E,videoTrack:g,id3Track:I,textTrack:M};var z=Math.max(0,m.syncOffset(v));$-=($+z)%188,$<v.byteLength&&!x&&(this.remainderData=new Uint8Array(v.buffer,$,v.buffer.byteLength-$));for(var ee=0,X=z;X<$;X+=188)if(v[X]===71){var te=!!(v[X+1]&64),se=((v[X+1]&31)<<8)+v[X+2],K=(v[X+3]&48)>>4,W=void 0;if(K>1){if(W=X+5+v[X+4],W===X+188)continue}else W=X+4;switch(se){case F:te&&(w&&(S=a(w))&&this.parseAVCPES(g,M,S,!1),w={data:[],size:0}),w&&(w.data.push(v.subarray(W,X+188)),w.size+=X+188-W);break;case k:if(te){if(U&&(S=a(U)))switch(E.segmentCodec){case"aac":this.parseAACPES(E,S);break;case"mp3":this.parseMPEGPES(E,S);break}U={data:[],size:0}}U&&(U.data.push(v.subarray(W,X+188)),U.size+=X+188-W);break;case B:te&&(j&&(S=a(j))&&this.parseID3PES(I,S),j={data:[],size:0}),j&&(j.data.push(v.subarray(W,X+188)),j.size+=X+188-W);break;case 0:te&&(W+=v[W]+1),G=this._pmtId=y(v,W);break;case G:{te&&(W+=v[W]+1);var V=l(v,W,this.typeSupported,b);F=V.avc,F>0&&(g.pid=F),k=V.audio,k>0&&(E.pid=k,E.segmentCodec=V.segmentCodec),B=V.id3,B>0&&(I.pid=B),H&&!N&&(_.logger.log("reparse from beginning"),H=!1,X=z-188),N=this.pmtParsed=!0;break}case 17:case 8191:break;default:H=!0;break}}else ee++;ee>0&&this.observer.emit(C.Events.ERROR,C.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+ee+" TS packet/s that do not start with 0x47"}),g.pesData=w,E.pesData=U,I.pesData=j;var Q={audioTrack:E,videoTrack:g,id3Track:I,textTrack:M};return x&&this.extractRemainingSamples(Q),Q},h.flush=function(){var v=this.remainderData;this.remainderData=null;var P;return v?P=this.demux(v,-1,!1,!0):P={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(P),this.sampleAes?this.decrypt(P,this.sampleAes):P},h.extractRemainingSamples=function(v){var P=v.audioTrack,b=v.videoTrack,x=v.id3Track,S=v.textTrack,g=b.pesData,E=P.pesData,I=x.pesData,M;if(g&&(M=a(g))?(this.parseAVCPES(b,S,M,!0),b.pesData=null):b.pesData=g,E&&(M=a(E))){switch(P.segmentCodec){case"aac":this.parseAACPES(P,M);break;case"mp3":this.parseMPEGPES(P,M);break}P.pesData=null}else E!=null&&E.size&&_.logger.log("last AAC PES packet truncated,might overlap between fragments"),P.pesData=E;I&&(M=a(I))?(this.parseID3PES(x,M),x.pesData=null):x.pesData=I},h.demuxSampleAes=function(v,P,b){var x=this.demux(v,b,!0,!this.config.progressive),S=this.sampleAes=new D.default(this.observer,this.config,P);return this.decrypt(x,S)},h.decrypt=function(v,P){return new Promise(function(b){var x=v.audioTrack,S=v.videoTrack;x.samples&&x.segmentCodec==="aac"?P.decryptAacSamples(x.samples,0,function(){S.samples?P.decryptAvcSamples(S.samples,0,0,function(){b(v)}):b(v)}):S.samples&&P.decryptAvcSamples(S.samples,0,0,function(){b(v)})})},h.destroy=function(){this._duration=0},h.parseAVCPES=function(v,P,b,x){var S=this,g=this.parseAVCNALu(v,b.data),E=this.avcSample,I,M=!1;b.data=null,E&&g.length&&!v.audFound&&(f(E,v),E=this.avcSample=T(!1,b.pts,b.dts,"")),g.forEach(function(F){switch(F.type){case 1:{I=!0,E||(E=S.avcSample=T(!0,b.pts,b.dts,"")),E.frame=!0;var w=F.data;if(M&&w.length>4){var k=new u.default(w).readSliceType();(k===2||k===4||k===7||k===9)&&(E.key=!0)}break}case 5:I=!0,E||(E=S.avcSample=T(!0,b.pts,b.dts,"")),E.key=!0,E.frame=!0;break;case 6:{I=!0,Object(A.parseSEIMessageFromNALu)(d(F.data),b.pts,P.samples);break}case 7:if(I=!0,M=!0,!v.sps){var B=new u.default(F.data),U=B.readSPS();v.width=U.width,v.height=U.height,v.pixelRatio=U.pixelRatio,v.sps=[F.data],v.duration=S._duration;for(var j=F.data.subarray(1,4),H="avc1.",N=0;N<3;N++){var G=j[N].toString(16);G.length<2&&(G="0"+G),H+=G}v.codec=H}break;case 8:I=!0,v.pps||(v.pps=[F.data]);break;case 9:I=!1,v.audFound=!0,E&&f(E,v),E=S.avcSample=T(!1,b.pts,b.dts,"");break;case 12:I=!0;break;default:I=!1,E&&(E.debug+="unknown NAL "+F.type+" ");break}if(E&&I){var $=E.units;$.push(F)}}),x&&E&&(f(E,v),this.avcSample=null)},h.getLastNalUnit=function(v){var P,b=this.avcSample,x;if((!b||b.units.length===0)&&(b=v[v.length-1]),(P=b)!==null&&P!==void 0&&P.units){var S=b.units;x=S[S.length-1]}return x},h.parseAVCNALu=function(v,P){var b=P.byteLength,x=v.naluState||0,S=x,g=[],E=0,I,M,F,w=-1,k=0;for(x===-1&&(w=0,k=P[0]&31,x=0,E=1);E<b;){if(I=P[E++],!x){x=I?0:1;continue}if(x===1){x=I?0:2;continue}if(!I)x=3;else if(I===1){if(w>=0){var B={data:P.subarray(w,E-x-1),type:k};g.push(B)}else{var U=this.getLastNalUnit(v.samples);if(U&&(S&&E<=4-S&&U.state&&(U.data=U.data.subarray(0,U.data.byteLength-S)),M=E-x-1,M>0)){var j=new Uint8Array(U.data.byteLength+M);j.set(U.data,0),j.set(P.subarray(0,M),U.data.byteLength),U.data=j,U.state=0}}E<b?(F=P[E]&31,w=E,k=F,x=0):x=-1}else x=0}if(w>=0&&x>=0){var H={data:P.subarray(w,b),type:k,state:x};g.push(H)}if(g.length===0){var N=this.getLastNalUnit(v.samples);if(N){var G=new Uint8Array(N.data.byteLength+P.byteLength);G.set(N.data,0),G.set(P,N.data.byteLength),N.data=G}}return v.naluState=x,g},h.parseAACPES=function(v,P){var b=0,x=this.aacOverFlow,S=P.data;if(x){this.aacOverFlow=null;var g=x.missing,E=x.sample.unit.byteLength;if(g===-1){var I=new Uint8Array(E+S.byteLength);I.set(x.sample.unit,0),I.set(S,E),S=I}else{var M=E-g;x.sample.unit.set(S.subarray(0,g),M),v.samples.push(x.sample),b=x.missing}}var F,w;for(F=b,w=S.length;F<w-1&&!s.isHeader(S,F);F++);if(F!==b){var k,B;if(F<w-1?(k="AAC PES did not start with ADTS header,offset:"+F,B=!1):(k="no ADTS header found in AAC PES",B=!0),_.logger.warn("parsing error:"+k),this.observer.emit(C.Events.ERROR,C.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:B,reason:k}),B)return}s.initTrackConfig(v,this.observer,S,F,this.audioCodec);var U;if(P.pts!==void 0)U=P.pts;else if(x){var j=s.getFrameDuration(v.samplerate);U=x.sample.pts+j}else{_.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}for(var H=0,N;F<w;)if(N=s.appendFrame(v,S,F,U,H),F+=N.length,N.missing){this.aacOverFlow=N;break}else for(H++;F<w-1&&!s.isHeader(S,F);F++);},h.parseMPEGPES=function(v,P){var b=P.data,x=b.length,S=0,g=0,E=P.pts;if(E===void 0){_.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;g<x;)if(o.isHeader(b,g)){var I=o.appendFrame(v,b,g,E,S);if(I)g+=I.length,S++;else break}else g++},h.parseID3PES=function(v,P){if(P.pts===void 0){_.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}var b=O({},P,{type:this._avcTrack?L.MetadataSchema.emsg:L.MetadataSchema.audioId3});v.samples.push(b)},m}();R.minProbeByteLength=188;function T(m,h,c,v){return{key:m,frame:!1,pts:h,dts:c,units:[],debug:v,length:0}}function y(m,h){return(m[h+10]&31)<<8|m[h+11]}function l(m,h,c,v){var P={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},b=(m[h+1]&15)<<8|m[h+2],x=h+3+b-4,S=(m[h+10]&15)<<8|m[h+11];for(h+=12+S;h<x;){var g=(m[h+1]&31)<<8|m[h+2];switch(m[h]){case 207:if(!v){_.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:P.audio===-1&&(P.audio=g);break;case 21:P.id3===-1&&(P.id3=g);break;case 219:if(!v){_.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:P.avc===-1&&(P.avc=g);break;case 3:case 4:c.mpeg!==!0&&c.mp3!==!0?_.logger.log("MPEG audio found, not supported in this browser"):P.audio===-1&&(P.audio=g,P.segmentCodec="mp3");break;case 36:_.logger.warn("Unsupported HEVC stream type found");break}h+=((m[h+3]&15)<<8|m[h+4])+5}return P}function a(m){var h=0,c,v,P,b,x,S=m.data;if(!m||m.size===0)return null;for(;S[0].length<19&&S.length>1;){var g=new Uint8Array(S[0].length+S[1].length);g.set(S[0]),g.set(S[1],S[0].length),S[0]=g,S.splice(1,1)}c=S[0];var E=(c[0]<<16)+(c[1]<<8)+c[2];if(E===1){if(v=(c[4]<<8)+c[5],v&&v>m.size-6)return null;var I=c[7];I&192&&(b=(c[9]&14)*536870912+(c[10]&255)*4194304+(c[11]&254)*16384+(c[12]&255)*128+(c[13]&254)/2,I&64?(x=(c[14]&14)*536870912+(c[15]&255)*4194304+(c[16]&254)*16384+(c[17]&255)*128+(c[18]&254)/2,b-x>60*9e4&&(_.logger.warn(Math.round((b-x)/9e4)+"s delta between PTS and DTS, align them"),b=x)):x=b),P=c[8];var M=P+9;if(m.size<=M)return null;m.size-=M;for(var F=new Uint8Array(m.size),w=0,k=S.length;w<k;w++){c=S[w];var B=c.byteLength;if(M)if(M>B){M-=B;continue}else c=c.subarray(M),B-=M,M=0;F.set(c,h),h+=B}return v&&(v-=P+3),{data:F,pts:b,dts:x,len:v}}return null}function f(m,h){if(m.units.length&&m.frame){if(m.pts===void 0){var c=h.samples,v=c.length;if(v){var P=c[v-1];m.pts=P.pts,m.dts=P.dts}else{h.dropped++;return}}h.samples.push(m)}m.debug.length&&_.logger.log(m.pts+"/"+m.dts+":"+m.debug)}function d(m){for(var h=m.byteLength,c=[],v=1;v<h-2;)m[v]===0&&m[v+1]===0&&m[v+2]===3?(c.push(v+2),v+=2):v++;if(c.length===0)return m;var P=h-c.length,b=new Uint8Array(P),x=0;for(v=0;v<P;x++,v++)x===c[0]&&(x++,c.shift()),b[v]=m[x];return b}i.default=R},"./src/errors.ts":function(n,i,r){r.r(i),r.d(i,"ErrorTypes",function(){return s}),r.d(i,"ErrorDetails",function(){return o});var s;(function(u){u.NETWORK_ERROR="networkError",u.MEDIA_ERROR="mediaError",u.KEY_SYSTEM_ERROR="keySystemError",u.MUX_ERROR="muxError",u.OTHER_ERROR="otherError"})(s||(s={}));var o;(function(u){u.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",u.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",u.KEY_SYSTEM_NO_SESSION="keySystemNoSession",u.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",u.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",u.MANIFEST_LOAD_ERROR="manifestLoadError",u.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",u.MANIFEST_PARSING_ERROR="manifestParsingError",u.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",u.LEVEL_EMPTY_ERROR="levelEmptyError",u.LEVEL_LOAD_ERROR="levelLoadError",u.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",u.LEVEL_SWITCH_ERROR="levelSwitchError",u.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",u.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",u.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",u.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",u.FRAG_LOAD_ERROR="fragLoadError",u.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",u.FRAG_DECRYPT_ERROR="fragDecryptError",u.FRAG_PARSING_ERROR="fragParsingError",u.REMUX_ALLOC_ERROR="remuxAllocError",u.KEY_LOAD_ERROR="keyLoadError",u.KEY_LOAD_TIMEOUT="keyLoadTimeOut",u.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",u.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",u.BUFFER_APPEND_ERROR="bufferAppendError",u.BUFFER_APPENDING_ERROR="bufferAppendingError",u.BUFFER_STALLED_ERROR="bufferStalledError",u.BUFFER_FULL_ERROR="bufferFullError",u.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",u.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",u.INTERNAL_EXCEPTION="internalException",u.INTERNAL_ABORTED="aborted",u.UNKNOWN="unknown"})(o||(o={}))},"./src/events.ts":function(n,i,r){r.r(i),r.d(i,"Events",function(){return s});var s;(function(o){o.MEDIA_ATTACHING="hlsMediaAttaching",o.MEDIA_ATTACHED="hlsMediaAttached",o.MEDIA_DETACHING="hlsMediaDetaching",o.MEDIA_DETACHED="hlsMediaDetached",o.BUFFER_RESET="hlsBufferReset",o.BUFFER_CODECS="hlsBufferCodecs",o.BUFFER_CREATED="hlsBufferCreated",o.BUFFER_APPENDING="hlsBufferAppending",o.BUFFER_APPENDED="hlsBufferAppended",o.BUFFER_EOS="hlsBufferEos",o.BUFFER_FLUSHING="hlsBufferFlushing",o.BUFFER_FLUSHED="hlsBufferFlushed",o.MANIFEST_LOADING="hlsManifestLoading",o.MANIFEST_LOADED="hlsManifestLoaded",o.MANIFEST_PARSED="hlsManifestParsed",o.LEVEL_SWITCHING="hlsLevelSwitching",o.LEVEL_SWITCHED="hlsLevelSwitched",o.LEVEL_LOADING="hlsLevelLoading",o.LEVEL_LOADED="hlsLevelLoaded",o.LEVEL_UPDATED="hlsLevelUpdated",o.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",o.LEVELS_UPDATED="hlsLevelsUpdated",o.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",o.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",o.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",o.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",o.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",o.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",o.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",o.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",o.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",o.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",o.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",o.CUES_PARSED="hlsCuesParsed",o.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",o.INIT_PTS_FOUND="hlsInitPtsFound",o.FRAG_LOADING="hlsFragLoading",o.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",o.FRAG_LOADED="hlsFragLoaded",o.FRAG_DECRYPTED="hlsFragDecrypted",o.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",o.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",o.FRAG_PARSING_METADATA="hlsFragParsingMetadata",o.FRAG_PARSED="hlsFragParsed",o.FRAG_BUFFERED="hlsFragBuffered",o.FRAG_CHANGED="hlsFragChanged",o.FPS_DROP="hlsFpsDrop",o.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",o.ERROR="hlsError",o.DESTROYING="hlsDestroying",o.KEY_LOADING="hlsKeyLoading",o.KEY_LOADED="hlsKeyLoaded",o.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",o.BACK_BUFFER_REACHED="hlsBackBufferReached"})(s||(s={}))},"./src/hls.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return d});var s=r("./node_modules/url-toolkit/src/url-toolkit.js"),o=r("./src/loader/playlist-loader.ts"),u=r("./src/loader/key-loader.ts"),D=r("./src/controller/id3-track-controller.ts"),C=r("./src/controller/latency-controller.ts"),A=r("./src/controller/level-controller.ts"),_=r("./src/controller/fragment-tracker.ts"),p=r("./src/controller/stream-controller.ts"),L=r("./src/is-supported.ts"),O=r("./src/utils/logger.ts"),R=r("./src/config.ts"),T=r("./node_modules/eventemitter3/index.js"),y=r("./src/events.ts"),l=r("./src/errors.ts");function a(m,h){for(var c=0;c<h.length;c++){var v=h[c];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}function f(m,h,c){return h&&a(m.prototype,h),c&&a(m,c),Object.defineProperty(m,"prototype",{writable:!1}),m}var d=function(){m.isSupported=function(){return Object(L.isSupported)()};function m(c){c===void 0&&(c={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new T.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var v=this.config=Object(R.mergeConfig)(m.DefaultConfig,c);this.userConfig=c,Object(O.enableLogs)(v.debug),this._autoLevelCapping=-1,v.progressive&&Object(R.enableStreamingMode)(v);var P=v.abrController,b=v.bufferController,x=v.capLevelController,S=v.fpsController,g=this.abrController=new P(this),E=this.bufferController=new b(this),I=this.capLevelController=new x(this),M=new S(this),F=new o.default(this),w=new u.default(this),k=new D.default(this),B=this.levelController=new A.default(this),U=new _.FragmentTracker(this),j=this.streamController=new p.default(this,U);I.setStreamController(j),M.setStreamController(j);var H=[B,j];this.networkControllers=H;var N=[F,w,g,E,I,M,k,U];this.audioTrackController=this.createController(v.audioTrackController,null,H),this.createController(v.audioStreamController,U,H),this.subtitleTrackController=this.createController(v.subtitleTrackController,null,H),this.createController(v.subtitleStreamController,U,H),this.createController(v.timelineController,null,N),this.emeController=this.createController(v.emeController,null,N),this.cmcdController=this.createController(v.cmcdController,null,N),this.latencyController=this.createController(C.default,null,N),this.coreComponents=N}var h=m.prototype;return h.createController=function(v,P,b){if(v){var x=P?new v(this,P):new v(this);return b&&b.push(x),x}return null},h.on=function(v,P,b){b===void 0&&(b=this),this._emitter.on(v,P,b)},h.once=function(v,P,b){b===void 0&&(b=this),this._emitter.once(v,P,b)},h.removeAllListeners=function(v){this._emitter.removeAllListeners(v)},h.off=function(v,P,b,x){b===void 0&&(b=this),this._emitter.off(v,P,b,x)},h.listeners=function(v){return this._emitter.listeners(v)},h.emit=function(v,P,b){return this._emitter.emit(v,P,b)},h.trigger=function(v,P){if(this.config.debug)return this.emit(v,v,P);try{return this.emit(v,v,P)}catch(b){O.logger.error("An internal error happened while handling event "+v+'. Error message: "'+b.message+'". Here is a stacktrace:',b),this.trigger(y.Events.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:v,error:b})}return!1},h.listenerCount=function(v){return this._emitter.listenerCount(v)},h.destroy=function(){O.logger.log("destroy"),this.trigger(y.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(v){return v.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(v){return v.destroy()}),this.coreComponents.length=0},h.attachMedia=function(v){O.logger.log("attachMedia"),this._media=v,this.trigger(y.Events.MEDIA_ATTACHING,{media:v})},h.detachMedia=function(){O.logger.log("detachMedia"),this.trigger(y.Events.MEDIA_DETACHING,void 0),this._media=null},h.loadSource=function(v){this.stopLoad();var P=this.media,b=this.url,x=this.url=s.buildAbsoluteURL(self.location.href,v,{alwaysNormalize:!0});O.logger.log("loadSource:"+x),P&&b&&b!==x&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(P)),this.trigger(y.Events.MANIFEST_LOADING,{url:v})},h.startLoad=function(v){v===void 0&&(v=-1),O.logger.log("startLoad("+v+")"),this.networkControllers.forEach(function(P){P.startLoad(v)})},h.stopLoad=function(){O.logger.log("stopLoad"),this.networkControllers.forEach(function(v){v.stopLoad()})},h.swapAudioCodec=function(){O.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},h.recoverMediaError=function(){O.logger.log("recoverMediaError");var v=this._media;this.detachMedia(),v&&this.attachMedia(v)},h.removeLevel=function(v,P){P===void 0&&(P=0),this.levelController.removeLevel(v,P)},f(m,[{key:"levels",get:function(){var v=this.levelController.levels;return v||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(v){O.logger.log("set currentLevel:"+v),this.loadLevel=v,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(v){O.logger.log("set nextLevel:"+v),this.levelController.manualLevel=v,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(v){O.logger.log("set loadLevel:"+v),this.levelController.manualLevel=v}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(v){this.levelController.nextLoadLevel=v}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(v){O.logger.log("set firstLevel:"+v),this.levelController.firstLevel=v}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(v){O.logger.log("set startLevel:"+v),v!==-1&&(v=Math.max(v,this.minAutoLevel)),this.levelController.startLevel=v}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(v){var P=!!v;P!==this.config.capLevelToPlayerSize&&(P?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=P)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(v){this._autoLevelCapping!==v&&(O.logger.log("set autoLevelCapping:"+v),this._autoLevelCapping=v)}},{key:"bandwidthEstimate",get:function(){var v=this.abrController.bwEstimator;return v?v.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var v=this.levels,P=this.config.minAutoBitrate;if(!v)return 0;for(var b=v.length,x=0;x<b;x++)if(v[x].maxBitrate>=P)return x;return 0}},{key:"maxAutoLevel",get:function(){var v=this.levels,P=this.autoLevelCapping,b;return P===-1&&v&&v.length?b=v.length-1:b=P,b}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(v){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,v)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"audioTracks",get:function(){var v=this.audioTrackController;return v?v.audioTracks:[]}},{key:"audioTrack",get:function(){var v=this.audioTrackController;return v?v.audioTrack:-1},set:function(v){var P=this.audioTrackController;P&&(P.audioTrack=v)}},{key:"subtitleTracks",get:function(){var v=this.subtitleTrackController;return v?v.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var v=this.subtitleTrackController;return v?v.subtitleTrack:-1},set:function(v){var P=this.subtitleTrackController;P&&(P.subtitleTrack=v)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var v=this.subtitleTrackController;return v?v.subtitleDisplay:!1},set:function(v){var P=this.subtitleTrackController;P&&(P.subtitleDisplay=v)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(v){this.config.lowLatencyMode=v}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.2.0"}},{key:"Events",get:function(){return y.Events}},{key:"ErrorTypes",get:function(){return l.ErrorTypes}},{key:"ErrorDetails",get:function(){return l.ErrorDetails}},{key:"DefaultConfig",get:function(){return m.defaultConfig?m.defaultConfig:R.hlsDefaultConfig},set:function(v){m.defaultConfig=v}}]),m}();d.defaultConfig=void 0},"./src/is-supported.ts":function(n,i,r){r.r(i),r.d(i,"isSupported",function(){return u}),r.d(i,"changeTypeSupported",function(){return D});var s=r("./src/utils/mediasource-helper.ts");function o(){return self.SourceBuffer||self.WebKitSourceBuffer}function u(){var C=Object(s.getMediaSource)();if(!C)return!1;var A=o(),_=C&&typeof C.isTypeSupported=="function"&&C.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),p=!A||A.prototype&&typeof A.prototype.appendBuffer=="function"&&typeof A.prototype.remove=="function";return!!_&&!!p}function D(){var C,A=o();return typeof(A==null||(C=A.prototype)===null||C===void 0?void 0:C.changeType)=="function"}},"./src/loader/date-range.ts":function(n,i,r){r.r(i),r.d(i,"DateRangeAttribute",function(){return _}),r.d(i,"DateRange",function(){return p});var s=r("./src/polyfills/number.ts"),o=r("./src/utils/attr-list.ts"),u=r("./src/utils/logger.ts");function D(){return D=Object.assign?Object.assign.bind():function(L){for(var O=1;O<arguments.length;O++){var R=arguments[O];for(var T in R)Object.prototype.hasOwnProperty.call(R,T)&&(L[T]=R[T])}return L},D.apply(this,arguments)}function C(L,O){for(var R=0;R<O.length;R++){var T=O[R];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(L,T.key,T)}}function A(L,O,R){return O&&C(L.prototype,O),R&&C(L,R),Object.defineProperty(L,"prototype",{writable:!1}),L}var _;(function(L){L.ID="ID",L.CLASS="CLASS",L.START_DATE="START-DATE",L.DURATION="DURATION",L.END_DATE="END-DATE",L.END_ON_NEXT="END-ON-NEXT",L.PLANNED_DURATION="PLANNED-DURATION",L.SCTE35_OUT="SCTE35-OUT",L.SCTE35_IN="SCTE35-IN"})(_||(_={}));var p=function(){function L(O,R){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,R){var T=R.attr;for(var y in T)if(Object.prototype.hasOwnProperty.call(O,y)&&O[y]!==T[y]){u.logger.warn('DATERANGE tag attribute: "'+y+'" does not match for tags with ID: "'+O.ID+'"'),this._badValueForSameId=y;break}O=D(new o.AttrList({}),T,O)}if(this.attr=O,this._startDate=new Date(O[_.START_DATE]),_.END_DATE in this.attr){var l=new Date(this.attr[_.END_DATE]);Object(s.isFiniteNumber)(l.getTime())&&(this._endDate=l)}}return A(L,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var R=this.duration;return R!==null?new Date(this._startDate.getTime()+R*1e3):null}},{key:"duration",get:function(){if(_.DURATION in this.attr){var R=this.attr.decimalFloatingPoint(_.DURATION);if(Object(s.isFiniteNumber)(R))return R}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return _.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(_.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(_.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&Object(s.isFiniteNumber)(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),L}()},"./src/loader/fragment-loader.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return R}),r.d(i,"LoadError",function(){return y});var s=r("./src/polyfills/number.ts"),o=r("./src/errors.ts");function u(l,a){l.prototype=Object.create(a.prototype),l.prototype.constructor=l,p(l,a)}function D(l){var a=typeof Map=="function"?new Map:void 0;return D=function(d){if(d===null||!_(d))return d;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a!="undefined"){if(a.has(d))return a.get(d);a.set(d,m)}function m(){return C(d,arguments,L(this).constructor)}return m.prototype=Object.create(d.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p(m,d)},D(l)}function C(l,a,f){return A()?C=Reflect.construct.bind():C=function(m,h,c){var v=[null];v.push.apply(v,h);var P=Function.bind.apply(m,v),b=new P;return c&&p(b,c.prototype),b},C.apply(null,arguments)}function A(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function p(l,a){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,m){return d.__proto__=m,d},p(l,a)}function L(l){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},L(l)}var O=Math.pow(2,17),R=function(){function l(f){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=f}var a=l.prototype;return a.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},a.abort=function(){this.loader&&this.loader.abort()},a.load=function(d,m){var h=this,c=d.url;if(!c)return Promise.reject(new y({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:d,networkDetails:null},"Fragment does not have a "+(c?"part list":"url")));this.abort();var v=this.config,P=v.fLoader,b=v.loader;return new Promise(function(x,S){h.loader&&h.loader.destroy();var g=h.loader=d.loader=P?new P(v):new b(v),E=T(d),I={timeout:v.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:v.fragLoadingMaxRetryTimeout,highWaterMark:d.sn==="initSegment"?1/0:O};d.stats=g.stats,g.load(E,I,{onSuccess:function(F,w,k,B){h.resetLoader(d,g),x({frag:d,part:null,payload:F.data,networkDetails:B})},onError:function(F,w,k){h.resetLoader(d,g),S(new y({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:d,response:F,networkDetails:k}))},onAbort:function(F,w,k){h.resetLoader(d,g),S(new y({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:d,networkDetails:k}))},onTimeout:function(F,w,k){h.resetLoader(d,g),S(new y({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:d,networkDetails:k}))},onProgress:function(F,w,k,B){m&&m({frag:d,part:null,payload:k,networkDetails:B})}})})},a.loadPart=function(d,m,h){var c=this;this.abort();var v=this.config,P=v.fLoader,b=v.loader;return new Promise(function(x,S){c.loader&&c.loader.destroy();var g=c.loader=d.loader=P?new P(v):new b(v),E=T(d,m),I={timeout:v.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:v.fragLoadingMaxRetryTimeout,highWaterMark:O};m.stats=g.stats,g.load(E,I,{onSuccess:function(F,w,k,B){c.resetLoader(d,g),c.updateStatsFromPart(d,m);var U={frag:d,part:m,payload:F.data,networkDetails:B};h(U),x(U)},onError:function(F,w,k){c.resetLoader(d,g),S(new y({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:d,part:m,response:F,networkDetails:k}))},onAbort:function(F,w,k){d.stats.aborted=m.stats.aborted,c.resetLoader(d,g),S(new y({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:d,part:m,networkDetails:k}))},onTimeout:function(F,w,k){c.resetLoader(d,g),S(new y({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:d,part:m,networkDetails:k}))}})})},a.updateStatsFromPart=function(d,m){var h=d.stats,c=m.stats,v=c.total;if(h.loaded+=c.loaded,v){var P=Math.round(d.duration/m.duration),b=Math.min(Math.round(h.loaded/v),P),x=P-b,S=x*Math.round(h.loaded/b);h.total=h.loaded+S}else h.total=Math.max(h.loaded,h.total);var g=h.loading,E=c.loading;g.start?g.first+=E.first-E.start:(g.start=E.start,g.first=E.first),g.end=E.end},a.resetLoader=function(d,m){d.loader=null,this.loader===m&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),m.destroy()},l}();function T(l,a){a===void 0&&(a=null);var f=a||l,d={frag:l,part:a,responseType:"arraybuffer",url:f.url,headers:{},rangeStart:0,rangeEnd:0},m=f.byteRangeStartOffset,h=f.byteRangeEndOffset;return Object(s.isFiniteNumber)(m)&&Object(s.isFiniteNumber)(h)&&(d.rangeStart=m,d.rangeEnd=h),d}var y=function(l){u(a,l);function a(f){for(var d,m=arguments.length,h=new Array(m>1?m-1:0),c=1;c<m;c++)h[c-1]=arguments[c];return d=l.call.apply(l,[this].concat(h))||this,d.data=void 0,d.data=f,d}return a}(D(Error))},"./src/loader/fragment.ts":function(n,i,r){r.r(i),r.d(i,"ElementaryStreamTypes",function(){return O}),r.d(i,"BaseSegment",function(){return R}),r.d(i,"Fragment",function(){return T}),r.d(i,"Part",function(){return y});var s=r("./src/polyfills/number.ts"),o=r("./node_modules/url-toolkit/src/url-toolkit.js"),u=r("./src/utils/logger.ts"),D=r("./src/loader/level-key.ts"),C=r("./src/loader/load-stats.ts");function A(l,a){l.prototype=Object.create(a.prototype),l.prototype.constructor=l,_(l,a)}function _(l,a){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,m){return d.__proto__=m,d},_(l,a)}function p(l,a){for(var f=0;f<a.length;f++){var d=a[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function L(l,a,f){return a&&p(l.prototype,a),f&&p(l,f),Object.defineProperty(l,"prototype",{writable:!1}),l}var O;(function(l){l.AUDIO="audio",l.VIDEO="video",l.AUDIOVIDEO="audiovideo"})(O||(O={}));var R=function(){function l(f){var d;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=(d={},d[O.AUDIO]=null,d[O.VIDEO]=null,d[O.AUDIOVIDEO]=null,d),this.baseurl=f}var a=l.prototype;return a.setByteRange=function(d,m){var h=d.split("@",2),c=[];h.length===1?c[0]=m?m.byteRangeEndOffset:0:c[0]=parseInt(h[1]),c[1]=parseInt(h[0])+c[0],this._byteRange=c},L(l,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(d){this._url=d}}]),l}(),T=function(l){A(a,l);function a(d,m){var h;return h=l.call(this,m)||this,h._decryptdata=null,h.rawProgramDateTime=null,h.programDateTime=null,h.tagList=[],h.duration=0,h.sn=0,h.levelkey=void 0,h.type=void 0,h.loader=null,h.level=-1,h.cc=0,h.startPTS=void 0,h.endPTS=void 0,h.appendedPTS=void 0,h.startDTS=void 0,h.endDTS=void 0,h.start=0,h.deltaPTS=void 0,h.maxStartPTS=void 0,h.minEndPTS=void 0,h.stats=new C.LoadStats,h.urlId=0,h.data=void 0,h.bitrateTest=!1,h.title=null,h.initSegment=null,h.type=d,h}var f=a.prototype;return f.createInitializationVector=function(m){for(var h=new Uint8Array(16),c=12;c<16;c++)h[c]=m>>8*(15-c)&255;return h},f.setDecryptDataFromLevelKey=function(m,h){var c=m;return(m==null?void 0:m.method)==="AES-128"&&m.uri&&!m.iv&&(c=D.LevelKey.fromURI(m.uri),c.method=m.method,c.iv=this.createInitializationVector(h),c.keyFormat="identity"),c},f.setElementaryStreamInfo=function(m,h,c,v,P,b){b===void 0&&(b=!1);var x=this.elementaryStreams,S=x[m];if(!S){x[m]={startPTS:h,endPTS:c,startDTS:v,endDTS:P,partial:b};return}S.startPTS=Math.min(S.startPTS,h),S.endPTS=Math.max(S.endPTS,c),S.startDTS=Math.min(S.startDTS,v),S.endDTS=Math.max(S.endDTS,P)},f.clearElementaryStreamInfo=function(){var m=this.elementaryStreams;m[O.AUDIO]=null,m[O.VIDEO]=null,m[O.AUDIOVIDEO]=null},L(a,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var m=this.sn;typeof m!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&u.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),m=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,m)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(s.isFiniteNumber)(this.programDateTime))return null;var m=Object(s.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+m*1e3}},{key:"encrypted",get:function(){var m;return!!((m=this.decryptdata)!==null&&m!==void 0&&m.keyFormat&&this.decryptdata.uri)}}]),a}(R),y=function(l){A(a,l);function a(f,d,m,h,c){var v;v=l.call(this,m)||this,v.fragOffset=0,v.duration=0,v.gap=!1,v.independent=!1,v.relurl=void 0,v.fragment=void 0,v.index=void 0,v.stats=new C.LoadStats,v.duration=f.decimalFloatingPoint("DURATION"),v.gap=f.bool("GAP"),v.independent=f.bool("INDEPENDENT"),v.relurl=f.enumeratedString("URI"),v.fragment=d,v.index=h;var P=f.enumeratedString("BYTERANGE");return P&&v.setByteRange(P,c),c&&(v.fragOffset=c.fragOffset+c.duration),v}return L(a,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var d=this.elementaryStreams;return!!(d.audio||d.video||d.audiovideo)}}]),a}(R)},"./src/loader/key-loader.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return D});var s=r("./src/events.ts"),o=r("./src/errors.ts"),u=r("./src/utils/logger.ts"),D=function(){function C(_){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=_,this._registerListeners()}var A=C.prototype;return A._registerListeners=function(){this.hls.on(s.Events.KEY_LOADING,this.onKeyLoading,this)},A._unregisterListeners=function(){this.hls.off(s.Events.KEY_LOADING,this.onKeyLoading)},A.destroy=function(){this._unregisterListeners();for(var p in this.loaders){var L=this.loaders[p];L&&L.destroy()}this.loaders={}},A.onKeyLoading=function(p,L){var O=L.frag,R=O.type,T=this.loaders[R];if(!O.decryptdata){u.logger.warn("Missing decryption data on fragment in onKeyLoading");return}var y=O.decryptdata.uri;if(y!==this.decrypturl||this.decryptkey===null){var l=this.hls.config;if(T&&(u.logger.warn("abort previous key loader for type:"+R),T.abort()),!y){u.logger.warn("key uri is falsy");return}var a=l.loader,f=O.loader=this.loaders[R]=new a(l);this.decrypturl=y,this.decryptkey=null;var d={url:y,frag:O,responseType:"arraybuffer"},m={timeout:l.fragLoadingTimeOut,maxRetry:0,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout,highWaterMark:0},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};f.load(d,m,h)}else this.decryptkey&&(O.decryptdata.key=this.decryptkey,this.hls.trigger(s.Events.KEY_LOADED,{frag:O}))},A.loadsuccess=function(p,L,O){var R=O.frag;if(!R.decryptdata){u.logger.error("after key load, decryptdata unset");return}this.decryptkey=R.decryptdata.key=new Uint8Array(p.data),R.loader=null,delete this.loaders[R.type],this.hls.trigger(s.Events.KEY_LOADED,{frag:R})},A.loaderror=function(p,L){var O=L.frag,R=O.loader;R&&R.abort(),delete this.loaders[O.type],this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:O,response:p})},A.loadtimeout=function(p,L){var O=L.frag,R=O.loader;R&&R.abort(),delete this.loaders[O.type],this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:O})},C}()},"./src/loader/level-details.ts":function(n,i,r){r.r(i),r.d(i,"LevelDetails",function(){return C});var s=r("./src/polyfills/number.ts");function o(A,_){for(var p=0;p<_.length;p++){var L=_[p];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(A,L.key,L)}}function u(A,_,p){return _&&o(A.prototype,_),p&&o(A,p),Object.defineProperty(A,"prototype",{writable:!1}),A}var D=10,C=function(){function A(p){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.dateRanges={},this.url=p}var _=A.prototype;return _.reloaded=function(L){if(!L){this.advanced=!0,this.updated=!0;return}var O=this.lastPartSn-L.lastPartSn,R=this.lastPartIndex-L.lastPartIndex;this.updated=this.endSN!==L.endSN||!!R||!!O,this.advanced=this.endSN>L.endSN||O>0||O===0&&R>0,this.updated||this.advanced?this.misses=Math.floor(L.misses*.6):this.misses=L.misses+1,this.availabilityDelay=L.availabilityDelay},u(A,[{key:"hasProgramDateTime",get:function(){return this.fragments.length?Object(s.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime):!1}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||D}},{key:"drift",get:function(){var L=this.driftEndTime-this.driftStartTime;if(L>0){var O=this.driftEnd-this.driftStart;return O*1e3/L}return 1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var L;return(L=this.partList)!==null&&L!==void 0&&L.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var L;return(L=this.fragments)!==null&&L!==void 0&&L.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var L;return(L=this.partList)!==null&&L!==void 0&&L.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var L;return(L=this.partList)!==null&&L!==void 0&&L.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),A}()},"./src/loader/level-key.ts":function(n,i,r){r.r(i),r.d(i,"LevelKey",function(){return D});var s=r("./node_modules/url-toolkit/src/url-toolkit.js");function o(C,A){for(var _=0;_<A.length;_++){var p=A[_];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(C,p.key,p)}}function u(C,A,_){return A&&o(C.prototype,A),_&&o(C,_),Object.defineProperty(C,"prototype",{writable:!1}),C}var D=function(){C.fromURL=function(_,p){return new C(_,p)},C.fromURI=function(_){return new C(_)};function C(A,_){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,_?this._uri=Object(s.buildAbsoluteURL)(A,_,{alwaysNormalize:!0}):this._uri=A}return u(C,[{key:"uri",get:function(){return this._uri}}]),C}()},"./src/loader/load-stats.ts":function(n,i,r){r.r(i),r.d(i,"LoadStats",function(){return s});var s=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return f});var s=r("./src/polyfills/number.ts"),o=r("./node_modules/url-toolkit/src/url-toolkit.js"),u=r("./src/loader/date-range.ts"),D=r("./src/loader/fragment.ts"),C=r("./src/loader/level-details.ts"),A=r("./src/loader/level-key.ts"),_=r("./src/utils/attr-list.ts"),p=r("./src/utils/logger.ts"),L=r("./src/utils/codecs.ts"),O=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,R=/#EXT-X-MEDIA:(.*)/g,T=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),y=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),l=/\.(mp4|m4s|m4v|m4a)$/i;function a(P){var b,x;return l.test((b=(x=o.parseURL(P))===null||x===void 0?void 0:x.path)!=null?b:"")}var f=function(){function P(){}return P.findGroup=function(x,S){for(var g=0;g<x.length;g++){var E=x[g];if(E.id===S)return E}},P.convertAVC1ToAVCOTI=function(x){var S=x.split(".");if(S.length>2){var g=S.shift()+".";return g+=parseInt(S.shift()).toString(16),g+=("000"+parseInt(S.shift()).toString(16)).slice(-4),g}return x},P.resolve=function(x,S){return o.buildAbsoluteURL(S,x,{alwaysNormalize:!0})},P.parseMasterPlaylist=function(x,S){var g=[],E={},I=!1;O.lastIndex=0;for(var M;(M=O.exec(x))!=null;)if(M[1]){var F=new _.AttrList(M[1]),w={attrs:F,bitrate:F.decimalInteger("AVERAGE-BANDWIDTH")||F.decimalInteger("BANDWIDTH"),name:F.NAME,url:P.resolve(M[2],S)},k=F.decimalResolution("RESOLUTION");k&&(w.width=k.width,w.height=k.height),d((F.CODECS||"").split(/[ ,]+/).filter(function(U){return U}),w),w.videoCodec&&w.videoCodec.indexOf("avc1")!==-1&&(w.videoCodec=P.convertAVC1ToAVCOTI(w.videoCodec)),g.push(w)}else if(M[3]){var B=new _.AttrList(M[3]);B["DATA-ID"]&&(I=!0,E[B["DATA-ID"]]=B)}return{levels:g,sessionData:I?E:null}},P.parseMasterPlaylistMedia=function(x,S,g,E){E===void 0&&(E=[]);var I,M=[],F=0;for(R.lastIndex=0;(I=R.exec(x))!==null;){var w=new _.AttrList(I[1]);if(w.TYPE===g){var k={attrs:w,bitrate:0,id:F++,groupId:w["GROUP-ID"],instreamId:w["INSTREAM-ID"],name:w.NAME||w.LANGUAGE||"",type:g,default:w.bool("DEFAULT"),autoselect:w.bool("AUTOSELECT"),forced:w.bool("FORCED"),lang:w.LANGUAGE,url:w.URI?P.resolve(w.URI,S):""};if(E.length){var B=P.findGroup(E,k.groupId)||E[0];m(k,B,"audioCodec"),m(k,B,"textCodec")}M.push(k)}}return M},P.parseLevelPlaylist=function(x,S,g,E,I){var M=new C.LevelDetails(S),F=M.fragments,w=null,k=0,B=0,U=0,j=0,H=null,N=new D.Fragment(E,S),G,$,z,ee=-1,X=!1;for(T.lastIndex=0,M.m3u8=x;(G=T.exec(x))!==null;){X&&(X=!1,N=new D.Fragment(E,S),N.start=U,N.sn=k,N.cc=j,N.level=g,w&&(N.initSegment=w,N.rawProgramDateTime=w.rawProgramDateTime,w.rawProgramDateTime=null));var te=G[1];if(te){N.duration=parseFloat(te);var se=(" "+G[2]).slice(1);N.title=se||null,N.tagList.push(se?["INF",te,se]:["INF",te])}else if(G[3])Object(s.isFiniteNumber)(N.duration)&&(N.start=U,z&&(N.levelkey=z),N.sn=k,N.level=g,N.cc=j,N.urlId=I,F.push(N),N.relurl=(" "+G[3]).slice(1),c(N,H),H=N,U+=N.duration,k++,B=0,X=!0);else if(G[4]){var K=(" "+G[4]).slice(1);H?N.setByteRange(K,H):N.setByteRange(K)}else if(G[5])N.rawProgramDateTime=(" "+G[5]).slice(1),N.tagList.push(["PROGRAM-DATE-TIME",N.rawProgramDateTime]),ee===-1&&(ee=F.length);else{if(G=G[0].match(y),!G){p.logger.warn("No matches on slow regex match for level playlist!");continue}for($=1;$<G.length&&typeof G[$]=="undefined";$++);var W=(" "+G[$]).slice(1),V=(" "+G[$+1]).slice(1),Q=G[$+2]?(" "+G[$+2]).slice(1):"";switch(W){case"PLAYLIST-TYPE":M.type=V.toUpperCase();break;case"MEDIA-SEQUENCE":k=M.startSN=parseInt(V);break;case"SKIP":{var Y=new _.AttrList(V),Z=Y.decimalInteger("SKIPPED-SEGMENTS");if(Object(s.isFiniteNumber)(Z)){M.skippedSegments=Z;for(var ne=Z;ne--;)F.unshift(null);k+=Z}var q=Y.enumeratedString("RECENTLY-REMOVED-DATERANGES");q&&(M.recentlyRemovedDateranges=q.split("	"));break}case"TARGETDURATION":M.targetduration=parseFloat(V);break;case"VERSION":M.version=parseInt(V);break;case"EXTM3U":break;case"ENDLIST":M.live=!1;break;case"#":(V||Q)&&N.tagList.push(Q?[V,Q]:[V]);break;case"DISCONTINUITY":j++,N.tagList.push(["DIS"]);break;case"GAP":N.tagList.push([W]);break;case"BITRATE":N.tagList.push([W,V]);break;case"DATERANGE":{var re=new _.AttrList(V),J=new u.DateRange(re,M.dateRanges[re.ID]);J.isValid||M.skippedSegments?M.dateRanges[J.id]=J:p.logger.warn('Ignoring invalid DATERANGE tag: "'+V+'"'),N.tagList.push(["EXT-X-DATERANGE",V]);break}case"DISCONTINUITY-SEQUENCE":j=parseInt(V);break;case"KEY":{var le,oe=new _.AttrList(V),ue=oe.enumeratedString("METHOD"),ce=oe.URI,me=oe.hexadecimalInteger("IV"),pe=oe.enumeratedString("KEYFORMATVERSIONS"),ge=oe.enumeratedString("KEYID"),Ee=(le=oe.enumeratedString("KEYFORMAT"))!=null?le:"identity",De=["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"];if(De.indexOf(Ee)>-1){p.logger.warn("Keyformat "+Ee+" is not supported from the manifest");continue}else if(Ee!=="identity")continue;ue&&(z=A.LevelKey.fromURL(S,ce),ce&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(ue)>=0&&(z.method=ue,z.keyFormat=Ee,ge&&(z.keyID=ge),pe&&(z.keyFormatVersions=pe),z.iv=me));break}case"START":{var Ne=new _.AttrList(V),Oe=Ne.decimalFloatingPoint("TIME-OFFSET");Object(s.isFiniteNumber)(Oe)&&(M.startTimeOffset=Oe);break}case"MAP":{var Ie=new _.AttrList(V);if(N.duration){var We=new D.Fragment(E,S);v(We,Ie,g,z),w=We,N.initSegment=w,w.rawProgramDateTime&&!N.rawProgramDateTime&&(N.rawProgramDateTime=w.rawProgramDateTime)}else v(N,Ie,g,z),w=N,X=!0;break}case"SERVER-CONTROL":{var Ae=new _.AttrList(V);M.canBlockReload=Ae.bool("CAN-BLOCK-RELOAD"),M.canSkipUntil=Ae.optionalFloat("CAN-SKIP-UNTIL",0),M.canSkipDateRanges=M.canSkipUntil>0&&Ae.bool("CAN-SKIP-DATERANGES"),M.partHoldBack=Ae.optionalFloat("PART-HOLD-BACK",0),M.holdBack=Ae.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{var we=new _.AttrList(V);M.partTarget=we.decimalFloatingPoint("PART-TARGET");break}case"PART":{var Ue=M.partList;Ue||(Ue=M.partList=[]);var Xe=B>0?Ue[Ue.length-1]:void 0,Zt=B++,Jt=new D.Part(new _.AttrList(V),N,S,Zt,Xe);Ue.push(Jt),N.duration+=Jt.duration;break}case"PRELOAD-HINT":{var qt=new _.AttrList(V);M.preloadHint=qt;break}case"RENDITION-REPORT":{var xt=new _.AttrList(V);M.renditionReports=M.renditionReports||[],M.renditionReports.push(xt);break}default:p.logger.warn("line parsed but not handled: "+G);break}}}H&&!H.relurl?(F.pop(),U-=H.duration,M.partList&&(M.fragmentHint=H)):M.partList&&(c(N,H),N.cc=j,M.fragmentHint=N);var Er=F.length,yr=F[0],er=F[Er-1];if(U+=M.skippedSegments*M.targetduration,U>0&&Er&&er){M.averagetargetduration=U/Er;var Xr=er.sn;M.endSN=Xr!=="initSegment"?Xr:0,yr&&(M.startCC=yr.cc,yr.initSegment||M.fragments.every(function(tr){return tr.relurl&&a(tr.relurl)})&&(p.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),N=new D.Fragment(E,S),N.relurl=er.relurl,N.level=g,N.sn="initSegment",yr.initSegment=N,M.needSidxRanges=!0))}else M.endSN=0,M.startCC=0;return M.fragmentHint&&(U+=M.fragmentHint.duration),M.totalduration=U,M.endCC=j,ee>0&&h(F,ee),M},P}();function d(P,b){["video","audio","text"].forEach(function(x){var S=P.filter(function(E){return Object(L.isCodecType)(E,x)});if(S.length){var g=S.filter(function(E){return E.lastIndexOf("avc1",0)===0||E.lastIndexOf("mp4a",0)===0});b[x+"Codec"]=g.length>0?g[0]:S[0],P=P.filter(function(E){return S.indexOf(E)===-1})}}),b.unknownCodecs=P}function m(P,b,x){var S=b[x];S&&(P[x]=S)}function h(P,b){for(var x=P[b],S=b;S--;){var g=P[S];if(!g)return;g.programDateTime=x.programDateTime-g.duration*1e3,x=g}}function c(P,b){P.rawProgramDateTime?P.programDateTime=Date.parse(P.rawProgramDateTime):b!=null&&b.programDateTime&&(P.programDateTime=b.endProgramDateTime),Object(s.isFiniteNumber)(P.programDateTime)||(P.programDateTime=null,P.rawProgramDateTime=null)}function v(P,b,x,S){P.relurl=b.URI,b.BYTERANGE&&P.setByteRange(b.BYTERANGE),P.level=x,P.sn="initSegment",S&&(P.levelkey=S),P.initSegment=null}},"./src/loader/playlist-loader.ts":function(n,i,r){r.r(i);var s=r("./src/polyfills/number.ts"),o=r("./src/events.ts"),u=r("./src/errors.ts"),D=r("./src/utils/logger.ts"),C=r("./src/utils/mp4-tools.ts"),A=r("./src/loader/m3u8-parser.ts"),_=r("./src/types/loader.ts"),p=r("./src/utils/attr-list.ts");function L(T){var y=T.type;switch(y){case _.PlaylistContextType.AUDIO_TRACK:return _.PlaylistLevelType.AUDIO;case _.PlaylistContextType.SUBTITLE_TRACK:return _.PlaylistLevelType.SUBTITLE;default:return _.PlaylistLevelType.MAIN}}function O(T,y){var l=T.url;return(l===void 0||l.indexOf("data:")===0)&&(l=y.url),l}var R=function(){function T(l){this.hls=void 0,this.loaders=Object.create(null),this.hls=l,this.registerListeners()}var y=T.prototype;return y.registerListeners=function(){var a=this.hls;a.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),a.on(o.Events.LEVEL_LOADING,this.onLevelLoading,this),a.on(o.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),a.on(o.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},y.unregisterListeners=function(){var a=this.hls;a.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),a.off(o.Events.LEVEL_LOADING,this.onLevelLoading,this),a.off(o.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),a.off(o.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},y.createInternalLoader=function(a){var f=this.hls.config,d=f.pLoader,m=f.loader,h=d||m,c=new h(f);return a.loader=c,this.loaders[a.type]=c,c},y.getInternalLoader=function(a){return this.loaders[a.type]},y.resetInternalLoader=function(a){this.loaders[a]&&delete this.loaders[a]},y.destroyInternalLoaders=function(){for(var a in this.loaders){var f=this.loaders[a];f&&f.destroy(),this.resetInternalLoader(a)}},y.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},y.onManifestLoading=function(a,f){var d=f.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:_.PlaylistContextType.MANIFEST,url:d,deliveryDirectives:null})},y.onLevelLoading=function(a,f){var d=f.id,m=f.level,h=f.url,c=f.deliveryDirectives;this.load({id:d,groupId:null,level:m,responseType:"text",type:_.PlaylistContextType.LEVEL,url:h,deliveryDirectives:c})},y.onAudioTrackLoading=function(a,f){var d=f.id,m=f.groupId,h=f.url,c=f.deliveryDirectives;this.load({id:d,groupId:m,level:null,responseType:"text",type:_.PlaylistContextType.AUDIO_TRACK,url:h,deliveryDirectives:c})},y.onSubtitleTrackLoading=function(a,f){var d=f.id,m=f.groupId,h=f.url,c=f.deliveryDirectives;this.load({id:d,groupId:m,level:null,responseType:"text",type:_.PlaylistContextType.SUBTITLE_TRACK,url:h,deliveryDirectives:c})},y.load=function(a){var f,d=this.hls.config,m=this.getInternalLoader(a);if(m){var h=m.context;if(h&&h.url===a.url){D.logger.trace("[playlist-loader]: playlist request ongoing");return}D.logger.log("[playlist-loader]: aborting previous loader for type: "+a.type),m.abort()}var c,v,P,b;switch(a.type){case _.PlaylistContextType.MANIFEST:c=d.manifestLoadingMaxRetry,v=d.manifestLoadingTimeOut,P=d.manifestLoadingRetryDelay,b=d.manifestLoadingMaxRetryTimeout;break;case _.PlaylistContextType.LEVEL:case _.PlaylistContextType.AUDIO_TRACK:case _.PlaylistContextType.SUBTITLE_TRACK:c=0,v=d.levelLoadingTimeOut;break;default:c=d.levelLoadingMaxRetry,v=d.levelLoadingTimeOut,P=d.levelLoadingRetryDelay,b=d.levelLoadingMaxRetryTimeout;break}if(m=this.createInternalLoader(a),(f=a.deliveryDirectives)!==null&&f!==void 0&&f.part){var x;if(a.type===_.PlaylistContextType.LEVEL&&a.level!==null?x=this.hls.levels[a.level].details:a.type===_.PlaylistContextType.AUDIO_TRACK&&a.id!==null?x=this.hls.audioTracks[a.id].details:a.type===_.PlaylistContextType.SUBTITLE_TRACK&&a.id!==null&&(x=this.hls.subtitleTracks[a.id].details),x){var S=x.partTarget,g=x.targetduration;S&&g&&(v=Math.min(Math.max(S*3,g*.8)*1e3,v))}}var E={timeout:v,maxRetry:c,retryDelay:P,maxRetryDelay:b,highWaterMark:0},I={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};m.load(a,E,I)},y.loadsuccess=function(a,f,d,m){if(m===void 0&&(m=null),d.isSidxRequest){this.handleSidxRequest(a,d),this.handlePlaylistLoaded(a,f,d,m);return}this.resetInternalLoader(d.type);var h=a.data;if(h.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(a,d,"no EXTM3U delimiter",m);return}f.parsing.start=performance.now(),h.indexOf("#EXTINF:")>0||h.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(a,f,d,m):this.handleMasterPlaylist(a,f,d,m)},y.loaderror=function(a,f,d){d===void 0&&(d=null),this.handleNetworkError(f,d,!1,a)},y.loadtimeout=function(a,f,d){d===void 0&&(d=null),this.handleNetworkError(f,d,!0)},y.handleMasterPlaylist=function(a,f,d,m){var h=this.hls,c=a.data,v=O(a,d),P=A.default.parseMasterPlaylist(c,v),b=P.levels,x=P.sessionData;if(!b.length){this.handleManifestParsingError(a,d,"no level found in manifest",m);return}var S=b.map(function(w){return{id:w.attrs.AUDIO,audioCodec:w.audioCodec}}),g=b.map(function(w){return{id:w.attrs.SUBTITLES,textCodec:w.textCodec}}),E=A.default.parseMasterPlaylistMedia(c,v,"AUDIO",S),I=A.default.parseMasterPlaylistMedia(c,v,"SUBTITLES",g),M=A.default.parseMasterPlaylistMedia(c,v,"CLOSED-CAPTIONS");if(E.length){var F=E.some(function(w){return!w.url});!F&&b[0].audioCodec&&!b[0].attrs.AUDIO&&(D.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),E.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new p.AttrList({}),bitrate:0,url:""}))}h.trigger(o.Events.MANIFEST_LOADED,{levels:b,audioTracks:E,subtitles:I,captions:M,url:v,stats:f,networkDetails:m,sessionData:x})},y.handleTrackOrLevelPlaylist=function(a,f,d,m){var h=this.hls,c=d.id,v=d.level,P=d.type,b=O(a,d),x=Object(s.isFiniteNumber)(c)?c:0,S=Object(s.isFiniteNumber)(v)?v:x,g=L(d),E=A.default.parseLevelPlaylist(a.data,b,S,g,x);if(!E.fragments.length){h.trigger(o.Events.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:b,reason:"no fragments found in level",level:typeof d.level=="number"?d.level:void 0});return}if(P===_.PlaylistContextType.MANIFEST){var I={attrs:new p.AttrList({}),bitrate:0,details:E,name:"",url:b};h.trigger(o.Events.MANIFEST_LOADED,{levels:[I],audioTracks:[],url:b,stats:f,networkDetails:m,sessionData:null})}if(f.parsing.end=performance.now(),E.needSidxRanges){var M,F=(M=E.fragments[0].initSegment)===null||M===void 0?void 0:M.url;this.load({url:F,isSidxRequest:!0,type:P,level:v,levelDetails:E,id:c,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null});return}d.levelDetails=E,this.handlePlaylistLoaded(a,f,d,m)},y.handleSidxRequest=function(a,f){var d=Object(C.parseSegmentIndex)(new Uint8Array(a.data));if(!!d){var m=d.references,h=f.levelDetails;m.forEach(function(c,v){var P=c.info,b=h.fragments[v];b.byteRange.length===0&&b.setByteRange(String(1+P.end-P.start)+"@"+String(P.start)),b.initSegment&&b.initSegment.setByteRange(String(d.moovEndOffset)+"@0")})}},y.handleManifestParsingError=function(a,f,d,m){this.hls.trigger(o.Events.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:f.type===_.PlaylistContextType.MANIFEST,url:a.url,reason:d,response:a,context:f,networkDetails:m})},y.handleNetworkError=function(a,f,d,m){d===void 0&&(d=!1),D.logger.warn("[playlist-loader]: A network "+(d?"timeout":"error")+" occurred while loading "+a.type+" level: "+a.level+" id: "+a.id+' group-id: "'+a.groupId+'"');var h=u.ErrorDetails.UNKNOWN,c=!1,v=this.getInternalLoader(a);switch(a.type){case _.PlaylistContextType.MANIFEST:h=d?u.ErrorDetails.MANIFEST_LOAD_TIMEOUT:u.ErrorDetails.MANIFEST_LOAD_ERROR,c=!0;break;case _.PlaylistContextType.LEVEL:h=d?u.ErrorDetails.LEVEL_LOAD_TIMEOUT:u.ErrorDetails.LEVEL_LOAD_ERROR,c=!1;break;case _.PlaylistContextType.AUDIO_TRACK:h=d?u.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case _.PlaylistContextType.SUBTITLE_TRACK:h=d?u.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:u.ErrorDetails.SUBTITLE_LOAD_ERROR,c=!1;break}v&&this.resetInternalLoader(a.type);var P={type:u.ErrorTypes.NETWORK_ERROR,details:h,fatal:c,url:a.url,loader:v,context:a,networkDetails:f};m&&(P.response=m),this.hls.trigger(o.Events.ERROR,P)},y.handlePlaylistLoaded=function(a,f,d,m){var h=d.type,c=d.level,v=d.id,P=d.groupId,b=d.loader,x=d.levelDetails,S=d.deliveryDirectives;if(!(x!=null&&x.targetduration)){this.handleManifestParsingError(a,d,"invalid target duration",m);return}if(!!b)switch(x.live&&(b.getCacheAge&&(x.ageHeader=b.getCacheAge()||0),(!b.getCacheAge||isNaN(x.ageHeader))&&(x.ageHeader=0)),h){case _.PlaylistContextType.MANIFEST:case _.PlaylistContextType.LEVEL:this.hls.trigger(o.Events.LEVEL_LOADED,{details:x,level:c||0,id:v||0,stats:f,networkDetails:m,deliveryDirectives:S});break;case _.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(o.Events.AUDIO_TRACK_LOADED,{details:x,id:v||0,groupId:P||"",stats:f,networkDetails:m,deliveryDirectives:S});break;case _.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(o.Events.SUBTITLE_TRACK_LOADED,{details:x,id:v||0,groupId:P||"",stats:f,networkDetails:m,deliveryDirectives:S});break}},T}();i.default=R},"./src/polyfills/number.ts":function(n,i,r){r.r(i),r.d(i,"isFiniteNumber",function(){return s}),r.d(i,"MAX_SAFE_INTEGER",function(){return o});var s=Number.isFinite||function(u){return typeof u=="number"&&isFinite(u)},o=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(n,i,r){r.r(i);var s=function(){function o(){}return o.getSilentFrame=function(D,C){switch(D){case"mp4a.40.2":if(C===1)return new Uint8Array([0,200,0,128,35,128]);if(C===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(C===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(C===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(C===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(C===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(C===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(C===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(C===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}},o}();i.default=s},"./src/remux/mp4-generator.ts":function(n,i,r){r.r(i);var s=Math.pow(2,32)-1,o=function(){function u(){}return u.init=function(){u.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var C;for(C in u.types)u.types.hasOwnProperty(C)&&(u.types[C]=[C.charCodeAt(0),C.charCodeAt(1),C.charCodeAt(2),C.charCodeAt(3)]);var A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),_=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);u.HDLR_TYPES={video:A,audio:_};var p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]);u.STTS=u.STSC=u.STCO=L,u.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),u.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),u.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),u.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var O=new Uint8Array([105,115,111,109]),R=new Uint8Array([97,118,99,49]),T=new Uint8Array([0,0,0,1]);u.FTYP=u.box(u.types.ftyp,O,T,O,R),u.DINF=u.box(u.types.dinf,u.box(u.types.dref,p))},u.box=function(C){for(var A=8,_=arguments.length,p=new Array(_>1?_-1:0),L=1;L<_;L++)p[L-1]=arguments[L];for(var O=p.length,R=O;O--;)A+=p[O].byteLength;var T=new Uint8Array(A);for(T[0]=A>>24&255,T[1]=A>>16&255,T[2]=A>>8&255,T[3]=A&255,T.set(C,4),O=0,A=8;O<R;O++)T.set(p[O],A),A+=p[O].byteLength;return T},u.hdlr=function(C){return u.box(u.types.hdlr,u.HDLR_TYPES[C])},u.mdat=function(C){return u.box(u.types.mdat,C)},u.mdhd=function(C,A){A*=C;var _=Math.floor(A/(s+1)),p=Math.floor(A%(s+1));return u.box(u.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,C>>24&255,C>>16&255,C>>8&255,C&255,_>>24,_>>16&255,_>>8&255,_&255,p>>24,p>>16&255,p>>8&255,p&255,85,196,0,0]))},u.mdia=function(C){return u.box(u.types.mdia,u.mdhd(C.timescale,C.duration),u.hdlr(C.type),u.minf(C))},u.mfhd=function(C){return u.box(u.types.mfhd,new Uint8Array([0,0,0,0,C>>24,C>>16&255,C>>8&255,C&255]))},u.minf=function(C){return C.type==="audio"?u.box(u.types.minf,u.box(u.types.smhd,u.SMHD),u.DINF,u.stbl(C)):u.box(u.types.minf,u.box(u.types.vmhd,u.VMHD),u.DINF,u.stbl(C))},u.moof=function(C,A,_){return u.box(u.types.moof,u.mfhd(C),u.traf(_,A))},u.moov=function(C){for(var A=C.length,_=[];A--;)_[A]=u.trak(C[A]);return u.box.apply(null,[u.types.moov,u.mvhd(C[0].timescale,C[0].duration)].concat(_).concat(u.mvex(C)))},u.mvex=function(C){for(var A=C.length,_=[];A--;)_[A]=u.trex(C[A]);return u.box.apply(null,[u.types.mvex].concat(_))},u.mvhd=function(C,A){A*=C;var _=Math.floor(A/(s+1)),p=Math.floor(A%(s+1)),L=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,C>>24&255,C>>16&255,C>>8&255,C&255,_>>24,_>>16&255,_>>8&255,_&255,p>>24,p>>16&255,p>>8&255,p&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return u.box(u.types.mvhd,L)},u.sdtp=function(C){var A=C.samples||[],_=new Uint8Array(4+A.length),p,L;for(p=0;p<A.length;p++)L=A[p].flags,_[p+4]=L.dependsOn<<4|L.isDependedOn<<2|L.hasRedundancy;return u.box(u.types.sdtp,_)},u.stbl=function(C){return u.box(u.types.stbl,u.stsd(C),u.box(u.types.stts,u.STTS),u.box(u.types.stsc,u.STSC),u.box(u.types.stsz,u.STSZ),u.box(u.types.stco,u.STCO))},u.avc1=function(C){var A=[],_=[],p,L,O;for(p=0;p<C.sps.length;p++)L=C.sps[p],O=L.byteLength,A.push(O>>>8&255),A.push(O&255),A=A.concat(Array.prototype.slice.call(L));for(p=0;p<C.pps.length;p++)L=C.pps[p],O=L.byteLength,_.push(O>>>8&255),_.push(O&255),_=_.concat(Array.prototype.slice.call(L));var R=u.box(u.types.avcC,new Uint8Array([1,A[3],A[4],A[5],255,224|C.sps.length].concat(A).concat([C.pps.length]).concat(_))),T=C.width,y=C.height,l=C.pixelRatio[0],a=C.pixelRatio[1];return u.box(u.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,T>>8&255,T&255,y>>8&255,y&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),R,u.box(u.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),u.box(u.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,l&255,a>>24,a>>16&255,a>>8&255,a&255])))},u.esds=function(C){var A=C.config.length;return new Uint8Array([0,0,0,0,3,23+A,0,1,0,4,15+A,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([A]).concat(C.config).concat([6,1,2]))},u.mp4a=function(C){var A=C.samplerate;return u.box(u.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,C.channelCount,0,16,0,0,0,0,A>>8&255,A&255,0,0]),u.box(u.types.esds,u.esds(C)))},u.mp3=function(C){var A=C.samplerate;return u.box(u.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,C.channelCount,0,16,0,0,0,0,A>>8&255,A&255,0,0]))},u.stsd=function(C){return C.type==="audio"?C.segmentCodec==="mp3"&&C.codec==="mp3"?u.box(u.types.stsd,u.STSD,u.mp3(C)):u.box(u.types.stsd,u.STSD,u.mp4a(C)):u.box(u.types.stsd,u.STSD,u.avc1(C))},u.tkhd=function(C){var A=C.id,_=C.duration*C.timescale,p=C.width,L=C.height,O=Math.floor(_/(s+1)),R=Math.floor(_%(s+1));return u.box(u.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,A>>24&255,A>>16&255,A>>8&255,A&255,0,0,0,0,O>>24,O>>16&255,O>>8&255,O&255,R>>24,R>>16&255,R>>8&255,R&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,p>>8&255,p&255,0,0,L>>8&255,L&255,0,0]))},u.traf=function(C,A){var _=u.sdtp(C),p=C.id,L=Math.floor(A/(s+1)),O=Math.floor(A%(s+1));return u.box(u.types.traf,u.box(u.types.tfhd,new Uint8Array([0,0,0,0,p>>24,p>>16&255,p>>8&255,p&255])),u.box(u.types.tfdt,new Uint8Array([1,0,0,0,L>>24,L>>16&255,L>>8&255,L&255,O>>24,O>>16&255,O>>8&255,O&255])),u.trun(C,_.length+16+20+8+16+8+8),_)},u.trak=function(C){return C.duration=C.duration||4294967295,u.box(u.types.trak,u.tkhd(C),u.mdia(C))},u.trex=function(C){var A=C.id;return u.box(u.types.trex,new Uint8Array([0,0,0,0,A>>24,A>>16&255,A>>8&255,A&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},u.trun=function(C,A){var _=C.samples||[],p=_.length,L=12+16*p,O=new Uint8Array(L),R,T,y,l,a,f;for(A+=8+L,O.set([0,0,15,1,p>>>24&255,p>>>16&255,p>>>8&255,p&255,A>>>24&255,A>>>16&255,A>>>8&255,A&255],0),R=0;R<p;R++)T=_[R],y=T.duration,l=T.size,a=T.flags,f=T.cts,O.set([y>>>24&255,y>>>16&255,y>>>8&255,y&255,l>>>24&255,l>>>16&255,l>>>8&255,l&255,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,a.degradPrio&240<<8,a.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*R);return u.box(u.types.trun,O)},u.initSegment=function(C){u.types||u.init();var A=u.moov(C),_=new Uint8Array(u.FTYP.byteLength+A.byteLength);return _.set(u.FTYP),_.set(A,u.FTYP.byteLength),_},u}();o.types=void 0,o.HDLR_TYPES=void 0,o.STTS=void 0,o.STSC=void 0,o.STCO=void 0,o.STSZ=void 0,o.VMHD=void 0,o.SMHD=void 0,o.STSD=void 0,o.FTYP=void 0,o.DINF=void 0,i.default=o},"./src/remux/mp4-remuxer.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return f}),r.d(i,"normalizePts",function(){return d}),r.d(i,"flushTextTrackMetadataCueSamples",function(){return h}),r.d(i,"flushTextTrackUserdataCueSamples",function(){return c});var s=r("./src/polyfills/number.ts"),o=r("./src/remux/aac-helper.ts"),u=r("./src/remux/mp4-generator.ts"),D=r("./src/events.ts"),C=r("./src/errors.ts"),A=r("./src/utils/logger.ts"),_=r("./src/types/loader.ts"),p=r("./src/utils/timescale-conversion.ts");function L(){return L=Object.assign?Object.assign.bind():function(b){for(var x=1;x<arguments.length;x++){var S=arguments[x];for(var g in S)Object.prototype.hasOwnProperty.call(S,g)&&(b[g]=S[g])}return b},L.apply(this,arguments)}var O=10*1e3,R=1024,T=1152,y=null,l=null,a=!1,f=function(){function b(S,g,E,I){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=S,this.config=g,this.typeSupported=E,this.ISGenerated=!1,y===null){var M=navigator.userAgent||"",F=M.match(/Chrome\/(\d+)/i);y=F?parseInt(F[1]):0}if(l===null){var w=navigator.userAgent.match(/Safari\/(\d+)/i);l=w?parseInt(w[1]):0}a=!(!!y&&y>=75||!!l&&l>=600)}var x=b.prototype;return x.destroy=function(){},x.resetTimeStamp=function(g){A.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=g},x.resetNextTimestamp=function(){A.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},x.resetInitSegment=function(){A.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},x.getVideoStartPts=function(g){var E=!1,I=g.reduce(function(M,F){var w=F.pts-M;return w<-4294967296?(E=!0,d(M,F.pts)):w>0?M:F.pts},g[0].pts);return E&&A.logger.debug("PTS rollover detected"),I},x.remux=function(g,E,I,M,F,w,k,B){var U,j,H,N,G,$,z=F,ee=F,X=g.pid>-1,te=E.pid>-1,se=E.samples.length,K=g.samples.length>0,W=k&&se>0||se>1,V=(!X||K)&&(!te||W)||this.ISGenerated||k;if(V){this.ISGenerated||(H=this.generateIS(g,E,F));var Q=this.isVideoContiguous,Y=-1,Z;if(W&&(Y=m(E.samples),!Q&&this.config.forceKeyFrameOnDiscontinuity))if($=!0,Y>0){A.logger.warn("[mp4-remuxer]: Dropped "+Y+" out of "+se+" video samples due to a missing keyframe");var ne=this.getVideoStartPts(E.samples);E.samples=E.samples.slice(Y),E.dropped+=Y,ee+=(E.samples[0].pts-ne)/E.inputTimeScale,Z=ee}else Y===-1&&(A.logger.warn("[mp4-remuxer]: No keyframe found out of "+se+" video samples"),$=!1);if(this.ISGenerated){if(K&&W){var q=this.getVideoStartPts(E.samples),re=d(g.samples[0].pts,q)-q,J=re/E.inputTimeScale;z+=Math.max(0,J),ee+=Math.max(0,-J)}if(K){if(g.samplerate||(A.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),H=this.generateIS(g,E,F)),j=this.remuxAudio(g,z,this.isAudioContiguous,w,te||W||B===_.PlaylistLevelType.AUDIO?ee:void 0),W){var le=j?j.endPTS-j.startPTS:0;E.inputTimeScale||(A.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),H=this.generateIS(g,E,F)),U=this.remuxVideo(E,ee,Q,le)}}else W&&(U=this.remuxVideo(E,ee,Q,0));U&&(U.firstKeyFrame=Y,U.independent=Y!==-1,U.firstKeyFramePTS=Z)}}return this.ISGenerated&&(I.samples.length&&(G=h(I,F,this._initPTS,this._initDTS)),M.samples.length&&(N=c(M,F,this._initPTS))),{audio:j,video:U,initSegment:H,independent:$,text:N,id3:G}},x.generateIS=function(g,E,I){var M=g.samples,F=E.samples,w=this.typeSupported,k={},B=!Object(s.isFiniteNumber)(this._initPTS),U="audio/mp4",j,H,N;if(B&&(j=H=1/0),g.config&&M.length){switch(g.timescale=g.samplerate,g.segmentCodec){case"mp3":w.mpeg?(U="audio/mpeg",g.codec=""):w.mp3&&(g.codec="mp3");break}k.audio={id:"audio",container:U,codec:g.codec,initSegment:g.segmentCodec==="mp3"&&w.mpeg?new Uint8Array(0):u.default.initSegment([g]),metadata:{channelCount:g.channelCount}},B&&(N=g.inputTimeScale,j=H=M[0].pts-Math.round(N*I))}if(E.sps&&E.pps&&F.length&&(E.timescale=E.inputTimeScale,k.video={id:"main",container:"video/mp4",codec:E.codec,initSegment:u.default.initSegment([E]),metadata:{width:E.width,height:E.height}},B)){N=E.inputTimeScale;var G=this.getVideoStartPts(F),$=Math.round(N*I);H=Math.min(H,d(F[0].dts,G)-$),j=Math.min(j,G-$)}if(Object.keys(k).length)return this.ISGenerated=!0,B&&(this._initPTS=j,this._initDTS=H),{tracks:k,initPTS:j,timescale:N}},x.remuxVideo=function(g,E,I,M){var F=g.inputTimeScale,w=g.samples,k=[],B=w.length,U=this._initPTS,j=this.nextAvcDts,H=8,N=this.videoSampleDuration,G,$,z=Number.POSITIVE_INFINITY,ee=Number.NEGATIVE_INFINITY,X=0,te=!1;if(!I||j===null){var se=E*F,K=w[0].pts-d(w[0].dts,w[0].pts);j=se-K}for(var W=0;W<B;W++){var V=w[W];if(V.pts=d(V.pts-U,j),V.dts=d(V.dts-U,j),V.dts>V.pts){var Q=18e3;X=Math.max(Math.min(X,V.pts-V.dts),-1*Q)}V.dts<w[W>0?W-1:W].dts&&(te=!0)}te&&w.sort(function(Ri,ua){var Gu=Ri.dts-ua.dts,$u=Ri.pts-ua.pts;return Gu||$u}),G=w[0].dts,$=w[w.length-1].dts;var Y=$-G,Z=Y?Math.round(Y/(B-1)):N||g.inputTimeScale/30;if(X<0){if(X<Z*-2){A.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(p.toMsFromMpegTsClock)(-Z,!0)+" ms");for(var ne=X,q=0;q<B;q++)w[q].dts=ne=Math.max(ne,w[q].pts-Z),w[q].pts=Math.max(ne,w[q].pts)}else{A.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(p.toMsFromMpegTsClock)(X,!0)+" ms to overcome this issue");for(var re=0;re<B;re++)w[re].dts=w[re].dts+X}G=w[0].dts}if(I){var J=G-j,le=J>Z,oe=J<-1;if(le||oe){le?A.logger.warn("AVC: "+Object(p.toMsFromMpegTsClock)(J,!0)+" ms ("+J+"dts) hole between fragments detected, filling it"):A.logger.warn("AVC: "+Object(p.toMsFromMpegTsClock)(-J,!0)+" ms ("+J+"dts) overlapping between fragments detected"),G=j;var ue=w[0].pts-J;w[0].dts=G,w[0].pts=ue,A.logger.log("Video: First PTS/DTS adjusted: "+Object(p.toMsFromMpegTsClock)(ue,!0)+"/"+Object(p.toMsFromMpegTsClock)(G,!0)+", delta: "+Object(p.toMsFromMpegTsClock)(J,!0)+" ms")}}a&&(G=Math.max(0,G));for(var ce=0,me=0,pe=0;pe<B;pe++){for(var ge=w[pe],Ee=ge.units,De=Ee.length,Ne=0,Oe=0;Oe<De;Oe++)Ne+=Ee[Oe].data.length;me+=Ne,ce+=De,ge.length=Ne,ge.dts=Math.max(ge.dts,G),ge.pts=Math.max(ge.pts,ge.dts,0),z=Math.min(ge.pts,z),ee=Math.max(ge.pts,ee)}$=w[B-1].dts;var Ie=me+4*ce+8,We;try{We=new Uint8Array(Ie)}catch{this.observer.emit(D.Events.ERROR,D.Events.ERROR,{type:C.ErrorTypes.MUX_ERROR,details:C.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Ie,reason:"fail allocating video mdat "+Ie});return}var Ae=new DataView(We.buffer);Ae.setUint32(0,Ie),We.set(u.default.types.mdat,4);for(var we=!1,Ue=0;Ue<B;Ue++){for(var Xe=w[Ue],Zt=Xe.units,Jt=0,qt=0,xt=Zt.length;qt<xt;qt++){var Er=Zt[qt],yr=Er.data,er=Er.data.byteLength;Ae.setUint32(H,er),H+=4,We.set(yr,H),H+=er,Jt+=4+er}if(Ue<B-1)N=w[Ue+1].dts-Xe.dts;else{var Xr=this.config,tr=Ue>0?Xe.dts-w[Ue-1].dts:Z;if(Xr.stretchShortVideoTrack&&this.nextAudioPts!==null){var Nu=Math.floor(Xr.maxBufferHole*F),Ci=(M?z+M*F:this.nextAudioPts)-Xe.pts;Ci>Nu?(N=Ci-tr,N<0?N=tr:we=!0,A.logger.log("[mp4-remuxer]: It is approximately "+Ci/90+" ms to the next segment; using duration "+N/90+" ms for the last video frame.")):N=tr}else N=tr}var Ku=Math.round(Xe.pts-Xe.dts);k.push(new v(Xe.key,N,Jt,Ku))}if(k.length&&y&&y<70){var la=k[0].flags;la.dependsOn=2,la.isNonSync=0}console.assert(N!==null,"mp4SampleDuration must be computed"),N=we||!N?Z:N,this.nextAvcDts=j=$+N,this.videoSampleDuration=N,this.isVideoContiguous=!0;var ju=u.default.moof(g.sequenceNumber++,G,L({},g,{samples:k})),Wu="video",Hu={data1:ju,data2:We,startPTS:z/F,endPTS:(ee+N)/F,startDTS:G/F,endDTS:j/F,type:Wu,hasAudio:!1,hasVideo:!0,nb:k.length,dropped:g.dropped};return g.samples=[],g.dropped=0,console.assert(We.length,"MDAT length must not be zero"),Hu},x.remuxAudio=function(g,E,I,M,F){var w=g.inputTimeScale,k=g.samplerate?g.samplerate:w,B=w/k,U=g.segmentCodec==="aac"?R:T,j=U*B,H=this._initPTS,N=g.segmentCodec==="mp3"&&this.typeSupported.mpeg,G=[],$=F!==void 0,z=g.samples,ee=N?0:8,X=this.nextAudioPts||-1,te=E*w;if(this.isAudioContiguous=I=I||z.length&&X>0&&(M&&Math.abs(te-X)<9e3||Math.abs(d(z[0].pts-H,te)-X)<20*j),z.forEach(function(xt){xt.pts=d(xt.pts-H,te)}),!I||X<0){if(z=z.filter(function(xt){return xt.pts>=0}),!z.length)return;F===0?X=0:M&&!$?X=Math.max(0,te):X=z[0].pts}if(g.segmentCodec==="aac")for(var se=this.config.maxAudioFramesDrift,K=0,W=X;K<z.length;K++){var V=z[K],Q=V.pts,Y=Q-W,Z=Math.abs(1e3*Y/w);if(Y<=-se*j&&$)K===0&&(A.logger.warn("Audio frame @ "+(Q/w).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*Y/w)+" ms."),this.nextAudioPts=X=W=Q);else if(Y>=se*j&&Z<O&&$){var ne=Math.round(Y/j);W=Q-ne*j,W<0&&(ne--,W+=j),K===0&&(this.nextAudioPts=X=W),A.logger.warn("[mp4-remuxer]: Injecting "+ne+" audio frame @ "+(W/w).toFixed(3)+"s due to "+Math.round(1e3*Y/w)+" ms gap.");for(var q=0;q<ne;q++){var re=Math.max(W,0),J=o.default.getSilentFrame(g.manifestCodec||g.codec,g.channelCount);J||(A.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),J=V.unit.subarray()),z.splice(K,0,{unit:J,pts:re}),W+=j,K++}}V.pts=W,W+=j}for(var le=null,oe=null,ue,ce=0,me=z.length;me--;)ce+=z[me].unit.byteLength;for(var pe=0,ge=z.length;pe<ge;pe++){var Ee=z[pe],De=Ee.unit,Ne=Ee.pts;if(oe!==null){var Oe=G[pe-1];Oe.duration=Math.round((Ne-oe)/B)}else if(I&&g.segmentCodec==="aac"&&(Ne=X),le=Ne,ce>0){ce+=ee;try{ue=new Uint8Array(ce)}catch{this.observer.emit(D.Events.ERROR,D.Events.ERROR,{type:C.ErrorTypes.MUX_ERROR,details:C.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:ce,reason:"fail allocating audio mdat "+ce});return}if(!N){var Ie=new DataView(ue.buffer);Ie.setUint32(0,ce),ue.set(u.default.types.mdat,4)}}else return;ue.set(De,ee);var We=De.byteLength;ee+=We,G.push(new v(!0,U,We,0)),oe=Ne}var Ae=G.length;if(!!Ae){var we=G[G.length-1];this.nextAudioPts=X=oe+B*we.duration;var Ue=N?new Uint8Array(0):u.default.moof(g.sequenceNumber++,le/B,L({},g,{samples:G}));g.samples=[];var Xe=le/w,Zt=X/w,Jt="audio",qt={data1:Ue,data2:ue,startPTS:Xe,endPTS:Zt,startDTS:Xe,endDTS:Zt,type:Jt,hasAudio:!0,hasVideo:!1,nb:Ae};return this.isAudioContiguous=!0,console.assert(ue.length,"MDAT length must not be zero"),qt}},x.remuxEmptyAudio=function(g,E,I,M){var F=g.inputTimeScale,w=g.samplerate?g.samplerate:F,k=F/w,B=this.nextAudioPts,U=(B!==null?B:M.startDTS*F)+this._initDTS,j=M.endDTS*F+this._initDTS,H=k*R,N=Math.ceil((j-U)/H),G=o.default.getSilentFrame(g.manifestCodec||g.codec,g.channelCount);if(A.logger.warn("[mp4-remuxer]: remux empty Audio"),!G){A.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}for(var $=[],z=0;z<N;z++){var ee=U+z*H;$.push({unit:G,pts:ee,dts:ee})}return g.samples=$,this.remuxAudio(g,E,I,!1)},b}();function d(b,x){var S;if(x===null)return b;for(x<b?S=-8589934592:S=8589934592;Math.abs(b-x)>4294967296;)b+=S;return b}function m(b){for(var x=0;x<b.length;x++)if(b[x].key)return x;return-1}function h(b,x,S,g){var E=b.samples.length;if(!!E){for(var I=b.inputTimeScale,M=0;M<E;M++){var F=b.samples[M];F.pts=d(F.pts-S,x*I)/I,F.dts=d(F.dts-g,x*I)/I}var w=b.samples;return b.samples=[],{samples:w}}}function c(b,x,S){var g=b.samples.length;if(!!g){for(var E=b.inputTimeScale,I=0;I<g;I++){var M=b.samples[I];M.pts=d(M.pts-S,x*E)/E}b.samples.sort(function(w,k){return w.pts-k.pts});var F=b.samples;return b.samples=[],{samples:F}}}var v=function(x,S,g,E){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=S,this.size=g,this.cts=E,this.flags=new P(x)},P=function(x){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=x?2:1,this.isNonSync=x?0:1}},"./src/remux/passthrough-remuxer.ts":function(n,i,r){r.r(i);var s=r("./src/polyfills/number.ts"),o=r("./src/remux/mp4-remuxer.ts"),u=r("./src/utils/mp4-tools.ts"),D=r("./src/loader/fragment.ts"),C=r("./src/utils/logger.ts"),A=function(){function L(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var O=L.prototype;return O.destroy=function(){},O.resetTimeStamp=function(T){this.initPTS=T,this.lastEndDTS=null},O.resetNextTimestamp=function(){this.lastEndDTS=null},O.resetInitSegment=function(T,y,l){this.audioCodec=y,this.videoCodec=l,this.generateInitSegment(T),this.emitInitSegment=!0},O.generateInitSegment=function(T){var y=this.audioCodec,l=this.videoCodec;if(!T||!T.byteLength){this.initTracks=void 0,this.initData=void 0;return}var a=this.initData=Object(u.parseInitSegment)(T);y||(y=p(a.audio,D.ElementaryStreamTypes.AUDIO)),l||(l=p(a.video,D.ElementaryStreamTypes.VIDEO));var f={};a.audio&&a.video?f.audiovideo={container:"video/mp4",codec:y+","+l,initSegment:T,id:"main"}:a.audio?f.audio={container:"audio/mp4",codec:y,initSegment:T,id:"audio"}:a.video?f.video={container:"video/mp4",codec:l,initSegment:T,id:"main"}:C.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=f},O.remux=function(T,y,l,a,f){var d,m=this.initPTS,h=this.lastEndDTS,c={audio:void 0,video:void 0,text:a,id3:l,initSegment:void 0};Object(s.isFiniteNumber)(h)||(h=this.lastEndDTS=f||0);var v=y.samples;if(!v||!v.length)return c;var P={initPTS:void 0,timescale:1},b=this.initData;if((!b||!b.length)&&(this.generateInitSegment(v),b=this.initData),!b||!b.length)return C.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(P.tracks=this.initTracks,this.emitInitSegment=!1),Object(s.isFiniteNumber)(m)||(this.initPTS=P.initPTS=m=_(b,v,h));var x=Object(u.getDuration)(v,b),S=h,g=x+S;Object(u.offsetStartDTS)(b,v,m),x>0?this.lastEndDTS=g:(C.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var E=!!b.audio,I=!!b.video,M="";E&&(M+="audio"),I&&(M+="video");var F={data1:v,startPTS:S,startDTS:S,endPTS:g,endDTS:g,type:M,hasAudio:E,hasVideo:I,nb:1,dropped:0};c.audio=F.type==="audio"?F:void 0,c.video=F.type!=="audio"?F:void 0,c.initSegment=P;var w=(d=this.initPTS)!=null?d:0;return c.id3=Object(o.flushTextTrackMetadataCueSamples)(l,f,w,w),a.samples.length&&(c.text=Object(o.flushTextTrackUserdataCueSamples)(a,f,w)),c},L}(),_=function(O,R,T){return Object(u.getStartDTS)(O,R)-T};function p(L,O){var R=L==null?void 0:L.codec;return R&&R.length>4?R:R==="hvc1"||R==="hev1"?"hvc1.1.c.L120.90":R==="av01"?"av01.0.04M.08":R==="avc1"||O===D.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}i.default=A},"./src/task-loop.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return s});var s=function(){function o(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var u=o.prototype;return u.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},u.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},u.onHandlerDestroyed=function(){},u.hasInterval=function(){return!!this._tickInterval},u.hasNextTick=function(){return!!this._tickTimer},u.setInterval=function(C){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,C),!0)},u.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},u.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},u.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},u.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},u.doTick=function(){},o}()},"./src/types/cmcd.ts":function(n,i,r){r.r(i),r.d(i,"CMCDVersion",function(){return s}),r.d(i,"CMCDObjectType",function(){return o}),r.d(i,"CMCDStreamingFormat",function(){return u}),r.d(i,"CMCDStreamType",function(){return D});var s=1,o;(function(C){C.MANIFEST="m",C.AUDIO="a",C.VIDEO="v",C.MUXED="av",C.INIT="i",C.CAPTION="c",C.TIMED_TEXT="tt",C.KEY="k",C.OTHER="o"})(o||(o={}));var u;(function(C){C.DASH="d",C.HLS="h",C.SMOOTH="s",C.OTHER="o"})(u||(u={}));var D;(function(C){C.VOD="v",C.LIVE="l"})(D||(D={}))},"./src/types/demuxer.ts":function(n,i,r){r.r(i),r.d(i,"MetadataSchema",function(){return s});var s;(function(o){o.audioId3="org.id3",o.dateRange="com.apple.quicktime.HLS",o.emsg="https://aomedia.org/emsg/ID3"})(s||(s={}))},"./src/types/level.ts":function(n,i,r){r.r(i),r.d(i,"HlsSkip",function(){return u}),r.d(i,"getSkipValue",function(){return D}),r.d(i,"HlsUrlParameters",function(){return C}),r.d(i,"Level",function(){return A});function s(_,p){for(var L=0;L<p.length;L++){var O=p[L];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,O.key,O)}}function o(_,p,L){return p&&s(_.prototype,p),L&&s(_,L),Object.defineProperty(_,"prototype",{writable:!1}),_}var u;(function(_){_.No="",_.Yes="YES",_.v2="v2"})(u||(u={}));function D(_,p){var L=_.canSkipUntil,O=_.canSkipDateRanges,R=_.endSN,T=p!==void 0?p-R:0;return L&&T<L?O?u.v2:u.Yes:u.No}var C=function(){function _(L,O,R){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=L,this.part=O,this.skip=R}var p=_.prototype;return p.addDirectives=function(O){var R=new self.URL(O);return this.msn!==void 0&&R.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&R.searchParams.set("_HLS_part",this.part.toString()),this.skip&&R.searchParams.set("_HLS_skip",this.skip),R.toString()},_}(),A=function(){function _(p){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[p.url],this.attrs=p.attrs,this.bitrate=p.bitrate,p.details&&(this.details=p.details),this.id=p.id||0,this.name=p.name,this.width=p.width||0,this.height=p.height||0,this.audioCodec=p.audioCodec,this.videoCodec=p.videoCodec,this.unknownCodecs=p.unknownCodecs,this.codecSet=[p.videoCodec,p.audioCodec].filter(function(L){return L}).join(",").replace(/\.[^.,]+/g,"")}return o(_,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(L){var O=L%this.url.length;this._urlId!==O&&(this.details=void 0,this._urlId=O)}}]),_}()},"./src/types/loader.ts":function(n,i,r){r.r(i),r.d(i,"PlaylistContextType",function(){return s}),r.d(i,"PlaylistLevelType",function(){return o});var s;(function(u){u.MANIFEST="manifest",u.LEVEL="level",u.AUDIO_TRACK="audioTrack",u.SUBTITLE_TRACK="subtitleTrack"})(s||(s={}));var o;(function(u){u.MAIN="main",u.AUDIO="audio",u.SUBTITLE="subtitle"})(o||(o={}))},"./src/types/transmuxer.ts":function(n,i,r){r.r(i),r.d(i,"ChunkMetadata",function(){return s});var s=function(D,C,A,_,p,L){_===void 0&&(_=0),p===void 0&&(p=-1),L===void 0&&(L=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=o(),this.buffering={audio:o(),video:o(),audiovideo:o()},this.level=D,this.sn=C,this.id=A,this.size=_,this.part=p,this.partial=L};function o(){return{start:0,executeStart:0,executeEnd:0,end:0}}},"./src/utils/attr-list.ts":function(n,i,r){r.r(i),r.d(i,"AttrList",function(){return u});var s=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,u=function(){function D(A){typeof A=="string"&&(A=D.parseAttrList(A));for(var _ in A)A.hasOwnProperty(_)&&(this[_]=A[_])}var C=D.prototype;return C.decimalInteger=function(_){var p=parseInt(this[_],10);return p>Number.MAX_SAFE_INTEGER?1/0:p},C.hexadecimalInteger=function(_){if(this[_]){var p=(this[_]||"0x").slice(2);p=(p.length&1?"0":"")+p;for(var L=new Uint8Array(p.length/2),O=0;O<p.length/2;O++)L[O]=parseInt(p.slice(O*2,O*2+2),16);return L}else return null},C.hexadecimalIntegerAsNumber=function(_){var p=parseInt(this[_],16);return p>Number.MAX_SAFE_INTEGER?1/0:p},C.decimalFloatingPoint=function(_){return parseFloat(this[_])},C.optionalFloat=function(_,p){var L=this[_];return L?parseFloat(L):p},C.enumeratedString=function(_){return this[_]},C.bool=function(_){return this[_]==="YES"},C.decimalResolution=function(_){var p=s.exec(this[_]);if(p!==null)return{width:parseInt(p[1],10),height:parseInt(p[2],10)}},D.parseAttrList=function(_){var p,L={},O='"';for(o.lastIndex=0;(p=o.exec(_))!==null;){var R=p[2];R.indexOf(O)===0&&R.lastIndexOf(O)===R.length-1&&(R=R.slice(1,-1)),L[p[1]]=R}return L},D}()},"./src/utils/binary-search.ts":function(n,i,r){r.r(i);var s={search:function(u,D){for(var C=0,A=u.length-1,_=null,p=null;C<=A;){_=(C+A)/2|0,p=u[_];var L=D(p);if(L>0)C=_+1;else if(L<0)A=_-1;else return p}return null}};i.default=s},"./src/utils/buffer-helper.ts":function(n,i,r){r.r(i),r.d(i,"BufferHelper",function(){return u});var s=r("./src/utils/logger.ts"),o={length:0,start:function(){return 0},end:function(){return 0}},u=function(){function D(){}return D.isBuffered=function(A,_){try{if(A){for(var p=D.getBuffered(A),L=0;L<p.length;L++)if(_>=p.start(L)&&_<=p.end(L))return!0}}catch{}return!1},D.bufferInfo=function(A,_,p){try{if(A){var L=D.getBuffered(A),O=[],R;for(R=0;R<L.length;R++)O.push({start:L.start(R),end:L.end(R)});return this.bufferedInfo(O,_,p)}}catch{}return{len:0,start:_,end:_,nextStart:void 0}},D.bufferedInfo=function(A,_,p){_=Math.max(0,_),A.sort(function(c,v){var P=c.start-v.start;return P||v.end-c.end});var L=[];if(p)for(var O=0;O<A.length;O++){var R=L.length;if(R){var T=L[R-1].end;A[O].start-T<p?A[O].end>T&&(L[R-1].end=A[O].end):L.push(A[O])}else L.push(A[O])}else L=A;for(var y=0,l,a=_,f=_,d=0;d<L.length;d++){var m=L[d].start,h=L[d].end;if(_+p>=m&&_<h)a=m,f=h,y=f-_;else if(_+p<m){l=m;break}}return{len:y,start:a||0,end:f||0,nextStart:l}},D.getBuffered=function(A){try{return A.buffered}catch(_){return s.logger.log("failed to get media.buffered",_),o}},D}()},"./src/utils/cea-608-parser.ts":function(n,i,r){r.r(i),r.d(i,"Row",function(){return f}),r.d(i,"CaptionScreen",function(){return d});var s=r("./src/utils/logger.ts"),o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},u=function(x){var S=x;return o.hasOwnProperty(x)&&(S=o[x]),String.fromCharCode(S)},D=15,C=100,A={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},_={17:2,18:4,21:6,22:8,23:10,19:13,20:15},p={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},L={25:2,26:4,29:6,30:8,31:10,27:13,28:15},O=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],R;(function(b){b[b.ERROR=0]="ERROR",b[b.TEXT=1]="TEXT",b[b.WARNING=2]="WARNING",b[b.INFO=2]="INFO",b[b.DEBUG=3]="DEBUG",b[b.DATA=3]="DATA"})(R||(R={}));var T=function(){function b(){this.time=null,this.verboseLevel=R.ERROR}var x=b.prototype;return x.log=function(g,E){this.verboseLevel>=g&&s.logger.log(this.time+" ["+g+"] "+E)},b}(),y=function(x){for(var S=[],g=0;g<x.length;g++)S.push(x[g].toString(16));return S},l=function(){function b(S,g,E,I,M){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=S||"white",this.underline=g||!1,this.italics=E||!1,this.background=I||"black",this.flash=M||!1}var x=b.prototype;return x.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},x.setStyles=function(g){for(var E=["foreground","underline","italics","background","flash"],I=0;I<E.length;I++){var M=E[I];g.hasOwnProperty(M)&&(this[M]=g[M])}},x.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},x.equals=function(g){return this.foreground===g.foreground&&this.underline===g.underline&&this.italics===g.italics&&this.background===g.background&&this.flash===g.flash},x.copy=function(g){this.foreground=g.foreground,this.underline=g.underline,this.italics=g.italics,this.background=g.background,this.flash=g.flash},x.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},b}(),a=function(){function b(S,g,E,I,M,F){this.uchar=void 0,this.penState=void 0,this.uchar=S||" ",this.penState=new l(g,E,I,M,F)}var x=b.prototype;return x.reset=function(){this.uchar=" ",this.penState.reset()},x.setChar=function(g,E){this.uchar=g,this.penState.copy(E)},x.setPenState=function(g){this.penState.copy(g)},x.equals=function(g){return this.uchar===g.uchar&&this.penState.equals(g.penState)},x.copy=function(g){this.uchar=g.uchar,this.penState.copy(g.penState)},x.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},b}(),f=function(){function b(S){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var g=0;g<C;g++)this.chars.push(new a);this.logger=S,this.pos=0,this.currPenState=new l}var x=b.prototype;return x.equals=function(g){for(var E=!0,I=0;I<C;I++)if(!this.chars[I].equals(g.chars[I])){E=!1;break}return E},x.copy=function(g){for(var E=0;E<C;E++)this.chars[E].copy(g.chars[E])},x.isEmpty=function(){for(var g=!0,E=0;E<C;E++)if(!this.chars[E].isEmpty()){g=!1;break}return g},x.setCursor=function(g){this.pos!==g&&(this.pos=g),this.pos<0?(this.logger.log(R.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>C&&(this.logger.log(R.DEBUG,"Too large cursor position "+this.pos),this.pos=C)},x.moveCursor=function(g){var E=this.pos+g;if(g>1)for(var I=this.pos+1;I<E+1;I++)this.chars[I].setPenState(this.currPenState);this.setCursor(E)},x.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},x.insertChar=function(g){g>=144&&this.backSpace();var E=u(g);if(this.pos>=C){this.logger.log(R.ERROR,"Cannot insert "+g.toString(16)+" ("+E+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(E,this.currPenState),this.moveCursor(1)},x.clearFromPos=function(g){var E;for(E=g;E<C;E++)this.chars[E].reset()},x.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},x.clearToEndOfRow=function(){this.clearFromPos(this.pos)},x.getTextString=function(){for(var g=[],E=!0,I=0;I<C;I++){var M=this.chars[I].uchar;M!==" "&&(E=!1),g.push(M)}return E?"":g.join("")},x.setPenStyles=function(g){this.currPenState.setStyles(g);var E=this.chars[this.pos];E.setPenState(this.currPenState)},b}(),d=function(){function b(S){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var g=0;g<D;g++)this.rows.push(new f(S));this.logger=S,this.currRow=D-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var x=b.prototype;return x.reset=function(){for(var g=0;g<D;g++)this.rows[g].clear();this.currRow=D-1},x.equals=function(g){for(var E=!0,I=0;I<D;I++)if(!this.rows[I].equals(g.rows[I])){E=!1;break}return E},x.copy=function(g){for(var E=0;E<D;E++)this.rows[E].copy(g.rows[E])},x.isEmpty=function(){for(var g=!0,E=0;E<D;E++)if(!this.rows[E].isEmpty()){g=!1;break}return g},x.backSpace=function(){var g=this.rows[this.currRow];g.backSpace()},x.clearToEndOfRow=function(){var g=this.rows[this.currRow];g.clearToEndOfRow()},x.insertChar=function(g){var E=this.rows[this.currRow];E.insertChar(g)},x.setPen=function(g){var E=this.rows[this.currRow];E.setPenStyles(g)},x.moveCursor=function(g){var E=this.rows[this.currRow];E.moveCursor(g)},x.setCursor=function(g){this.logger.log(R.INFO,"setCursor: "+g);var E=this.rows[this.currRow];E.setCursor(g)},x.setPAC=function(g){this.logger.log(R.INFO,"pacData = "+JSON.stringify(g));var E=g.row-1;if(this.nrRollUpRows&&E<this.nrRollUpRows-1&&(E=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==E){for(var I=0;I<D;I++)this.rows[I].clear();var M=this.currRow+1-this.nrRollUpRows,F=this.lastOutputScreen;if(F){var w=F.rows[M].cueStartTime,k=this.logger.time;if(w&&k!==null&&w<k)for(var B=0;B<this.nrRollUpRows;B++)this.rows[E-this.nrRollUpRows+B+1].copy(F.rows[M+B])}}this.currRow=E;var U=this.rows[this.currRow];if(g.indent!==null){var j=g.indent,H=Math.max(j-1,0);U.setCursor(g.indent),g.color=U.chars[H].penState.foreground}var N={foreground:g.color,underline:g.underline,italics:g.italics,background:"black",flash:!1};this.setPen(N)},x.setBkgData=function(g){this.logger.log(R.INFO,"bkgData = "+JSON.stringify(g)),this.backSpace(),this.setPen(g),this.insertChar(32)},x.setRollUpRows=function(g){this.nrRollUpRows=g},x.rollUp=function(){if(this.nrRollUpRows===null){this.logger.log(R.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(R.TEXT,this.getDisplayText());var g=this.currRow+1-this.nrRollUpRows,E=this.rows.splice(g,1)[0];E.clear(),this.rows.splice(this.currRow,0,E),this.logger.log(R.INFO,"Rolling up")},x.getDisplayText=function(g){g=g||!1;for(var E=[],I="",M=-1,F=0;F<D;F++){var w=this.rows[F].getTextString();w&&(M=F+1,g?E.push("Row "+M+": '"+w+"'"):E.push(w.trim()))}return E.length>0&&(g?I="["+E.join(" | ")+"]":I=E.join(`
`)),I},x.getTextAndFormat=function(){return this.rows},b}(),m=function(){function b(S,g,E){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=S,this.outputFilter=g,this.mode=null,this.verbose=0,this.displayedMemory=new d(E),this.nonDisplayedMemory=new d(E),this.lastOutputScreen=new d(E),this.currRollUpRow=this.displayedMemory.rows[D-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=E}var x=b.prototype;return x.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[D-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},x.getHandler=function(){return this.outputFilter},x.setHandler=function(g){this.outputFilter=g},x.setPAC=function(g){this.writeScreen.setPAC(g)},x.setBkgData=function(g){this.writeScreen.setBkgData(g)},x.setMode=function(g){g!==this.mode&&(this.mode=g,this.logger.log(R.INFO,"MODE="+g),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=g)},x.insertChars=function(g){for(var E=0;E<g.length;E++)this.writeScreen.insertChar(g[E]);var I=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(R.INFO,I+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(R.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},x.ccRCL=function(){this.logger.log(R.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},x.ccBS=function(){this.logger.log(R.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},x.ccAOF=function(){},x.ccAON=function(){},x.ccDER=function(){this.logger.log(R.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},x.ccRU=function(g){this.logger.log(R.INFO,"RU("+g+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(g)},x.ccFON=function(){this.logger.log(R.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},x.ccRDC=function(){this.logger.log(R.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},x.ccTR=function(){this.logger.log(R.INFO,"TR"),this.setMode("MODE_TEXT")},x.ccRTD=function(){this.logger.log(R.INFO,"RTD"),this.setMode("MODE_TEXT")},x.ccEDM=function(){this.logger.log(R.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},x.ccCR=function(){this.logger.log(R.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},x.ccENM=function(){this.logger.log(R.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},x.ccEOC=function(){if(this.logger.log(R.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var g=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=g,this.writeScreen=this.nonDisplayedMemory,this.logger.log(R.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},x.ccTO=function(g){this.logger.log(R.INFO,"TO("+g+") - Tab Offset"),this.writeScreen.moveCursor(g)},x.ccMIDROW=function(g){var E={flash:!1};if(E.underline=g%2===1,E.italics=g>=46,E.italics)E.foreground="white";else{var I=Math.floor(g/2)-16,M=["white","green","blue","cyan","red","yellow","magenta"];E.foreground=M[I]}this.logger.log(R.INFO,"MIDROW: "+JSON.stringify(E)),this.writeScreen.setPen(E)},x.outputDataUpdate=function(g){g===void 0&&(g=!1);var E=this.logger.time;E!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=E:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,E,this.lastOutputScreen),g&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:E),this.lastOutputScreen.copy(this.displayedMemory))},x.cueSplitAtTime=function(g){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,g,this.displayedMemory),this.cueStartTime=g))},b}(),h=function(){function b(S,g,E){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var I=new T;this.channels=[null,new m(S,g,I),new m(S+1,E,I)],this.cmdHistory=P(),this.logger=I}var x=b.prototype;return x.getHandler=function(g){return this.channels[g].getHandler()},x.setHandler=function(g,E){this.channels[g].setHandler(E)},x.addData=function(g,E){var I,M,F,w=!1;this.logger.time=g;for(var k=0;k<E.length;k+=2)if(M=E[k]&127,F=E[k+1]&127,!(M===0&&F===0)){if(this.logger.log(R.DATA,"["+y([E[k],E[k+1]])+"] -> ("+y([M,F])+")"),I=this.parseCmd(M,F),I||(I=this.parseMidrow(M,F)),I||(I=this.parsePAC(M,F)),I||(I=this.parseBackgroundAttributes(M,F)),!I&&(w=this.parseChars(M,F),w)){var B=this.currentChannel;if(B&&B>0){var U=this.channels[B];U.insertChars(w)}else this.logger.log(R.WARNING,"No channel found yet. TEXT-MODE?")}!I&&!w&&this.logger.log(R.WARNING,"Couldn't parse cleaned data "+y([M,F])+" orig: "+y([E[k],E[k+1]]))}},x.parseCmd=function(g,E){var I=this.cmdHistory,M=(g===20||g===28||g===21||g===29)&&E>=32&&E<=47,F=(g===23||g===31)&&E>=33&&E<=35;if(!(M||F))return!1;if(v(g,E,I))return c(null,null,I),this.logger.log(R.DEBUG,"Repeated command ("+y([g,E])+") is dropped"),!0;var w=g===20||g===21||g===23?1:2,k=this.channels[w];return g===20||g===21||g===28||g===29?E===32?k.ccRCL():E===33?k.ccBS():E===34?k.ccAOF():E===35?k.ccAON():E===36?k.ccDER():E===37?k.ccRU(2):E===38?k.ccRU(3):E===39?k.ccRU(4):E===40?k.ccFON():E===41?k.ccRDC():E===42?k.ccTR():E===43?k.ccRTD():E===44?k.ccEDM():E===45?k.ccCR():E===46?k.ccENM():E===47&&k.ccEOC():k.ccTO(E-32),c(g,E,I),this.currentChannel=w,!0},x.parseMidrow=function(g,E){var I=0;if((g===17||g===25)&&E>=32&&E<=47){if(g===17?I=1:I=2,I!==this.currentChannel)return this.logger.log(R.ERROR,"Mismatch channel in midrow parsing"),!1;var M=this.channels[I];return M?(M.ccMIDROW(E),this.logger.log(R.DEBUG,"MIDROW ("+y([g,E])+")"),!0):!1}return!1},x.parsePAC=function(g,E){var I,M=this.cmdHistory,F=(g>=17&&g<=23||g>=25&&g<=31)&&E>=64&&E<=127,w=(g===16||g===24)&&E>=64&&E<=95;if(!(F||w))return!1;if(v(g,E,M))return c(null,null,M),!0;var k=g<=23?1:2;E>=64&&E<=95?I=k===1?A[g]:p[g]:I=k===1?_[g]:L[g];var B=this.channels[k];return B?(B.setPAC(this.interpretPAC(I,E)),c(g,E,M),this.currentChannel=k,!0):!1},x.interpretPAC=function(g,E){var I,M={color:null,italics:!1,indent:null,underline:!1,row:g};return E>95?I=E-96:I=E-64,M.underline=(I&1)===1,I<=13?M.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(I/2)]:I<=15?(M.italics=!0,M.color="white"):M.indent=Math.floor((I-16)/2)*4,M},x.parseChars=function(g,E){var I,M=null,F=null;if(g>=25?(I=2,F=g-8):(I=1,F=g),F>=17&&F<=19){var w;F===17?w=E+80:F===18?w=E+112:w=E+144,this.logger.log(R.INFO,"Special char '"+u(w)+"' in channel "+I),M=[w]}else g>=32&&g<=127&&(M=E===0?[g]:[g,E]);if(M){var k=y(M);this.logger.log(R.DEBUG,"Char codes =  "+k.join(",")),c(g,E,this.cmdHistory)}return M},x.parseBackgroundAttributes=function(g,E){var I=(g===16||g===24)&&E>=32&&E<=47,M=(g===23||g===31)&&E>=45&&E<=47;if(!(I||M))return!1;var F,w={};g===16||g===24?(F=Math.floor((E-32)/2),w.background=O[F],E%2===1&&(w.background=w.background+"_semi")):E===45?w.background="transparent":(w.foreground="black",E===47&&(w.underline=!0));var k=g<=23?1:2,B=this.channels[k];return B.setBkgData(w),c(g,E,this.cmdHistory),!0},x.reset=function(){for(var g=0;g<Object.keys(this.channels).length;g++){var E=this.channels[g];E&&E.reset()}this.cmdHistory=P()},x.cueSplitAtTime=function(g){for(var E=0;E<this.channels.length;E++){var I=this.channels[E];I&&I.cueSplitAtTime(g)}},b}();function c(b,x,S){S.a=b,S.b=x}function v(b,x,S){return S.a===b&&S.b===x}function P(){return{a:null,b:null}}i.default=h},"./src/utils/codecs.ts":function(n,i,r){r.r(i),r.d(i,"isCodecType",function(){return o}),r.d(i,"isCodecSupportedInMp4",function(){return u});var s={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function o(D,C){var A=s[C];return!!A&&A[D.slice(0,4)]===!0}function u(D,C){return MediaSource.isTypeSupported((C||"video")+'/mp4;codecs="'+D+'"')}},"./src/utils/cues.ts":function(n,i,r){r.r(i);var s=r("./src/utils/vttparser.ts"),o=r("./src/utils/webvtt-parser.ts"),u=r("./src/utils/texttrack-utils.ts"),D=/\s/,C={newCue:function(_,p,L,O){for(var R=[],T,y,l,a,f,d=self.VTTCue||self.TextTrackCue,m=0;m<O.rows.length;m++)if(T=O.rows[m],l=!0,a=0,f="",!T.isEmpty()){for(var h=0;h<T.chars.length;h++)D.test(T.chars[h].uchar)&&l?a++:(f+=T.chars[h].uchar,l=!1);T.cueStartTime=p,p===L&&(L+=1e-4),a>=16?a--:a++;var c=Object(s.fixLineBreaks)(f.trim()),v=Object(o.generateCueId)(p,L,c);(!_||!_.cues||!_.cues.getCueById(v))&&(y=new d(p,L,c),y.id=v,y.line=m+1,y.align="left",y.position=10+Math.min(80,Math.floor(a*8/32)*10),R.push(y))}return _&&R.length&&(R.sort(function(P,b){return P.line==="auto"||b.line==="auto"?0:P.line>8&&b.line>8?b.line-P.line:P.line-b.line}),R.forEach(function(P){return Object(u.addCueToTrack)(_,P)})),R}};i.default=C},"./src/utils/discontinuities.ts":function(n,i,r){r.r(i),r.d(i,"findFirstFragWithCC",function(){return D}),r.d(i,"shouldAlignOnDiscontinuities",function(){return C}),r.d(i,"findDiscontinuousReferenceFrag",function(){return A}),r.d(i,"adjustSlidingStart",function(){return p}),r.d(i,"alignStream",function(){return L}),r.d(i,"alignPDT",function(){return R}),r.d(i,"alignFragmentByPDTDelta",function(){return T}),r.d(i,"alignMediaPlaylistByPDT",function(){return y});var s=r("./src/polyfills/number.ts"),o=r("./src/utils/logger.ts"),u=r("./src/controller/level-helper.ts");function D(l,a){for(var f=null,d=0,m=l.length;d<m;d++){var h=l[d];if(h&&h.cc===a){f=h;break}}return f}function C(l,a,f){return!!(a.details&&(f.endCC>f.startCC||l&&l.cc<f.startCC))}function A(l,a){var f=l.fragments,d=a.fragments;if(!d.length||!f.length){o.logger.log("No fragments to align");return}var m=D(f,d[0].cc);if(!m||m&&!m.startPTS){o.logger.log("No frag in previous level to align on");return}return m}function _(l,a){if(l){var f=l.start+a;l.start=l.startPTS=f,l.endPTS=f+l.duration}}function p(l,a){for(var f=a.fragments,d=0,m=f.length;d<m;d++)_(f[d],l);a.fragmentHint&&_(a.fragmentHint,l),a.alignedSliding=!0}function L(l,a,f){!a||(O(l,f,a),!f.alignedSliding&&a.details&&R(f,a.details),!f.alignedSliding&&a.details&&!f.skippedSegments&&Object(u.adjustSliding)(a.details,f))}function O(l,a,f){if(C(l,f,a)){var d=A(f.details,a);d&&Object(s.isFiniteNumber)(d.start)&&(o.logger.log("Adjusting PTS using last level due to CC increase within current level "+a.url),p(d.start,a))}}function R(l,a){if(!(!a.fragments.length||!l.hasProgramDateTime||!a.hasProgramDateTime)){var f=a.fragments[0].programDateTime,d=l.fragments[0].programDateTime,m=(d-f)/1e3+a.fragments[0].start;m&&Object(s.isFiniteNumber)(m)&&(o.logger.log("Adjusting PTS using programDateTime delta "+(d-f)+"ms, sliding:"+m.toFixed(3)+" "+l.url+" "),p(m,l))}}function T(l,a){var f=l.programDateTime;if(!!f){var d=(f-a)/1e3;l.start=l.startPTS=d,l.endPTS=d+l.duration}}function y(l,a){if(!(!a.fragments.length||!l.hasProgramDateTime||!a.hasProgramDateTime)){var f=a.fragments[0].programDateTime,d=a.fragments[0].start,m=f-d*1e3;l.fragments.forEach(function(h){T(h,m)}),l.fragmentHint&&T(l.fragmentHint,m),l.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":function(n,i,r){r.r(i);var s=r("./src/utils/ewma.ts"),o=function(){function u(C,A,_){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=_,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new s.default(C),this.fast_=new s.default(A)}var D=u.prototype;return D.update=function(A,_){var p=this.slow_,L=this.fast_;this.slow_.halfLife!==A&&(this.slow_=new s.default(A,p.getEstimate(),p.getTotalWeight())),this.fast_.halfLife!==_&&(this.fast_=new s.default(_,L.getEstimate(),L.getTotalWeight()))},D.sample=function(A,_){A=Math.max(A,this.minDelayMs_);var p=8*_,L=A/1e3,O=p/L;this.fast_.sample(L,O),this.slow_.sample(L,O)},D.canEstimate=function(){var A=this.fast_;return A&&A.getTotalWeight()>=this.minWeight_},D.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},D.destroy=function(){},u}();i.default=o},"./src/utils/ewma.ts":function(n,i,r){r.r(i);var s=function(){function o(D,C,A){C===void 0&&(C=0),A===void 0&&(A=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=D,this.alpha_=D?Math.exp(Math.log(.5)/D):0,this.estimate_=C,this.totalWeight_=A}var u=o.prototype;return u.sample=function(C,A){var _=Math.pow(this.alpha_,C);this.estimate_=A*(1-_)+_*this.estimate_,this.totalWeight_+=C},u.getTotalWeight=function(){return this.totalWeight_},u.getEstimate=function(){if(this.alpha_){var C=1-Math.pow(this.alpha_,this.totalWeight_);if(C)return this.estimate_/C}return this.estimate_},o}();i.default=s},"./src/utils/fetch-loader.ts":function(n,i,r){r.r(i),r.d(i,"fetchSupported",function(){return T});var s=r("./src/polyfills/number.ts"),o=r("./src/loader/load-stats.ts"),u=r("./src/demux/chunk-cache.ts");function D(d,m){d.prototype=Object.create(m.prototype),d.prototype.constructor=d,L(d,m)}function C(d){var m=typeof Map=="function"?new Map:void 0;return C=function(c){if(c===null||!p(c))return c;if(typeof c!="function")throw new TypeError("Super expression must either be null or a function");if(typeof m!="undefined"){if(m.has(c))return m.get(c);m.set(c,v)}function v(){return A(c,arguments,O(this).constructor)}return v.prototype=Object.create(c.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),L(v,c)},C(d)}function A(d,m,h){return _()?A=Reflect.construct.bind():A=function(v,P,b){var x=[null];x.push.apply(x,P);var S=Function.bind.apply(v,x),g=new S;return b&&L(g,b.prototype),g},A.apply(null,arguments)}function _(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p(d){return Function.toString.call(d).indexOf("[native code]")!==-1}function L(d,m){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,v){return c.__proto__=v,c},L(d,m)}function O(d){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},O(d)}function R(){return R=Object.assign?Object.assign.bind():function(d){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var c in h)Object.prototype.hasOwnProperty.call(h,c)&&(d[c]=h[c])}return d},R.apply(this,arguments)}function T(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var y=function(){function d(h){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=h.fetchSetup||a,this.controller=new self.AbortController,this.stats=new o.LoadStats}var m=d.prototype;return m.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},m.abortInternal=function(){var c=this.response;(!c||!c.ok)&&(this.stats.aborted=!0,this.controller.abort())},m.abort=function(){var c;this.abortInternal(),(c=this.callbacks)!==null&&c!==void 0&&c.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},m.load=function(c,v,P){var b=this,x=this.stats;if(x.loading.start)throw new Error("Loader can only be used once.");x.loading.start=self.performance.now();var S=l(c,this.controller.signal),g=P.onProgress,E=c.responseType==="arraybuffer",I=E?"byteLength":"length";this.context=c,this.config=v,this.callbacks=P,this.request=this.fetchSetup(c,S),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){b.abortInternal(),P.onTimeout(x,c,b.response)},v.timeout),self.fetch(this.request).then(function(M){if(b.response=b.loader=M,!M.ok){var F=M.status,w=M.statusText;throw new f(w||"fetch, bad network response",F,M)}return x.loading.first=Math.max(self.performance.now(),x.loading.start),x.total=parseInt(M.headers.get("Content-Length")||"0"),g&&Object(s.isFiniteNumber)(v.highWaterMark)?b.loadProgressively(M,x,c,v.highWaterMark,g):E?M.arrayBuffer():M.text()}).then(function(M){var F=b.response;self.clearTimeout(b.requestTimeout),x.loading.end=Math.max(self.performance.now(),x.loading.first),x.loaded=x.total=M[I];var w={url:F.url,data:M};g&&!Object(s.isFiniteNumber)(v.highWaterMark)&&g(x,c,M,F),P.onSuccess(w,x,c,F)}).catch(function(M){if(self.clearTimeout(b.requestTimeout),!x.aborted){var F=M&&M.code||0,w=M?M.message:null;P.onError({code:F,text:w},c,M?M.details:null)}})},m.getCacheAge=function(){var c=null;if(this.response){var v=this.response.headers.get("age");c=v?parseFloat(v):null}return c},m.loadProgressively=function(c,v,P,b,x){b===void 0&&(b=0);var S=new u.default,g=c.body.getReader(),E=function I(){return g.read().then(function(M){if(M.done)return S.dataLength&&x(v,P,S.flush(),c),Promise.resolve(new ArrayBuffer(0));var F=M.value,w=F.length;return v.loaded+=w,w<b||S.dataLength?(S.push(F),S.dataLength>=b&&x(v,P,S.flush(),c)):x(v,P,F,c),I()}).catch(function(){return Promise.reject()})};return E()},d}();function l(d,m){var h={method:"GET",mode:"cors",credentials:"same-origin",signal:m,headers:new self.Headers(R({},d.headers))};return d.rangeEnd&&h.headers.set("Range","bytes="+d.rangeStart+"-"+String(d.rangeEnd-1)),h}function a(d,m){return new self.Request(d.url,m)}var f=function(d){D(m,d);function m(h,c,v){var P;return P=d.call(this,h)||this,P.code=void 0,P.details=void 0,P.code=c,P.details=v,P}return m}(C(Error));i.default=y},"./src/utils/imsc1-ttml-parser.ts":function(n,i,r){r.r(i),r.d(i,"IMSC1_CODEC",function(){return p}),r.d(i,"parseIMSC1",function(){return T});var s=r("./src/utils/mp4-tools.ts"),o=r("./src/utils/vttparser.ts"),u=r("./src/utils/vttcue.ts"),D=r("./src/demux/id3.ts"),C=r("./src/utils/timescale-conversion.ts"),A=r("./src/utils/webvtt-parser.ts");function _(){return _=Object.assign?Object.assign.bind():function(b){for(var x=1;x<arguments.length;x++){var S=arguments[x];for(var g in S)Object.prototype.hasOwnProperty.call(S,g)&&(b[g]=S[g])}return b},_.apply(this,arguments)}var p="stpp.ttml.im1t",L=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,O=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,R={left:"start",center:"center",right:"end",start:"start",end:"end"};function T(b,x,S,g,E){var I=Object(s.findBox)(new Uint8Array(b),["mdat"]);if(I.length===0){E(new Error("Could not parse IMSC1 mdat"));return}var M=I.map(function(w){return Object(D.utf8ArrayToStr)(w)}),F=Object(C.toTimescaleFromScale)(x,1,S);try{M.forEach(function(w){return g(y(w,F))})}catch(w){E(w)}}function y(b,x){var S=new DOMParser,g=S.parseFromString(b,"text/xml"),E=g.getElementsByTagName("tt")[0];if(!E)throw new Error("Invalid ttml");var I={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},M=Object.keys(I).reduce(function(U,j){return U[j]=E.getAttribute("ttp:"+j)||I[j],U},{}),F=E.getAttribute("xml:space")!=="preserve",w=a(l(E,"styling","style")),k=a(l(E,"layout","region")),B=l(E,"body","[begin]");return[].map.call(B,function(U){var j=f(U,F);if(!j||!U.hasAttribute("begin"))return null;var H=c(U.getAttribute("begin"),M),N=c(U.getAttribute("dur"),M),G=c(U.getAttribute("end"),M);if(H===null)throw h(U);if(G===null){if(N===null)throw h(U);G=H+N}var $=new u.default(H-x,G-x,j);$.id=Object(A.generateCueId)($.startTime,$.endTime,$.text);var z=k[U.getAttribute("region")],ee=w[U.getAttribute("style")];$.position=10,$.size=80;var X=d(z,ee,w),te=X.textAlign;if(te){var se=R[te];se&&($.lineAlign=se),$.align=te}return _($,X),$}).filter(function(U){return U!==null})}function l(b,x,S){var g=b.getElementsByTagName(x)[0];return g?[].slice.call(g.querySelectorAll(S)):[]}function a(b){return b.reduce(function(x,S){var g=S.getAttribute("xml:id");return g&&(x[g]=S),x},{})}function f(b,x){return[].slice.call(b.childNodes).reduce(function(S,g,E){var I;return g.nodeName==="br"&&E?S+`
`:(I=g.childNodes)!==null&&I!==void 0&&I.length?f(g,x):x?S+g.textContent.trim().replace(/\s+/g," "):S+g.textContent},"")}function d(b,x,S){var g="http://www.w3.org/ns/ttml#styling",E=null,I=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],M=b!=null&&b.hasAttribute("style")?b.getAttribute("style"):null;return M&&S.hasOwnProperty(M)&&(E=S[M]),I.reduce(function(F,w){var k=m(x,g,w)||m(b,g,w)||m(E,g,w);return k&&(F[w]=k),F},{})}function m(b,x,S){return b&&b.hasAttributeNS(x,S)?b.getAttributeNS(x,S):null}function h(b){return new Error("Could not parse ttml timestamp "+b)}function c(b,x){if(!b)return null;var S=Object(o.parseTimeStamp)(b);return S===null&&(L.test(b)?S=v(b,x):O.test(b)&&(S=P(b,x))),S}function v(b,x){var S=L.exec(b),g=(S[4]|0)+(S[5]|0)/x.subFrameRate;return(S[1]|0)*3600+(S[2]|0)*60+(S[3]|0)+g/x.frameRate}function P(b,x){var S=O.exec(b),g=Number(S[1]),E=S[2];switch(E){case"h":return g*3600;case"m":return g*60;case"ms":return g*1e3;case"f":return g/x.frameRate;case"t":return g/x.tickRate}return g}},"./src/utils/logger.ts":function(n,i,r){r.r(i),r.d(i,"enableLogs",function(){return A}),r.d(i,"logger",function(){return _});var s=function(){},o={trace:s,debug:s,log:s,warn:s,info:s,error:s},u=o;function D(p){var L=self.console[p];return L?L.bind(self.console,"["+p+"] >"):s}function C(p){for(var L=arguments.length,O=new Array(L>1?L-1:0),R=1;R<L;R++)O[R-1]=arguments[R];O.forEach(function(T){u[T]=p[T]?p[T].bind(p):D(T)})}function A(p){if(self.console&&p===!0||typeof p=="object"){C(p,"debug","log","info","warn","error");try{u.log()}catch{u=o}}else u=o}var _=u},"./src/utils/mediakeys-helper.ts":function(n,i,r){r.r(i),r.d(i,"KeySystems",function(){return s}),r.d(i,"requestMediaKeySystemAccess",function(){return o});var s;(function(u){u.WIDEVINE="com.widevine.alpha",u.PLAYREADY="com.microsoft.playready"})(s||(s={}));var o=function(){return typeof self!="undefined"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}()},"./src/utils/mediasource-helper.ts":function(n,i,r){r.r(i),r.d(i,"getMediaSource",function(){return s});function s(){return self.MediaSource||self.WebKitMediaSource}},"./src/utils/mp4-tools.ts":function(n,i,r){r.r(i),r.d(i,"RemuxerTrackIdConfig",function(){return A}),r.d(i,"bin2str",function(){return _}),r.d(i,"readUint16",function(){return p}),r.d(i,"readUint32",function(){return L}),r.d(i,"readSint32",function(){return O}),r.d(i,"writeUint32",function(){return R}),r.d(i,"findBox",function(){return T}),r.d(i,"parseSegmentIndex",function(){return y}),r.d(i,"parseInitSegment",function(){return l}),r.d(i,"getStartDTS",function(){return a}),r.d(i,"getDuration",function(){return f}),r.d(i,"computeRawDurationFromSamples",function(){return d}),r.d(i,"offsetStartDTS",function(){return m}),r.d(i,"segmentValidRange",function(){return h}),r.d(i,"appendUint8Array",function(){return c}),r.d(i,"parseSamples",function(){return v}),r.d(i,"parseSEIMessageFromNALu",function(){return x}),r.d(i,"parseEmsg",function(){return g});var s=r("./src/utils/typed-array.ts"),o=r("./src/loader/fragment.ts"),u=r("./src/demux/id3.ts"),D=Math.pow(2,32)-1,C=[].push,A={video:1,audio:2,id3:3,text:4};function _(E){return String.fromCharCode.apply(null,E)}function p(E,I){var M=E[I]<<8|E[I+1];return M<0?65536+M:M}function L(E,I){var M=O(E,I);return M<0?4294967296+M:M}function O(E,I){return E[I]<<24|E[I+1]<<16|E[I+2]<<8|E[I+3]}function R(E,I,M){E[I]=M>>24,E[I+1]=M>>16&255,E[I+2]=M>>8&255,E[I+3]=M&255}function T(E,I){var M=[];if(!I.length)return M;for(var F=E.byteLength,w=0;w<F;){var k=L(E,w),B=_(E.subarray(w+4,w+8)),U=k>1?w+k:F;if(B===I[0])if(I.length===1)M.push(E.subarray(w+8,U));else{var j=T(E.subarray(w+8,U),I.slice(1));j.length&&C.apply(M,j)}w=U}return M}function y(E){var I=T(E,["moov"]),M=I[0],F=M?M.length:null,w=T(E,["sidx"]);if(!w||!w[0])return null;var k=[],B=w[0],U=B[0],j=8,H=L(B,j);j+=4;var N=0,G=0;U===0?j+=8:j+=16,j+=2;var $=B.length+G,z=p(B,j);j+=2;for(var ee=0;ee<z;ee++){var X=j,te=L(B,X);X+=4;var se=te&2147483647,K=(te&2147483648)>>>31;if(K===1)return console.warn("SIDX has hierarchical references (not supported)"),null;var W=L(B,X);X+=4,k.push({referenceSize:se,subsegmentDuration:W,info:{duration:W/H,start:$,end:$+se-1}}),$+=se,X+=4,j=X}return{earliestPresentationTime:N,timescale:H,version:U,referencesCount:z,references:k,moovEndOffset:F}}function l(E){for(var I=[],M=T(E,["moov","trak"]),F=0;F<M.length;F++){var w=M[F],k=T(w,["tkhd"])[0];if(k){var B=k[0],U=B===0?12:20,j=L(k,U),H=T(w,["mdia","mdhd"])[0];if(H){B=H[0],U=B===0?12:20;var N=L(H,U),G=T(w,["mdia","hdlr"])[0];if(G){var $=_(G.subarray(8,12)),z={soun:o.ElementaryStreamTypes.AUDIO,vide:o.ElementaryStreamTypes.VIDEO}[$];if(z){var ee=T(w,["mdia","minf","stbl","stsd"])[0],X=void 0;ee&&(X=_(ee.subarray(12,16))),I[j]={timescale:N,type:z},I[z]={timescale:N,id:j,codec:X}}}}}}var te=T(E,["moov","mvex","trex"]);return te.forEach(function(se){var K=L(se,4),W=I[K];W&&(W.default={duration:L(se,12),flags:L(se,20)})}),I}function a(E,I){return T(I,["moof","traf"]).reduce(function(M,F){var w=T(F,["tfdt"])[0],k=w[0],B=T(F,["tfhd"]).reduce(function(U,j){var H=L(j,4),N=E[H];if(N){var G=L(w,4);k===1&&(G*=Math.pow(2,32),G+=L(w,8));var $=N.timescale||9e4,z=G/$;if(isFinite(z)&&(U===null||z<U))return z}return U},null);return B!==null&&isFinite(B)&&(M===null||B<M)?B:M},null)||0}function f(E,I){for(var M=0,F=0,w=0,k=T(E,["moof","traf"]),B=0;B<k.length;B++){var U=k[B],j=T(U,["tfhd"])[0],H=L(j,4),N=I[H];if(!!N){var G=N.default,$=L(j,0)|(G==null?void 0:G.flags),z=G==null?void 0:G.duration;$&8&&($&2?z=L(j,12):z=L(j,8));for(var ee=N.timescale||9e4,X=T(U,["trun"]),te=0;te<X.length;te++){if(M=d(X[te]),!M&&z){var se=L(X[te],4);M=z*se}N.type===o.ElementaryStreamTypes.VIDEO?F+=M/ee:N.type===o.ElementaryStreamTypes.AUDIO&&(w+=M/ee)}}}if(F===0&&w===0){var K=y(E);if(K!=null&&K.references)return K.references.reduce(function(W,V){return W+V.info.duration||0},0)}return F||w}function d(E){var I=L(E,0),M=8;I&1&&(M+=4),I&4&&(M+=4);for(var F=0,w=L(E,4),k=0;k<w;k++){if(I&256){var B=L(E,M);F+=B,M+=4}I&512&&(M+=4),I&1024&&(M+=4),I&2048&&(M+=4)}return F}function m(E,I,M){T(I,["moof","traf"]).forEach(function(F){T(F,["tfhd"]).forEach(function(w){var k=L(w,4),B=E[k];if(!!B){var U=B.timescale||9e4;T(F,["tfdt"]).forEach(function(j){var H=j[0],N=L(j,4);if(H===0)N-=M*U,N=Math.max(N,0),R(j,4,N);else{N*=Math.pow(2,32),N+=L(j,8),N-=M*U,N=Math.max(N,0);var G=Math.floor(N/(D+1)),$=Math.floor(N%(D+1));R(j,4,G),R(j,8,$)}})}})})}function h(E){var I={valid:null,remainder:null},M=T(E,["moof"]);if(M){if(M.length<2)return I.remainder=E,I}else return I;var F=M[M.length-1];return I.valid=Object(s.sliceUint8)(E,0,F.byteOffset-8),I.remainder=Object(s.sliceUint8)(E,F.byteOffset-8),I}function c(E,I){var M=new Uint8Array(E.length+I.length);return M.set(E),M.set(I,E.length),M}function v(E,I){var M=[],F=I.samples,w=I.timescale,k=I.id,B=!1,U=T(F,["moof"]);return U.map(function(j){var H=j.byteOffset-8,N=T(j,["traf"]);N.map(function(G){var $=T(G,["tfdt"]).map(function(z){var ee=z[0],X=L(z,4);return ee===1&&(X*=Math.pow(2,32),X+=L(z,8)),X/w})[0];return $!==void 0&&(E=$),T(G,["tfhd"]).map(function(z){var ee=L(z,4),X=L(z,0)&16777215,te=(X&1)!==0,se=(X&2)!==0,K=(X&8)!==0,W=0,V=(X&16)!==0,Q=0,Y=(X&32)!==0,Z=8;ee===k&&(te&&(Z+=8),se&&(Z+=4),K&&(W=L(z,Z),Z+=4),V&&(Q=L(z,Z),Z+=4),Y&&(Z+=4),I.type==="video"&&(B=P(I.codec)),T(G,["trun"]).map(function(ne){var q=ne[0],re=L(ne,0)&16777215,J=(re&1)!==0,le=0,oe=(re&4)!==0,ue=(re&256)!==0,ce=0,me=(re&512)!==0,pe=0,ge=(re&1024)!==0,Ee=(re&2048)!==0,De=0,Ne=L(ne,4),Oe=8;J&&(le=L(ne,Oe),Oe+=4),oe&&(Oe+=4);for(var Ie=le+H,We=0;We<Ne;We++){if(ue?(ce=L(ne,Oe),Oe+=4):ce=W,me?(pe=L(ne,Oe),Oe+=4):pe=Q,ge&&(Oe+=4),Ee&&(q===0?De=L(ne,Oe):De=O(ne,Oe),Oe+=4),I.type===o.ElementaryStreamTypes.VIDEO)for(var Ae=0;Ae<pe;){var we=L(F,Ie);Ie+=4;var Ue=F[Ie]&31;if(b(B,Ue)){var Xe=F.subarray(Ie,Ie+we);x(Xe,E+De/w,M)}Ie+=we,Ae+=we+4}E+=ce/w}}))})})}),M}function P(E){if(!E)return!1;var I=E.indexOf("."),M=I<0?E:E.substring(0,I);return M==="hvc1"||M==="hev1"||M==="dvh1"||M==="dvhe"}function b(E,I){return E?I===39||I===40:I===6}function x(E,I,M){var F=S(E),w=0;w++;for(var k=0,B=0,U=!1,j=0;w<F.length;){k=0;do{if(w>=F.length)break;j=F[w++],k+=j}while(j===255);B=0;do{if(w>=F.length)break;j=F[w++],B+=j}while(j===255);var H=F.length-w;if(!U&&k===4&&w<F.length){U=!0;var N=F[w++];if(N===181){var G=p(F,w);if(w+=2,G===49){var $=L(F,w);if(w+=4,$===1195456820){var z=F[w++];if(z===3){var ee=F[w++],X=31&ee,te=64&ee,se=te?2+X*3:0,K=new Uint8Array(se);if(te){K[0]=ee;for(var W=1;W<se;W++)K[W]=F[w++]}M.push({type:z,payloadType:k,pts:I,bytes:K})}}}}}else if(k===5&&B<H){if(U=!0,B>16){for(var V=[],Q=0;Q<16;Q++){var Y=F[w++].toString(16);V.push(Y.length==1?"0"+Y:Y),(Q===3||Q===5||Q===7||Q===9)&&V.push("-")}for(var Z=B-16,ne=new Uint8Array(Z),q=0;q<Z;q++)ne[q]=F[w++];M.push({payloadType:k,pts:I,uuid:V.join(""),userData:Object(u.utf8ArrayToStr)(ne),userDataBytes:ne})}}else if(B<H)w+=B;else if(B>H)break}}function S(E){for(var I=E.byteLength,M=[],F=1;F<I-2;)E[F]===0&&E[F+1]===0&&E[F+2]===3?(M.push(F+2),F+=2):F++;if(M.length===0)return E;var w=I-M.length,k=new Uint8Array(w),B=0;for(F=0;F<w;B++,F++)B===M[0]&&(B++,M.shift()),k[F]=E[B];return k}function g(E){var I=E[0],M="",F="",w=0,k=0,B=0,U=0,j=0,H=0;if(I===0){for(;_(E.subarray(H,H+1))!=="\0";)M+=_(E.subarray(H,H+1)),H+=1;for(M+=_(E.subarray(H,H+1)),H+=1;_(E.subarray(H,H+1))!=="\0";)F+=_(E.subarray(H,H+1)),H+=1;F+=_(E.subarray(H,H+1)),H+=1,w=L(E,12),k=L(E,16),U=L(E,20),j=L(E,24),H=28}else if(I===1){H+=4,w=L(E,H),H+=4;var N=L(E,H);H+=4;var G=L(E,H);for(H+=4,B=Math.pow(2,32)*N+G,Number.isSafeInteger(B)||(B=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),U=L(E,H),H+=4,j=L(E,H),H+=4;_(E.subarray(H,H+1))!=="\0";)M+=_(E.subarray(H,H+1)),H+=1;for(M+=_(E.subarray(H,H+1)),H+=1;_(E.subarray(H,H+1))!=="\0";)F+=_(E.subarray(H,H+1)),H+=1;F+=_(E.subarray(H,H+1)),H+=1}var $=E.subarray(H,E.byteLength);return{schemeIdUri:M,value:F,timeScale:w,presentationTime:B,presentationTimeDelta:k,eventDuration:U,id:j,payload:$}}},"./src/utils/output-filter.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return s});var s=function(){function o(D,C){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=D,this.trackName=C}var u=o.prototype;return u.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},u.newCue=function(C,A,_){(this.startTime===null||this.startTime>C)&&(this.startTime=C),this.endTime=A,this.screen=_,this.timelineController.createCaptionsTrack(this.trackName)},u.reset=function(){this.cueRanges=[],this.startTime=null},o}()},"./src/utils/texttrack-utils.ts":function(n,i,r){r.r(i),r.d(i,"sendAddTrackEvent",function(){return o}),r.d(i,"addCueToTrack",function(){return u}),r.d(i,"clearCurrentCues",function(){return D}),r.d(i,"removeCuesInRange",function(){return C}),r.d(i,"getCuesInRange",function(){return _});var s=r("./src/utils/logger.ts");function o(p,L){var O;try{O=new Event("addtrack")}catch{O=document.createEvent("Event"),O.initEvent("addtrack",!1,!1)}O.track=p,L.dispatchEvent(O)}function u(p,L){var O=p.mode;if(O==="disabled"&&(p.mode="hidden"),p.cues&&!p.cues.getCueById(L.id))try{if(p.addCue(L),!p.cues.getCueById(L.id))throw new Error("addCue is failed for: "+L)}catch(T){s.logger.debug("[texttrack-utils]: "+T);var R=new self.TextTrackCue(L.startTime,L.endTime,L.text);R.id=L.id,p.addCue(R)}O==="disabled"&&(p.mode=O)}function D(p){var L=p.mode;if(L==="disabled"&&(p.mode="hidden"),p.cues)for(var O=p.cues.length;O--;)p.removeCue(p.cues[O]);L==="disabled"&&(p.mode=L)}function C(p,L,O,R){var T=p.mode;if(T==="disabled"&&(p.mode="hidden"),p.cues&&p.cues.length>0)for(var y=_(p.cues,L,O),l=0;l<y.length;l++)(!R||R(y[l]))&&p.removeCue(y[l]);T==="disabled"&&(p.mode=T)}function A(p,L){if(L<p[0].startTime)return 0;var O=p.length-1;if(L>p[O].endTime)return-1;for(var R=0,T=O;R<=T;){var y=Math.floor((T+R)/2);if(L<p[y].startTime)T=y-1;else if(L>p[y].startTime&&R<O)R=y+1;else return y}return p[R].startTime-L<L-p[T].startTime?R:T}function _(p,L,O){var R=[],T=A(p,L);if(T>-1)for(var y=T,l=p.length;y<l;y++){var a=p[y];if(a.startTime>=L&&a.endTime<=O)R.push(a);else if(a.startTime>O)return R}return R}},"./src/utils/time-ranges.ts":function(n,i,r){r.r(i);var s={toString:function(u){for(var D="",C=u.length,A=0;A<C;A++)D+="["+u.start(A).toFixed(3)+","+u.end(A).toFixed(3)+"]";return D}};i.default=s},"./src/utils/timescale-conversion.ts":function(n,i,r){r.r(i),r.d(i,"toTimescaleFromBase",function(){return o}),r.d(i,"toTimescaleFromScale",function(){return u}),r.d(i,"toMsFromMpegTsClock",function(){return D}),r.d(i,"toMpegTsClockFromTimescale",function(){return C});var s=9e4;function o(A,_,p,L){p===void 0&&(p=1),L===void 0&&(L=!1);var O=A*_*p;return L?Math.round(O):O}function u(A,_,p,L){return p===void 0&&(p=1),L===void 0&&(L=!1),o(A,_,1/p,L)}function D(A,_){return _===void 0&&(_=!1),o(A,1e3,1/s,_)}function C(A,_){return _===void 0&&(_=1),o(A,s,1/_)}},"./src/utils/typed-array.ts":function(n,i,r){r.r(i),r.d(i,"sliceUint8",function(){return s});function s(o,u,D){return Uint8Array.prototype.slice?o.slice(u,D):new Uint8Array(Array.prototype.slice.call(o,u,D))}},"./src/utils/vttcue.ts":function(n,i,r){r.r(i),i.default=function(){if(typeof self!="undefined"&&self.VTTCue)return self.VTTCue;var s=["","lr","rl"],o=["start","middle","end","left","right"];function u(p,L){if(typeof L!="string"||!Array.isArray(p))return!1;var O=L.toLowerCase();return~p.indexOf(O)?O:!1}function D(p){return u(s,p)}function C(p){return u(o,p)}function A(p){for(var L=arguments.length,O=new Array(L>1?L-1:0),R=1;R<L;R++)O[R-1]=arguments[R];for(var T=1;T<arguments.length;T++){var y=arguments[T];for(var l in y)p[l]=y[l]}return p}function _(p,L,O){var R=this,T={enumerable:!0};R.hasBeenReset=!1;var y="",l=!1,a=p,f=L,d=O,m=null,h="",c=!0,v="auto",P="start",b=50,x="middle",S=50,g="middle";Object.defineProperty(R,"id",A({},T,{get:function(){return y},set:function(I){y=""+I}})),Object.defineProperty(R,"pauseOnExit",A({},T,{get:function(){return l},set:function(I){l=!!I}})),Object.defineProperty(R,"startTime",A({},T,{get:function(){return a},set:function(I){if(typeof I!="number")throw new TypeError("Start time must be set to a number.");a=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"endTime",A({},T,{get:function(){return f},set:function(I){if(typeof I!="number")throw new TypeError("End time must be set to a number.");f=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"text",A({},T,{get:function(){return d},set:function(I){d=""+I,this.hasBeenReset=!0}})),Object.defineProperty(R,"region",A({},T,{get:function(){return m},set:function(I){m=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"vertical",A({},T,{get:function(){return h},set:function(I){var M=D(I);if(M===!1)throw new SyntaxError("An invalid or illegal string was specified.");h=M,this.hasBeenReset=!0}})),Object.defineProperty(R,"snapToLines",A({},T,{get:function(){return c},set:function(I){c=!!I,this.hasBeenReset=!0}})),Object.defineProperty(R,"line",A({},T,{get:function(){return v},set:function(I){if(typeof I!="number"&&I!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");v=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"lineAlign",A({},T,{get:function(){return P},set:function(I){var M=C(I);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");P=M,this.hasBeenReset=!0}})),Object.defineProperty(R,"position",A({},T,{get:function(){return b},set:function(I){if(I<0||I>100)throw new Error("Position must be between 0 and 100.");b=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"positionAlign",A({},T,{get:function(){return x},set:function(I){var M=C(I);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");x=M,this.hasBeenReset=!0}})),Object.defineProperty(R,"size",A({},T,{get:function(){return S},set:function(I){if(I<0||I>100)throw new Error("Size must be between 0 and 100.");S=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"align",A({},T,{get:function(){return g},set:function(I){var M=C(I);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");g=M,this.hasBeenReset=!0}})),R.displayState=void 0}return _.prototype.getCueAsHTML=function(){var p=self.WebVTT;return p.convertCueToDOMTree(self,this.text)},_}()},"./src/utils/vttparser.ts":function(n,i,r){r.r(i),r.d(i,"parseTimeStamp",function(){return u}),r.d(i,"fixLineBreaks",function(){return L}),r.d(i,"VTTParser",function(){return O});var s=r("./src/utils/vttcue.ts"),o=function(){function R(){}var T=R.prototype;return T.decode=function(l,a){if(!l)return"";if(typeof l!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(l))},R}();function u(R){function T(l,a,f,d){return(l|0)*3600+(a|0)*60+(f|0)+parseFloat(d||0)}var y=R.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return y?parseFloat(y[2])>59?T(y[2],y[3],0,y[4]):T(y[1],y[2],y[3],y[4]):null}var D=function(){function R(){this.values=Object.create(null)}var T=R.prototype;return T.set=function(l,a){!this.get(l)&&a!==""&&(this.values[l]=a)},T.get=function(l,a,f){return f?this.has(l)?this.values[l]:a[f]:this.has(l)?this.values[l]:a},T.has=function(l){return l in this.values},T.alt=function(l,a,f){for(var d=0;d<f.length;++d)if(a===f[d]){this.set(l,a);break}},T.integer=function(l,a){/^-?\d+$/.test(a)&&this.set(l,parseInt(a,10))},T.percent=function(l,a){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(a)){var f=parseFloat(a);if(f>=0&&f<=100)return this.set(l,f),!0}return!1},R}();function C(R,T,y,l){var a=l?R.split(l):[R];for(var f in a)if(typeof a[f]=="string"){var d=a[f].split(y);if(d.length===2){var m=d[0],h=d[1];T(m,h)}}}var A=new s.default(0,0,""),_=A.align==="middle"?"middle":"center";function p(R,T,y){var l=R;function a(){var m=u(R);if(m===null)throw new Error("Malformed timestamp: "+l);return R=R.replace(/^[^\sa-zA-Z-]+/,""),m}function f(m,h){var c=new D;C(m,function(b,x){var S;switch(b){case"region":for(var g=y.length-1;g>=0;g--)if(y[g].id===x){c.set(b,y[g].region);break}break;case"vertical":c.alt(b,x,["rl","lr"]);break;case"line":S=x.split(","),c.integer(b,S[0]),c.percent(b,S[0])&&c.set("snapToLines",!1),c.alt(b,S[0],["auto"]),S.length===2&&c.alt("lineAlign",S[1],["start",_,"end"]);break;case"position":S=x.split(","),c.percent(b,S[0]),S.length===2&&c.alt("positionAlign",S[1],["start",_,"end","line-left","line-right","auto"]);break;case"size":c.percent(b,x);break;case"align":c.alt(b,x,["start",_,"end","left","right"]);break}},/:/,/\s/),h.region=c.get("region",null),h.vertical=c.get("vertical","");var v=c.get("line","auto");v==="auto"&&A.line===-1&&(v=-1),h.line=v,h.lineAlign=c.get("lineAlign","start"),h.snapToLines=c.get("snapToLines",!0),h.size=c.get("size",100),h.align=c.get("align",_);var P=c.get("position","auto");P==="auto"&&A.position===50&&(P=h.align==="start"||h.align==="left"?0:h.align==="end"||h.align==="right"?100:50),h.position=P}function d(){R=R.replace(/^\s+/,"")}if(d(),T.startTime=a(),d(),R.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+l);R=R.slice(3),d(),T.endTime=a(),d(),f(R,T)}function L(R){return R.replace(/<br(?: \/)?>/gi,`
`)}var O=function(){function R(){this.state="INITIAL",this.buffer="",this.decoder=new o,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var T=R.prototype;return T.parse=function(l){var a=this;l&&(a.buffer+=a.decoder.decode(l,{stream:!0}));function f(){var P=a.buffer,b=0;for(P=L(P);b<P.length&&P[b]!=="\r"&&P[b]!==`
`;)++b;var x=P.slice(0,b);return P[b]==="\r"&&++b,P[b]===`
`&&++b,a.buffer=P.slice(b),x}function d(P){C(P,function(b,x){},/:/)}try{var m="";if(a.state==="INITIAL"){if(!/\r\n|\n/.test(a.buffer))return this;m=f();var h=m.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!h||!h[0])throw new Error("Malformed WebVTT signature.");a.state="HEADER"}for(var c=!1;a.buffer;){if(!/\r\n|\n/.test(a.buffer))return this;switch(c?c=!1:m=f(),a.state){case"HEADER":/:/.test(m)?d(m):m||(a.state="ID");continue;case"NOTE":m||(a.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(m)){a.state="NOTE";break}if(!m)continue;if(a.cue=new s.default(0,0,""),a.state="CUE",m.indexOf("-->")===-1){a.cue.id=m;continue}case"CUE":if(!a.cue){a.state="BADCUE";continue}try{p(m,a.cue,a.regionList)}catch{a.cue=null,a.state="BADCUE";continue}a.state="CUETEXT";continue;case"CUETEXT":{var v=m.indexOf("-->")!==-1;if(!m||v&&(c=!0)){a.oncue&&a.cue&&a.oncue(a.cue),a.cue=null,a.state="ID";continue}if(a.cue===null)continue;a.cue.text&&(a.cue.text+=`
`),a.cue.text+=m}continue;case"BADCUE":m||(a.state="ID")}}}catch{a.state==="CUETEXT"&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state=a.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},T.flush=function(){var l=this;try{if((l.cue||l.state==="HEADER")&&(l.buffer+=`

`,l.parse()),l.state==="INITIAL"||l.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(a){l.onparsingerror&&l.onparsingerror(a)}return l.onflush&&l.onflush(),this},R}()},"./src/utils/webvtt-parser.ts":function(n,i,r){r.r(i),r.d(i,"generateCueId",function(){return O}),r.d(i,"parseWebVTT",function(){return T});var s=r("./src/polyfills/number.ts"),o=r("./src/utils/vttparser.ts"),u=r("./src/demux/id3.ts"),D=r("./src/utils/timescale-conversion.ts"),C=r("./src/remux/mp4-remuxer.ts"),A=/\r\n|\n\r|\n|\r/g,_=function(l,a,f){return f===void 0&&(f=0),l.slice(f,f+a.length)===a},p=function(l){var a=parseInt(l.slice(-3)),f=parseInt(l.slice(-6,-4)),d=parseInt(l.slice(-9,-7)),m=l.length>9?parseInt(l.substring(0,l.indexOf(":"))):0;if(!Object(s.isFiniteNumber)(a)||!Object(s.isFiniteNumber)(f)||!Object(s.isFiniteNumber)(d)||!Object(s.isFiniteNumber)(m))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+l);return a+=1e3*f,a+=60*1e3*d,a+=60*60*1e3*m,a},L=function(l){for(var a=5381,f=l.length;f;)a=a*33^l.charCodeAt(--f);return(a>>>0).toString()};function O(y,l,a){return L(y.toString())+L(l.toString())+L(a)}var R=function(l,a,f){var d=l[a],m=l[d.prevCC];if(!m||!m.new&&d.new){l.ccOffset=l.presentationOffset=d.start,d.new=!1;return}for(;(h=m)!==null&&h!==void 0&&h.new;){var h;l.ccOffset+=d.start-m.start,d.new=!1,d=m,m=l[d.prevCC]}l.presentationOffset=f};function T(y,l,a,f,d,m,h,c){var v=new o.VTTParser,P=Object(u.utf8ArrayToStr)(new Uint8Array(y)).trim().replace(A,`
`).split(`
`),b=[],x=Object(D.toMpegTsClockFromTimescale)(l,a),S="00:00.000",g=0,E=0,I,M=!0;v.oncue=function(F){var w=f[d],k=f.ccOffset,B=(g-x)/9e4;w!=null&&w.new&&(E!==void 0?k=f.ccOffset=w.start:R(f,d,B)),B&&(k=B-f.presentationOffset);var U=F.endTime-F.startTime,j=Object(C.normalizePts)((F.startTime+k-E)*9e4,m*9e4)/9e4;F.startTime=Math.max(j,0),F.endTime=Math.max(j+U,0);var H=F.text.trim();F.text=decodeURIComponent(encodeURIComponent(H)),F.id||(F.id=O(F.startTime,F.endTime,H)),F.endTime>0&&b.push(F)},v.onparsingerror=function(F){I=F},v.onflush=function(){if(I){c(I);return}h(b)},P.forEach(function(F){if(M)if(_(F,"X-TIMESTAMP-MAP=")){M=!1,F.slice(16).split(",").forEach(function(w){_(w,"LOCAL:")?S=w.slice(6):_(w,"MPEGTS:")&&(g=parseInt(w.slice(7)))});try{E=p(S)/1e3}catch(w){I=w}return}else F===""&&(M=!1);v.parse(F+`
`)}),v.flush()}},"./src/utils/xhr-loader.ts":function(n,i,r){r.r(i);var s=r("./src/utils/logger.ts"),o=r("./src/loader/load-stats.ts"),u=/^age:\s*[\d.]+\s*$/m,D=function(){function C(_){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=_?_.xhrSetup:null,this.stats=new o.LoadStats,this.retryDelay=0}var A=C.prototype;return A.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},A.abortInternal=function(){var p=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),p&&(p.onreadystatechange=null,p.onprogress=null,p.readyState!==4&&(this.stats.aborted=!0,p.abort()))},A.abort=function(){var p;this.abortInternal(),(p=this.callbacks)!==null&&p!==void 0&&p.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},A.load=function(p,L,O){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=p,this.config=L,this.callbacks=O,this.retryDelay=L.retryDelay,this.loadInternal()},A.loadInternal=function(){var p=this.config,L=this.context;if(!!p){var O=this.loader=new self.XMLHttpRequest,R=this.stats;R.loading.first=0,R.loaded=0;var T=this.xhrSetup;try{if(T)try{T(O,L.url)}catch{O.open("GET",L.url,!0),T(O,L.url)}O.readyState||O.open("GET",L.url,!0);var y=this.context.headers;if(y)for(var l in y)O.setRequestHeader(l,y[l])}catch(a){this.callbacks.onError({code:O.status,text:a.message},L,O);return}L.rangeEnd&&O.setRequestHeader("Range","bytes="+L.rangeStart+"-"+(L.rangeEnd-1)),O.onreadystatechange=this.readystatechange.bind(this),O.onprogress=this.loadprogress.bind(this),O.responseType=L.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),p.timeout),O.send()}},A.readystatechange=function(){var p=this.context,L=this.loader,O=this.stats;if(!(!p||!L)){var R=L.readyState,T=this.config;if(!O.aborted&&R>=2)if(self.clearTimeout(this.requestTimeout),O.loading.first===0&&(O.loading.first=Math.max(self.performance.now(),O.loading.start)),R===4){L.onreadystatechange=null,L.onprogress=null;var y=L.status;if(y>=200&&y<300){O.loading.end=Math.max(self.performance.now(),O.loading.first);var l,a;if(p.responseType==="arraybuffer"?(l=L.response,a=l.byteLength):(l=L.responseText,a=l.length),O.loaded=O.total=a,!this.callbacks)return;var f=this.callbacks.onProgress;if(f&&f(O,p,l,L),!this.callbacks)return;var d={url:L.responseURL,data:l};this.callbacks.onSuccess(d,O,p,L)}else O.retry>=T.maxRetry||y>=400&&y<499?(s.logger.error(y+" while loading "+p.url),this.callbacks.onError({code:y,text:L.statusText},p,L)):(s.logger.warn(y+" while loading "+p.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,T.maxRetryDelay),O.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),T.timeout)}},A.loadtimeout=function(){s.logger.warn("timeout while loading "+this.context.url);var p=this.callbacks;p&&(this.abortInternal(),p.onTimeout(this.stats,this.context,this.loader))},A.loadprogress=function(p){var L=this.stats;L.loaded=p.loaded,p.lengthComputable&&(L.total=p.total)},A.getCacheAge=function(){var p=null;if(this.loader&&u.test(this.loader.getAllResponseHeaders())){var L=this.loader.getResponseHeader("age");p=L?parseFloat(L):null}return p},C}();i.default=D}}).default})})(yu);var en=xp(yu.exports);const Sp={name:"mew-vid-codec",mounted(){this.init().load(this.src)},beforeUnmount(){this.wipe()},data(){return{codec:null}},props:{raw:{type:Boolean,default:!1},src:{type:String,default:""}},watch:{src(e){this.wipe(),this.init().load(e)}},methods:{init(){return this.codec=this.src.includes(".m3u8")?new en:null,{load:this.load}},load(e){this.codec?this.bind(e):!this.raw&&!this.$global.mobile?this.blob(e):this.$el.getElementsByTagName("video")[0].src=e},blob(e){fetch(e).then(t=>t.blob()).then(t=>{this.$el.getElementsByTagName("video")[0].src=URL.createObjectURL(t)})},bind(e){this.codec.attachMedia(this.$el.getElementsByTagName("video")[0]),this.codec.on(en.Events.MEDIA_ATTACHED,()=>{this.codec.loadSource(e)}),this.codec.on(en.Events.ERROR,function(t,n){if(n.fatal)switch(alert("Video is not available now! We are testing and fixing this kind of problem, we are very sorry about this!"),n.type){case en.ErrorTypes.NETWORK_ERROR:console.log("Hls.ErrorTypes.NETWORK_ERROR"),this.codec.startLoad();break;case en.ErrorTypes.MEDIA_ERROR:this.codec.recoverMediaError();break;default:this.codec.destroy();break}})},wipe(){URL.revokeObjectURL(this.$el.src),this.codec&&this.codec.destroy()}}},_p={name:"mew-vid",components:{mxvideo:Pg,control:Tp},emits:["load","play","pause","playing","wait","end"],mixins:[Sp],data(){return{el:null,time:0,rate:"1.0",loop:!0,buffered:0,duration:0,playing:!1,loading:!1,volume:.6,cinematic:!1}},props:{poster:{type:String,default:""},autoplay:{type:Boolean,default:!1},rates:{type:Array,default:["0.2","0.5","1.0","1.5","2.0"]},info:{type:String,default:""}},provide(){return{v:this}}},Ap={class:"mew-vid",relative:"",noselect:"",style:{"background-color":"black!important"}};function bp(e,t,n,i,r,s){const o=Ce("mxvideo"),u=Ce("control");return ae(),fe("div",Ap,[he(o),he(u)])}var Lp=xe(_p,[["render",bp]]);const Dp={name:"mew-fit",mounted(){this.init()},updated(){this.init()},props:{contain:{type:Boolean,default:!1}},methods:{init(){let e=this.$el.children;if(e.length===0){console.log("%cMEW : %s","font-family:Arial;color: black; background: #b20000; font-size: 13px;padding: 1px 7px;border-radius:2px","No element was fund in <fit> component !");return}if(e.length>1){console.log("%cMEW : %s","font-family:Arial;color: black; background: #b20000; font-size: 13px;padding: 1px 7px;border-radius:2px","More than one elements were fund in <fit> component, this component can only hold one element.");return}e[0].classList.add("mew-fit-item")}}};function Op(e,t,n,i,r,s){return ae(),fe("div",{class:_e(["mew-fit",{contain:n.contain}])},[Qt(e.$slots,"default")],2)}var Cp=xe(Dp,[["render",Op]]);const Rp={name:"flex",mounted(){this.ob=new ResizeObserver(e=>{this.init()}),this.ob.observe(this.$el)},beforeUnmount(){this.ob.disconnect()},data(){return{ob:null,visible:!1}},methods:{init(){let e=this.$refs.container.children;if(e.length===0)return;let t,n,i,r;t=this.$el.offsetWidth,n=e[0].offsetWidth,i=e.length,r=n*i;for(let s=0;s<i;s++)if(e[s].offsetWidth!==n){console.log("%cMEW : %s","font-family:Arial;color: black; background: #b20000; font-size: 13px;padding: 1px 7px;border-radius:2px","Child elements within a Flex component have inconsistent sizes !");return}t>r?this.$refs.container.style.width=r+"px":(i=parseInt(t/n),this.$refs.container.style.width=n*i+"px"),this.visible=!0}}},Pp={class:"mew-flex",flex:"",jc:""};function Ip(e,t,n,i,r,s){return ae(),fe("div",Pp,[ie("div",{ref:"container",class:_e(["mew-flex-container",{visible:r.visible}]),flex:"",wrap:""},[Qt(e.$slots,"default")],2)])}var Mp=xe(Rp,[["render",Ip]]);const Fp={name:"mew-field-dropList",inject:["field"]},wp={class:"mew-field-dropList"};function Bp(e,t,n,i,r,s){return jt((ae(),fe("div",wp,[Qt(e.$slots,"default")],512)),[[fr,s.field.selecting.target===s.field]])}var kp=xe(Fp,[["render",Bp]]);const Up={name:"mew-field-label",inject:["field"],mounted(){let e=getComputedStyle(this.$el);parseInt(e.height)===0&&(this.$el.style="height: 100%;width: 100%;left: 0;top: 0;");let t=getComputedStyle(this.field.$el);this.nudgeUp=t.boxShadow!=="none"&&t.borderTopWidth==="0px"||this.field.$attrs.hasOwnProperty("bg");let n=Math.floor(parseInt(t.fontSize)/5-3),i=n<0?.75:.75-n*.08;i<.4&&(i=.4),this.$el.style.setProperty("--scale",i),this.labelWidth=this.$el.getElementsByClassName("shot")[0].offsetWidth,this.labelHeight=this.field.$el.offsetHeight},data(){return{nudgeUp:!1,labelWidth:"",labelHeight:""}},watch:{labelWidth(e){this.$el.style.setProperty("--labelWidth",e+"px")},labelHeight(e){this.$el.style.setProperty("--labelHeight",e+"px")},"field.label":function(e){this.$nextTick(()=>{this.labelWidth=this.$el.getElementsByClassName("shot")[0].offsetWidth})}},computed:{shrink(){return this.field.focus||this.field.modelValue||this.field.placeholder}}},Np=ie("i",{class:"rim_1"},null,-1),Kp=ie("i",{class:"rim_2"},null,-1),jp=ie("i",{class:"rim_3"},null,-1),Wp={class:"shot"};function Hp(e,t,n,i,r,s){return ae(),fe("div",{class:_e(["mew-field-label",{shrink:s.shrink,activated:s.field.activated,noborder:s.field.select}])},[Np,Kp,jp,ie("div",Wp,Le(s.field.label),1),ie("label",{class:_e({nudgeUp:s.field.select||r.nudgeUp})},Le(s.field.label),3)],2)}var Gp=xe(Up,[["render",Hp]]);const $p={name:"mew-field-input",inject:["field"],components:{dropList:kp,labelTag:Gp},data(){return{snapshot:""}},methods:{input(e){this.field.error&&(this.field.error=""),this.field.$emit("update:modelValue",this.field.number?Number(e.target.value):e.target.value)},validate(){this.field.error="",this.$nextTick(()=>{if(this.field.require&&this.field.modelValue.trim()===""&&this.error("\u5FC5\u586B"),this.field.username){let e="[`~!@#$^&*()=|{}':;',\\[\\].<>/?~\uFF01@#\uFFE5\u2026\u2026&*\uFF08\uFF09\u2014\u2014|{}\u3010\u3011\u2018\uFF1B\uFF1A\u201D\u201C'\u3002\uFF0C\u3001\uFF1F]";new RegExp(e).test(this.value)&&this.error("\u7279\u6B8A\u5B57\u7B26\u4E0D\u53EF\u7528")}if(this.field.email){let e="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$";new RegExp(e).test(this.value)||this.error("\u90AE\u7BB1\u4E0D\u53EF\u7528")}this.field.min&&this.value.length<this.field.min&&this.error("\u81F3\u5C11 "+this.field.min+" \u4E2A\u5B57\u7B26"),this.field.max&&this.value.length>this.field.max&&this.error("\u6700\u591A "+this.field.max+" \u4E2A\u5B57\u7B26"),this.field.validate&&this.error(this.field.validate(this.value))})},checkEmpty(){this.field.error||this.field.require&&this.field.modelValue.trim()===""&&(this.field.error="error",this.error("\u5FC5\u586B"))},error(e){e&&(this.snapshot=this.field.modelValue,this.field.$emit("update:modelValue",!1),this.field.error="error",this.field.$el.style.setProperty("--errorMessage",`'${e}'`))},focus(){this.field.focus=!0,this.field.$emit("focus")},blur(){this.field.focus=!1,this.field.$emit("blur"),this.checkEmpty()}},computed:{readonly(){return this.field.select&&!this.field.text},value(){return this.field.error?this.snapshot:this.field.modelValue}}},Vp={class:"mew-field-input"},zp=["placeholder","value","type","readonly"],Yp=["placeholder","value","readonly"];function Xp(e,t,n,i,r,s){const o=Ce("drop-list"),u=Ce("label-tag");return ae(),fe(Re,null,[ie("div",Vp,[s.field.area?(ae(),fe("textarea",{key:1,fill:"",noresize:"",cols:"30",rows:"3",class:_e({jc:s.field.jc,je:s.field.je}),placeholder:s.field.placeholder,value:s.value,readonly:s.readonly,onFocus:t[4]||(t[4]=(...D)=>s.focus&&s.focus(...D)),onBlur:t[5]||(t[5]=(...D)=>s.blur&&s.blur(...D)),onChange:t[6]||(t[6]=D=>{s.field.$emit("change"),s.validate()}),onInput:t[7]||(t[7]=(...D)=>s.input&&s.input(...D))},null,42,Yp)):(ae(),fe("input",{key:0,fill:"",class:_e({jc:s.field.jc,je:s.field.je}),placeholder:s.field.placeholder,value:s.value,type:s.field.type,readonly:s.readonly,onFocus:t[0]||(t[0]=(...D)=>s.focus&&s.focus(...D)),onBlur:t[1]||(t[1]=(...D)=>s.blur&&s.blur(...D)),onChange:t[2]||(t[2]=D=>{s.field.$emit("change"),s.validate()}),onInput:t[3]||(t[3]=(...D)=>s.input&&s.input(...D))},null,42,zp))]),s.field.select?(ae(),Ze(o,{key:0},{default:rt(()=>[Qt(e.$slots,"default")]),_:3})):ke("",!0),s.field.label?(ae(),Ze(u,{key:1})):ke("",!0)],64)}var Qp=xe($p,[["render",Xp]]);const Zp={name:"mew-field-check",inject:["field"],created(){this.slotted=this.$slots.default()[0].children.length>0,this.bg=this.field.$attrs.hasOwnProperty("bg")},data(){return{slotted:!1,bg:!1}},computed:{checked(){return this.field.value==="mew-default"?this.field.modelValue:this.field.modelValue===this.field.value}}},Jp={class:"mew-field-check"},qp={key:0,class:"mew-check-slot"},e0=ie("i",null,null,-1),t0=[e0],r0={key:2,class:"label"};function n0(e,t,n,i,r,s){return ae(),fe("div",Jp,[r.slotted?(ae(),fe("div",qp,[Qt(e.$slots,"default")])):(ae(),fe("div",{key:1,class:_e(["mew-check-mark",{checked:s.checked,bg:r.bg}])},t0,2)),s.field.label?(ae(),fe("div",r0,Le(s.field.label),1)):ke("",!0)])}var i0=xe(Zp,[["render",n0]]);const s0={name:"mew-field-inits",components:{Input:Qp,Check:i0},props:{value:{type:[String,Number],default:"mew-default"},text:{type:Boolean,default:!1},area:{type:Boolean,default:!1},check:{type:Boolean,default:!1},select:{type:Boolean,default:!1},placeholder:{type:String,default:""},label:{type:[String,Number],default:""},jc:{type:Boolean,default:!1},je:{type:Boolean,default:!1}},computed:{component(){return this.check&&!this.select?"Check":"Input"},snap(){let e=["bb","bb-xs","bb-sm","bb-md","bb-lg","bb-xl"],t=!1;for(let n=0;n<e.length;n++)if(this.$.attrs.hasOwnProperty(e[n])){t=!0;break}return t},mode(){let e=this.area?" area":"",t=this.invalid||this.disabled?" vain":"",n=this.snap?" snap":"",i=this.label?" hint":"",r=this.check?" check":"",s=this.select?" select":"";return e+t+n+i+r+s},checked(){return this.check&&(this.modelValue===!0||this.value!=="default"&&this.modelValue===this.value)?"checked":""},picking(){return this.selecting.target===this?"selecting":""}}},a0={name:"mew-field-types",props:{password:{type:Boolean,default:!1},number:{type:Boolean,default:!1},date:{type:Boolean,default:!1},time:{type:Boolean,default:!1},file:{type:Boolean,default:!1}},computed:{type(){let e={password:this.password,number:this.number,date:this.date,time:this.time,file:this.file};for(let t in e)if(e[t])return t}}},o0={name:"mew-validate",props:{disabled:{type:Boolean,default:!1},invalid:{type:Boolean,default:!1},require:{type:Boolean,default:!1},username:{type:Boolean,default:!1},email:{type:Boolean,default:!1},min:{type:[String,Number],default:""},max:{type:[String,Number],default:""},validate:{type:Function,default:null}},mounted(){}};const l0={name:"mew-field",emits:["update:modelValue","change","blur","focus"],mixins:[s0,a0,o0],provide(){return{field:this}},data(){return{focus:!1,error:"",activated:!1,selecting:vu}},props:{modelValue:{type:[String,Boolean,Number],default:""}},methods:{toggle(e){this.component==="Check"?this.$emit("update:modelValue",this.value==="mew-default"?!this.modelValue:this.value):(e.target===this.$el&&this.$el.getElementsByTagName(this.area?"textarea":"input")[0].focus(),this.select&&(this.selecting.target?this.selecting.wrapper.unload():this.selecting.target=this))},$focus(){this.$el.getElementsByTagName(this.area?"textarea":"input")[0].focus()}}};function u0(e,t,n,i,r,s){return ae(),fe("div",{class:_e(["mew-field",[e.mode,e.checked,e.picking,r.error]]),onMousedownOnce:t[0]||(t[0]=o=>r.activated=!0),onClick:t[1]||(t[1]=(...o)=>s.toggle&&s.toggle(...o))},[(ae(),Ze(Vc(e.component),null,{default:rt(()=>[Qt(e.$slots,"default")]),_:3}))],34)}var f0=xe(l0,[["render",u0]]),c0={created(e,t,n){},beforeMount(e,t,n){e.src&&(n.mew||(n.mew={}),n.mew.lazy=!0,n.mew.src=e.src,e.style.opacity="0",e.src="")},mounted(e,t,n){n.mew.lazy&&"IntersectionObserver"in window&&(n.mew.observer=new IntersectionObserver(i=>{i[0].isIntersecting&&(e.src=n.mew.src,n.mew.observer.disconnect(),delete n.mew.observer,delete n.mew.lazy)},{rootMargin:"0px",threshold:.6}),e.onload=function(){e.style.opacity="1"},n.mew.observer.observe(e))},beforeUpdate(){},updated(){},beforeUnmount(){},unmounted(){}},d0={install:function(e,t){e.config.globalProperties.$loading=gu,e.config.globalProperties.$pending=mu,e.config.globalProperties.$global=an,e.config.globalProperties.$notify=dt,e.config.globalProperties.$color=gs,e.component("ico",Eu),e.component("btn",Tg),e.component("vid",Lp),e.component("fit",Cp),e.component("flex",Mp),e.component("field",f0),e.directive("lazy",c0)}},qs={exports:{}},Tu=function(t,n){return function(){for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];return t.apply(n,r)}},h0=Tu,ea=Object.prototype.toString,ta=function(e){return function(t){var n=ea.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function pr(e){return e=e.toLowerCase(),function(n){return ta(n)===e}}function ra(e){return Array.isArray(e)}function ii(e){return typeof e=="undefined"}function v0(e){return e!==null&&!ii(e)&&e.constructor!==null&&!ii(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var xu=pr("ArrayBuffer");function g0(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&xu(e.buffer),t}function m0(e){return typeof e=="string"}function p0(e){return typeof e=="number"}function Su(e){return e!==null&&typeof e=="object"}function Vn(e){if(ta(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var E0=pr("Date"),y0=pr("File"),T0=pr("Blob"),x0=pr("FileList");function na(e){return ea.call(e)==="[object Function]"}function S0(e){return Su(e)&&na(e.pipe)}function _0(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||ea.call(e)===t||na(e.toString)&&e.toString()===t)}var A0=pr("URLSearchParams");function b0(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function L0(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function ia(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),ra(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}function ps(){var e={};function t(r,s){Vn(e[s])&&Vn(r)?e[s]=ps(e[s],r):Vn(r)?e[s]=ps({},r):ra(r)?e[s]=r.slice():e[s]=r}for(var n=0,i=arguments.length;n<i;n++)ia(arguments[n],t);return e}function D0(e,t,n){return ia(t,function(r,s){n&&typeof r=="function"?e[s]=h0(r,n):e[s]=r}),e}function O0(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function C0(e,t,n,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)}function R0(e,t,n){var i,r,s,o={};t=t||{};do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)s=i[r],o[s]||(t[s]=e[s],o[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t}function P0(e,t,n){e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;var i=e.indexOf(t,n);return i!==-1&&i===n}function I0(e){if(!e)return null;var t=e.length;if(ii(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n}var M0=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array)),$e={isArray:ra,isArrayBuffer:xu,isBuffer:v0,isFormData:_0,isArrayBufferView:g0,isString:m0,isNumber:p0,isObject:Su,isPlainObject:Vn,isUndefined:ii,isDate:E0,isFile:y0,isBlob:T0,isFunction:na,isStream:S0,isURLSearchParams:A0,isStandardBrowserEnv:L0,forEach:ia,merge:ps,extend:D0,trim:b0,stripBOM:O0,inherits:C0,toFlatObject:R0,kindOf:ta,kindOfTest:pr,endsWith:P0,toArray:I0,isTypedArray:M0,isFileList:x0},_r=$e;function vo(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var _u=function(t,n,i){if(!n)return t;var r;if(i)r=i(n);else if(_r.isURLSearchParams(n))r=n.toString();else{var s=[];_r.forEach(n,function(D,C){D===null||typeof D=="undefined"||(_r.isArray(D)?C=C+"[]":D=[D],_r.forEach(D,function(_){_r.isDate(_)?_=_.toISOString():_r.isObject(_)&&(_=JSON.stringify(_)),s.push(vo(C)+"="+vo(_))}))}),r=s.join("&")}if(r){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t},F0=$e;function bi(){this.handlers=[]}bi.prototype.use=function(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};bi.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};bi.prototype.forEach=function(t){F0.forEach(this.handlers,function(i){i!==null&&t(i)})};var w0=bi,B0=$e,k0=function(t,n){B0.forEach(t,function(r,s){s!==n&&s.toUpperCase()===n.toUpperCase()&&(t[n]=r,delete t[s])})},Au=$e;function Wr(e,t,n,i,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}Au.inherits(Wr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var bu=Wr.prototype,Lu={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){Lu[e]={value:e}});Object.defineProperties(Wr,Lu);Object.defineProperty(bu,"isAxiosError",{value:!0});Wr.from=function(e,t,n,i,r,s){var o=Object.create(bu);return Au.toFlatObject(e,o,function(D){return D!==Error.prototype}),Wr.call(o,e.message,t,n,i,r),o.name=e.name,s&&Object.assign(o,s),o};var Yr=Wr,Du={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ct=$e;function U0(e,t){t=t||new FormData;var n=[];function i(s){return s===null?"":ct.isDate(s)?s.toISOString():ct.isArrayBuffer(s)||ct.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function r(s,o){if(ct.isPlainObject(s)||ct.isArray(s)){if(n.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);n.push(s),ct.forEach(s,function(D,C){if(!ct.isUndefined(D)){var A=o?o+"."+C:C,_;if(D&&!o&&typeof D=="object"){if(ct.endsWith(C,"{}"))D=JSON.stringify(D);else if(ct.endsWith(C,"[]")&&(_=ct.toArray(D))){_.forEach(function(p){!ct.isUndefined(p)&&t.append(A,i(p))});return}}r(D,A)}}),n.pop()}else t.append(o,i(s))}return r(e),t}var Ou=U0,Wi=Yr,N0=function(t,n,i){var r=i.config.validateStatus;!i.status||!r||r(i.status)?t(i):n(new Wi("Request failed with status code "+i.status,[Wi.ERR_BAD_REQUEST,Wi.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},Kn=$e,K0=Kn.isStandardBrowserEnv()?function(){return{write:function(n,i,r,s,o,u){var D=[];D.push(n+"="+encodeURIComponent(i)),Kn.isNumber(r)&&D.push("expires="+new Date(r).toGMTString()),Kn.isString(s)&&D.push("path="+s),Kn.isString(o)&&D.push("domain="+o),u===!0&&D.push("secure"),document.cookie=D.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),j0=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},W0=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t},H0=j0,G0=W0,Cu=function(t,n){return t&&!H0(n)?G0(t,n):n},Hi=$e,$0=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],V0=function(t){var n={},i,r,s;return t&&Hi.forEach(t.split(`
`),function(u){if(s=u.indexOf(":"),i=Hi.trim(u.substr(0,s)).toLowerCase(),r=Hi.trim(u.substr(s+1)),i){if(n[i]&&$0.indexOf(i)>=0)return;i==="set-cookie"?n[i]=(n[i]?n[i]:[]).concat([r]):n[i]=n[i]?n[i]+", "+r:r}}),n},go=$e,z0=go.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function r(s){var o=s;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(o){var u=go.isString(o)?r(o):o;return u.protocol===i.protocol&&u.host===i.host}}():function(){return function(){return!0}}(),Es=Yr,Y0=$e;function Ru(e){Es.call(this,e==null?"canceled":e,Es.ERR_CANCELED),this.name="CanceledError"}Y0.inherits(Ru,Es,{__CANCEL__:!0});var Li=Ru,X0=function(t){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""},tn=$e,Q0=N0,Z0=K0,J0=_u,q0=Cu,eE=V0,tE=z0,rE=Du,St=Yr,nE=Li,iE=X0,mo=function(t){return new Promise(function(i,r){var s=t.data,o=t.headers,u=t.responseType,D;function C(){t.cancelToken&&t.cancelToken.unsubscribe(D),t.signal&&t.signal.removeEventListener("abort",D)}tn.isFormData(s)&&tn.isStandardBrowserEnv()&&delete o["Content-Type"];var A=new XMLHttpRequest;if(t.auth){var _=t.auth.username||"",p=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.Authorization="Basic "+btoa(_+":"+p)}var L=q0(t.baseURL,t.url);A.open(t.method.toUpperCase(),J0(L,t.params,t.paramsSerializer),!0),A.timeout=t.timeout;function O(){if(!!A){var y="getAllResponseHeaders"in A?eE(A.getAllResponseHeaders()):null,l=!u||u==="text"||u==="json"?A.responseText:A.response,a={data:l,status:A.status,statusText:A.statusText,headers:y,config:t,request:A};Q0(function(d){i(d),C()},function(d){r(d),C()},a),A=null}}if("onloadend"in A?A.onloadend=O:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(O)},A.onabort=function(){!A||(r(new St("Request aborted",St.ECONNABORTED,t,A)),A=null)},A.onerror=function(){r(new St("Network Error",St.ERR_NETWORK,t,A,A)),A=null},A.ontimeout=function(){var l=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",a=t.transitional||rE;t.timeoutErrorMessage&&(l=t.timeoutErrorMessage),r(new St(l,a.clarifyTimeoutError?St.ETIMEDOUT:St.ECONNABORTED,t,A)),A=null},tn.isStandardBrowserEnv()){var R=(t.withCredentials||tE(L))&&t.xsrfCookieName?Z0.read(t.xsrfCookieName):void 0;R&&(o[t.xsrfHeaderName]=R)}"setRequestHeader"in A&&tn.forEach(o,function(l,a){typeof s=="undefined"&&a.toLowerCase()==="content-type"?delete o[a]:A.setRequestHeader(a,l)}),tn.isUndefined(t.withCredentials)||(A.withCredentials=!!t.withCredentials),u&&u!=="json"&&(A.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&A.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(D=function(y){!A||(r(!y||y&&y.type?new nE:y),A.abort(),A=null)},t.cancelToken&&t.cancelToken.subscribe(D),t.signal&&(t.signal.aborted?D():t.signal.addEventListener("abort",D))),s||(s=null);var T=iE(L);if(T&&["http","https","file"].indexOf(T)===-1){r(new St("Unsupported protocol "+T+":",St.ERR_BAD_REQUEST,t));return}A.send(s)})},sE=null,He=$e,po=k0,Eo=Yr,aE=Du,oE=Ou,lE={"Content-Type":"application/x-www-form-urlencoded"};function yo(e,t){!He.isUndefined(e)&&He.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function uE(){var e;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(e=mo),e}function fE(e,t,n){if(He.isString(e))try{return(t||JSON.parse)(e),He.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}var Di={transitional:aE,adapter:uE(),transformRequest:[function(t,n){if(po(n,"Accept"),po(n,"Content-Type"),He.isFormData(t)||He.isArrayBuffer(t)||He.isBuffer(t)||He.isStream(t)||He.isFile(t)||He.isBlob(t))return t;if(He.isArrayBufferView(t))return t.buffer;if(He.isURLSearchParams(t))return yo(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var i=He.isObject(t),r=n&&n["Content-Type"],s;if((s=He.isFileList(t))||i&&r==="multipart/form-data"){var o=this.env&&this.env.FormData;return oE(s?{"files[]":t}:t,o&&new o)}else if(i||r==="application/json")return yo(n,"application/json"),fE(t);return t}],transformResponse:[function(t){var n=this.transitional||Di.transitional,i=n&&n.silentJSONParsing,r=n&&n.forcedJSONParsing,s=!i&&this.responseType==="json";if(s||r&&He.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(s)throw o.name==="SyntaxError"?Eo.from(o,Eo.ERR_BAD_RESPONSE,this,null,this.response):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sE},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};He.forEach(["delete","get","head"],function(t){Di.headers[t]={}});He.forEach(["post","put","patch"],function(t){Di.headers[t]=He.merge(lE)});var sa=Di,cE=$e,dE=sa,hE=function(t,n,i){var r=this||dE;return cE.forEach(i,function(o){t=o.call(r,t,n)}),t},Pu=function(t){return!!(t&&t.__CANCEL__)},To=$e,Gi=hE,vE=Pu,gE=sa,mE=Li;function $i(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new mE}var pE=function(t){$i(t),t.headers=t.headers||{},t.data=Gi.call(t,t.data,t.headers,t.transformRequest),t.headers=To.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),To.forEach(["delete","get","head","post","put","patch","common"],function(r){delete t.headers[r]});var n=t.adapter||gE.adapter;return n(t).then(function(r){return $i(t),r.data=Gi.call(t,r.data,r.headers,t.transformResponse),r},function(r){return vE(r)||($i(t),r&&r.response&&(r.response.data=Gi.call(t,r.response.data,r.response.headers,t.transformResponse))),Promise.reject(r)})},et=$e,Iu=function(t,n){n=n||{};var i={};function r(A,_){return et.isPlainObject(A)&&et.isPlainObject(_)?et.merge(A,_):et.isPlainObject(_)?et.merge({},_):et.isArray(_)?_.slice():_}function s(A){if(et.isUndefined(n[A])){if(!et.isUndefined(t[A]))return r(void 0,t[A])}else return r(t[A],n[A])}function o(A){if(!et.isUndefined(n[A]))return r(void 0,n[A])}function u(A){if(et.isUndefined(n[A])){if(!et.isUndefined(t[A]))return r(void 0,t[A])}else return r(void 0,n[A])}function D(A){if(A in n)return r(t[A],n[A]);if(A in t)return r(void 0,t[A])}var C={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:D};return et.forEach(Object.keys(t).concat(Object.keys(n)),function(_){var p=C[_]||s,L=p(_);et.isUndefined(L)&&p!==D||(i[_]=L)}),i},Mu={version:"0.27.2"},EE=Mu.version,Ut=Yr,aa={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){aa[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});var xo={};aa.transitional=function(t,n,i){function r(s,o){return"[Axios v"+EE+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return function(s,o,u){if(t===!1)throw new Ut(r(o," has been removed"+(n?" in "+n:"")),Ut.ERR_DEPRECATED);return n&&!xo[o]&&(xo[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,u):!0}};function yE(e,t,n){if(typeof e!="object")throw new Ut("options must be an object",Ut.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),r=i.length;r-- >0;){var s=i[r],o=t[s];if(o){var u=e[s],D=u===void 0||o(u,s,e);if(D!==!0)throw new Ut("option "+s+" must be "+D,Ut.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ut("Unknown option "+s,Ut.ERR_BAD_OPTION)}}var TE={assertOptions:yE,validators:aa},Fu=$e,xE=_u,So=w0,_o=pE,Oi=Iu,SE=Cu,wu=TE,Ar=wu.validators;function Hr(e){this.defaults=e,this.interceptors={request:new So,response:new So}}Hr.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Oi(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&wu.assertOptions(i,{silentJSONParsing:Ar.transitional(Ar.boolean),forcedJSONParsing:Ar.transitional(Ar.boolean),clarifyTimeoutError:Ar.transitional(Ar.boolean)},!1);var r=[],s=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(n)===!1||(s=s&&L.synchronous,r.unshift(L.fulfilled,L.rejected))});var o=[];this.interceptors.response.forEach(function(L){o.push(L.fulfilled,L.rejected)});var u;if(!s){var D=[_o,void 0];for(Array.prototype.unshift.apply(D,r),D=D.concat(o),u=Promise.resolve(n);D.length;)u=u.then(D.shift(),D.shift());return u}for(var C=n;r.length;){var A=r.shift(),_=r.shift();try{C=A(C)}catch(p){_(p);break}}try{u=_o(C)}catch(p){return Promise.reject(p)}for(;o.length;)u=u.then(o.shift(),o.shift());return u};Hr.prototype.getUri=function(t){t=Oi(this.defaults,t);var n=SE(t.baseURL,t.url);return xE(n,t.params,t.paramsSerializer)};Fu.forEach(["delete","get","head","options"],function(t){Hr.prototype[t]=function(n,i){return this.request(Oi(i||{},{method:t,url:n,data:(i||{}).data}))}});Fu.forEach(["post","put","patch"],function(t){function n(i){return function(s,o,u){return this.request(Oi(u||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Hr.prototype[t]=n(),Hr.prototype[t+"Form"]=n(!0)});var _E=Hr,AE=Li;function Gr(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(r){t=r});var n=this;this.promise.then(function(i){if(!!n._listeners){var r,s=n._listeners.length;for(r=0;r<s;r++)n._listeners[r](i);n._listeners=null}}),this.promise.then=function(i){var r,s=new Promise(function(o){n.subscribe(o),r=o}).then(i);return s.cancel=function(){n.unsubscribe(r)},s},e(function(r){n.reason||(n.reason=new AE(r),t(n.reason))})}Gr.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Gr.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};Gr.prototype.unsubscribe=function(t){if(!!this._listeners){var n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}};Gr.source=function(){var t,n=new Gr(function(r){t=r});return{token:n,cancel:t}};var bE=Gr,LE=function(t){return function(i){return t.apply(null,i)}},DE=$e,OE=function(t){return DE.isObject(t)&&t.isAxiosError===!0},Ao=$e,CE=Tu,zn=_E,RE=Iu,PE=sa;function Bu(e){var t=new zn(e),n=CE(zn.prototype.request,t);return Ao.extend(n,zn.prototype,t),Ao.extend(n,t),n.create=function(r){return Bu(RE(e,r))},n}var Je=Bu(PE);Je.Axios=zn;Je.CanceledError=Li;Je.CancelToken=bE;Je.isCancel=Pu;Je.VERSION=Mu.version;Je.toFormData=Ou;Je.AxiosError=Yr;Je.Cancel=Je.CanceledError;Je.all=function(t){return Promise.all(t)};Je.spread=LE;Je.isAxiosError=OE;qs.exports=Je;qs.exports.default=Je;var IE=qs.exports,oa=IE.create({baseURL:"http://xx.xx.xx.xx:3001",timeout:6e3,withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"}});oa.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)});oa.interceptors.response.use(function(e){return e},function(e){return Promise.reject(e)});var ME={install:function(e,t){e.config.globalProperties.$http=oa}};function ku(e){let t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.focus(),t.select(),document.execCommand("copy"),t.blur(),document.body.removeChild(t)}var FE={install:function(e,t){e.config.globalProperties.$copy=ku}};var Uu={exports:{}};(function(e){var t=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(i){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,o={},u={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function l(a){return a instanceof D?new D(a.type,l(a.content),a.alias):Array.isArray(a)?a.map(l):a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(l){return Object.prototype.toString.call(l).slice(8,-1)},objId:function(l){return l.__id||Object.defineProperty(l,"__id",{value:++s}),l.__id},clone:function l(a,f){f=f||{};var d,m;switch(u.util.type(a)){case"Object":if(m=u.util.objId(a),f[m])return f[m];d={},f[m]=d;for(var h in a)a.hasOwnProperty(h)&&(d[h]=l(a[h],f));return d;case"Array":return m=u.util.objId(a),f[m]?f[m]:(d=[],f[m]=d,a.forEach(function(c,v){d[v]=l(c,f)}),d);default:return a}},getLanguage:function(l){for(;l;){var a=r.exec(l.className);if(a)return a[1].toLowerCase();l=l.parentElement}return"none"},setLanguage:function(l,a){l.className=l.className.replace(RegExp(r,"gi"),""),l.classList.add("language-"+a)},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(d){var l=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(d.stack)||[])[1];if(l){var a=document.getElementsByTagName("script");for(var f in a)if(a[f].src==l)return a[f]}return null}},isActive:function(l,a,f){for(var d="no-"+a;l;){var m=l.classList;if(m.contains(a))return!0;if(m.contains(d))return!1;l=l.parentElement}return!!f}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(l,a){var f=u.util.clone(u.languages[l]);for(var d in a)f[d]=a[d];return f},insertBefore:function(l,a,f,d){d=d||u.languages;var m=d[l],h={};for(var c in m)if(m.hasOwnProperty(c)){if(c==a)for(var v in f)f.hasOwnProperty(v)&&(h[v]=f[v]);f.hasOwnProperty(c)||(h[c]=m[c])}var P=d[l];return d[l]=h,u.languages.DFS(u.languages,function(b,x){x===P&&b!=l&&(this[b]=h)}),h},DFS:function l(a,f,d,m){m=m||{};var h=u.util.objId;for(var c in a)if(a.hasOwnProperty(c)){f.call(a,c,a[c],d||c);var v=a[c],P=u.util.type(v);P==="Object"&&!m[h(v)]?(m[h(v)]=!0,l(v,f,null,m)):P==="Array"&&!m[h(v)]&&(m[h(v)]=!0,l(v,f,c,m))}}},plugins:{},highlightAll:function(l,a){u.highlightAllUnder(document,l,a)},highlightAllUnder:function(l,a,f){var d={callback:f,container:l,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};u.hooks.run("before-highlightall",d),d.elements=Array.prototype.slice.apply(d.container.querySelectorAll(d.selector)),u.hooks.run("before-all-elements-highlight",d);for(var m=0,h;h=d.elements[m++];)u.highlightElement(h,a===!0,d.callback)},highlightElement:function(l,a,f){var d=u.util.getLanguage(l),m=u.languages[d];u.util.setLanguage(l,d);var h=l.parentElement;h&&h.nodeName.toLowerCase()==="pre"&&u.util.setLanguage(h,d);var c=l.textContent,v={element:l,language:d,grammar:m,code:c};function P(x){v.highlightedCode=x,u.hooks.run("before-insert",v),v.element.innerHTML=v.highlightedCode,u.hooks.run("after-highlight",v),u.hooks.run("complete",v),f&&f.call(v.element)}if(u.hooks.run("before-sanity-check",v),h=v.element.parentElement,h&&h.nodeName.toLowerCase()==="pre"&&!h.hasAttribute("tabindex")&&h.setAttribute("tabindex","0"),!v.code){u.hooks.run("complete",v),f&&f.call(v.element);return}if(u.hooks.run("before-highlight",v),!v.grammar){P(u.util.encode(v.code));return}if(a&&i.Worker){var b=new Worker(u.filename);b.onmessage=function(x){P(x.data)},b.postMessage(JSON.stringify({language:v.language,code:v.code,immediateClose:!0}))}else P(u.highlight(v.code,v.grammar,v.language))},highlight:function(l,a,f){var d={code:l,grammar:a,language:f};if(u.hooks.run("before-tokenize",d),!d.grammar)throw new Error('The language "'+d.language+'" has no grammar.');return d.tokens=u.tokenize(d.code,d.grammar),u.hooks.run("after-tokenize",d),D.stringify(u.util.encode(d.tokens),d.language)},tokenize:function(l,a){var f=a.rest;if(f){for(var d in f)a[d]=f[d];delete a.rest}var m=new _;return p(m,m.head,l),A(l,m,a,m.head,0),O(m)},hooks:{all:{},add:function(l,a){var f=u.hooks.all;f[l]=f[l]||[],f[l].push(a)},run:function(l,a){var f=u.hooks.all[l];if(!(!f||!f.length))for(var d=0,m;m=f[d++];)m(a)}},Token:D};i.Prism=u;function D(l,a,f,d){this.type=l,this.content=a,this.alias=f,this.length=(d||"").length|0}D.stringify=function l(a,f){if(typeof a=="string")return a;if(Array.isArray(a)){var d="";return a.forEach(function(P){d+=l(P,f)}),d}var m={type:a.type,content:l(a.content,f),tag:"span",classes:["token",a.type],attributes:{},language:f},h=a.alias;h&&(Array.isArray(h)?Array.prototype.push.apply(m.classes,h):m.classes.push(h)),u.hooks.run("wrap",m);var c="";for(var v in m.attributes)c+=" "+v+'="'+(m.attributes[v]||"").replace(/"/g,"&quot;")+'"';return"<"+m.tag+' class="'+m.classes.join(" ")+'"'+c+">"+m.content+"</"+m.tag+">"};function C(l,a,f,d){l.lastIndex=a;var m=l.exec(f);if(m&&d&&m[1]){var h=m[1].length;m.index+=h,m[0]=m[0].slice(h)}return m}function A(l,a,f,d,m,h){for(var c in f)if(!(!f.hasOwnProperty(c)||!f[c])){var v=f[c];v=Array.isArray(v)?v:[v];for(var P=0;P<v.length;++P){if(h&&h.cause==c+","+P)return;var b=v[P],x=b.inside,S=!!b.lookbehind,g=!!b.greedy,E=b.alias;if(g&&!b.pattern.global){var I=b.pattern.toString().match(/[imsuy]*$/)[0];b.pattern=RegExp(b.pattern.source,I+"g")}for(var M=b.pattern||b,F=d.next,w=m;F!==a.tail&&!(h&&w>=h.reach);w+=F.value.length,F=F.next){var k=F.value;if(a.length>l.length)return;if(!(k instanceof D)){var B=1,U;if(g){if(U=C(M,w,l,S),!U||U.index>=l.length)break;var G=U.index,j=U.index+U[0].length,H=w;for(H+=F.value.length;G>=H;)F=F.next,H+=F.value.length;if(H-=F.value.length,w=H,F.value instanceof D)continue;for(var N=F;N!==a.tail&&(H<j||typeof N.value=="string");N=N.next)B++,H+=N.value.length;B--,k=l.slice(w,H),U.index-=w}else if(U=C(M,0,k,S),!U)continue;var G=U.index,$=U[0],z=k.slice(0,G),ee=k.slice(G+$.length),X=w+k.length;h&&X>h.reach&&(h.reach=X);var te=F.prev;z&&(te=p(a,te,z),w+=z.length),L(a,te,B);var se=new D(c,x?u.tokenize($,x):$,E,$);if(F=p(a,te,se),ee&&p(a,F,ee),B>1){var K={cause:c+","+P,reach:X};A(l,a,f,F.prev,w,K),h&&K.reach>h.reach&&(h.reach=K.reach)}}}}}}function _(){var l={value:null,prev:null,next:null},a={value:null,prev:l,next:null};l.next=a,this.head=l,this.tail=a,this.length=0}function p(l,a,f){var d=a.next,m={value:f,prev:a,next:d};return a.next=m,d.prev=m,l.length++,m}function L(l,a,f){for(var d=a.next,m=0;m<f&&d!==l.tail;m++)d=d.next;a.next=d,d.prev=a,l.length-=m}function O(l){for(var a=[],f=l.head.next;f!==l.tail;)a.push(f.value),f=f.next;return a}if(!i.document)return i.addEventListener&&(u.disableWorkerMessageHandler||i.addEventListener("message",function(l){var a=JSON.parse(l.data),f=a.language,d=a.code,m=a.immediateClose;i.postMessage(u.highlight(d,u.languages[f],f)),m&&i.close()},!1)),u;var R=u.util.currentScript();R&&(u.filename=R.src,R.hasAttribute("data-manual")&&(u.manual=!0));function T(){u.manual||u.highlightAll()}if(!u.manual){var y=document.readyState;y==="loading"||y==="interactive"&&R&&R.defer?document.addEventListener("DOMContentLoaded",T):window.requestAnimationFrame?window.requestAnimationFrame(T):window.setTimeout(T,16)}return u}(t);e.exports&&(e.exports=n),typeof ms!="undefined"&&(ms.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(r,s){var o={};o["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[s]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var u={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};u["language-"+s]={pattern:/[\s\S]+/,inside:n.languages[s]};var D={};D[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:u},n.languages.insertBefore("markup","cdata",D)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(i,r){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:n.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(i){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var s=i.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n=="undefined"||typeof document=="undefined")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading\u2026",r=function(R,T){return"\u2716 Error "+R+" while fetching file: "+T},s="\u2716 Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},u="data-src-status",D="loading",C="loaded",A="failed",_="pre[data-src]:not(["+u+'="'+C+'"]):not(['+u+'="'+D+'"])';function p(R,T,y){var l=new XMLHttpRequest;l.open("GET",R,!0),l.onreadystatechange=function(){l.readyState==4&&(l.status<400&&l.responseText?T(l.responseText):l.status>=400?y(r(l.status,l.statusText)):y(s))},l.send(null)}function L(R){var T=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(R||"");if(T){var y=Number(T[1]),l=T[2],a=T[3];return l?a?[y,Number(a)]:[y,void 0]:[y,y]}}n.hooks.add("before-highlightall",function(R){R.selector+=", "+_}),n.hooks.add("before-sanity-check",function(R){var T=R.element;if(T.matches(_)){R.code="",T.setAttribute(u,D);var y=T.appendChild(document.createElement("CODE"));y.textContent=i;var l=T.getAttribute("data-src"),a=R.language;if(a==="none"){var f=(/\.(\w+)$/.exec(l)||[,"none"])[1];a=o[f]||f}n.util.setLanguage(y,a),n.util.setLanguage(T,a);var d=n.plugins.autoloader;d&&d.loadLanguages(a),p(l,function(m){T.setAttribute(u,C);var h=L(T.getAttribute("data-range"));if(h){var c=m.split(/\r\n?|\n/g),v=h[0],P=h[1]==null?c.length:h[1];v<0&&(v+=c.length),v=Math.max(0,Math.min(v-1,c.length)),P<0&&(P+=c.length),P=Math.max(0,Math.min(P,c.length)),m=c.slice(v,P).join(`
`),T.hasAttribute("data-start")||T.setAttribute("data-start",String(v+1))}y.textContent=m,n.highlightElement(y)},function(m){T.setAttribute(u,A),y.textContent=m})}}),n.plugins.fileHighlight={highlight:function(T){for(var y=(T||document).querySelectorAll(_),l=0,a;a=y[l++];)n.highlightElement(a)}};var O=!1;n.fileHighlight=function(){O||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),O=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Uu);var bo=Uu.exports;const wE={name:"prism",mounted(){bo.highlightAll()},updated(){this.$refs.prism.innerText=this.$slots.default()[0].children,bo.highlightAll()},props:{lang:{type:String,default:"javascript"}},methods:{cpy(){ku(this.$slots.default()[0].children),this.$notify({color:"green",text:"\u5185\u5BB9\u5DF2\u62F7\u8D1D"})}}},BE={class:"mew-prism"},kE=ie("svg",{height:"24px",width:"24px",viewBox:"0 0 24 24"},[ie("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1),UE=[kE],NE=st("  ");function KE(e,t,n,i,r,s){return ae(),fe("div",BE,[ie("i",{class:"mew-prism-cpy",title:"\u70B9\u51FB\u590D\u5236",onClick:t[0]||(t[0]=(...o)=>s.cpy&&s.cpy(...o))},UE),ie("pre",null,[NE,ie("code",{ref:"prism",class:_e(["language-"+(n.lang==="js"?"javascript":n.lang)])},[Qt(e.$slots,"default")],2)])])}var jE=xe(wE,[["render",KE]]);const WE={name:"apiTable",props:{items:{type:Array,default:[]},title:{type:String,default:"\u5C5E \u6027"}}},HE=e=>(tc("data-v-580373e6"),e=e(),rc(),e),GE={class:"mew-apiTable"},$E={class:"props"},VE=HE(()=>ie("th",{class:"description"},"\u8BF4 \u660E",-1)),zE={class:"name"},YE={class:"description"},XE={class:"info"},QE={key:0,class:"type"},ZE=st("Type: "),JE={class:"blue"},qE={key:1,class:"defaultValue"},ey=st("Default: "),ty={class:"blue"},ry={key:2,class:"args"},ny=st("Args: "),iy={class:"text"};function sy(e,t,n,i,r,s){return ae(),fe("table",GE,[ie("thead",null,[ie("tr",null,[ie("th",$E,Le(n.title),1),VE])]),ie("tbody",null,[(ae(!0),fe(Re,null,Hs(n.items,o=>(ae(),fe("tr",null,[ie("td",zE,Le(o.name),1),ie("td",YE,[ie("div",XE,[o.type?(ae(),fe("i",QE,[ZE,ie("i",JE,Le(o.type),1)])):ke("",!0),o.default?(ae(),fe("i",qE,[ey,ie("i",ty,Le(o.default),1)])):ke("",!0),o.args?(ae(),fe("i",ry,[ny,ie("i",{class:_e(["blue",{undefined:o.args.toLowerCase()==="undefined"}])},Le(o.args),3)])):ke("",!0)]),ie("div",iy,Le(o.description),1)])]))),256))])])}var ay=xe(WE,[["render",sy],["__scopeId","data-v-580373e6"]]);let oy=Hl(Yd);oy.use(Zs).use(vs).use(d0).use(ME).use(FE).component("prism",jE).component("apiTable",ay).mount("#app");export{Ye as $,je as A,$o as B,zo as C,cy as D,Ro as E,Re as F,Xo as G,ft as H,Go as I,Wn as J,wf as K,vy as L,Bf as M,hy as N,Te as O,jf as P,py as Q,fi as R,gy as S,ln as T,ut as U,ui as V,ly as W,Ht as X,jn as Y,al as Z,xe as _,ie as a,sl as a$,_y as a0,Mr as a1,yy as a2,Ca as a3,An as a4,lt as a5,Lt as a6,zt as a7,$y as a8,Et as a9,xc as aA,Ec as aB,bc as aC,Ti as aD,Ac as aE,_c as aF,Sc as aG,ks as aH,ws as aI,Gn as aJ,el as aK,Cy as aL,Qt as aM,Ay as aN,Vc as aO,Gy as aP,_n as aQ,Pa as aR,qf as aS,wr as aT,id as aU,Hy as aV,Oy as aW,by as aX,By as aY,Ky as aZ,wy as a_,Kc as aa,Uy as ab,Nc as ac,Dy as ad,Sy as ae,Ei as af,Iy as ag,My as ah,Py as ai,Qr as aj,gr as ak,Fs as al,Yc as am,Gs as an,$r as ao,jy as ap,Dt as aq,sd as ar,Ry as as,cr as at,ky as au,Xc as av,Cs as aw,pc as ax,Tc as ay,Bs as az,he as b,ad as b0,Gf as b1,ur as b2,Ty as b3,hc as b4,xy as b5,Ny as b6,Fy as b7,Wy as b8,Ey as b9,bn as ba,Id as bb,$s as bc,Hl as bd,Zy as be,Ld as bf,Vy as bg,$d as bh,Jy as bi,Ya as bj,zy as bk,Yy as bl,kl as bm,Xy as bn,Ul as bo,Nd as bp,fr as bq,Qy as br,qy as bs,xp as bt,Dv as bu,fe as c,rc as d,st as e,Hs as f,jt as g,Ly as h,ku as i,ke as j,Fr as k,Ze as l,my as m,_e as n,ae as o,tc as p,dy as q,Ce as r,uy as s,Le as t,fy as u,Ln as v,rt as w,Vo as x,Pr as y,En as z};
