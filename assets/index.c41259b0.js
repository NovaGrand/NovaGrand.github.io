const zl=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}};zl();function Fi(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const Yl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xl=Fi(Yl);function Pa(e){return!!e||e===""}function qt(e){if(de(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=we(i)?Jl(i):qt(i);if(r)for(const a in r)t[a]=r[a]}return t}else{if(we(e))return e;if(Be(e))return e}}const Ql=/;(?![^(]*\))/g,Zl=/:(.+)/;function Jl(e){const t={};return e.split(Ql).forEach(n=>{if(n){const i=n.split(Zl);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function De(e){let t="";if(we(e))t=e;else if(de(e))for(let n=0;n<e.length;n++){const i=De(e[n]);i&&(t+=i+" ")}else if(Be(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const _e=e=>we(e)?e:e==null?"":de(e)||Be(e)&&(e.toString===wa||!ge(e.toString))?JSON.stringify(e,Ia,2):String(e),Ia=(e,t)=>t&&t.__v_isRef?Ia(e,t.value):gr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:Ma(t)?{[`Set(${t.size})`]:[...t.values()]}:Be(t)&&!de(t)&&!Ba(t)?String(t):t,Le={},vr=[],ut=()=>{},ql=()=>!1,eu=/^on[^a-z]/,Rn=e=>eu.test(e),wi=e=>e.startsWith("onUpdate:"),je=Object.assign,Bi=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},tu=Object.prototype.hasOwnProperty,ye=(e,t)=>tu.call(e,t),de=Array.isArray,gr=e=>Pn(e)==="[object Map]",Ma=e=>Pn(e)==="[object Set]",ge=e=>typeof e=="function",we=e=>typeof e=="string",Ui=e=>typeof e=="symbol",Be=e=>e!==null&&typeof e=="object",Fa=e=>Be(e)&&ge(e.then)&&ge(e.catch),wa=Object.prototype.toString,Pn=e=>wa.call(e),ru=e=>Pn(e).slice(8,-1),Ba=e=>Pn(e)==="[object Object]",ki=e=>we(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,cn=Fi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),In=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},nu=/-(\w)/g,gt=In(e=>e.replace(nu,(t,n)=>n?n.toUpperCase():"")),iu=/\B([A-Z])/g,_r=In(e=>e.replace(iu,"-$1").toLowerCase()),Mn=In(e=>e.charAt(0).toUpperCase()+e.slice(1)),Qn=In(e=>e?`on${Mn(e)}`:""),Yr=(e,t)=>!Object.is(e,t),dn=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},En=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},yn=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ts;const su=()=>Ts||(Ts=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let dt;class au{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&dt&&(this.parent=dt,this.index=(dt.scopes||(dt.scopes=[])).push(this)-1)}run(t){if(this.active){const n=dt;try{return dt=this,t()}finally{dt=n}}}on(){dt=this}off(){dt=this.parent}stop(t){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function ou(e,t=dt){t&&t.active&&t.effects.push(e)}const Ni=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Ua=e=>(e.w&wt)>0,ka=e=>(e.n&wt)>0,lu=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=wt},uu=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];Ua(r)&&!ka(r)?r.delete(e):t[n++]=r,r.w&=~wt,r.n&=~wt}t.length=n}},ui=new WeakMap;let kr=0,wt=1;const fi=30;let lt;const Qt=Symbol(""),ci=Symbol("");class Ki{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,ou(this,i)}run(){if(!this.active)return this.fn();let t=lt,n=Pt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=lt,lt=this,Pt=!0,wt=1<<++kr,kr<=fi?lu(this):xs(this),this.fn()}finally{kr<=fi&&uu(this),wt=1<<--kr,lt=this.parent,Pt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){lt===this?this.deferStop=!0:this.active&&(xs(this),this.onStop&&this.onStop(),this.active=!1)}}function xs(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Pt=!0;const Na=[];function br(){Na.push(Pt),Pt=!1}function Or(){const e=Na.pop();Pt=e===void 0?!0:e}function qe(e,t,n){if(Pt&&lt){let i=ui.get(e);i||ui.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=Ni()),Ka(r)}}function Ka(e,t){let n=!1;kr<=fi?ka(e)||(e.n|=wt,n=!Ua(e)):n=!e.has(lt),n&&(e.add(lt),lt.deps.push(e))}function Tt(e,t,n,i,r,a){const o=ui.get(e);if(!o)return;let l=[];if(t==="clear")l=[...o.values()];else if(n==="length"&&de(e))o.forEach((b,I)=>{(I==="length"||I>=i)&&l.push(b)});else switch(n!==void 0&&l.push(o.get(n)),t){case"add":de(e)?ki(n)&&l.push(o.get("length")):(l.push(o.get(Qt)),gr(e)&&l.push(o.get(ci)));break;case"delete":de(e)||(l.push(o.get(Qt)),gr(e)&&l.push(o.get(ci)));break;case"set":gr(e)&&l.push(o.get(Qt));break}if(l.length===1)l[0]&&di(l[0]);else{const b=[];for(const I of l)I&&b.push(...I);di(Ni(b))}}function di(e,t){for(const n of de(e)?e:[...e])(n!==lt||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const fu=Fi("__proto__,__v_isRef,__isVue"),ja=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(Ui)),cu=ji(),du=ji(!1,!0),hu=ji(!0),Ss=vu();function vu(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=Te(this);for(let a=0,o=this.length;a<o;a++)qe(i,"get",a+"");const r=i[t](...n);return r===-1||r===!1?i[t](...n.map(Te)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){br();const i=Te(this)[t].apply(this,n);return Or(),i}}),e}function ji(e=!1,t=!1){return function(i,r,a){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&a===(e?t?Ru:Va:t?$a:Ha).get(i))return i;const o=de(i);if(!e&&o&&ye(Ss,r))return Reflect.get(Ss,r,a);const l=Reflect.get(i,r,a);return(Ui(r)?ja.has(r):fu(r))||(e||qe(i,"get",r),t)?l:We(l)?!o||!ki(r)?l.value:l:Be(l)?e?za(l):st(l):l}}const gu=Wa(),mu=Wa(!0);function Wa(e=!1){return function(n,i,r,a){let o=n[i];if(Xr(o)&&We(o)&&!We(r))return!1;if(!e&&!Xr(r)&&(Ya(r)||(r=Te(r),o=Te(o)),!de(n)&&We(o)&&!We(r)))return o.value=r,!0;const l=de(n)&&ki(i)?Number(i)<n.length:ye(n,i),b=Reflect.set(n,i,r,a);return n===Te(a)&&(l?Yr(r,o)&&Tt(n,"set",i,r):Tt(n,"add",i,r)),b}}function pu(e,t){const n=ye(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Tt(e,"delete",t,void 0),i}function Eu(e,t){const n=Reflect.has(e,t);return(!Ui(t)||!ja.has(t))&&qe(e,"has",t),n}function yu(e){return qe(e,"iterate",de(e)?"length":Qt),Reflect.ownKeys(e)}const Ga={get:cu,set:gu,deleteProperty:pu,has:Eu,ownKeys:yu},Tu={get:hu,set(e,t){return!0},deleteProperty(e,t){return!0}},xu=je({},Ga,{get:du,set:mu}),Wi=e=>e,Fn=e=>Reflect.getPrototypeOf(e);function nn(e,t,n=!1,i=!1){e=e.__v_raw;const r=Te(e),a=Te(t);t!==a&&!n&&qe(r,"get",t),!n&&qe(r,"get",a);const{has:o}=Fn(r),l=i?Wi:n?$i:Qr;if(o.call(r,t))return l(e.get(t));if(o.call(r,a))return l(e.get(a));e!==r&&e.get(t)}function sn(e,t=!1){const n=this.__v_raw,i=Te(n),r=Te(e);return e!==r&&!t&&qe(i,"has",e),!t&&qe(i,"has",r),e===r?n.has(e):n.has(e)||n.has(r)}function an(e,t=!1){return e=e.__v_raw,!t&&qe(Te(e),"iterate",Qt),Reflect.get(e,"size",e)}function As(e){e=Te(e);const t=Te(this);return Fn(t).has.call(t,e)||(t.add(e),Tt(t,"add",e,e)),this}function Ls(e,t){t=Te(t);const n=Te(this),{has:i,get:r}=Fn(n);let a=i.call(n,e);a||(e=Te(e),a=i.call(n,e));const o=r.call(n,e);return n.set(e,t),a?Yr(t,o)&&Tt(n,"set",e,t):Tt(n,"add",e,t),this}function Ds(e){const t=Te(this),{has:n,get:i}=Fn(t);let r=n.call(t,e);r||(e=Te(e),r=n.call(t,e)),i&&i.call(t,e);const a=t.delete(e);return r&&Tt(t,"delete",e,void 0),a}function _s(){const e=Te(this),t=e.size!==0,n=e.clear();return t&&Tt(e,"clear",void 0,void 0),n}function on(e,t){return function(i,r){const a=this,o=a.__v_raw,l=Te(o),b=t?Wi:e?$i:Qr;return!e&&qe(l,"iterate",Qt),o.forEach((I,T)=>i.call(r,b(I),b(T),a))}}function ln(e,t,n){return function(...i){const r=this.__v_raw,a=Te(r),o=gr(a),l=e==="entries"||e===Symbol.iterator&&o,b=e==="keys"&&o,I=r[e](...i),T=n?Wi:t?$i:Qr;return!t&&qe(a,"iterate",b?ci:Qt),{next(){const{value:A,done:p}=I.next();return p?{value:A,done:p}:{value:l?[T(A[0]),T(A[1])]:T(A),done:p}},[Symbol.iterator](){return this}}}}function St(e){return function(...t){return e==="delete"?!1:this}}function Su(){const e={get(a){return nn(this,a)},get size(){return an(this)},has:sn,add:As,set:Ls,delete:Ds,clear:_s,forEach:on(!1,!1)},t={get(a){return nn(this,a,!1,!0)},get size(){return an(this)},has:sn,add:As,set:Ls,delete:Ds,clear:_s,forEach:on(!1,!0)},n={get(a){return nn(this,a,!0)},get size(){return an(this,!0)},has(a){return sn.call(this,a,!0)},add:St("add"),set:St("set"),delete:St("delete"),clear:St("clear"),forEach:on(!0,!1)},i={get(a){return nn(this,a,!0,!0)},get size(){return an(this,!0)},has(a){return sn.call(this,a,!0)},add:St("add"),set:St("set"),delete:St("delete"),clear:St("clear"),forEach:on(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=ln(a,!1,!1),n[a]=ln(a,!0,!1),t[a]=ln(a,!1,!0),i[a]=ln(a,!0,!0)}),[e,n,t,i]}const[Au,Lu,Du,_u]=Su();function Gi(e,t){const n=t?e?_u:Du:e?Lu:Au;return(i,r,a)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(ye(n,r)&&r in i?n:i,r,a)}const bu={get:Gi(!1,!1)},Ou={get:Gi(!1,!0)},Cu={get:Gi(!0,!1)},Ha=new WeakMap,$a=new WeakMap,Va=new WeakMap,Ru=new WeakMap;function Pu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Iu(e){return e.__v_skip||!Object.isExtensible(e)?0:Pu(ru(e))}function st(e){return Xr(e)?e:Hi(e,!1,Ga,bu,Ha)}function Mu(e){return Hi(e,!1,xu,Ou,$a)}function za(e){return Hi(e,!0,Tu,Cu,Va)}function Hi(e,t,n,i,r){if(!Be(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=r.get(e);if(a)return a;const o=Iu(e);if(o===0)return e;const l=new Proxy(e,o===2?i:n);return r.set(e,l),l}function mr(e){return Xr(e)?mr(e.__v_raw):!!(e&&e.__v_isReactive)}function Xr(e){return!!(e&&e.__v_isReadonly)}function Ya(e){return!!(e&&e.__v_isShallow)}function Xa(e){return mr(e)||Xr(e)}function Te(e){const t=e&&e.__v_raw;return t?Te(t):e}function Qa(e){return En(e,"__v_skip",!0),e}const Qr=e=>Be(e)?st(e):e,$i=e=>Be(e)?za(e):e;function Za(e){Pt&&lt&&(e=Te(e),Ka(e.dep||(e.dep=Ni())))}function Ja(e,t){e=Te(e),e.dep&&di(e.dep)}function We(e){return!!(e&&e.__v_isRef===!0)}function Fu(e){return qa(e,!1)}function wu(e){return qa(e,!0)}function qa(e,t){return We(e)?e:new Bu(e,t)}class Bu{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Te(t),this._value=n?t:Qr(t)}get value(){return Za(this),this._value}set value(t){t=this.__v_isShallow?t:Te(t),Yr(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Qr(t),Ja(this))}}function jr(e){return We(e)?e.value:e}const Uu={get:(e,t,n)=>jr(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return We(r)&&!We(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function eo(e){return mr(e)?e:new Proxy(e,Uu)}class ku{constructor(t,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Ki(t,()=>{this._dirty||(this._dirty=!0,Ja(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=Te(this);return Za(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Nu(e,t,n=!1){let i,r;const a=ge(e);return a?(i=e,r=ut):(i=e.get,r=e.set),new ku(i,r,a||!r,n)}function It(e,t,n,i){let r;try{r=i?e(...i):e()}catch(a){wn(a,t,n)}return r}function nt(e,t,n,i){if(ge(e)){const a=It(e,t,n,i);return a&&Fa(a)&&a.catch(o=>{wn(o,t,n)}),a}const r=[];for(let a=0;a<e.length;a++)r.push(nt(e[a],t,n,i));return r}function wn(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let a=t.parent;const o=t.proxy,l=n;for(;a;){const I=a.ec;if(I){for(let T=0;T<I.length;T++)if(I[T](e,o,l)===!1)return}a=a.parent}const b=t.appContext.config.errorHandler;if(b){It(b,null,10,[e,o,l]);return}}Ku(e,n,r,i)}function Ku(e,t,n,i=!0){console.error(e)}let Tn=!1,hi=!1;const Je=[];let yt=0;const Wr=[];let Nr=null,fr=0;const Gr=[];let _t=null,cr=0;const to=Promise.resolve();let Vi=null,vi=null;function ro(e){const t=Vi||to;return e?t.then(this?e.bind(this):e):t}function ju(e){let t=yt+1,n=Je.length;for(;t<n;){const i=t+n>>>1;Zr(Je[i])<e?t=i+1:n=i}return t}function no(e){(!Je.length||!Je.includes(e,Tn&&e.allowRecurse?yt+1:yt))&&e!==vi&&(e.id==null?Je.push(e):Je.splice(ju(e.id),0,e),io())}function io(){!Tn&&!hi&&(hi=!0,Vi=to.then(oo))}function Wu(e){const t=Je.indexOf(e);t>yt&&Je.splice(t,1)}function so(e,t,n,i){de(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?i+1:i))&&n.push(e),io()}function Gu(e){so(e,Nr,Wr,fr)}function Hu(e){so(e,_t,Gr,cr)}function zi(e,t=null){if(Wr.length){for(vi=t,Nr=[...new Set(Wr)],Wr.length=0,fr=0;fr<Nr.length;fr++)Nr[fr]();Nr=null,fr=0,vi=null,zi(e,t)}}function ao(e){if(Gr.length){const t=[...new Set(Gr)];if(Gr.length=0,_t){_t.push(...t);return}for(_t=t,_t.sort((n,i)=>Zr(n)-Zr(i)),cr=0;cr<_t.length;cr++)_t[cr]();_t=null,cr=0}}const Zr=e=>e.id==null?1/0:e.id;function oo(e){hi=!1,Tn=!0,zi(e),Je.sort((n,i)=>Zr(n)-Zr(i));const t=ut;try{for(yt=0;yt<Je.length;yt++){const n=Je[yt];n&&n.active!==!1&&It(n,null,14)}}finally{yt=0,Je.length=0,ao(),Tn=!1,Vi=null,(Je.length||Wr.length||Gr.length)&&oo(e)}}function $u(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Le;let r=n;const a=t.startsWith("update:"),o=a&&t.slice(7);if(o&&o in i){const T=`${o==="modelValue"?"model":o}Modifiers`,{number:A,trim:p}=i[T]||Le;p?r=n.map(_=>_.trim()):A&&(r=n.map(yn))}let l,b=i[l=Qn(t)]||i[l=Qn(gt(t))];!b&&a&&(b=i[l=Qn(_r(t))]),b&&nt(b,e,6,r);const I=i[l+"Once"];if(I){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,nt(I,e,6,r)}}function lo(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const a=e.emits;let o={},l=!1;if(!ge(e)){const b=I=>{const T=lo(I,t,!0);T&&(l=!0,je(o,T))};!n&&t.mixins.length&&t.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}return!a&&!l?(i.set(e,null),null):(de(a)?a.forEach(b=>o[b]=null):je(o,a),i.set(e,o),o)}function Bn(e,t){return!e||!Rn(t)?!1:(t=t.slice(2).replace(/Once$/,""),ye(e,t[0].toLowerCase()+t.slice(1))||ye(e,_r(t))||ye(e,t))}let He=null,Un=null;function xn(e){const t=He;return He=e,Un=e&&e.type.__scopeId||null,t}function Vu(e){Un=e}function zu(){Un=null}function tt(e,t=He,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Ns(-1);const a=xn(t),o=e(...r);return xn(a),i._d&&Ns(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function Zn(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:a,propsOptions:[o],slots:l,attrs:b,emit:I,render:T,renderCache:A,data:p,setupState:_,ctx:O,inheritAttrs:C}=e;let L,S;const u=xn(e);try{if(n.shapeFlag&4){const c=r||i;L=ht(T.call(c,c,A,a,_,p,O)),S=b}else{const c=t;L=ht(c.length>1?c(a,{attrs:b,slots:l,emit:I}):c(a,null)),S=t.props?b:Yu(b)}}catch(c){$r.length=0,wn(c,e,1),L=Ee(it)}let s=L;if(S&&C!==!1){const c=Object.keys(S),{shapeFlag:h}=s;c.length&&h&7&&(o&&c.some(wi)&&(S=Xu(S,o)),s=er(s,S))}return n.dirs&&(s.dirs=s.dirs?s.dirs.concat(n.dirs):n.dirs),n.transition&&(s.transition=n.transition),L=s,xn(u),L}const Yu=e=>{let t;for(const n in e)(n==="class"||n==="style"||Rn(n))&&((t||(t={}))[n]=e[n]);return t},Xu=(e,t)=>{const n={};for(const i in e)(!wi(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function Qu(e,t,n){const{props:i,children:r,component:a}=e,{props:o,children:l,patchFlag:b}=t,I=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&b>=0){if(b&1024)return!0;if(b&16)return i?bs(i,o,I):!!o;if(b&8){const T=t.dynamicProps;for(let A=0;A<T.length;A++){const p=T[A];if(o[p]!==i[p]&&!Bn(I,p))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?bs(i,o,I):!0:!!o;return!1}function bs(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const a=i[r];if(t[a]!==e[a]&&!Bn(n,a))return!0}return!1}function Zu({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const Ju=e=>e.__isSuspense;function qu(e,t){t&&t.pendingBranch?de(e)?t.effects.push(...e):t.effects.push(e):Hu(e)}function hn(e,t){if(Ke){let n=Ke.provides;const i=Ke.parent&&Ke.parent.provides;i===n&&(n=Ke.provides=Object.create(i)),n[e]=t}}function Mt(e,t,n=!1){const i=Ke||He;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&ge(t)?t.call(i.proxy):t}}const Os={};function pr(e,t,n){return uo(e,t,n)}function uo(e,t,{immediate:n,deep:i,flush:r,onTrack:a,onTrigger:o}=Le){const l=Ke;let b,I=!1,T=!1;if(We(e)?(b=()=>e.value,I=Ya(e)):mr(e)?(b=()=>e,i=!0):de(e)?(T=!0,I=e.some(mr),b=()=>e.map(S=>{if(We(S))return S.value;if(mr(S))return Xt(S);if(ge(S))return It(S,l,2)})):ge(e)?t?b=()=>It(e,l,2):b=()=>{if(!(l&&l.isUnmounted))return A&&A(),nt(e,l,3,[p])}:b=ut,t&&i){const S=b;b=()=>Xt(S())}let A,p=S=>{A=L.onStop=()=>{It(S,l,4)}};if(en)return p=ut,t?n&&nt(t,l,3,[b(),T?[]:void 0,p]):b(),ut;let _=T?[]:Os;const O=()=>{if(!!L.active)if(t){const S=L.run();(i||I||(T?S.some((u,s)=>Yr(u,_[s])):Yr(S,_)))&&(A&&A(),nt(t,l,3,[S,_===Os?void 0:_,p]),_=S)}else L.run()};O.allowRecurse=!!t;let C;r==="sync"?C=O:r==="post"?C=()=>ze(O,l&&l.suspense):C=()=>{!l||l.isMounted?Gu(O):O()};const L=new Ki(b,C);return t?n?O():_=L.run():r==="post"?ze(L.run.bind(L),l&&l.suspense):L.run(),()=>{L.stop(),l&&l.scope&&Bi(l.scope.effects,L)}}function ef(e,t,n){const i=this.proxy,r=we(e)?e.includes(".")?fo(i,e):()=>i[e]:e.bind(i,i);let a;ge(t)?a=t:(a=t.handler,n=t);const o=Ke;Tr(this);const l=uo(r,a.bind(i),n);return o?Tr(o):Jt(),l}function fo(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function Xt(e,t){if(!Be(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),We(e))Xt(e.value,t);else if(de(e))for(let n=0;n<e.length;n++)Xt(e[n],t);else if(Ma(e)||gr(e))e.forEach(n=>{Xt(n,t)});else if(Ba(e))for(const n in e)Xt(e[n],t);return e}function co(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return po(()=>{e.isMounted=!0}),yo(()=>{e.isUnmounting=!0}),e}const et=[Function,Array],tf={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:et,onEnter:et,onAfterEnter:et,onEnterCancelled:et,onBeforeLeave:et,onLeave:et,onAfterLeave:et,onLeaveCancelled:et,onBeforeAppear:et,onAppear:et,onAfterAppear:et,onAppearCancelled:et},setup(e,{slots:t}){const n=Fo(),i=co();let r;return()=>{const a=t.default&&Yi(t.default(),!0);if(!a||!a.length)return;let o=a[0];if(a.length>1){for(const C of a)if(C.type!==it){o=C;break}}const l=Te(e),{mode:b}=l;if(i.isLeaving)return Jn(o);const I=Cs(o);if(!I)return Jn(o);const T=Jr(I,l,i,n);qr(I,T);const A=n.subTree,p=A&&Cs(A);let _=!1;const{getTransitionKey:O}=I.type;if(O){const C=O();r===void 0?r=C:C!==r&&(r=C,_=!0)}if(p&&p.type!==it&&(!zt(I,p)||_)){const C=Jr(p,l,i,n);if(qr(p,C),b==="out-in")return i.isLeaving=!0,C.afterLeave=()=>{i.isLeaving=!1,n.update()},Jn(o);b==="in-out"&&I.type!==it&&(C.delayLeave=(L,S,u)=>{const s=vo(i,p);s[String(p.key)]=p,L._leaveCb=()=>{S(),L._leaveCb=void 0,delete T.delayedLeave},T.delayedLeave=u})}return o}}},ho=tf;function vo(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Jr(e,t,n,i){const{appear:r,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:b,onAfterEnter:I,onEnterCancelled:T,onBeforeLeave:A,onLeave:p,onAfterLeave:_,onLeaveCancelled:O,onBeforeAppear:C,onAppear:L,onAfterAppear:S,onAppearCancelled:u}=t,s=String(e.key),c=vo(n,e),h=(v,f)=>{v&&nt(v,i,9,f)},E={mode:a,persisted:o,beforeEnter(v){let f=l;if(!n.isMounted)if(r)f=C||l;else return;v._leaveCb&&v._leaveCb(!0);const d=c[s];d&&zt(e,d)&&d.el._leaveCb&&d.el._leaveCb(),h(f,[v])},enter(v){let f=b,d=I,P=T;if(!n.isMounted)if(r)f=L||b,d=S||I,P=u||T;else return;let D=!1;const x=v._enterCb=y=>{D||(D=!0,y?h(P,[v]):h(d,[v]),E.delayedLeave&&E.delayedLeave(),v._enterCb=void 0)};f?(f(v,x),f.length<=1&&x()):x()},leave(v,f){const d=String(e.key);if(v._enterCb&&v._enterCb(!0),n.isUnmounting)return f();h(A,[v]);let P=!1;const D=v._leaveCb=x=>{P||(P=!0,f(),x?h(O,[v]):h(_,[v]),v._leaveCb=void 0,c[d]===e&&delete c[d])};c[d]=e,p?(p(v,D),p.length<=1&&D()):D()},clone(v){return Jr(v,t,n,i)}};return E}function Jn(e){if(kn(e))return e=er(e),e.children=null,e}function Cs(e){return kn(e)?e.children?e.children[0]:void 0:e}function qr(e,t){e.shapeFlag&6&&e.component?qr(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Yi(e,t=!1,n){let i=[],r=0;for(let a=0;a<e.length;a++){let o=e[a];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:a);o.type===Me?(o.patchFlag&128&&r++,i=i.concat(Yi(o.children,t,l))):(t||o.type!==it)&&i.push(l!=null?er(o,{key:l}):o)}if(r>1)for(let a=0;a<i.length;a++)i[a].patchFlag=-2;return i}function go(e){return ge(e)?{setup:e,name:e.name}:e}const Sn=e=>!!e.type.__asyncLoader,kn=e=>e.type.__isKeepAlive;function rf(e,t){mo(e,"a",t)}function nf(e,t){mo(e,"da",t)}function mo(e,t,n=Ke){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Nn(t,i,n),n){let r=n.parent;for(;r&&r.parent;)kn(r.parent.vnode)&&sf(i,t,n,r),r=r.parent}}function sf(e,t,n,i){const r=Nn(t,e,i,!0);To(()=>{Bi(i[t],r)},n)}function Nn(e,t,n=Ke,i=!1){if(n){const r=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;br(),Tr(n);const l=nt(t,n,e,o);return Jt(),Or(),l});return i?r.unshift(a):r.push(a),a}}const xt=e=>(t,n=Ke)=>(!en||e==="sp")&&Nn(e,t,n),af=xt("bm"),po=xt("m"),of=xt("bu"),Eo=xt("u"),yo=xt("bum"),To=xt("um"),lf=xt("sp"),uf=xt("rtg"),ff=xt("rtc");function cf(e,t=Ke){Nn("ec",e,t)}let gi=!0;function df(e){const t=So(e),n=e.proxy,i=e.ctx;gi=!1,t.beforeCreate&&Rs(t.beforeCreate,e,"bc");const{data:r,computed:a,methods:o,watch:l,provide:b,inject:I,created:T,beforeMount:A,mounted:p,beforeUpdate:_,updated:O,activated:C,deactivated:L,beforeDestroy:S,beforeUnmount:u,destroyed:s,unmounted:c,render:h,renderTracked:E,renderTriggered:v,errorCaptured:f,serverPrefetch:d,expose:P,inheritAttrs:D,components:x,directives:y,filters:g}=t;if(I&&hf(I,i,null,e.appContext.config.unwrapInjectedRef),o)for(const M in o){const F=o[M];ge(F)&&(i[M]=F.bind(n))}if(r){const M=r.call(n,n);Be(M)&&(e.data=st(M))}if(gi=!0,a)for(const M in a){const F=a[M],w=ge(F)?F.bind(n,n):ge(F.get)?F.get.bind(n,n):ut,U=!ge(F)&&ge(F.set)?F.set.bind(n):ut,B=vt({get:w,set:U});Object.defineProperty(i,M,{enumerable:!0,configurable:!0,get:()=>B.value,set:k=>B.value=k})}if(l)for(const M in l)xo(l[M],i,n,M);if(b){const M=ge(b)?b.call(n):b;Reflect.ownKeys(M).forEach(F=>{hn(F,M[F])})}T&&Rs(T,e,"c");function R(M,F){de(F)?F.forEach(w=>M(w.bind(n))):F&&M(F.bind(n))}if(R(af,A),R(po,p),R(of,_),R(Eo,O),R(rf,C),R(nf,L),R(cf,f),R(ff,E),R(uf,v),R(yo,u),R(To,c),R(lf,d),de(P))if(P.length){const M=e.exposed||(e.exposed={});P.forEach(F=>{Object.defineProperty(M,F,{get:()=>n[F],set:w=>n[F]=w})})}else e.exposed||(e.exposed={});h&&e.render===ut&&(e.render=h),D!=null&&(e.inheritAttrs=D),x&&(e.components=x),y&&(e.directives=y)}function hf(e,t,n=ut,i=!1){de(e)&&(e=mi(e));for(const r in e){const a=e[r];let o;Be(a)?"default"in a?o=Mt(a.from||r,a.default,!0):o=Mt(a.from||r):o=Mt(a),We(o)&&i?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:l=>o.value=l}):t[r]=o}}function Rs(e,t,n){nt(de(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function xo(e,t,n,i){const r=i.includes(".")?fo(n,i):()=>n[i];if(we(e)){const a=t[e];ge(a)&&pr(r,a)}else if(ge(e))pr(r,e.bind(n));else if(Be(e))if(de(e))e.forEach(a=>xo(a,t,n,i));else{const a=ge(e.handler)?e.handler.bind(n):t[e.handler];ge(a)&&pr(r,a,e)}}function So(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,l=a.get(t);let b;return l?b=l:!r.length&&!n&&!i?b=t:(b={},r.length&&r.forEach(I=>An(b,I,o,!0)),An(b,t,o)),a.set(t,b),b}function An(e,t,n,i=!1){const{mixins:r,extends:a}=t;a&&An(e,a,n,!0),r&&r.forEach(o=>An(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const l=vf[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const vf={data:Ps,props:$t,emits:$t,methods:$t,computed:$t,beforeCreate:$e,created:$e,beforeMount:$e,mounted:$e,beforeUpdate:$e,updated:$e,beforeDestroy:$e,beforeUnmount:$e,destroyed:$e,unmounted:$e,activated:$e,deactivated:$e,errorCaptured:$e,serverPrefetch:$e,components:$t,directives:$t,watch:mf,provide:Ps,inject:gf};function Ps(e,t){return t?e?function(){return je(ge(e)?e.call(this,this):e,ge(t)?t.call(this,this):t)}:t:e}function gf(e,t){return $t(mi(e),mi(t))}function mi(e){if(de(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function $e(e,t){return e?[...new Set([].concat(e,t))]:t}function $t(e,t){return e?je(je(Object.create(null),e),t):t}function mf(e,t){if(!e)return t;if(!t)return e;const n=je(Object.create(null),e);for(const i in t)n[i]=$e(e[i],t[i]);return n}function pf(e,t,n,i=!1){const r={},a={};En(a,Kn,1),e.propsDefaults=Object.create(null),Ao(e,t,r,a);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:Mu(r):e.type.props?e.props=r:e.props=a,e.attrs=a}function Ef(e,t,n,i){const{props:r,attrs:a,vnode:{patchFlag:o}}=e,l=Te(r),[b]=e.propsOptions;let I=!1;if((i||o>0)&&!(o&16)){if(o&8){const T=e.vnode.dynamicProps;for(let A=0;A<T.length;A++){let p=T[A];if(Bn(e.emitsOptions,p))continue;const _=t[p];if(b)if(ye(a,p))_!==a[p]&&(a[p]=_,I=!0);else{const O=gt(p);r[O]=pi(b,l,O,_,e,!1)}else _!==a[p]&&(a[p]=_,I=!0)}}}else{Ao(e,t,r,a)&&(I=!0);let T;for(const A in l)(!t||!ye(t,A)&&((T=_r(A))===A||!ye(t,T)))&&(b?n&&(n[A]!==void 0||n[T]!==void 0)&&(r[A]=pi(b,l,A,void 0,e,!0)):delete r[A]);if(a!==l)for(const A in a)(!t||!ye(t,A)&&!0)&&(delete a[A],I=!0)}I&&Tt(e,"set","$attrs")}function Ao(e,t,n,i){const[r,a]=e.propsOptions;let o=!1,l;if(t)for(let b in t){if(cn(b))continue;const I=t[b];let T;r&&ye(r,T=gt(b))?!a||!a.includes(T)?n[T]=I:(l||(l={}))[T]=I:Bn(e.emitsOptions,b)||(!(b in i)||I!==i[b])&&(i[b]=I,o=!0)}if(a){const b=Te(n),I=l||Le;for(let T=0;T<a.length;T++){const A=a[T];n[A]=pi(r,b,A,I[A],e,!ye(I,A))}}return o}function pi(e,t,n,i,r,a){const o=e[n];if(o!=null){const l=ye(o,"default");if(l&&i===void 0){const b=o.default;if(o.type!==Function&&ge(b)){const{propsDefaults:I}=r;n in I?i=I[n]:(Tr(r),i=I[n]=b.call(null,t),Jt())}else i=b}o[0]&&(a&&!l?i=!1:o[1]&&(i===""||i===_r(n))&&(i=!0))}return i}function Lo(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const a=e.props,o={},l=[];let b=!1;if(!ge(e)){const T=A=>{b=!0;const[p,_]=Lo(A,t,!0);je(o,p),_&&l.push(..._)};!n&&t.mixins.length&&t.mixins.forEach(T),e.extends&&T(e.extends),e.mixins&&e.mixins.forEach(T)}if(!a&&!b)return i.set(e,vr),vr;if(de(a))for(let T=0;T<a.length;T++){const A=gt(a[T]);Is(A)&&(o[A]=Le)}else if(a)for(const T in a){const A=gt(T);if(Is(A)){const p=a[T],_=o[A]=de(p)||ge(p)?{type:p}:p;if(_){const O=ws(Boolean,_.type),C=ws(String,_.type);_[0]=O>-1,_[1]=C<0||O<C,(O>-1||ye(_,"default"))&&l.push(A)}}}const I=[o,l];return i.set(e,I),I}function Is(e){return e[0]!=="$"}function Ms(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Fs(e,t){return Ms(e)===Ms(t)}function ws(e,t){return de(t)?t.findIndex(n=>Fs(n,e)):ge(t)&&Fs(t,e)?0:-1}const Do=e=>e[0]==="_"||e==="$stable",Xi=e=>de(e)?e.map(ht):[ht(e)],yf=(e,t,n)=>{const i=tt((...r)=>Xi(t(...r)),n);return i._c=!1,i},_o=(e,t,n)=>{const i=e._ctx;for(const r in e){if(Do(r))continue;const a=e[r];if(ge(a))t[r]=yf(r,a,i);else if(a!=null){const o=Xi(a);t[r]=()=>o}}},bo=(e,t)=>{const n=Xi(t);e.slots.default=()=>n},Tf=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Te(t),En(t,"_",n)):_o(t,e.slots={})}else e.slots={},t&&bo(e,t);En(e.slots,Kn,1)},xf=(e,t,n)=>{const{vnode:i,slots:r}=e;let a=!0,o=Le;if(i.shapeFlag&32){const l=t._;l?n&&l===1?a=!1:(je(r,t),!n&&l===1&&delete r._):(a=!t.$stable,_o(t,r)),o=t}else t&&(bo(e,t),o={default:1});if(a)for(const l in r)!Do(l)&&!(l in o)&&delete r[l]};function Ft(e,t){const n=He;if(n===null)return e;const i=jn(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[o,l,b,I=Le]=t[a];ge(o)&&(o={mounted:o,updated:o}),o.deep&&Xt(l),r.push({dir:o,instance:i,value:l,oldValue:void 0,arg:b,modifiers:I})}return e}function Wt(e,t,n,i){const r=e.dirs,a=t&&t.dirs;for(let o=0;o<r.length;o++){const l=r[o];a&&(l.oldValue=a[o].value);let b=l.dir[i];b&&(br(),nt(b,n,8,[e.el,l,e,t]),Or())}}function Oo(){return{app:null,config:{isNativeTag:ql,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sf=0;function Af(e,t){return function(i,r=null){ge(i)||(i=Object.assign({},i)),r!=null&&!Be(r)&&(r=null);const a=Oo(),o=new Set;let l=!1;const b=a.app={_uid:Sf++,_component:i,_props:r,_container:null,_context:a,_instance:null,version:$f,get config(){return a.config},set config(I){},use(I,...T){return o.has(I)||(I&&ge(I.install)?(o.add(I),I.install(b,...T)):ge(I)&&(o.add(I),I(b,...T))),b},mixin(I){return a.mixins.includes(I)||a.mixins.push(I),b},component(I,T){return T?(a.components[I]=T,b):a.components[I]},directive(I,T){return T?(a.directives[I]=T,b):a.directives[I]},mount(I,T,A){if(!l){const p=Ee(i,r);return p.appContext=a,T&&t?t(p,I):e(p,I,A),l=!0,b._container=I,I.__vue_app__=b,jn(p.component)||p.component.proxy}},unmount(){l&&(e(null,b._container),delete b._container.__vue_app__)},provide(I,T){return a.provides[I]=T,b}};return b}}function Ei(e,t,n,i,r=!1){if(de(e)){e.forEach((p,_)=>Ei(p,t&&(de(t)?t[_]:t),n,i,r));return}if(Sn(i)&&!r)return;const a=i.shapeFlag&4?jn(i.component)||i.component.proxy:i.el,o=r?null:a,{i:l,r:b}=e,I=t&&t.r,T=l.refs===Le?l.refs={}:l.refs,A=l.setupState;if(I!=null&&I!==b&&(we(I)?(T[I]=null,ye(A,I)&&(A[I]=null)):We(I)&&(I.value=null)),ge(b))It(b,l,12,[o,T]);else{const p=we(b),_=We(b);if(p||_){const O=()=>{if(e.f){const C=p?T[b]:b.value;r?de(C)&&Bi(C,a):de(C)?C.includes(a)||C.push(a):p?(T[b]=[a],ye(A,b)&&(A[b]=T[b])):(b.value=[a],e.k&&(T[e.k]=b.value))}else p?(T[b]=o,ye(A,b)&&(A[b]=o)):We(b)&&(b.value=o,e.k&&(T[e.k]=o))};o?(O.id=-1,ze(O,n)):O()}}}const ze=qu;function Lf(e){return Df(e)}function Df(e,t){const n=su();n.__VUE__=!0;const{insert:i,remove:r,patchProp:a,createElement:o,createText:l,createComment:b,setText:I,setElementText:T,parentNode:A,nextSibling:p,setScopeId:_=ut,cloneNode:O,insertStaticContent:C}=e,L=(K,W,V,Q=null,Y=null,Z=null,ne=!1,q=null,re=!!W.dynamicChildren)=>{if(K===W)return;K&&!zt(K,W)&&(Q=z(K),j(K,Y,Z,!0),K=null),W.patchFlag===-2&&(re=!1,W.dynamicChildren=null);const{type:J,ref:le,shapeFlag:oe}=W;switch(J){case Ji:S(K,W,V,Q);break;case it:u(K,W,V,Q);break;case vn:K==null&&s(W,V,Q,ne);break;case Me:y(K,W,V,Q,Y,Z,ne,q,re);break;default:oe&1?E(K,W,V,Q,Y,Z,ne,q,re):oe&6?g(K,W,V,Q,Y,Z,ne,q,re):(oe&64||oe&128)&&J.process(K,W,V,Q,Y,Z,ne,q,re,X)}le!=null&&Y&&Ei(le,K&&K.ref,Z,W||K,!W)},S=(K,W,V,Q)=>{if(K==null)i(W.el=l(W.children),V,Q);else{const Y=W.el=K.el;W.children!==K.children&&I(Y,W.children)}},u=(K,W,V,Q)=>{K==null?i(W.el=b(W.children||""),V,Q):W.el=K.el},s=(K,W,V,Q)=>{[K.el,K.anchor]=C(K.children,W,V,Q,K.el,K.anchor)},c=({el:K,anchor:W},V,Q)=>{let Y;for(;K&&K!==W;)Y=p(K),i(K,V,Q),K=Y;i(W,V,Q)},h=({el:K,anchor:W})=>{let V;for(;K&&K!==W;)V=p(K),r(K),K=V;r(W)},E=(K,W,V,Q,Y,Z,ne,q,re)=>{ne=ne||W.type==="svg",K==null?v(W,V,Q,Y,Z,ne,q,re):P(K,W,Y,Z,ne,q,re)},v=(K,W,V,Q,Y,Z,ne,q)=>{let re,J;const{type:le,props:oe,shapeFlag:ue,transition:ce,patchFlag:ve,dirs:me}=K;if(K.el&&O!==void 0&&ve===-1)re=K.el=O(K.el);else{if(re=K.el=o(K.type,Z,oe&&oe.is,oe),ue&8?T(re,K.children):ue&16&&d(K.children,re,null,Q,Y,Z&&le!=="foreignObject",ne,q),me&&Wt(K,null,Q,"created"),oe){for(const pe in oe)pe!=="value"&&!cn(pe)&&a(re,pe,null,oe[pe],Z,K.children,Q,Y,$);"value"in oe&&a(re,"value",null,oe.value),(J=oe.onVnodeBeforeMount)&&ct(J,Q,K)}f(re,K,K.scopeId,ne,Q)}me&&Wt(K,null,Q,"beforeMount");const he=(!Y||Y&&!Y.pendingBranch)&&ce&&!ce.persisted;he&&ce.beforeEnter(re),i(re,W,V),((J=oe&&oe.onVnodeMounted)||he||me)&&ze(()=>{J&&ct(J,Q,K),he&&ce.enter(re),me&&Wt(K,null,Q,"mounted")},Y)},f=(K,W,V,Q,Y)=>{if(V&&_(K,V),Q)for(let Z=0;Z<Q.length;Z++)_(K,Q[Z]);if(Y){let Z=Y.subTree;if(W===Z){const ne=Y.vnode;f(K,ne,ne.scopeId,ne.slotScopeIds,Y.parent)}}},d=(K,W,V,Q,Y,Z,ne,q,re=0)=>{for(let J=re;J<K.length;J++){const le=K[J]=q?bt(K[J]):ht(K[J]);L(null,le,W,V,Q,Y,Z,ne,q)}},P=(K,W,V,Q,Y,Z,ne)=>{const q=W.el=K.el;let{patchFlag:re,dynamicChildren:J,dirs:le}=W;re|=K.patchFlag&16;const oe=K.props||Le,ue=W.props||Le;let ce;V&&Gt(V,!1),(ce=ue.onVnodeBeforeUpdate)&&ct(ce,V,W,K),le&&Wt(W,K,V,"beforeUpdate"),V&&Gt(V,!0);const ve=Y&&W.type!=="foreignObject";if(J?D(K.dynamicChildren,J,q,V,Q,ve,Z):ne||w(K,W,q,null,V,Q,ve,Z,!1),re>0){if(re&16)x(q,W,oe,ue,V,Q,Y);else if(re&2&&oe.class!==ue.class&&a(q,"class",null,ue.class,Y),re&4&&a(q,"style",oe.style,ue.style,Y),re&8){const me=W.dynamicProps;for(let he=0;he<me.length;he++){const pe=me[he],be=oe[pe],Ue=ue[pe];(Ue!==be||pe==="value")&&a(q,pe,be,Ue,Y,K.children,V,Q,$)}}re&1&&K.children!==W.children&&T(q,W.children)}else!ne&&J==null&&x(q,W,oe,ue,V,Q,Y);((ce=ue.onVnodeUpdated)||le)&&ze(()=>{ce&&ct(ce,V,W,K),le&&Wt(W,K,V,"updated")},Q)},D=(K,W,V,Q,Y,Z,ne)=>{for(let q=0;q<W.length;q++){const re=K[q],J=W[q],le=re.el&&(re.type===Me||!zt(re,J)||re.shapeFlag&70)?A(re.el):V;L(re,J,le,null,Q,Y,Z,ne,!0)}},x=(K,W,V,Q,Y,Z,ne)=>{if(V!==Q){for(const q in Q){if(cn(q))continue;const re=Q[q],J=V[q];re!==J&&q!=="value"&&a(K,q,J,re,ne,W.children,Y,Z,$)}if(V!==Le)for(const q in V)!cn(q)&&!(q in Q)&&a(K,q,V[q],null,ne,W.children,Y,Z,$);"value"in Q&&a(K,"value",V.value,Q.value)}},y=(K,W,V,Q,Y,Z,ne,q,re)=>{const J=W.el=K?K.el:l(""),le=W.anchor=K?K.anchor:l("");let{patchFlag:oe,dynamicChildren:ue,slotScopeIds:ce}=W;ce&&(q=q?q.concat(ce):ce),K==null?(i(J,V,Q),i(le,V,Q),d(W.children,V,le,Y,Z,ne,q,re)):oe>0&&oe&64&&ue&&K.dynamicChildren?(D(K.dynamicChildren,ue,V,Y,Z,ne,q),(W.key!=null||Y&&W===Y.subTree)&&Qi(K,W,!0)):w(K,W,V,le,Y,Z,ne,q,re)},g=(K,W,V,Q,Y,Z,ne,q,re)=>{W.slotScopeIds=q,K==null?W.shapeFlag&512?Y.ctx.activate(W,V,Q,ne,re):m(W,V,Q,Y,Z,ne,re):R(K,W,re)},m=(K,W,V,Q,Y,Z,ne)=>{const q=K.component=kf(K,Q,Y);if(kn(K)&&(q.ctx.renderer=X),Nf(q),q.asyncDep){if(Y&&Y.registerDep(q,M),!K.el){const re=q.subTree=Ee(it);u(null,re,W,V)}return}M(q,K,W,V,Y,Z,ne)},R=(K,W,V)=>{const Q=W.component=K.component;if(Qu(K,W,V))if(Q.asyncDep&&!Q.asyncResolved){F(Q,W,V);return}else Q.next=W,Wu(Q.update),Q.update();else W.component=K.component,W.el=K.el,Q.vnode=W},M=(K,W,V,Q,Y,Z,ne)=>{const q=()=>{if(K.isMounted){let{next:le,bu:oe,u:ue,parent:ce,vnode:ve}=K,me=le,he;Gt(K,!1),le?(le.el=ve.el,F(K,le,ne)):le=ve,oe&&dn(oe),(he=le.props&&le.props.onVnodeBeforeUpdate)&&ct(he,ce,le,ve),Gt(K,!0);const pe=Zn(K),be=K.subTree;K.subTree=pe,L(be,pe,A(be.el),z(be),K,Y,Z),le.el=pe.el,me===null&&Zu(K,pe.el),ue&&ze(ue,Y),(he=le.props&&le.props.onVnodeUpdated)&&ze(()=>ct(he,ce,le,ve),Y)}else{let le;const{el:oe,props:ue}=W,{bm:ce,m:ve,parent:me}=K,he=Sn(W);if(Gt(K,!1),ce&&dn(ce),!he&&(le=ue&&ue.onVnodeBeforeMount)&&ct(le,me,W),Gt(K,!0),oe&&se){const pe=()=>{K.subTree=Zn(K),se(oe,K.subTree,K,Y,null)};he?W.type.__asyncLoader().then(()=>!K.isUnmounted&&pe()):pe()}else{const pe=K.subTree=Zn(K);L(null,pe,V,Q,K,Y,Z),W.el=pe.el}if(ve&&ze(ve,Y),!he&&(le=ue&&ue.onVnodeMounted)){const pe=W;ze(()=>ct(le,me,pe),Y)}W.shapeFlag&256&&K.a&&ze(K.a,Y),K.isMounted=!0,W=V=Q=null}},re=K.effect=new Ki(q,()=>no(K.update),K.scope),J=K.update=re.run.bind(re);J.id=K.uid,Gt(K,!0),J()},F=(K,W,V)=>{W.component=K;const Q=K.vnode.props;K.vnode=W,K.next=null,Ef(K,W.props,Q,V),xf(K,W.children,V),br(),zi(void 0,K.update),Or()},w=(K,W,V,Q,Y,Z,ne,q,re=!1)=>{const J=K&&K.children,le=K?K.shapeFlag:0,oe=W.children,{patchFlag:ue,shapeFlag:ce}=W;if(ue>0){if(ue&128){B(J,oe,V,Q,Y,Z,ne,q,re);return}else if(ue&256){U(J,oe,V,Q,Y,Z,ne,q,re);return}}ce&8?(le&16&&$(J,Y,Z),oe!==J&&T(V,oe)):le&16?ce&16?B(J,oe,V,Q,Y,Z,ne,q,re):$(J,Y,Z,!0):(le&8&&T(V,""),ce&16&&d(oe,V,Q,Y,Z,ne,q,re))},U=(K,W,V,Q,Y,Z,ne,q,re)=>{K=K||vr,W=W||vr;const J=K.length,le=W.length,oe=Math.min(J,le);let ue;for(ue=0;ue<oe;ue++){const ce=W[ue]=re?bt(W[ue]):ht(W[ue]);L(K[ue],ce,V,null,Y,Z,ne,q,re)}J>le?$(K,Y,Z,!0,!1,oe):d(W,V,Q,Y,Z,ne,q,re,oe)},B=(K,W,V,Q,Y,Z,ne,q,re)=>{let J=0;const le=W.length;let oe=K.length-1,ue=le-1;for(;J<=oe&&J<=ue;){const ce=K[J],ve=W[J]=re?bt(W[J]):ht(W[J]);if(zt(ce,ve))L(ce,ve,V,null,Y,Z,ne,q,re);else break;J++}for(;J<=oe&&J<=ue;){const ce=K[oe],ve=W[ue]=re?bt(W[ue]):ht(W[ue]);if(zt(ce,ve))L(ce,ve,V,null,Y,Z,ne,q,re);else break;oe--,ue--}if(J>oe){if(J<=ue){const ce=ue+1,ve=ce<le?W[ce].el:Q;for(;J<=ue;)L(null,W[J]=re?bt(W[J]):ht(W[J]),V,ve,Y,Z,ne,q,re),J++}}else if(J>ue)for(;J<=oe;)j(K[J],Y,Z,!0),J++;else{const ce=J,ve=J,me=new Map;for(J=ve;J<=ue;J++){const Se=W[J]=re?bt(W[J]):ht(W[J]);Se.key!=null&&me.set(Se.key,J)}let he,pe=0;const be=ue-ve+1;let Ue=!1,Oe=0;const Re=new Array(be);for(J=0;J<be;J++)Re[J]=0;for(J=ce;J<=oe;J++){const Se=K[J];if(pe>=be){j(Se,Y,Z,!0);continue}let Pe;if(Se.key!=null)Pe=me.get(Se.key);else for(he=ve;he<=ue;he++)if(Re[he-ve]===0&&zt(Se,W[he])){Pe=he;break}Pe===void 0?j(Se,Y,Z,!0):(Re[Pe-ve]=J+1,Pe>=Oe?Oe=Pe:Ue=!0,L(Se,W[Pe],V,null,Y,Z,ne,q,re),pe++)}const ke=Ue?_f(Re):vr;for(he=ke.length-1,J=be-1;J>=0;J--){const Se=ve+J,Pe=W[Se],Ie=Se+1<le?W[Se+1].el:Q;Re[J]===0?L(null,Pe,V,Ie,Y,Z,ne,q,re):Ue&&(he<0||J!==ke[he]?k(Pe,V,Ie,2):he--)}}},k=(K,W,V,Q,Y=null)=>{const{el:Z,type:ne,transition:q,children:re,shapeFlag:J}=K;if(J&6){k(K.component.subTree,W,V,Q);return}if(J&128){K.suspense.move(W,V,Q);return}if(J&64){ne.move(K,W,V,X);return}if(ne===Me){i(Z,W,V);for(let oe=0;oe<re.length;oe++)k(re[oe],W,V,Q);i(K.anchor,W,V);return}if(ne===vn){c(K,W,V);return}if(Q!==2&&J&1&&q)if(Q===0)q.beforeEnter(Z),i(Z,W,V),ze(()=>q.enter(Z),Y);else{const{leave:oe,delayLeave:ue,afterLeave:ce}=q,ve=()=>i(Z,W,V),me=()=>{oe(Z,()=>{ve(),ce&&ce()})};ue?ue(Z,ve,me):me()}else i(Z,W,V)},j=(K,W,V,Q=!1,Y=!1)=>{const{type:Z,props:ne,ref:q,children:re,dynamicChildren:J,shapeFlag:le,patchFlag:oe,dirs:ue}=K;if(q!=null&&Ei(q,null,V,K,!0),le&256){W.ctx.deactivate(K);return}const ce=le&1&&ue,ve=!Sn(K);let me;if(ve&&(me=ne&&ne.onVnodeBeforeUnmount)&&ct(me,W,K),le&6)H(K.component,V,Q);else{if(le&128){K.suspense.unmount(V,Q);return}ce&&Wt(K,null,W,"beforeUnmount"),le&64?K.type.remove(K,W,V,Y,X,Q):J&&(Z!==Me||oe>0&&oe&64)?$(J,W,V,!1,!0):(Z===Me&&oe&384||!Y&&le&16)&&$(re,W,V),Q&&G(K)}(ve&&(me=ne&&ne.onVnodeUnmounted)||ce)&&ze(()=>{me&&ct(me,W,K),ce&&Wt(K,null,W,"unmounted")},V)},G=K=>{const{type:W,el:V,anchor:Q,transition:Y}=K;if(W===Me){N(V,Q);return}if(W===vn){h(K);return}const Z=()=>{r(V),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(K.shapeFlag&1&&Y&&!Y.persisted){const{leave:ne,delayLeave:q}=Y,re=()=>ne(V,Z);q?q(K.el,Z,re):re()}else Z()},N=(K,W)=>{let V;for(;K!==W;)V=p(K),r(K),K=V;r(W)},H=(K,W,V)=>{const{bum:Q,scope:Y,update:Z,subTree:ne,um:q}=K;Q&&dn(Q),Y.stop(),Z&&(Z.active=!1,j(ne,K,W,V)),q&&ze(q,W),ze(()=>{K.isUnmounted=!0},W),W&&W.pendingBranch&&!W.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===W.pendingId&&(W.deps--,W.deps===0&&W.resolve())},$=(K,W,V,Q=!1,Y=!1,Z=0)=>{for(let ne=Z;ne<K.length;ne++)j(K[ne],W,V,Q,Y)},z=K=>K.shapeFlag&6?z(K.component.subTree):K.shapeFlag&128?K.suspense.next():p(K.anchor||K.el),ee=(K,W,V)=>{K==null?W._vnode&&j(W._vnode,null,null,!0):L(W._vnode||null,K,W,null,null,null,V),ao(),W._vnode=K},X={p:L,um:j,m:k,r:G,mt:m,mc:d,pc:w,pbc:D,n:z,o:e};let te,se;return t&&([te,se]=t(X)),{render:ee,hydrate:te,createApp:Af(ee,te)}}function Gt({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Qi(e,t,n=!1){const i=e.children,r=t.children;if(de(i)&&de(r))for(let a=0;a<i.length;a++){const o=i[a];let l=r[a];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[a]=bt(r[a]),l.el=o.el),n||Qi(o,l))}}function _f(e){const t=e.slice(),n=[0];let i,r,a,o,l;const b=e.length;for(i=0;i<b;i++){const I=e[i];if(I!==0){if(r=n[n.length-1],e[r]<I){t[i]=r,n.push(i);continue}for(a=0,o=n.length-1;a<o;)l=a+o>>1,e[n[l]]<I?a=l+1:o=l;I<e[n[a]]&&(a>0&&(t[i]=n[a-1]),n[a]=i)}}for(a=n.length,o=n[a-1];a-- >0;)n[a]=o,o=t[o];return n}const bf=e=>e.__isTeleport,Hr=e=>e&&(e.disabled||e.disabled===""),Bs=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,yi=(e,t)=>{const n=e&&e.to;return we(n)?t?t(n):null:n},Of={__isTeleport:!0,process(e,t,n,i,r,a,o,l,b,I){const{mc:T,pc:A,pbc:p,o:{insert:_,querySelector:O,createText:C,createComment:L}}=I,S=Hr(t.props);let{shapeFlag:u,children:s,dynamicChildren:c}=t;if(e==null){const h=t.el=C(""),E=t.anchor=C("");_(h,n,i),_(E,n,i);const v=t.target=yi(t.props,O),f=t.targetAnchor=C("");v&&(_(f,v),o=o||Bs(v));const d=(P,D)=>{u&16&&T(s,P,D,r,a,o,l,b)};S?d(n,E):v&&d(v,f)}else{t.el=e.el;const h=t.anchor=e.anchor,E=t.target=e.target,v=t.targetAnchor=e.targetAnchor,f=Hr(e.props),d=f?n:E,P=f?h:v;if(o=o||Bs(E),c?(p(e.dynamicChildren,c,d,r,a,o,l),Qi(e,t,!0)):b||A(e,t,d,P,r,a,o,l,!1),S)f||un(t,n,h,I,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const D=t.target=yi(t.props,O);D&&un(t,D,null,I,0)}else f&&un(t,E,v,I,1)}},remove(e,t,n,i,{um:r,o:{remove:a}},o){const{shapeFlag:l,children:b,anchor:I,targetAnchor:T,target:A,props:p}=e;if(A&&a(T),(o||!Hr(p))&&(a(I),l&16))for(let _=0;_<b.length;_++){const O=b[_];r(O,t,n,!0,!!O.dynamicChildren)}},move:un,hydrate:Cf};function un(e,t,n,{o:{insert:i},m:r},a=2){a===0&&i(e.targetAnchor,t,n);const{el:o,anchor:l,shapeFlag:b,children:I,props:T}=e,A=a===2;if(A&&i(o,t,n),(!A||Hr(T))&&b&16)for(let p=0;p<I.length;p++)r(I[p],t,n,2);A&&i(l,t,n)}function Cf(e,t,n,i,r,a,{o:{nextSibling:o,parentNode:l,querySelector:b}},I){const T=t.target=yi(t.props,b);if(T){const A=T._lpa||T.firstChild;t.shapeFlag&16&&(Hr(t.props)?(t.anchor=I(o(e),t,l(e),n,i,r,a),t.targetAnchor=A):(t.anchor=o(e),t.targetAnchor=I(A,t,T,n,i,r,a)),T._lpa=t.targetAnchor&&o(t.targetAnchor))}return t.anchor&&o(t.anchor)}const Us=Of,Zi="components";function Ce(e,t){return Ro(Zi,e,!0,t)||e}const Co=Symbol();function Rf(e){return we(e)?Ro(Zi,e,!1)||e:e||Co}function Ro(e,t,n=!0,i=!1){const r=He||Ke;if(r){const a=r.type;if(e===Zi){const l=Gf(a);if(l&&(l===t||l===gt(t)||l===Mn(gt(t))))return a}const o=ks(r[e]||a[e],t)||ks(r.appContext[e],t);return!o&&i?a:o}}function ks(e,t){return e&&(e[t]||e[gt(t)]||e[Mn(gt(t))])}const Me=Symbol(void 0),Ji=Symbol(void 0),it=Symbol(void 0),vn=Symbol(void 0),$r=[];let Zt=null;function ae(e=!1){$r.push(Zt=e?null:[])}function Pf(){$r.pop(),Zt=$r[$r.length-1]||null}let Ln=1;function Ns(e){Ln+=e}function Po(e){return e.dynamicChildren=Ln>0?Zt||vr:null,Pf(),Ln>0&&Zt&&Zt.push(e),e}function fe(e,t,n,i,r,a){return Po(ie(e,t,n,i,r,a,!0))}function Ye(e,t,n,i,r){return Po(Ee(e,t,n,i,r,!0))}function Dn(e){return e?e.__v_isVNode===!0:!1}function zt(e,t){return e.type===t.type&&e.key===t.key}const Kn="__vInternal",Io=({key:e})=>e!=null?e:null,gn=({ref:e,ref_key:t,ref_for:n})=>e!=null?we(e)||We(e)||ge(e)?{i:He,r:e,k:t,f:!!n}:e:null;function ie(e,t=null,n=null,i=0,r=null,a=e===Me?0:1,o=!1,l=!1){const b={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Io(t),ref:t&&gn(t),scopeId:Un,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null};return l?(qi(b,n),a&128&&e.normalize(b)):n&&(b.shapeFlag|=we(n)?8:16),Ln>0&&!o&&Zt&&(b.patchFlag>0||a&6)&&b.patchFlag!==32&&Zt.push(b),b}const Ee=If;function If(e,t=null,n=null,i=0,r=null,a=!1){if((!e||e===Co)&&(e=it),Dn(e)){const l=er(e,t,!0);return n&&qi(l,n),l}if(Hf(e)&&(e=e.__vccOpts),t){t=Mf(t);let{class:l,style:b}=t;l&&!we(l)&&(t.class=De(l)),Be(b)&&(Xa(b)&&!de(b)&&(b=je({},b)),t.style=qt(b))}const o=we(e)?1:Ju(e)?128:bf(e)?64:Be(e)?4:ge(e)?2:0;return ie(e,t,n,i,r,o,a,!0)}function Mf(e){return e?Xa(e)||Kn in e?je({},e):e:null}function er(e,t,n=!1){const{props:i,ref:r,patchFlag:a,children:o}=e,l=t?Ff(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Io(l),ref:t&&t.ref?n&&r?de(r)?r.concat(gn(t)):[r,gn(t)]:gn(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Me?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&er(e.ssContent),ssFallback:e.ssFallback&&er(e.ssFallback),el:e.el,anchor:e.anchor}}function rt(e=" ",t=0){return Ee(Ji,null,e,t)}function W0(e,t){const n=Ee(vn,null,e);return n.staticCount=t,n}function Fe(e="",t=!1){return t?(ae(),Ye(it,null,e)):Ee(it,null,e)}function ht(e){return e==null||typeof e=="boolean"?Ee(it):de(e)?Ee(Me,null,e.slice()):typeof e=="object"?bt(e):Ee(Ji,null,String(e))}function bt(e){return e.el===null||e.memo?e:er(e)}function qi(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(de(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),qi(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(Kn in t)?t._ctx=He:r===3&&He&&(He.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ge(t)?(t={default:t,_ctx:He},n=32):(t=String(t),i&64?(n=16,t=[rt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ff(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=De([t.class,i.class]));else if(r==="style")t.style=qt([t.style,i.style]);else if(Rn(r)){const a=t[r],o=i[r];o&&a!==o&&!(de(a)&&a.includes(o))&&(t[r]=a?[].concat(a,o):o)}else r!==""&&(t[r]=i[r])}return t}function ct(e,t,n,i=null){nt(e,t,7,[n,i])}function es(e,t,n,i){let r;const a=n&&n[i];if(de(e)||we(e)){r=new Array(e.length);for(let o=0,l=e.length;o<l;o++)r[o]=t(e[o],o,void 0,a&&a[o])}else if(typeof e=="number"){r=new Array(e);for(let o=0;o<e;o++)r[o]=t(o+1,o,void 0,a&&a[o])}else if(Be(e))if(e[Symbol.iterator])r=Array.from(e,(o,l)=>t(o,l,void 0,a&&a[l]));else{const o=Object.keys(e);r=new Array(o.length);for(let l=0,b=o.length;l<b;l++){const I=o[l];r[l]=t(e[I],I,l,a&&a[l])}}else r=[];return n&&(n[i]=r),r}function Bt(e,t,n={},i,r){if(He.isCE||He.parent&&Sn(He.parent)&&He.parent.isCE)return Ee("slot",t==="default"?null:{name:t},i&&i());let a=e[t];a&&a._c&&(a._d=!1),ae();const o=a&&Mo(a(n)),l=Ye(Me,{key:n.key||`_${t}`},o||(i?i():[]),o&&e._===1?64:-2);return!r&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),a&&a._c&&(a._d=!0),l}function Mo(e){return e.some(t=>Dn(t)?!(t.type===it||t.type===Me&&!Mo(t.children)):!0)?e:null}const Ti=e=>e?wo(e)?jn(e)||e.proxy:Ti(e.parent):null,_n=je(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ti(e.parent),$root:e=>Ti(e.root),$emit:e=>e.emit,$options:e=>So(e),$forceUpdate:e=>()=>no(e.update),$nextTick:e=>ro.bind(e.proxy),$watch:e=>ef.bind(e)}),wf={get({_:e},t){const{ctx:n,setupState:i,data:r,props:a,accessCache:o,type:l,appContext:b}=e;let I;if(t[0]!=="$"){const _=o[t];if(_!==void 0)switch(_){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return a[t]}else{if(i!==Le&&ye(i,t))return o[t]=1,i[t];if(r!==Le&&ye(r,t))return o[t]=2,r[t];if((I=e.propsOptions[0])&&ye(I,t))return o[t]=3,a[t];if(n!==Le&&ye(n,t))return o[t]=4,n[t];gi&&(o[t]=0)}}const T=_n[t];let A,p;if(T)return t==="$attrs"&&qe(e,"get",t),T(e);if((A=l.__cssModules)&&(A=A[t]))return A;if(n!==Le&&ye(n,t))return o[t]=4,n[t];if(p=b.config.globalProperties,ye(p,t))return p[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:a}=e;return r!==Le&&ye(r,t)?(r[t]=n,!0):i!==Le&&ye(i,t)?(i[t]=n,!0):ye(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:a}},o){let l;return!!n[o]||e!==Le&&ye(e,o)||t!==Le&&ye(t,o)||(l=a[0])&&ye(l,o)||ye(i,o)||ye(_n,o)||ye(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ye(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},Bf=Oo();let Uf=0;function kf(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||Bf,a={uid:Uf++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new au(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lo(i,r),emitsOptions:lo(i,r),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:i.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=$u.bind(null,a),e.ce&&e.ce(a),a}let Ke=null;const Fo=()=>Ke||He,Tr=e=>{Ke=e,e.scope.on()},Jt=()=>{Ke&&Ke.scope.off(),Ke=null};function wo(e){return e.vnode.shapeFlag&4}let en=!1;function Nf(e,t=!1){en=t;const{props:n,children:i}=e.vnode,r=wo(e);pf(e,n,r,t),Tf(e,i);const a=r?Kf(e,t):void 0;return en=!1,a}function Kf(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Qa(new Proxy(e.ctx,wf));const{setup:i}=n;if(i){const r=e.setupContext=i.length>1?Wf(e):null;Tr(e),br();const a=It(i,e,0,[e.props,r]);if(Or(),Jt(),Fa(a)){if(a.then(Jt,Jt),t)return a.then(o=>{Ks(e,o,t)}).catch(o=>{wn(o,e,0)});e.asyncDep=a}else Ks(e,a,t)}else Bo(e,t)}function Ks(e,t,n){ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Be(t)&&(e.setupState=eo(t)),Bo(e,n)}let js;function Bo(e,t,n){const i=e.type;if(!e.render){if(!t&&js&&!i.render){const r=i.template;if(r){const{isCustomElement:a,compilerOptions:o}=e.appContext.config,{delimiters:l,compilerOptions:b}=i,I=je(je({isCustomElement:a,delimiters:l},o),b);i.render=js(r,I)}}e.render=i.render||ut}Tr(e),br(),df(e),Or(),Jt()}function jf(e){return new Proxy(e.attrs,{get(t,n){return qe(e,"get","$attrs"),t[n]}})}function Wf(e){const t=i=>{e.exposed=i||{}};let n;return{get attrs(){return n||(n=jf(e))},slots:e.slots,emit:e.emit,expose:t}}function jn(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(eo(Qa(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in _n)return _n[n](e)}}))}function Gf(e){return ge(e)&&e.displayName||e.name}function Hf(e){return ge(e)&&"__vccOpts"in e}const vt=(e,t)=>Nu(e,t,en);function ts(e,t,n){const i=arguments.length;return i===2?Be(t)&&!de(t)?Dn(t)?Ee(e,null,[t]):Ee(e,t):Ee(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Dn(n)&&(n=[n]),Ee(e,t,n))}const $f="3.2.33",Vf="http://www.w3.org/2000/svg",Yt=typeof document!="undefined"?document:null,Ws=Yt&&Yt.createElement("template"),zf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?Yt.createElementNS(Vf,e):Yt.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>Yt.createTextNode(e),createComment:e=>Yt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Yt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,i,r,a){const o=n?n.previousSibling:t.lastChild;if(r&&(r===a||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===a||!(r=r.nextSibling)););else{Ws.innerHTML=i?`<svg>${e}</svg>`:e;const l=Ws.content;if(i){const b=l.firstChild;for(;b.firstChild;)l.appendChild(b.firstChild);l.removeChild(b)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Yf(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Xf(e,t,n){const i=e.style,r=we(n);if(n&&!r){for(const a in n)xi(i,a,n[a]);if(t&&!we(t))for(const a in t)n[a]==null&&xi(i,a,"")}else{const a=i.display;r?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=a)}}const Gs=/\s*!important$/;function xi(e,t,n){if(de(n))n.forEach(i=>xi(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=Qf(e,t);Gs.test(n)?e.setProperty(_r(i),n.replace(Gs,""),"important"):e[i]=n}}const Hs=["Webkit","Moz","ms"],qn={};function Qf(e,t){const n=qn[t];if(n)return n;let i=gt(t);if(i!=="filter"&&i in e)return qn[t]=i;i=Mn(i);for(let r=0;r<Hs.length;r++){const a=Hs[r]+i;if(a in e)return qn[t]=a}return t}const $s="http://www.w3.org/1999/xlink";function Zf(e,t,n,i,r){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS($s,t.slice(6,t.length)):e.setAttributeNS($s,t,n);else{const a=Xl(t);n==null||a&&!Pa(n)?e.removeAttribute(t):e.setAttribute(t,a?"":n)}}function Jf(e,t,n,i,r,a,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,r,a),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const b=n==null?"":n;(e.value!==b||e.tagName==="OPTION")&&(e.value=b),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const b=typeof e[t];b==="boolean"?n=Pa(n):n==null&&b==="string"?(n="",l=!0):b==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}const[Uo,qf]=(()=>{let e=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let Si=0;const ec=Promise.resolve(),tc=()=>{Si=0},rc=()=>Si||(ec.then(tc),Si=Uo());function dr(e,t,n,i){e.addEventListener(t,n,i)}function nc(e,t,n,i){e.removeEventListener(t,n,i)}function ic(e,t,n,i,r=null){const a=e._vei||(e._vei={}),o=a[t];if(i&&o)o.value=i;else{const[l,b]=sc(t);if(i){const I=a[t]=ac(i,r);dr(e,l,I,b)}else o&&(nc(e,l,o,b),a[t]=void 0)}}const Vs=/(?:Once|Passive|Capture)$/;function sc(e){let t;if(Vs.test(e)){t={};let n;for(;n=e.match(Vs);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[_r(e.slice(2)),t]}function ac(e,t){const n=i=>{const r=i.timeStamp||Uo();(qf||r>=n.attached-1)&&nt(oc(i,n.value),t,5,[i])};return n.value=e,n.attached=rc(),n}function oc(e,t){if(de(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const zs=/^on[a-z]/,lc=(e,t,n,i,r=!1,a,o,l,b)=>{t==="class"?Yf(e,i,r):t==="style"?Xf(e,n,i):Rn(t)?wi(t)||ic(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):uc(e,t,i,r))?Jf(e,t,i,a,o,l,b):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Zf(e,t,i,r))};function uc(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&zs.test(t)&&ge(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||zs.test(t)&&we(n)?!1:t in e}const At="transition",Mr="animation",tn=(e,{slots:t})=>ts(ho,No(e),t);tn.displayName="Transition";const ko={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},fc=tn.props=je({},ho.props,ko),Ht=(e,t=[])=>{de(e)?e.forEach(n=>n(...t)):e&&e(...t)},Ys=e=>e?de(e)?e.some(t=>t.length>1):e.length>1:!1;function No(e){const t={};for(const x in e)x in ko||(t[x]=e[x]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:a=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:b=a,appearActiveClass:I=o,appearToClass:T=l,leaveFromClass:A=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=e,O=cc(r),C=O&&O[0],L=O&&O[1],{onBeforeEnter:S,onEnter:u,onEnterCancelled:s,onLeave:c,onLeaveCancelled:h,onBeforeAppear:E=S,onAppear:v=u,onAppearCancelled:f=s}=t,d=(x,y,g)=>{Vt(x,y?T:l),Vt(x,y?I:o),g&&g()},P=(x,y)=>{Vt(x,_),Vt(x,p),y&&y()},D=x=>(y,g)=>{const m=x?v:u,R=()=>d(y,x,g);Ht(m,[y,R]),Xs(()=>{Vt(y,x?b:a),Et(y,x?T:l),Ys(m)||Qs(y,i,C,R)})};return je(t,{onBeforeEnter(x){Ht(S,[x]),Et(x,a),Et(x,o)},onBeforeAppear(x){Ht(E,[x]),Et(x,b),Et(x,I)},onEnter:D(!1),onAppear:D(!0),onLeave(x,y){const g=()=>P(x,y);Et(x,A),jo(),Et(x,p),Xs(()=>{Vt(x,A),Et(x,_),Ys(c)||Qs(x,i,L,g)}),Ht(c,[x,g])},onEnterCancelled(x){d(x,!1),Ht(s,[x])},onAppearCancelled(x){d(x,!0),Ht(f,[x])},onLeaveCancelled(x){P(x),Ht(h,[x])}})}function cc(e){if(e==null)return null;if(Be(e))return[ei(e.enter),ei(e.leave)];{const t=ei(e);return[t,t]}}function ei(e){return yn(e)}function Et(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function Vt(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Xs(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let dc=0;function Qs(e,t,n,i){const r=e._endId=++dc,a=()=>{r===e._endId&&i()};if(n)return setTimeout(a,n);const{type:o,timeout:l,propCount:b}=Ko(e,t);if(!o)return i();const I=o+"end";let T=0;const A=()=>{e.removeEventListener(I,p),a()},p=_=>{_.target===e&&++T>=b&&A()};setTimeout(()=>{T<b&&A()},l+1),e.addEventListener(I,p)}function Ko(e,t){const n=window.getComputedStyle(e),i=O=>(n[O]||"").split(", "),r=i(At+"Delay"),a=i(At+"Duration"),o=Zs(r,a),l=i(Mr+"Delay"),b=i(Mr+"Duration"),I=Zs(l,b);let T=null,A=0,p=0;t===At?o>0&&(T=At,A=o,p=a.length):t===Mr?I>0&&(T=Mr,A=I,p=b.length):(A=Math.max(o,I),T=A>0?o>I?At:Mr:null,p=T?T===At?a.length:b.length:0);const _=T===At&&/\b(transform|all)(,|$)/.test(n[At+"Property"]);return{type:T,timeout:A,propCount:p,hasTransform:_}}function Zs(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>Js(n)+Js(e[i])))}function Js(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function jo(){return document.body.offsetHeight}const Wo=new WeakMap,Go=new WeakMap,hc={name:"TransitionGroup",props:je({},fc,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Fo(),i=co();let r,a;return Eo(()=>{if(!r.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!Ec(r[0].el,n.vnode.el,o))return;r.forEach(gc),r.forEach(mc);const l=r.filter(pc);jo(),l.forEach(b=>{const I=b.el,T=I.style;Et(I,o),T.transform=T.webkitTransform=T.transitionDuration="";const A=I._moveCb=p=>{p&&p.target!==I||(!p||/transform$/.test(p.propertyName))&&(I.removeEventListener("transitionend",A),I._moveCb=null,Vt(I,o))};I.addEventListener("transitionend",A)})}),()=>{const o=Te(e),l=No(o);let b=o.tag||Me;r=a,a=t.default?Yi(t.default()):[];for(let I=0;I<a.length;I++){const T=a[I];T.key!=null&&qr(T,Jr(T,l,i,n))}if(r)for(let I=0;I<r.length;I++){const T=r[I];qr(T,Jr(T,l,i,n)),Wo.set(T,T.el.getBoundingClientRect())}return Ee(b,null,a)}}},vc=hc;function gc(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function mc(e){Go.set(e,e.el.getBoundingClientRect())}function pc(e){const t=Wo.get(e),n=Go.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${i}px,${r}px)`,a.transitionDuration="0s",e}}function Ec(e,t,n){const i=e.cloneNode();e._vtc&&e._vtc.forEach(o=>{o.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),n.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(i);const{hasTransform:a}=Ko(i);return r.removeChild(i),a}const qs=e=>{const t=e.props["onUpdate:modelValue"];return de(t)?n=>dn(t,n):t};function yc(e){e.target.composing=!0}function ea(e){const t=e.target;t.composing&&(t.composing=!1,Tc(t,"input"))}function Tc(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}const Ho={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e._assign=qs(r);const a=i||r.props&&r.props.type==="number";dr(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n?l=l.trim():a&&(l=yn(l)),e._assign(l)}),n&&dr(e,"change",()=>{e.value=e.value.trim()}),t||(dr(e,"compositionstart",yc),dr(e,"compositionend",ea),dr(e,"change",ea))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:r}},a){if(e._assign=qs(a),e.composing||document.activeElement===e&&(n||i&&e.value.trim()===t||(r||e.type==="number")&&yn(e.value)===t))return;const o=t==null?"":t;e.value!==o&&(e.value=o)}},xc=["ctrl","shift","alt","meta"],Sc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>xc.some(n=>e[`${n}Key`]&&!t.includes(n))},Er=(e,t)=>(n,...i)=>{for(let r=0;r<t.length;r++){const a=Sc[t[r]];if(a&&a(n,t))return}return e(n,...i)},yr={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Fr(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Fr(e,!0),i.enter(e)):i.leave(e,()=>{Fr(e,!1)}):Fr(e,t))},beforeUnmount(e,{value:t}){Fr(e,t)}};function Fr(e,t){e.style.display=t?e._vod:"none"}const Ac=je({patchProp:lc},zf);let ta;function Lc(){return ta||(ta=Lf(Ac))}const $o=(...e)=>{const t=Lc().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=Dc(i);if(!r)return;const a=t._component;!ge(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function Dc(e){return we(e)?document.querySelector(e):e}var xe=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n};const _c={name:"App",mounted(){window.location.pathname.includes("/doc/theme")||this.$nextTick(()=>{this.$color.theme="light"})}};function bc(e,t,n,i,r,a){const o=Ce("router-view");return ae(),Ye(o)}var Oc=xe(_c,[["render",bc]]);function Cc(){return Vo().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Vo(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}const Rc=typeof Proxy=="function",Pc="devtools-plugin:setup",Ic="plugin:settings:set";let sr,Ai;function Mc(){var e;return sr!==void 0||(typeof window!="undefined"&&window.performance?(sr=!0,Ai=window.performance):typeof global!="undefined"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(sr=!0,Ai=global.perf_hooks.performance):sr=!1),sr}function Fc(){return Mc()?Ai.now():Date.now()}class wc{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const i={};if(t.settings)for(const o in t.settings){const l=t.settings[o];i[o]=l.defaultValue}const r=`__vue-devtools-plugin-settings__${t.id}`;let a=Object.assign({},i);try{const o=localStorage.getItem(r),l=JSON.parse(o);Object.assign(a,l)}catch{}this.fallbacks={getSettings(){return a},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}a=o},now(){return Fc()}},n&&n.on(Ic,(o,l)=>{o===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(o,l)=>this.target?this.target.on[l]:(...b)=>{this.onQueue.push({method:l,args:b})}}),this.proxiedTarget=new Proxy({},{get:(o,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...b)=>(this.targetQueue.push({method:l,args:b,resolve:()=>{}}),this.fallbacks[l](...b)):(...b)=>new Promise(I=>{this.targetQueue.push({method:l,args:b,resolve:I})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function Bc(e,t){const n=e,i=Vo(),r=Cc(),a=Rc&&n.enableEarlyProxy;if(r&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!a))r.emit(Pc,e,t);else{const o=a?new wc(n,r):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}/*!
  * vue-router v4.0.15
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const zo=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Cr=e=>zo?Symbol(e):"_vr_"+e,Uc=Cr("rvlm"),ra=Cr("rvd"),rs=Cr("r"),Yo=Cr("rl"),Li=Cr("rvl"),hr=typeof window!="undefined";function kc(e){return e.__esModule||zo&&e[Symbol.toStringTag]==="Module"}const Ae=Object.assign;function ti(e,t){const n={};for(const i in t){const r=t[i];n[i]=Array.isArray(r)?r.map(e):e(r)}return n}const Vr=()=>{},Nc=/\/$/,Kc=e=>e.replace(Nc,"");function ri(e,t,n="/"){let i,r={},a="",o="";const l=t.indexOf("?"),b=t.indexOf("#",l>-1?l:0);return l>-1&&(i=t.slice(0,l),a=t.slice(l+1,b>-1?b:t.length),r=e(a)),b>-1&&(i=i||t.slice(0,b),o=t.slice(b,t.length)),i=Hc(i!=null?i:t,n),{fullPath:i+(a&&"?")+a+o,path:i,query:r,hash:o}}function jc(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function na(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Wc(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&xr(t.matched[i],n.matched[r])&&Xo(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function xr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Xo(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Gc(e[n],t[n]))return!1;return!0}function Gc(e,t){return Array.isArray(e)?ia(e,t):Array.isArray(t)?ia(t,e):e===t}function ia(e,t){return Array.isArray(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function Hc(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/");let r=n.length-1,a,o;for(a=0;a<i.length;a++)if(o=i[a],!(r===1||o==="."))if(o==="..")r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(a-(a===i.length?1:0)).join("/")}var rn;(function(e){e.pop="pop",e.push="push"})(rn||(rn={}));var zr;(function(e){e.back="back",e.forward="forward",e.unknown=""})(zr||(zr={}));function $c(e){if(!e)if(hr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Kc(e)}const Vc=/^[^#]+#/;function zc(e,t){return e.replace(Vc,"#")+t}function Yc(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Wn=()=>({left:window.pageXOffset,top:window.pageYOffset});function Xc(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=Yc(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function sa(e,t){return(history.state?history.state.position-t:-1)+e}const Di=new Map;function Qc(e,t){Di.set(e,t)}function Zc(e){const t=Di.get(e);return Di.delete(e),t}let Jc=()=>location.protocol+"//"+location.host;function Qo(e,t){const{pathname:n,search:i,hash:r}=t,a=e.indexOf("#");if(a>-1){let l=r.includes(e.slice(a))?e.slice(a).length:1,b=r.slice(l);return b[0]!=="/"&&(b="/"+b),na(b,"")}return na(n,e)+i+r}function qc(e,t,n,i){let r=[],a=[],o=null;const l=({state:p})=>{const _=Qo(e,location),O=n.value,C=t.value;let L=0;if(p){if(n.value=_,t.value=p,o&&o===O){o=null;return}L=C?p.position-C.position:0}else i(_);r.forEach(S=>{S(n.value,O,{delta:L,type:rn.pop,direction:L?L>0?zr.forward:zr.back:zr.unknown})})};function b(){o=n.value}function I(p){r.push(p);const _=()=>{const O=r.indexOf(p);O>-1&&r.splice(O,1)};return a.push(_),_}function T(){const{history:p}=window;!p.state||p.replaceState(Ae({},p.state,{scroll:Wn()}),"")}function A(){for(const p of a)p();a=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",T)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",T),{pauseListeners:b,listen:I,destroy:A}}function aa(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?Wn():null}}function ed(e){const{history:t,location:n}=window,i={value:Qo(e,n)},r={value:t.state};r.value||a(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(b,I,T){const A=e.indexOf("#"),p=A>-1?(n.host&&document.querySelector("base")?e:e.slice(A))+b:Jc()+e+b;try{t[T?"replaceState":"pushState"](I,"",p),r.value=I}catch(_){console.error(_),n[T?"replace":"assign"](p)}}function o(b,I){const T=Ae({},t.state,aa(r.value.back,b,r.value.forward,!0),I,{position:r.value.position});a(b,T,!0),i.value=b}function l(b,I){const T=Ae({},r.value,t.state,{forward:b,scroll:Wn()});a(T.current,T,!0);const A=Ae({},aa(i.value,b,null),{position:T.position+1},I);a(b,A,!1),i.value=b}return{location:i,state:r,push:l,replace:o}}function td(e){e=$c(e);const t=ed(e),n=qc(e,t.state,t.location,t.replace);function i(a,o=!0){o||n.pauseListeners(),history.go(a)}const r=Ae({location:"",base:e,go:i,createHref:zc.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function rd(e){return typeof e=="string"||e&&typeof e=="object"}function Zo(e){return typeof e=="string"||typeof e=="symbol"}const Lt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Jo=Cr("nf");var oa;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(oa||(oa={}));function Sr(e,t){return Ae(new Error,{type:e,[Jo]:!0},t)}function Dt(e,t){return e instanceof Error&&Jo in e&&(t==null||!!(e.type&t))}const la="[^/]+?",nd={sensitive:!1,strict:!1,start:!0,end:!0},id=/[.+*?^${}()[\]/\\]/g;function sd(e,t){const n=Ae({},nd,t),i=[];let r=n.start?"^":"";const a=[];for(const I of e){const T=I.length?[]:[90];n.strict&&!I.length&&(r+="/");for(let A=0;A<I.length;A++){const p=I[A];let _=40+(n.sensitive?.25:0);if(p.type===0)A||(r+="/"),r+=p.value.replace(id,"\\$&"),_+=40;else if(p.type===1){const{value:O,repeatable:C,optional:L,regexp:S}=p;a.push({name:O,repeatable:C,optional:L});const u=S||la;if(u!==la){_+=10;try{new RegExp(`(${u})`)}catch(c){throw new Error(`Invalid custom RegExp for param "${O}" (${u}): `+c.message)}}let s=C?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;A||(s=L&&I.length<2?`(?:/${s})`:"/"+s),L&&(s+="?"),r+=s,_+=20,L&&(_+=-8),C&&(_+=-20),u===".*"&&(_+=-50)}T.push(_)}i.push(T)}if(n.strict&&n.end){const I=i.length-1;i[I][i[I].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(I){const T=I.match(o),A={};if(!T)return null;for(let p=1;p<T.length;p++){const _=T[p]||"",O=a[p-1];A[O.name]=_&&O.repeatable?_.split("/"):_}return A}function b(I){let T="",A=!1;for(const p of e){(!A||!T.endsWith("/"))&&(T+="/"),A=!1;for(const _ of p)if(_.type===0)T+=_.value;else if(_.type===1){const{value:O,repeatable:C,optional:L}=_,S=O in I?I[O]:"";if(Array.isArray(S)&&!C)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const u=Array.isArray(S)?S.join("/"):S;if(!u)if(L)p.length<2&&e.length>1&&(T.endsWith("/")?T=T.slice(0,-1):A=!0);else throw new Error(`Missing required param "${O}"`);T+=u}}return T}return{re:o,score:i,keys:a,parse:l,stringify:b}}function ad(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function od(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const a=ad(i[n],r[n]);if(a)return a;n++}return r.length-i.length}const ld={type:0,value:""},ud=/[a-zA-Z0-9_]/;function fd(e){if(!e)return[[]];if(e==="/")return[[ld]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(_){throw new Error(`ERR (${n})/"${I}": ${_}`)}let n=0,i=n;const r=[];let a;function o(){a&&r.push(a),a=[]}let l=0,b,I="",T="";function A(){!I||(n===0?a.push({type:0,value:I}):n===1||n===2||n===3?(a.length>1&&(b==="*"||b==="+")&&t(`A repeatable param (${I}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:I,regexp:T,repeatable:b==="*"||b==="+",optional:b==="*"||b==="?"})):t("Invalid state to consume buffer"),I="")}function p(){I+=b}for(;l<e.length;){if(b=e[l++],b==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:b==="/"?(I&&A(),o()):b===":"?(A(),n=1):p();break;case 4:p(),n=i;break;case 1:b==="("?n=2:ud.test(b)?p():(A(),n=0,b!=="*"&&b!=="?"&&b!=="+"&&l--);break;case 2:b===")"?T[T.length-1]=="\\"?T=T.slice(0,-1)+b:n=3:T+=b;break;case 3:A(),n=0,b!=="*"&&b!=="?"&&b!=="+"&&l--,T="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${I}"`),A(),o(),r}function cd(e,t,n){const i=sd(fd(e.path),n),r=Ae(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function dd(e,t){const n=[],i=new Map;t=fa({strict:!1,end:!0,sensitive:!1},t);function r(T){return i.get(T)}function a(T,A,p){const _=!p,O=vd(T);O.aliasOf=p&&p.record;const C=fa(t,T),L=[O];if("alias"in T){const s=typeof T.alias=="string"?[T.alias]:T.alias;for(const c of s)L.push(Ae({},O,{components:p?p.record.components:O.components,path:c,aliasOf:p?p.record:O}))}let S,u;for(const s of L){const{path:c}=s;if(A&&c[0]!=="/"){const h=A.record.path,E=h[h.length-1]==="/"?"":"/";s.path=A.record.path+(c&&E+c)}if(S=cd(s,A,C),p?p.alias.push(S):(u=u||S,u!==S&&u.alias.push(S),_&&T.name&&!ua(S)&&o(T.name)),"children"in O){const h=O.children;for(let E=0;E<h.length;E++)a(h[E],S,p&&p.children[E])}p=p||S,b(S)}return u?()=>{o(u)}:Vr}function o(T){if(Zo(T)){const A=i.get(T);A&&(i.delete(T),n.splice(n.indexOf(A),1),A.children.forEach(o),A.alias.forEach(o))}else{const A=n.indexOf(T);A>-1&&(n.splice(A,1),T.record.name&&i.delete(T.record.name),T.children.forEach(o),T.alias.forEach(o))}}function l(){return n}function b(T){let A=0;for(;A<n.length&&od(T,n[A])>=0&&(T.record.path!==n[A].record.path||!qo(T,n[A]));)A++;n.splice(A,0,T),T.record.name&&!ua(T)&&i.set(T.record.name,T)}function I(T,A){let p,_={},O,C;if("name"in T&&T.name){if(p=i.get(T.name),!p)throw Sr(1,{location:T});C=p.record.name,_=Ae(hd(A.params,p.keys.filter(u=>!u.optional).map(u=>u.name)),T.params),O=p.stringify(_)}else if("path"in T)O=T.path,p=n.find(u=>u.re.test(O)),p&&(_=p.parse(O),C=p.record.name);else{if(p=A.name?i.get(A.name):n.find(u=>u.re.test(A.path)),!p)throw Sr(1,{location:T,currentLocation:A});C=p.record.name,_=Ae({},A.params,T.params),O=p.stringify(_)}const L=[];let S=p;for(;S;)L.unshift(S.record),S=S.parent;return{name:C,path:O,params:_,matched:L,meta:md(L)}}return e.forEach(T=>a(T)),{addRoute:a,resolve:I,removeRoute:o,getRoutes:l,getRecordMatcher:r}}function hd(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function vd(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:gd(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function gd(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="boolean"?n:n[i];return t}function ua(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function md(e){return e.reduce((t,n)=>Ae(t,n.meta),{})}function fa(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function qo(e,t){return t.children.some(n=>n===e||qo(e,n))}const el=/#/g,pd=/&/g,Ed=/\//g,yd=/=/g,Td=/\?/g,tl=/\+/g,xd=/%5B/g,Sd=/%5D/g,rl=/%5E/g,Ad=/%60/g,nl=/%7B/g,Ld=/%7C/g,il=/%7D/g,Dd=/%20/g;function ns(e){return encodeURI(""+e).replace(Ld,"|").replace(xd,"[").replace(Sd,"]")}function _d(e){return ns(e).replace(nl,"{").replace(il,"}").replace(rl,"^")}function _i(e){return ns(e).replace(tl,"%2B").replace(Dd,"+").replace(el,"%23").replace(pd,"%26").replace(Ad,"`").replace(nl,"{").replace(il,"}").replace(rl,"^")}function bd(e){return _i(e).replace(yd,"%3D")}function Od(e){return ns(e).replace(el,"%23").replace(Td,"%3F")}function Cd(e){return e==null?"":Od(e).replace(Ed,"%2F")}function bn(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Rd(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const a=i[r].replace(tl," "),o=a.indexOf("="),l=bn(o<0?a:a.slice(0,o)),b=o<0?null:bn(a.slice(o+1));if(l in t){let I=t[l];Array.isArray(I)||(I=t[l]=[I]),I.push(b)}else t[l]=b}return t}function ca(e){let t="";for(let n in e){const i=e[n];if(n=bd(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(i)?i.map(a=>a&&_i(a)):[i&&_i(i)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function Pd(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Array.isArray(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}function wr(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Ot(e,t,n,i,r){const a=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,l)=>{const b=A=>{A===!1?l(Sr(4,{from:n,to:t})):A instanceof Error?l(A):rd(A)?l(Sr(2,{from:t,to:A})):(a&&i.enterCallbacks[r]===a&&typeof A=="function"&&a.push(A),o())},I=e.call(i&&i.instances[r],t,n,b);let T=Promise.resolve(I);e.length<3&&(T=T.then(b)),T.catch(A=>l(A))})}function ni(e,t,n,i){const r=[];for(const a of e)for(const o in a.components){let l=a.components[o];if(!(t!=="beforeRouteEnter"&&!a.instances[o]))if(Id(l)){const I=(l.__vccOpts||l)[t];I&&r.push(Ot(I,n,i,a,o))}else{let b=l();r.push(()=>b.then(I=>{if(!I)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${a.path}"`));const T=kc(I)?I.default:I;a.components[o]=T;const p=(T.__vccOpts||T)[t];return p&&Ot(p,n,i,a,o)()}))}}return r}function Id(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function da(e){const t=Mt(rs),n=Mt(Yo),i=vt(()=>t.resolve(jr(e.to))),r=vt(()=>{const{matched:b}=i.value,{length:I}=b,T=b[I-1],A=n.matched;if(!T||!A.length)return-1;const p=A.findIndex(xr.bind(null,T));if(p>-1)return p;const _=ha(b[I-2]);return I>1&&ha(T)===_&&A[A.length-1].path!==_?A.findIndex(xr.bind(null,b[I-2])):p}),a=vt(()=>r.value>-1&&Bd(n.params,i.value.params)),o=vt(()=>r.value>-1&&r.value===n.matched.length-1&&Xo(n.params,i.value.params));function l(b={}){return wd(b)?t[jr(e.replace)?"replace":"push"](jr(e.to)).catch(Vr):Promise.resolve()}return{route:i,href:vt(()=>i.value.href),isActive:a,isExactActive:o,navigate:l}}const Md=go({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:da,setup(e,{slots:t}){const n=st(da(e)),{options:i}=Mt(rs),r=vt(()=>({[va(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[va(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&t.default(n);return e.custom?a:ts("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},a)}}}),Fd=Md;function wd(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Bd(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!Array.isArray(r)||r.length!==i.length||i.some((a,o)=>a!==r[o]))return!1}return!0}function ha(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const va=(e,t,n)=>e!=null?e:t!=null?t:n,Ud=go({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=Mt(Li),r=vt(()=>e.route||i.value),a=Mt(ra,0),o=vt(()=>r.value.matched[a]);hn(ra,a+1),hn(Uc,o),hn(Li,r);const l=Fu();return pr(()=>[l.value,o.value,e.name],([b,I,T],[A,p,_])=>{I&&(I.instances[T]=b,p&&p!==I&&b&&b===A&&(I.leaveGuards.size||(I.leaveGuards=p.leaveGuards),I.updateGuards.size||(I.updateGuards=p.updateGuards))),b&&I&&(!p||!xr(I,p)||!A)&&(I.enterCallbacks[T]||[]).forEach(O=>O(b))},{flush:"post"}),()=>{const b=r.value,I=o.value,T=I&&I.components[e.name],A=e.name;if(!T)return ga(n.default,{Component:T,route:b});const p=I.props[e.name],_=p?p===!0?b.params:typeof p=="function"?p(b):p:null,C=ts(T,Ae({},_,t,{onVnodeUnmounted:L=>{L.component.isUnmounted&&(I.instances[A]=null)},ref:l}));return ga(n.default,{Component:C,route:b})||C}}});function ga(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const kd=Ud;function Nd(e){const t=dd(e.routes,e),n=e.parseQuery||Rd,i=e.stringifyQuery||ca,r=e.history,a=wr(),o=wr(),l=wr(),b=wu(Lt);let I=Lt;hr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const T=ti.bind(null,N=>""+N),A=ti.bind(null,Cd),p=ti.bind(null,bn);function _(N,H){let $,z;return Zo(N)?($=t.getRecordMatcher(N),z=H):z=N,t.addRoute(z,$)}function O(N){const H=t.getRecordMatcher(N);H&&t.removeRoute(H)}function C(){return t.getRoutes().map(N=>N.record)}function L(N){return!!t.getRecordMatcher(N)}function S(N,H){if(H=Ae({},H||b.value),typeof N=="string"){const se=ri(n,N,H.path),K=t.resolve({path:se.path},H),W=r.createHref(se.fullPath);return Ae(se,K,{params:p(K.params),hash:bn(se.hash),redirectedFrom:void 0,href:W})}let $;if("path"in N)$=Ae({},N,{path:ri(n,N.path,H.path).path});else{const se=Ae({},N.params);for(const K in se)se[K]==null&&delete se[K];$=Ae({},N,{params:A(N.params)}),H.params=A(H.params)}const z=t.resolve($,H),ee=N.hash||"";z.params=T(p(z.params));const X=jc(i,Ae({},N,{hash:_d(ee),path:z.path})),te=r.createHref(X);return Ae({fullPath:X,hash:ee,query:i===ca?Pd(N.query):N.query||{}},z,{redirectedFrom:void 0,href:te})}function u(N){return typeof N=="string"?ri(n,N,b.value.path):Ae({},N)}function s(N,H){if(I!==N)return Sr(8,{from:H,to:N})}function c(N){return v(N)}function h(N){return c(Ae(u(N),{replace:!0}))}function E(N){const H=N.matched[N.matched.length-1];if(H&&H.redirect){const{redirect:$}=H;let z=typeof $=="function"?$(N):$;return typeof z=="string"&&(z=z.includes("?")||z.includes("#")?z=u(z):{path:z},z.params={}),Ae({query:N.query,hash:N.hash,params:N.params},z)}}function v(N,H){const $=I=S(N),z=b.value,ee=N.state,X=N.force,te=N.replace===!0,se=E($);if(se)return v(Ae(u(se),{state:ee,force:X,replace:te}),H||$);const K=$;K.redirectedFrom=H;let W;return!X&&Wc(i,z,$)&&(W=Sr(16,{to:K,from:z}),U(z,z,!0,!1)),(W?Promise.resolve(W):d(K,z)).catch(V=>Dt(V)?Dt(V,2)?V:w(V):M(V,K,z)).then(V=>{if(V){if(Dt(V,2))return v(Ae(u(V.to),{state:ee,force:X,replace:te}),H||K)}else V=D(K,z,!0,te,ee);return P(K,z,V),V})}function f(N,H){const $=s(N,H);return $?Promise.reject($):Promise.resolve()}function d(N,H){let $;const[z,ee,X]=Kd(N,H);$=ni(z.reverse(),"beforeRouteLeave",N,H);for(const se of z)se.leaveGuards.forEach(K=>{$.push(Ot(K,N,H))});const te=f.bind(null,N,H);return $.push(te),ar($).then(()=>{$=[];for(const se of a.list())$.push(Ot(se,N,H));return $.push(te),ar($)}).then(()=>{$=ni(ee,"beforeRouteUpdate",N,H);for(const se of ee)se.updateGuards.forEach(K=>{$.push(Ot(K,N,H))});return $.push(te),ar($)}).then(()=>{$=[];for(const se of N.matched)if(se.beforeEnter&&!H.matched.includes(se))if(Array.isArray(se.beforeEnter))for(const K of se.beforeEnter)$.push(Ot(K,N,H));else $.push(Ot(se.beforeEnter,N,H));return $.push(te),ar($)}).then(()=>(N.matched.forEach(se=>se.enterCallbacks={}),$=ni(X,"beforeRouteEnter",N,H),$.push(te),ar($))).then(()=>{$=[];for(const se of o.list())$.push(Ot(se,N,H));return $.push(te),ar($)}).catch(se=>Dt(se,8)?se:Promise.reject(se))}function P(N,H,$){for(const z of l.list())z(N,H,$)}function D(N,H,$,z,ee){const X=s(N,H);if(X)return X;const te=H===Lt,se=hr?history.state:{};$&&(z||te?r.replace(N.fullPath,Ae({scroll:te&&se&&se.scroll},ee)):r.push(N.fullPath,ee)),b.value=N,U(N,H,$,te),w()}let x;function y(){x||(x=r.listen((N,H,$)=>{const z=S(N),ee=E(z);if(ee){v(Ae(ee,{replace:!0}),z).catch(Vr);return}I=z;const X=b.value;hr&&Qc(sa(X.fullPath,$.delta),Wn()),d(z,X).catch(te=>Dt(te,12)?te:Dt(te,2)?(v(te.to,z).then(se=>{Dt(se,20)&&!$.delta&&$.type===rn.pop&&r.go(-1,!1)}).catch(Vr),Promise.reject()):($.delta&&r.go(-$.delta,!1),M(te,z,X))).then(te=>{te=te||D(z,X,!1),te&&($.delta?r.go(-$.delta,!1):$.type===rn.pop&&Dt(te,20)&&r.go(-1,!1)),P(z,X,te)}).catch(Vr)}))}let g=wr(),m=wr(),R;function M(N,H,$){w(N);const z=m.list();return z.length?z.forEach(ee=>ee(N,H,$)):console.error(N),Promise.reject(N)}function F(){return R&&b.value!==Lt?Promise.resolve():new Promise((N,H)=>{g.add([N,H])})}function w(N){return R||(R=!N,y(),g.list().forEach(([H,$])=>N?$(N):H()),g.reset()),N}function U(N,H,$,z){const{scrollBehavior:ee}=e;if(!hr||!ee)return Promise.resolve();const X=!$&&Zc(sa(N.fullPath,0))||(z||!$)&&history.state&&history.state.scroll||null;return ro().then(()=>ee(N,H,X)).then(te=>te&&Xc(te)).catch(te=>M(te,N,H))}const B=N=>r.go(N);let k;const j=new Set;return{currentRoute:b,addRoute:_,removeRoute:O,hasRoute:L,getRoutes:C,resolve:S,options:e,push:c,replace:h,go:B,back:()=>B(-1),forward:()=>B(1),beforeEach:a.add,beforeResolve:o.add,afterEach:l.add,onError:m.add,isReady:F,install(N){const H=this;N.component("RouterLink",Fd),N.component("RouterView",kd),N.config.globalProperties.$router=H,Object.defineProperty(N.config.globalProperties,"$route",{enumerable:!0,get:()=>jr(b)}),hr&&!k&&b.value===Lt&&(k=!0,c(r.location).catch(ee=>{}));const $={};for(const ee in Lt)$[ee]=vt(()=>b.value[ee]);N.provide(rs,H),N.provide(Yo,st($)),N.provide(Li,b);const z=N.unmount;j.add(N),N.unmount=function(){j.delete(N),j.size<1&&(I=Lt,x&&x(),x=null,b.value=Lt,k=!1,R=!1),z()}}}}function ar(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function Kd(e,t){const n=[],i=[],r=[],a=Math.max(t.matched.length,e.matched.length);for(let o=0;o<a;o++){const l=t.matched[o];l&&(e.matched.find(I=>xr(I,l))?i.push(l):n.push(l));const b=e.matched[o];b&&(t.matched.find(I=>xr(I,b))||r.push(b))}return[n,i,r]}const jd="modulepreload",ma={},Wd="/",bi=function(t,n){return!n||n.length===0?t():Promise.all(n.map(i=>{if(i=`${Wd}${i}`,i in ma)return;ma[i]=!0;const r=i.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":jd,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((l,b)=>{o.addEventListener("load",l),o.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var Gd="store";function Rr(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function Hd(e){return e!==null&&typeof e=="object"}function $d(e){return e&&typeof e.then=="function"}function Vd(e,t){return function(){return e(t)}}function sl(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function al(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;Gn(e,n,[],e._modules.root,!0),is(e,n,t)}function is(e,t,n){var i=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,a={};Rr(r,function(o,l){a[l]=Vd(o,e),Object.defineProperty(e.getters,l,{get:function(){return a[l]()},enumerable:!0})}),e._state=st({data:t}),e.strict&&Zd(e),i&&n&&e._withCommit(function(){i.data=null})}function Gn(e,t,n,i,r){var a=!n.length,o=e._modules.getNamespace(n);if(i.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=i),!a&&!r){var l=ss(t,n.slice(0,-1)),b=n[n.length-1];e._withCommit(function(){l[b]=i.state})}var I=i.context=zd(e,o,n);i.forEachMutation(function(T,A){var p=o+A;Yd(e,p,T,I)}),i.forEachAction(function(T,A){var p=T.root?A:o+A,_=T.handler||T;Xd(e,p,_,I)}),i.forEachGetter(function(T,A){var p=o+A;Qd(e,p,T,I)}),i.forEachChild(function(T,A){Gn(e,t,n.concat(A),T,r)})}function zd(e,t,n){var i=t==="",r={dispatch:i?e.dispatch:function(a,o,l){var b=On(a,o,l),I=b.payload,T=b.options,A=b.type;return(!T||!T.root)&&(A=t+A),e.dispatch(A,I)},commit:i?e.commit:function(a,o,l){var b=On(a,o,l),I=b.payload,T=b.options,A=b.type;(!T||!T.root)&&(A=t+A),e.commit(A,I,T)}};return Object.defineProperties(r,{getters:{get:i?function(){return e.getters}:function(){return ol(e,t)}},state:{get:function(){return ss(e.state,n)}}}),r}function ol(e,t){if(!e._makeLocalGettersCache[t]){var n={},i=t.length;Object.keys(e.getters).forEach(function(r){if(r.slice(0,i)===t){var a=r.slice(i);Object.defineProperty(n,a,{get:function(){return e.getters[r]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function Yd(e,t,n,i){var r=e._mutations[t]||(e._mutations[t]=[]);r.push(function(o){n.call(e,i.state,o)})}function Xd(e,t,n,i){var r=e._actions[t]||(e._actions[t]=[]);r.push(function(o){var l=n.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},o);return $d(l)||(l=Promise.resolve(l)),e._devtoolHook?l.catch(function(b){throw e._devtoolHook.emit("vuex:error",b),b}):l})}function Qd(e,t,n,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(a){return n(i.state,i.getters,a.state,a.getters)})}function Zd(e){pr(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function ss(e,t){return t.reduce(function(n,i){return n[i]},e)}function On(e,t,n){return Hd(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var Jd="vuex bindings",pa="vuex:mutations",ii="vuex:actions",or="vuex",qd=0;function eh(e,t){Bc({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Jd]},function(n){n.addTimelineLayer({id:pa,label:"Vuex Mutations",color:Ea}),n.addTimelineLayer({id:ii,label:"Vuex Actions",color:Ea}),n.addInspector({id:or,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(i){if(i.app===e&&i.inspectorId===or)if(i.filter){var r=[];cl(r,t._modules.root,i.filter,""),i.rootNodes=r}else i.rootNodes=[fl(t._modules.root,"")]}),n.on.getInspectorState(function(i){if(i.app===e&&i.inspectorId===or){var r=i.nodeId;ol(t,r),i.state=nh(sh(t._modules,r),r==="root"?t.getters:t._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(i){if(i.app===e&&i.inspectorId===or){var r=i.nodeId,a=i.path;r!=="root"&&(a=r.split("/").filter(Boolean).concat(a)),t._withCommit(function(){i.set(t._state.data,a,i.state.value)})}}),t.subscribe(function(i,r){var a={};i.payload&&(a.payload=i.payload),a.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(or),n.sendInspectorState(or),n.addTimelineEvent({layerId:pa,event:{time:Date.now(),title:i.type,data:a}})}),t.subscribeAction({before:function(i,r){var a={};i.payload&&(a.payload=i.payload),i._id=qd++,i._time=Date.now(),a.state=r,n.addTimelineEvent({layerId:ii,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:a}})},after:function(i,r){var a={},o=Date.now()-i._time;a.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(a.payload=i.payload),a.state=r,n.addTimelineEvent({layerId:ii,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:a}})}})})}var Ea=8702998,th=6710886,rh=16777215,ll={label:"namespaced",textColor:rh,backgroundColor:th};function ul(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function fl(e,t){return{id:t||"root",label:ul(t),tags:e.namespaced?[ll]:[],children:Object.keys(e._children).map(function(n){return fl(e._children[n],t+n+"/")})}}function cl(e,t,n,i){i.includes(n)&&e.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:t.namespaced?[ll]:[]}),Object.keys(t._children).forEach(function(r){cl(e,t._children[r],n,i+r+"/")})}function nh(e,t,n){t=n==="root"?t:t[n];var i=Object.keys(t),r={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(i.length){var a=ih(t);r.getters=Object.keys(a).map(function(o){return{key:o.endsWith("/")?ul(o):o,editable:!1,value:Oi(function(){return a[o]})}})}return r}function ih(e){var t={};return Object.keys(e).forEach(function(n){var i=n.split("/");if(i.length>1){var r=t,a=i.pop();i.forEach(function(o){r[o]||(r[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),r=r[o]._custom.value}),r[a]=Oi(function(){return e[n]})}else t[n]=Oi(function(){return e[n]})}),t}function sh(e,t){var n=t.split("/").filter(function(i){return i});return n.reduce(function(i,r,a){var o=i[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+t+'".');return a===n.length-1?o:o._children},t==="root"?e:e.root._children)}function Oi(e){try{return e()}catch(t){return t}}var ft=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=(typeof i=="function"?i():i)||{}},dl={namespaced:{configurable:!0}};dl.namespaced.get=function(){return!!this._rawModule.namespaced};ft.prototype.addChild=function(t,n){this._children[t]=n};ft.prototype.removeChild=function(t){delete this._children[t]};ft.prototype.getChild=function(t){return this._children[t]};ft.prototype.hasChild=function(t){return t in this._children};ft.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};ft.prototype.forEachChild=function(t){Rr(this._children,t)};ft.prototype.forEachGetter=function(t){this._rawModule.getters&&Rr(this._rawModule.getters,t)};ft.prototype.forEachAction=function(t){this._rawModule.actions&&Rr(this._rawModule.actions,t)};ft.prototype.forEachMutation=function(t){this._rawModule.mutations&&Rr(this._rawModule.mutations,t)};Object.defineProperties(ft.prototype,dl);var tr=function(t){this.register([],t,!1)};tr.prototype.get=function(t){return t.reduce(function(n,i){return n.getChild(i)},this.root)};tr.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(i,r){return n=n.getChild(r),i+(n.namespaced?r+"/":"")},"")};tr.prototype.update=function(t){hl([],this.root,t)};tr.prototype.register=function(t,n,i){var r=this;i===void 0&&(i=!0);var a=new ft(n,i);if(t.length===0)this.root=a;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],a)}n.modules&&Rr(n.modules,function(l,b){r.register(t.concat(b),l,i)})};tr.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),i=t[t.length-1],r=n.getChild(i);!r||!r.runtime||n.removeChild(i)};tr.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),i=t[t.length-1];return n?n.hasChild(i):!1};function hl(e,t,n){if(t.update(n),n.modules)for(var i in n.modules){if(!t.getChild(i))return;hl(e.concat(i),t.getChild(i),n.modules[i])}}function ah(e){return new Qe(e)}var Qe=function(t){var n=this;t===void 0&&(t={});var i=t.plugins;i===void 0&&(i=[]);var r=t.strict;r===void 0&&(r=!1);var a=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new tr(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=a;var o=this,l=this,b=l.dispatch,I=l.commit;this.dispatch=function(p,_){return b.call(o,p,_)},this.commit=function(p,_,O){return I.call(o,p,_,O)},this.strict=r;var T=this._modules.root.state;Gn(this,T,[],this._modules.root),is(this,T),i.forEach(function(A){return A(n)})},as={state:{configurable:!0}};Qe.prototype.install=function(t,n){t.provide(n||Gd,this),t.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&eh(t,this)};as.state.get=function(){return this._state.data};as.state.set=function(e){};Qe.prototype.commit=function(t,n,i){var r=this,a=On(t,n,i),o=a.type,l=a.payload,b={type:o,payload:l},I=this._mutations[o];!I||(this._withCommit(function(){I.forEach(function(A){A(l)})}),this._subscribers.slice().forEach(function(T){return T(b,r.state)}))};Qe.prototype.dispatch=function(t,n){var i=this,r=On(t,n),a=r.type,o=r.payload,l={type:a,payload:o},b=this._actions[a];if(!!b){try{this._actionSubscribers.slice().filter(function(T){return T.before}).forEach(function(T){return T.before(l,i.state)})}catch{}var I=b.length>1?Promise.all(b.map(function(T){return T(o)})):b[0](o);return new Promise(function(T,A){I.then(function(p){try{i._actionSubscribers.filter(function(_){return _.after}).forEach(function(_){return _.after(l,i.state)})}catch{}T(p)},function(p){try{i._actionSubscribers.filter(function(_){return _.error}).forEach(function(_){return _.error(l,i.state,p)})}catch{}A(p)})})}};Qe.prototype.subscribe=function(t,n){return sl(t,this._subscribers,n)};Qe.prototype.subscribeAction=function(t,n){var i=typeof t=="function"?{before:t}:t;return sl(i,this._actionSubscribers,n)};Qe.prototype.watch=function(t,n,i){var r=this;return pr(function(){return t(r.state,r.getters)},n,Object.assign({},i))};Qe.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};Qe.prototype.registerModule=function(t,n,i){i===void 0&&(i={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),Gn(this,this.state,t,this._modules.get(t),i.preserveState),is(this,this.state)};Qe.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var i=ss(n.state,t.slice(0,-1));delete i[t[t.length-1]]}),al(this)};Qe.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};Qe.prototype.hotUpdate=function(t){this._modules.update(t),al(this,!0)};Qe.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(Qe.prototype,as);var oh={\u6307\u5357:[{name:"\u5F00\u59CB Start",prefix:"\u5F00\u59CB",suffix:"Start",path:"start",file:"/intro/start/index.js"},{name:"\u89C4\u8303 Standard",prefix:"\u89C4\u8303",suffix:"Standard",path:"standard",file:"/intro/standard.vue"}],\u5C5E\u6027:[{name:"\u989C\u8272 Colors",prefix:"\u989C\u8272",suffix:"Colors",path:"colors",file:"/attribute/color"},{name:"\u5C3A\u5BF8 Sizing",prefix:"\u5C3A\u5BF8",suffix:"Sizing",path:"sizing",file:"/attribute/sizing"},{name:"\u76D2\u5B50 Box",prefix:"\u76D2\u5B50",suffix:"Box",path:"box",file:"/attribute/box"},{name:"\u6587\u5B57 Text",prefix:"\u6587\u5B57",suffix:"Text",path:"text",file:"/attribute/text"},{name:"\u6D4B\u8BD5 Test",prefix:"\u6D4B\u8BD5",suffix:"Test",path:"test",file:"/attribute/test"}],\u9884\u8BBE:[{name:"CSS Reset",prefix:"CSS",suffix:"Reset",path:"reset",file:"/preset/reset.vue"},{name:"\u8499\u677F Matte",prefix:"\u8499\u677F",suffix:"Matte",path:"overlay",file:"/preset/matte"},{name:"\u4E3B\u9898 Theme",prefix:"\u4E3B\u9898",suffix:"Theme",path:"theme",file:"/preset/doc-theme"},{name:"\u6D88\u606F Message",prefix:"\u6D88\u606F",suffix:"Message",path:"message",file:"/preset/doc-message"}],\u5BB9\u5668:[{name:"\u81EA\u9002\u5E94 Fit",prefix:"\u81EA\u9002\u5E94",suffix:"Fit",path:"fit",file:"/container/doc-fit"},{name:"\u9648\u5217 Flex",prefix:"\u9648\u5217",suffix:" Flex",path:"flex",file:"/container/doc-flex",width:"45px"}],\u7EC4\u4EF6:[{name:"\u56FE\u6807 Ico",prefix:"\u56FE\u6807",suffix:"Ico",path:"icon",file:"/component/icon"},{name:"\u6309\u94AE Btn",prefix:"\u6309\u94AE",suffix:"Btn",path:"btn",file:"/component/btn"},{name:"\u89C6\u9891 Vid",prefix:"\u89C6\u9891",suffix:"Vid",path:"vid",file:"/component/vid"},{name:"\u5B57\u6BB5 Field",prefix:"\u5B57\u6BB5",suffix:"Field",path:"field",file:"/component/field"}],\u6307\u4EE4:[{name:"\u61D2\u52A0\u8F7D",prefix:"\u61D2\u52A0\u8F7D",suffix:"Lazy",path:"lazy",file:"/directive/doc-lazy"}]};const Ci=ah({state(){return{version:"1.3.1",doc:oh}},mutations:{},getters:{},actions:{}});let vl=[];for(let e in Ci.state.doc)for(let t of Ci.state.doc[e])vl.push({name:t.name,path:t.path,component:()=>bi(()=>import(`../views/documentation/content${t.file}`),[])});let lh=[{path:"/",name:"Home",component:()=>bi(()=>import("./index.3ad17b0c.js"),["assets/index.3ad17b0c.js","assets/index.099b4533.css"])},{path:"/doc",name:"Documentation",component:()=>bi(()=>import("./index.7b06bbeb.js"),["assets/index.7b06bbeb.js","assets/index.5c5a0033.css"]),children:[...vl]},{path:"/doc/:pathMatch(.*)*",name:"error",redirect:"/"},{path:"/:pathMatch(.*)*",name:"error",redirect:"/"}];var os=Nd({history:td(),routes:lh});os.beforeEach((e,t,n)=>{n()});os.afterEach((e,t)=>{let n=e.name?" | "+e.name[0].toUpperCase()+e.name.slice(1):"";document.title="Mew"+n,document.documentElement.scrollTop=0});let Kr=st({mobile:!1});{let e=function(n){if(n){console.log(0);let i=document.createAttribute("mobile");document.body.setAttributeNode(i)}else document.body.removeAttribute("mobile")},t=function(n,i){let r=null;return function(){let a=arguments;clearTimeout(r),r=setTimeout(()=>{n.apply(this,a)},i)}};window.addEventListener("load",()=>{(function(n){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(Kr.mobile=!0)})(navigator.userAgent||navigator.vendor||window.opera),e(Kr.mobile)}),window.addEventListener("resize",t(()=>{Kr.mobile=document.body.offsetWidth<1250,e(Kr.mobile)},50))}let gl=st({keepFocus:!1,wrapper:null,target:null}),ml=st({valid:!1,color:"white",image:"",text:"Loading",icon:"",size:1,next:null,target:null,config:null}),pl=st({valid:!1,color:"white",image:"",text:"Pending",icon:"",size:1,next:null,target:null,config:null}),Ri=st({theme:"light"}),Rt=st([]),ot=function(e){let t={id:Symbol()},n=e instanceof Object?e:{text:e.toString()};for(let i in n)t[i]=n[i];n.text||(n.text="No text !"),n.style||(n.style=""),Rt.push(t),Rt.length>8&&Rt.shift()};ot.__proto__.flag=!1,ot.__proto__.clear=function(e){if(!this.flag){this.flag=!0,Rt.length>0&&Rt.shift();let t=setInterval(()=>{Rt.length===0?(this.flag=!1,clearInterval(t)):Rt.shift()},200)}},ot.__proto__.message=function(e){let t={color:"blue",title:"\u6D88\u606F",text:"\u8FD9\u662F\u4E00\u4E2A\u6D88\u606F\u63D0\u793A\uFF01",icon:"state-hint-caution"};if(e instanceof Object)for(let n in e)t[n]=e[n];else e&&(t.text=e);ot(t)},ot.__proto__.success=function(e){let t={color:"green",title:"\u6210\u529F",text:"\u8FD9\u662F\u4E00\u4E2A\u6210\u529F\u63D0\u793A\uFF01",icon:"state-hint-achieve"};if(e instanceof Object)for(let n in e)t[n]=e[n];else e&&(t.text=e);ot(t)},ot.__proto__.caution=function(e){let t={color:"yellow",title:"\u6CE8\u610F",text:"\u8FD9\u662F\u4E00\u4E2A\u6CE8\u610F\u63D0\u793A\uFF01",icon:"state-hint-warning"};if(e instanceof Object)for(let n in e)t[n]=e[n];else e&&(t.text=e);ot(t)},ot.__proto__.failure=function(e){let t={color:"red",title:"\u9519\u8BEF",text:"\u8FD9\u662F\u4E00\u4E2A\u9519\u8BEF\u63D0\u793A\uFF01",icon:"state-hint-bad"};if(e instanceof Object)for(let n in e)t[n]=e[n];else e&&(t.text=e);ot(t)};const uh={name:"mew-spinner",props:{color:{type:String,default:"white"}}},fh={class:"mew-spinner"},ch={fill:"",viewBox:"25 25 50 50"},dh=["stroke"];function hh(e,t,n,i,r,a){return ae(),fe("div",fh,[(ae(),fe("svg",ch,[ie("circle",{cx:"50",cy:"50",r:"1em",fill:"none",stroke:n.color},null,8,dh)]))])}var El=xe(uh,[["render",hh]]);const vh={name:"mew-icon",data(){return{tink:""}},props:{dense:{type:Boolean,default:!1}},watch:{name(){this.tink=this.tink==="foo"?"bar":"foo"}},computed:{name(){return this.$slots.default?"mew-icon-"+this.$slots.default()[0].children:""},still(){return this.dense?"dense":""}}};function gh(e,t,n,i,r,a){return ae(),fe("i",{class:De(["mew",[a.name,r.tink,a.still]])},null,2)}var yl=xe(vh,[["render",gh],["__scopeId","data-v-31f39191"]]);const mh={name:"mew-matte",mounted(){this.loading.target||(this.loading.target=this.body),this.pending.target||(this.pending.target=this.body)},components:{ico:yl,spinner:El},data(){return{loading:ml,pending:pl,body:document.body,tink_loading:0,tink_pending:0}},computed:{stat_loading(){let e=this.loading;return e.image+e.text+e.icon},stat_pending(){let e=this.pending;return e.image+e.text+e.icon}},watch:{stat_loading(){this.tink_loading=this.tink_loading===1?2:1},stat_pending(){this.tink_pending=this.tink_pending===1?2:1},"loading.config":function(e){this.reset("loading")},"pending.config":function(e){this.reset("pending")},"loading.valid":function(e){e||this.reset("loading")},"pending.valid":function(e){e||this.reset("pending")}},methods:{next(e){this[e].next&&this[e].next()},reset(e){let t=this[e].config?this[e].config:{color:"white",image:"",text:"Pending",icon:"",size:1,next:null,target:null};for(let n in t)this[e][n]=t[n]}}},ph={key:0,class:"mew-matte"},Eh={key:0,class:"text"},yh=["src"],Th={key:0,class:"mew-matte-pending-box",column:"",ac:""},xh={key:0,class:"text"},Sh=["src"],Ah=ie("div",{class:"ellipsis"},[ie("i"),ie("i"),ie("i"),ie("i")],-1),Lh={key:1,class:"mew-matte-pending-next"},Dh=["src"],_h={class:"steady"};function bh(e,t,n,i,r,a){const o=Ce("ico"),l=Ce("spinner");return ae(),fe(Me,null,[r.loading.target?(ae(),Ye(Us,{key:0,to:r.loading.target},[Ee(tn,{name:"fade"},{default:tt(()=>[r.loading.valid?(ae(),fe("div",ph,[ie("div",{class:De(["mew-matte-loading",{nudge:r.loading.target===r.body,steady:r.loading.next}]),style:qt("--CLR:"+r.loading.color+";--SCL:"+r.loading.size),onClick:t[0]||(t[0]=b=>a.next("loading"))},[ie("div",{class:De(["partten",{border:r.loading.image,foo:r.tink_loading===1,bar:r.tink_loading===2}])},[r.loading.next&&r.loading.icon||!r.loading.icon&&!r.loading.image?(ae(),fe("i",Eh,[r.loading.next&&r.loading.icon?(ae(),Ye(o,{key:0,class:"inlineIco",dense:""},{default:tt(()=>[rt(_e(r.loading.icon),1)]),_:1})):Fe("",!0),rt(" "+_e(r.loading.text),1)])):r.loading.image?(ae(),fe("img",{key:1,src:r.loading.image},null,8,yh)):(ae(),Ye(o,{key:2,dense:"",style:{"font-size":"58px"}},{default:tt(()=>[rt(_e(r.loading.icon),1)]),_:1}))],2),Ee(l,{color:r.loading.color,style:{width:"164px",height:"164px"}},null,8,["color"])],6)])):Fe("",!0)]),_:1})],8,["to"])):Fe("",!0),r.pending.target?(ae(),Ye(Us,{key:1,to:r.pending.target},[Ee(tn,{name:"fade"},{default:tt(()=>[r.pending.valid?(ae(),fe("div",{key:0,class:"mew-matte",onClick:t[1]||(t[1]=b=>a.next("pending"))},[ie("div",{class:De(["mew-matte-pending",{nudge:r.pending.target===r.body}]),style:qt("--CLR:"+r.pending.color+";--SCL:"+r.pending.size)},[r.pending.next?(ae(),fe("div",Lh,[r.pending.image?(ae(),fe("img",{key:0,src:r.pending.image},null,8,Dh)):r.pending.icon?(ae(),Ye(o,{key:1,class:"icon",dense:"",style:{"font-size":"58px"}},{default:tt(()=>[rt(_e(r.pending.icon),1)]),_:1})):Fe("",!0),ie("i",_h,_e(r.pending.text),1)])):(ae(),fe("div",Th,[ie("div",{class:De(["partten",{border:r.pending.image,foo:r.tink_pending===1,bar:r.tink_pending===2}])},[!r.pending.icon&&!r.pending.image?(ae(),fe("i",xh,_e(r.pending.text),1)):r.pending.image?(ae(),fe("img",{key:1,src:r.pending.image},null,8,Sh)):(ae(),Ye(o,{key:2,dense:"",style:{"font-size":"58px"}},{default:tt(()=>[rt(_e(r.pending.icon),1)]),_:1}))],2),Ah]))],6)])):Fe("",!0)]),_:1})],8,["to"])):Fe("",!0)],64)}var Oh=xe(mh,[["render",bh]]);const Ch={name:"mew-color",mounted(){let e=localStorage.getItem("theme");e||(e="light"),this.setColor(e)},data(){return{color:Ri}},watch:{"color.theme":function(e,t){t&&this.removeAttr(t),this.setColor(e),localStorage.setItem("theme",e)}},methods:{setColor(e){document.body.setAttribute("mew-theme",e),Ri.theme=e,this.addAttr(e)},addAttr(e){document.body.setAttributeNode(document.createAttribute(e))},removeAttr(e){document.body.removeAttribute(e)}}};function Rh(e,t,n,i,r,a){return Fe("",!0)}var Ph=xe(Ch,[["render",Rh]]);const Ih={name:"toast-props",props:{color:{type:String,default:""},title:{type:[String,Boolean],default:""},close:{type:Boolean,default:!0},delay:{type:Number,default:4},stick:{type:Boolean,default:!1},icon:{type:[String,Boolean],default:"state-hint-achieve"},text:{type:String,default:"This is a message"},center:{type:Boolean,default:!1},class:{type:String,default:""},css:{type:String,default:""}}};var Mh={red:{fontColor:"#e00000",backgroundColor:"rgba(255,234,234,.92)"},pink:{fontColor:"#d600a7",backgroundColor:"rgba(255,224,242,.92)"},purple:{fontColor:"#a000b2",backgroundColor:"rgba(250,220,255,.92)"},orange:{fontColor:"#ffffff",backgroundColor:"rgba(255,110,0,.92)"},cyan:{fontColor:"#005991",backgroundColor:"rgba(230,252,255,.92)"},lake:{fontColor:"#005b49",backgroundColor:"rgba(224,255,249,.92)"},green:{fontColor:"#007d03",backgroundColor:"rgba(236,255,236,.92)"},blue:{fontColor:"#0058c4",backgroundColor:"rgba(220,235,255,.92)"},indigo:{fontColor:"#003860",backgroundColor:"rgba(220,235,255,.92)"},grey:{fontColor:"#ffffff",backgroundColor:"rgba(74,101,127,.92)"},black:{fontColor:"#ffffff",backgroundColor:"rgba(30,30,30,.9)"},yellow:{fontColor:"#aa5800",backgroundColor:"rgba(255,253,225,.92)"},golden:{fontColor:"#844c03",backgroundColor:"rgba(255,238,205,.92)"},catskill:{fontColor:"#2e3f50",backgroundColor:"rgba(238,243,246,.92)"},white:{fontColor:"black",backgroundColor:"rgba(255,255,255,.92)"}};const Fh={name:"mew-toast",emits:["remove"],mixins:[Ih],data(){return{hold:!1,timer:null,trial:0}},mounted(){this.stick||(this.trial=parseInt(this.delay),this.timer=setInterval(()=>{this.hold||(this.trial-=1,this.trial<=0&&this.$emit("remove"))},1e3))},beforeUnmount(){clearInterval(this.timer)},computed:{theme(){return this.color?Mh[this.color]:!1},sheet(){let e="";return this.theme&&(e+="color:"+this.theme.fontColor+";background-color:"+this.theme.backgroundColor+";"),this.css&&(e+=this.css),e},names(){let e="";return this.icon&&(e+="pl "),this.close&&(e+="pr "),this.title&&(e+="title "),e+this.class}}},wh={class:"mew-toast-ctx",flex:"",column:""},Bh={key:0,class:"mew-toast-title"},Uh={class:"mew-toast-texts"};function kh(e,t,n,i,r,a){return ae(),fe("li",{flex:"",relative:"",class:De(["mew-toast",[a.names]]),style:qt(a.sheet),onMouseenter:t[1]||(t[1]=o=>r.hold=!0),onMouseleave:t[2]||(t[2]=o=>r.hold=!1)},[e.icon?(ae(),fe("i",{key:0,class:De(["mew-toast-icon",["mew-icon-"+e.icon]])},null,2)):Fe("",!0),ie("div",wh,[e.title?(ae(),fe("i",Bh,_e(e.title),1)):Fe("",!0),ie("i",Uh,_e(e.text),1)]),e.close?(ae(),fe("i",{key:1,class:"mew-icon-form-close",onClick:t[0]||(t[0]=o=>e.$emit("remove"))})):Fe("",!0)],38)}var Nh=xe(Fh,[["render",kh]]);const Kh={name:"mew-notes",mounted(){},components:{toast:Nh},data(){return{notes:Rt}},methods:{remove(e){for(let t=0;t<this.notes.length;t++)if(this.notes[t].id===e){this.notes.splice(t,1);break}}}},jh={class:"mew-notify",noselect:""};function Wh(e,t,n,i,r,a){const o=Ce("toast");return ae(),fe("div",jh,[Ee(vc,{name:"tikup",tag:"ul"},{default:tt(()=>[(ae(!0),fe(Me,null,es(r.notes,(l,b)=>(ae(),Ye(o,{close:l.close,class:De(l.class),color:l.color,title:l.title,stick:l.stick,delay:l.delay,text:l.text,icon:l.icon,css:l.style,key:l.id,onRemove:I=>a.remove(l.id)},null,8,["close","class","color","title","stick","delay","text","icon","css","onRemove"]))),128))]),_:1})])}var Gh=xe(Kh,[["render",Wh]]);const Hh={name:"mew-field-wrapper",created(){this.selecting.wrapper=this},data(){return{selecting:gl}},methods:{unload(){this.$el.style.paddingLeft="",this.$el.style.paddingTop="",this.$refs.shadow.style="",this.$refs.shadow.parentNode.replaceChild(this.selecting.target.$el,this.$refs.shadow),this.$el.appendChild(this.$refs.shadow),this.selecting.keepFocus&&this.selecting.target.$el.getElementsByTagName(this.selecting.target.area?"textarea":"input")[0].focus(),this.selecting.target=null}},watch:{"selecting.target":function(e){if(e){let t=this.selecting.target.$el.getElementsByClassName("mew-field-dropList")[0],n=getComputedStyle(t);n.left==="auto"&&t.style.setProperty("--bl",0),n.top==="auto"&&t.style.setProperty("--bt",0),n.width==="auto"&&(t.style.setProperty("--bl",0),t.style.setProperty("--br",0));let i=getComputedStyle(this.selecting.target.$el),r=this.selecting.target.$el.getBoundingClientRect(),a="vertical-align:top;";a+="width:"+Math.round(r.width)+"px;height:"+Math.round(r.height)+"px;position:"+i.position+";left:"+i.left+";right:"+i.right+";transform:"+i.transform,this.$refs.shadow.style=a,t.style.setProperty("--boxShadow",i.boxShadow),this.selecting.target.$el.parentNode.replaceChild(this.$refs.shadow,this.selecting.target.$el),this.$el.appendChild(this.selecting.target.$el),this.$el.style.paddingLeft=r.x+"px",this.$el.style.paddingTop=r.y+"px",this.selecting.keepFocus=!0,this.$nextTick(()=>{if(e){t.style.setProperty("--paddingTop",this.selecting.target.$el.offsetHeight+"px");let o=n.color.split(","),l=o[0]+","+o[1]+","+parseInt(o[2])+", 0.04)";t.style.setProperty("--hoverColor",l)}})}}}},$h={ref:"shadow","inline-block":""};function Vh(e,t,n,i,r,a){return ae(),fe("div",{id:"mew-field-wrapper",class:De({valid:r.selecting.target}),onClick:t[0]||(t[0]=Er((...o)=>a.unload&&a.unload(...o),["self"])),onMousewheel:t[1]||(t[1]=Er((...o)=>a.unload&&a.unload(...o),["self"]))},[ie("div",$h,null,512)],34)}var zh=xe(Hh,[["render",Vh]]);const Yh={name:"app",components:{matte:Oh,color:Ph,notes:Gh,fieldWrapper:zh}};function Xh(e,t,n,i,r,a){const o=Ce("color"),l=Ce("matte"),b=Ce("notes"),I=Ce("field-wrapper");return ae(),fe(Me,null,[Ee(o),Ee(l),Ee(b),Ee(I)],64)}var Qh=xe(Yh,[["render",Xh]]);let ls=document.createElement("div");ls.setAttribute("id","mew");document.body.appendChild(ls);$o(Qh).mount(ls);const Zh={name:"mew-btn",emits:["click"],props:{disabled:{type:Boolean,default:!1},vanilla:{type:Boolean,default:!1}},data(){return{n:0}},methods:{click(){this.$emit("click"),this.n=this.n===1?2:1}}};function Jh(e,t,n,i,r,a){return ae(),fe("button",{class:De(["mew-btn",{vanilla:n.vanilla,disabled:n.disabled,foo:r.n===1,bar:r.n===2}]),onClick:t[0]||(t[0]=(...o)=>a.click&&a.click(...o))},[Bt(e.$slots,"default",{},void 0,!0)],2)}var qh=xe(Zh,[["render",Jh],["__scopeId","data-v-a064d9ca"]]);const ev={name:"mew-vid-err"},tv={white:"",lighten:"",column:"",jc:"",ac:""},rv=ie("div",{jc:""}," Sorry, your browser does not support this video. ",-1),nv=ie("div",{jc:""},[rt(" Please try other "),ie("a",{href:"https://videojs.com/html5-video-support/",target:"_blank","pl-sm":""},"web browsers")],-1),iv=[rv,nv];function sv(e,t,n,i,r,a){return ae(),fe("div",tv,iv)}var av=xe(ev,[["render",sv]]);const ov={name:"mew-vid-mxvideo",components:{err:av},inject:["v"],emits:["load"],mounted(){this.v.el=this.$el},watch:{"v.playing":function(e){this.$parent.$emit(e?"play":"pause")}},methods:{initialize(){this.$el.playbackRate=1,this.v.time=0,this.v.rate="1.0",this.v.loop||(this.v.playing=!1)},updateTime(){this.v.time=this.$el.currentTime},autoplay(){this.v.autoplay&&(this.v.volume=0,this.v.playing=!0)}}},lv=["autoplay","volume","poster","loop"];function uv(e,t,n,i,r,a){const o=Ce("err");return ae(),fe("video",{fill:"",onContextmenu:t[0]||(t[0]=Er(()=>{},["prevent"])),controlsList:"nodownload",onLoadstart:t[1]||(t[1]=(...l)=>a.initialize&&a.initialize(...l)),onLoadedmetadata:t[2]||(t[2]=l=>{a.v.duration=e.$el.duration,e.$parent.$emit("load",e.$el.duration),a.autoplay()}),onTimeupdate:t[3]||(t[3]=l=>{a.updateTime(),e.$parent.$emit("playing",a.v.time)}),onEnded:t[4]||(t[4]=l=>{a.initialize(),e.$parent.$emit("end")}),onWaiting:t[5]||(t[5]=l=>{a.v.loading=!0,e.$parent.$emit("wait")}),onCanplay:t[6]||(t[6]=l=>a.v.loading=!1),autoplay:a.v.autoplay,volume:a.v.volume,poster:a.v.poster,loop:a.v.loop,type:"video/mp4"},[Ee(o)],40,lv)}var fv=xe(ov,[["render",uv]]);const cv={name:"timeline",inject:["v"],data(){return{time:0}},watch:{"v.time":function(e){this.time=e}},methods:{}},dv={class:"mew-vid-timeline"},hv=["value","max"],vv=["value","max"],gv=["max"];function mv(e,t,n,i,r,a){return ae(),fe("div",dv,[ie("progress",{class:"loaded",value:a.v.buffered,max:a.v.duration},null,8,hv),ie("progress",{class:"played",value:a.v.time,max:a.v.duration},null,8,vv),Ft(ie("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.v.time=o),onInput:t[1]||(t[1]=o=>a.v.el.currentTime=r.time),max:a.v.duration,min:"0",type:"range",step:"any"},null,40,gv),[[Ho,a.v.time]])])}var pv=xe(cv,[["render",mv]]);const Ev={name:"playBtn",inject:["v"],watch:{"v.playing":function(e){this.v.el[e?"play":"pause"]()}}},yv={class:"mew-vid-playBtn",ac:"",jc:""},Tv=["title"],xv={key:0,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},Sv=ie("path",{d:"M11.446 10.302C11.446 7.10226 15.0164 5.1977 17.6739 6.97978L38.1548 20.7141C40.5203 22.3004 40.5171 25.7807 38.1485 27.3626L17.6676 41.0413C15.0096 42.8165 11.446 40.9112 11.446 37.7149V10.302Z",fill:"white"},null,-1),Av=[Sv],Lv={key:1,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},Dv=ie("path",{d:"M11.9189 8.96134C11.9189 7.30449 13.2621 5.96134 14.9189 5.96134H17.7406C19.3975 5.96134 20.7406 7.30448 20.7406 8.96134V39.0387C20.7406 40.6955 19.3975 42.0387 17.7406 42.0387H14.9189C13.2621 42.0387 11.9189 40.6955 11.9189 39.0387V8.96134Z",fill:"white"},null,-1),_v=ie("path",{d:"M27.2594 8.96134C27.2594 7.30449 28.6025 5.96133 30.2594 5.96133H33.0811C34.7379 5.96133 36.0811 7.30448 36.0811 8.96133V39.0387C36.0811 40.6955 34.7379 42.0387 33.0811 42.0387H30.2594C28.6025 42.0387 27.2594 40.6955 27.2594 39.0387V8.96134Z",fill:"white"},null,-1),bv=[Dv,_v];function Ov(e,t,n,i,r,a){return ae(),fe("div",yv,[ie("i",{onClick:t[0]||(t[0]=o=>a.v.playing=!a.v.playing),title:a.v.playing?"Pause (space)":"Play (space)"},[Ee(tn,{name:"tikLeft"},{default:tt(()=>[a.v.playing?(ae(),fe("svg",Lv,bv)):(ae(),fe("svg",xv,Av))]),_:1})],8,Tv)])}var Cv=xe(Ev,[["render",Ov]]);const Rv={name:"mew-vid-clock",inject:["v"],computed:{time(){return this.parse(this.v.time)},duration(){return this.parse(this.v.duration)}},methods:{parse(e){let t=parseInt(e/60);t<10&&(t="0"+t);let n=parseInt(e%60);return n<10&&(n="0"+n),t+":"+n}}},Pv={class:"mew-vid-clock",jc:""};function Iv(e,t,n,i,r,a){return ae(),fe("div",Pv,[ie("i",null,_e(a.time),1),ie("i",null,_e(a.duration),1)])}var Mv=xe(Rv,[["render",Iv]]);const Fv={name:"mew-vid-rates",inject:["v"],data(){return{valid:!0}},watch:{valid(e){if(!e){let t=setTimeout(()=>{this.valid=!0,clearTimeout(t)},500)}},"v.rate":function(e){this.valid=!1,this.v.el.playbackRate=Number(e)}}},wv={class:"mew-vid-rates"},Bv={class:"mew-vid-rates-value",xs:""},Uv=["onClick"];function kv(e,t,n,i,r,a){return ae(),fe("div",wv,[ie("div",Bv,_e(a.v.rate),1),Ft(ie("ul",{onMouseleave:t[0]||(t[0]=o=>r.valid=!1)},[(ae(!0),fe(Me,null,es(a.v.rates,o=>(ae(),fe("li",{class:De({current:o===a.v.rate}),onClick:l=>a.v.rate=o},_e(o),11,Uv))),256))],544),[[yr,r.valid]])])}var Nv=xe(Fv,[["render",kv]]);const Kv={name:"mew-vid-setting",inject:["v"],mounted(){this.v.loop=localStorage.getItem("mew-vid-replay")!=="false"},data(){return{valid:!1,flag:!1}},methods:{toggle(){this.valid=!this.valid},blur(e){this.valid=e}},watch:{valid(e){e&&this.$nextTick(()=>{this.$refs.option.focus()})},"v.loop":function(e){localStorage.setItem("mew-vid-replay",e)}}},jv={class:"mew-vid-setting",jc:"",ac:""},Wv={class:"icon",title:"Settings"},Gv=ie("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M33.4 20C33.4 20.66 33.36 21.28 33.28 21.88L37.3 25.04C37.68 25.32 37.78 25.82 37.54 26.26L33.7 32.9C33.46 33.34 32.96 33.5 32.52 33.34L27.74 31.42C26.76 32.18 25.68 32.82 24.5 33.3L23.78 38.38C23.72 38.86 23.32 39.2 22.84 39.2H15.16C14.68 39.2 14.3 38.86 14.2 38.38L13.48 33.3C12.3 32.82 11.24 32.18 10.24 31.42L5.46 33.34C5.02 33.48 4.52 33.34 4.28 32.9L0.44 26.26C0.22 25.86 0.32 25.32 0.68 25.04L4.74 21.88C4.64 21.28 4.6 20.62 4.6 20C4.6 19.38 4.68 18.72 4.78 18.12L0.72 14.96C0.32 14.68 0.24 14.16 0.48 13.74L4.3 7.1C4.54 6.66 5.04 6.5 5.48 6.66L10.26 8.58C11.24 7.84 12.32 7.18 13.5 6.7L14.22 1.62C14.3 1.14 14.68 0.8 15.16 0.8H22.84C23.32 0.8 23.72 1.14 23.8 1.62L24.52 6.7C25.7 7.18 26.76 7.82 27.76 8.58L32.54 6.66C32.98 6.52 33.48 6.66 33.72 7.1L37.56 13.74C37.78 14.14 37.68 14.68 37.32 14.96L33.26 18.12C33.36 18.72 33.4 19.36 33.4 20ZM19 26.0599C22.3468 26.0599 25.0599 23.3468 25.0599 20C25.0599 16.6532 22.3468 13.9401 19 13.9401C15.6532 13.9401 12.9401 16.6532 12.9401 20C12.9401 23.3468 15.6532 26.0599 19 26.0599Z"},null,-1),Hv=[Gv],$v=ie("i",{class:"name"},"Replay",-1),Vv={key:0,class:"info",ac:"",jc:""};function zv(e,t,n,i,r,a){const o=Ce("ico");return ae(),fe("div",jv,[ie("i",Wv,[(ae(),fe("svg",{width:"38",height:"40",viewBox:"0 0 38 40",fill:"none",onClick:t[0]||(t[0]=(...l)=>a.toggle&&a.toggle(...l)),onMouseenter:t[1]||(t[1]=l=>r.flag=!0),onMouseleave:t[2]||(t[2]=l=>r.flag=!1)},Hv,32)),Ft(ie("ul",{ref:"option",tabindex:"0",onBlur:t[4]||(t[4]=l=>a.blur(r.flag))},[ie("li",{class:De(["replay",{green:a.v.loop}]),jsb:"",ac:"",onClick:t[3]||(t[3]=l=>a.v.loop=!a.v.loop)},[$v,Ee(o,{class:"switch",dense:""},{default:tt(()=>[rt(_e(a.v.loop?"setting-switch-right":"setting-switch-left"),1)]),_:1})],2),a.v.info?(ae(),fe("li",Vv,[ie("i",null,_e(a.v.info),1)])):Fe("",!0)],544),[[yr,r.valid]])])])}var Yv=xe(Kv,[["render",zv]]);const Xv={name:"volume",inject:["v"],mounted(){let e=localStorage.getItem("volume");this.v.volume=e||1},data(){return{tink:"",temp:0}},watch:{"v.volume":function(e){localStorage.setItem("volume",e)}},methods:{toggle(){this.tink=this.tink==="foo"?"bar":"foo",this.v.volume>0?(this.temp=this.v.volume,this.v.volume=0):this.v.volume=this.temp?this.temp:.2}}},Qv={class:"mew-vid-volume"},Zv={class:"mew-vid-volume-wrapper"},Jv={class:"slider"},qv=["value"],eg=["title"],tg={key:0,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},rg=ie("path",{d:"M7 16V31.0641H12L23 41V6L12 16H7ZM32.143 24C32.143 20.1653 29.9087 16.8723 26.6669 15.2691V32.7092C29.9087 31.1277 32.143 27.8347 32.143 24ZM26.6669 5V9.46294C32.9973 11.3261 37.6191 17.1323 37.6191 24C37.6191 30.8677 32.9973 36.6739 26.6669 38.5371V43C35.4506 41.0285 42 33.2725 42 24C42 14.7275 35.4506 6.97149 26.6669 5Z"},null,-1),ng=[rg],ig={key:1,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},sg=ie("path",{d:"M26.6669 5V9.46294C32.9973 11.3261 37.6191 17.1323 37.6191 24C37.6191 30.8677 32.9973 36.6739 26.6669 38.5371V43C35.4506 41.0285 42 33.2725 42 24C42 14.7275 35.4506 6.97149 26.6669 5Z","fill-opacity":"0.5"},null,-1),ag=ie("path",{d:"M7 16V31.0641H12L23 41V6L12 16H7ZM32.143 24C32.143 20.1653 29.9087 16.8723 26.6669 15.2691V32.7092C29.9087 31.1277 32.143 27.8347 32.143 24Z"},null,-1),og=[sg,ag],lg={key:2,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},ug=ie("path",{d:"M26.6669 5V9.46294C32.9973 11.3261 37.6191 17.1323 37.6191 24C37.6191 30.8677 32.9973 36.6739 26.6669 38.5371V43C35.4506 41.0285 42 33.2725 42 24C42 14.7275 35.4506 6.97149 26.6669 5Z","fill-opacity":"0.5"},null,-1),fg=ie("path",{d:"M32.143 24C32.143 20.1653 29.9087 16.8723 26.6669 15.2691V32.7092C29.9087 31.1277 32.143 27.8347 32.143 24Z","fill-opacity":"0.5"},null,-1),cg=ie("path",{d:"M7 16V31.0641H12L23 41V6L12 16H7Z"},null,-1),dg=[ug,fg,cg],hg={key:3,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},vg=ie("path",{d:"M26.6669 5V9.46294C32.9973 11.3261 37.6191 17.1323 37.6191 24C37.6191 30.8677 32.9973 36.6739 26.6669 38.5371V43C35.4506 41.0285 42 33.2725 42 24C42 14.7275 35.4506 6.97149 26.6669 5Z",fill:"white","fill-opacity":"0.5"},null,-1),gg=ie("path",{d:"M32.143 24C32.143 20.1653 29.9087 16.8723 26.6669 15.2691V32.7092C29.9087 31.1277 32.143 27.8347 32.143 24Z",fill:"white","fill-opacity":"0.5"},null,-1),mg=ie("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.8702 10.6634L23 16V6L17.8702 10.6634Z",fill:"white"},null,-1),pg=ie("path",{d:"M7 16V31.0641H12L23 41V28.2069L33.8064 39.0133L37.0133 35.8064L7.2069 6L4 9.2069L10.7931 16H7Z",fill:"white"},null,-1),Eg=[vg,gg,mg,pg];function yg(e,t,n,i,r,a){return ae(),fe("div",Qv,[ie("div",Zv,[ie("div",Jv,[ie("progress",{value:a.v.volume,max:"1"},null,8,qv),Ft(ie("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=o=>a.v.volume=o),step:"any",min:"0",max:"1"},null,512),[[Ho,a.v.volume]])]),ie("i",{class:De([r.tink]),onClick:t[1]||(t[1]=(...o)=>a.toggle&&a.toggle(...o)),title:a.v.volume===0?"Unmute (M)":"Mute (M)"},[a.v.volume>=.6?(ae(),fe("svg",tg,ng)):a.v.volume>=.3&&a.v.volume<.6?(ae(),fe("svg",ig,og)):a.v.volume>0&&a.v.volume<.3?(ae(),fe("svg",lg,dg)):(ae(),fe("svg",hg,Eg))],10,eg)])])}var Tg=xe(Xv,[["render",yg]]);const xg={name:"mew-vid-screen",inject:["v"],mounted(){this.prev=this.v.$el.previousSibling,this.next=this.v.$el.nextSibling,this.wrap=this.v.$el.parentNode;let e=this;document.addEventListener("fullscreenchange",e.checkFullScreen)},beforeUnmount(){let e=this;document.removeEventListener("fullscreenchange",e.checkFullScreen)},data(){return{prev:null,next:null,wrap:null,fullScreened:!1}},watch:{"v.cinematic":function(e){e?document.getElementById("mew").appendChild(this.v.$el):this.prev?this.wrap.insertBefore(this.v.$el,this.prev.nextSibling):this.next?this.wrap.insertBefore(this.v.$el,this.next):this.wrap.appendChild(this.v.$el),this.$parent.$el.focus()}},methods:{togglePinP(){document.pictureInPictureElement?document.exitPictureInPicture():this.v.el.requestPictureInPicture()},toggle(){document.fullscreenElement?document.exitFullscreen():this.v.$el.requestFullscreen().catch(e=>{console.log(e)})},checkFullScreen(){this.fullScreened=Boolean(document.fullscreenElement)}}},Sg={key:0,class:"mew-vid-screen mew-vid-picture",jc:""},Ag=ie("svg",{width:"35",height:"29",viewBox:"0 0 35 29",fill:"none"},[ie("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M35 0H0V29H35V0ZM32 3H3V26H32V3Z"}),ie("path",{d:"M16 13H30V24H16V13Z"})],-1),Lg=[Ag],Dg={class:"mew-vid-screen mew-vid-cinema",jc:""},_g=["title"],bg=ie("svg",{width:"35",height:"29",viewBox:"0 0 35 29",fill:"none"},[ie("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M35 0H0V29H35V0ZM32 3H3V26H32V3Z"}),ie("path",{d:"M7 7H28V22H7V7Z"})],-1),Og=[bg],Cg={class:"mew-vid-screen mew-vid-fullscreen",jc:""},Rg=["title"],Pg={key:0,width:"30",height:"29",viewBox:"0 0 30 29",fill:"none"},Ig=ie("path",{d:"M9.89965 3.5H3.54751L3.5 11H0L0.0474933 0H9.89963L9.89965 3.5Z"},null,-1),Mg=ie("path",{d:"M26.5475 3.5H19.3717L19.3716 0H29.9999L29.9524 11H26.5L26.5475 3.5Z"},null,-1),Fg=ie("path",{d:"M26.5475 25.5V19H29.9999L30 29H19.3717L19.3717 25.5H26.5475Z"},null,-1),wg=ie("path",{d:"M0.0475038 19L0.0475259 29H9.70961L9.70959 25.5H3.50001L3.50001 19H0.0475038Z"},null,-1),Bg=[Ig,Mg,Fg,wg],Ug={key:1,width:"30",height:"29",viewBox:"0 0 30 29",fill:"none"},kg=ie("path",{d:"M0.0476086 7.5H6.39974L6.44726 0H9.94726L9.89976 11H0.0476295L0.0476086 7.5Z"},null,-1),Ng=ie("path",{d:"M22.8241 7.5H30L30 11H19.3717L19.4192 0H22.8716L22.8241 7.5Z"},null,-1),Kg=ie("path",{d:"M22.8242 22.5V29H19.3718L19.3718 19H30L30.0001 22.5H22.8242Z"},null,-1),jg=ie("path",{d:"M9.70971 29L9.70969 19H0.0476074L0.0476303 22.5H6.25721L6.25721 29H9.70971Z"},null,-1),Wg=[kg,Ng,Kg,jg];function Gg(e,t,n,i,r,a){return ae(),fe(Me,null,[e.$global.mobile?Fe("",!0):(ae(),fe("div",Sg,[ie("i",{onClick:t[0]||(t[0]=(...o)=>a.togglePinP&&a.togglePinP(...o)),title:"Mini player and always front"},Lg)])),ie("div",Dg,[ie("i",{title:a.v.cinematic?"Default view (V)":"Theater mode (V)",onClick:t[1]||(t[1]=o=>a.v.cinematic=!a.v.cinematic)},Og,8,_g)]),ie("div",Cg,[ie("i",{title:r.fullScreened?"Exit fullscreen (F)":"Enter fullscreen (F)",onClick:t[2]||(t[2]=(...o)=>a.toggle&&a.toggle(...o))},[r.fullScreened?(ae(),fe("svg",Ug,Wg)):(ae(),fe("svg",Pg,Bg))],8,Rg)])],64)}var Hg=xe(xg,[["render",Gg]]);const $g={name:"mew-vid-info",inject:["v"],props:["x","y"],computed:{style(){return"left: "+this.x+"px;top:"+this.y+"px"}}},Vg=["innerHTML"];function zg(e,t,n,i,r,a){return ae(),fe("div",{class:"mew-vid-info",innerHTML:a.v.info,style:qt(a.style)},null,12,Vg)}var Yg=xe($g,[["render",zg]]);const Xg={name:"mew-vid-control",inject:["v"],components:{spinner:El,timeline:pv,playBtn:Cv,clock:Mv,rates:Nv,setting:Yv,volume:Tg,screen:Hg,info:Yg},mounted(){this.$el.focus()},beforeUnmount(){this.timers.forEach(e=>{e&&clearTimeout(e)})},data(){return{stopped:!0,actived:!1,hovered:!1,timers:[null,null,null],contextmenu:{x:0,y:0,valid:!1}}},watch:{"v.playing":function(e){this.timers[0]&&clearTimeout(this.timers[0]),e?this.timers[0]=setTimeout(()=>{this.stopped=!1,clearTimeout(this.timers[0]),this.timers[0]=null},2500):this.stopped=!0},actived:function(e){e&&(this.timers[1]=setTimeout(()=>{this.actived=!1,clearTimeout(this.timers[1]),this.timers[1]=null},2500))},hovered:function(e){e&&this.timers[2]&&(console.log(1),clearTimeout(this.timers[2]),this.timers[2]=null)}},computed:{visible(){return this.stopped||this.actived||this.hovered}},methods:{showInfo(e){this.v.info&&(this.contextmenu.x=e.offsetX,this.contextmenu.y=e.offsetY,this.contextmenu.valid=!0,this.$nextTick(()=>{this.$refs.info.$el.focus()}))},keydown(){switch(event.code){case"Escape":this.v.cinematic=!1;break;case"ArrowRight":this.v.el.currentTime+=2;break;case"ArrowLeft":this.v.el.currentTime-=2;break;case"Enter":case"Space":this.v.playing=!this.v.playing;break;case"ArrowUp":this.v.volume=this.v.volume<.9?Number(this.v.volume)+.1:1;break;case"ArrowDown":this.v.volume=this.v.volume>.1?this.v.volume-.1:0;break;case"KeyM":this.$.components.volume.methods.toggle.call(this);break;case"KeyF":this.$.components.screen.methods.toggle.call(this);break;case"KeyV":this.v.cinematic=!this.v.cinematic;break}},handle(e){e==="mouseenter"?(this.timers[2]&&(clearTimeout(this.timers[2]),this.timers[2]=null),this.hovered=!0):this.timers[2]=setTimeout(()=>{this.hovered=!1,clearTimeout(this.timers[2]),this.timers[2]=null},1e3)}}},Qg={key:0,class:"mew-vid-loading",jc:"",ac:""},Zg={ac:"","col-25":"",style:{position:"relative","z-index":"10"}},Jg=ie("div",{style:{"flex-grow":"1"}},null,-1);function qg(e,t,n,i,r,a){const o=Ce("spinner"),l=Ce("timeline"),b=Ce("playBtn"),I=Ce("clock"),T=Ce("rates"),A=Ce("setting"),p=Ce("volume"),_=Ce("screen"),O=Ce("info");return ae(),fe("div",{class:De(["mew-vid-control",{visible:a.visible}]),fill:"",column:"",je:"",tabindex:"0",onKeydown:t[8]||(t[8]=Er((...C)=>a.keydown&&a.keydown(...C),["prevent"])),onMouseenter:t[9]||(t[9]=C=>{e.$el.focus(),r.actived=!0})},[ie("div",{class:"mew-vid-viewport",onClick:t[0]||(t[0]=C=>a.v.playing=!a.v.playing),jc:"",ac:"",onDblclick:t[1]||(t[1]=C=>e.$.components.screen.methods.toggle.call(this)),onMousemove:t[2]||(t[2]=C=>r.actived=!0),onContextmenu:t[3]||(t[3]=Er((...C)=>a.showInfo&&a.showInfo(...C),["prevent"]))},[a.v.loading?(ae(),fe("div",Qg,[Ee(o,{fill:""})])):Fe("",!0)],32),Ft(ie("div",{class:"mew-vid-bench",column:"",je:"",onMouseenter:t[4]||(t[4]=C=>a.handle("mouseenter")),onContextmenu:t[5]||(t[5]=Er(()=>{},["prevent"])),onMouseleave:t[6]||(t[6]=C=>a.handle("mouseleave"))},[Ee(l),ie("div",Zg,[Ee(b),Ee(I),Jg,Ee(T),Ee(A),Ee(p),Ee(_)])],544),[[yr,a.visible]]),Ft(Ee(l,{"nd-md":"",style:{"pointer-events":"none"}},null,512),[[yr,!a.visible]]),a.v.info?Ft((ae(),Ye(O,{key:0,ref:"info",tabindex:"0",onBlur:t[7]||(t[7]=C=>r.contextmenu.valid=!1),x:r.contextmenu.x,y:r.contextmenu.y},null,8,["x","y"])),[[yr,r.contextmenu.valid]]):Fe("",!0)],34)}var em=xe(Xg,[["render",qg]]),Pi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function tm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tl={exports:{}};(function(e,t){typeof window!="undefined"&&function(i,r){e.exports=r()}(Pi,function(){return function(n){var i={};function r(a){if(i[a])return i[a].exports;var o=i[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=i,r.d=function(a,o,l){r.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:l})},r.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},r.t=function(a,o){if(o&1&&(a=r(a)),o&8||o&4&&typeof a=="object"&&a&&a.__esModule)return a;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:a}),o&2&&typeof a!="string")for(var b in a)r.d(l,b,function(I){return a[I]}.bind(null,b));return l},r.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(o,"a",o),o},r.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(n,i,r){var a=Object.prototype.hasOwnProperty,o="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(o=!1));function b(p,_,O){this.fn=p,this.context=_,this.once=O||!1}function I(p,_,O,C,L){if(typeof O!="function")throw new TypeError("The listener must be a function");var S=new b(O,C||p,L),u=o?o+_:_;return p._events[u]?p._events[u].fn?p._events[u]=[p._events[u],S]:p._events[u].push(S):(p._events[u]=S,p._eventsCount++),p}function T(p,_){--p._eventsCount===0?p._events=new l:delete p._events[_]}function A(){this._events=new l,this._eventsCount=0}A.prototype.eventNames=function(){var _=[],O,C;if(this._eventsCount===0)return _;for(C in O=this._events)a.call(O,C)&&_.push(o?C.slice(1):C);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(O)):_},A.prototype.listeners=function(_){var O=o?o+_:_,C=this._events[O];if(!C)return[];if(C.fn)return[C.fn];for(var L=0,S=C.length,u=new Array(S);L<S;L++)u[L]=C[L].fn;return u},A.prototype.listenerCount=function(_){var O=o?o+_:_,C=this._events[O];return C?C.fn?1:C.length:0},A.prototype.emit=function(_,O,C,L,S,u){var s=o?o+_:_;if(!this._events[s])return!1;var c=this._events[s],h=arguments.length,E,v;if(c.fn){switch(c.once&&this.removeListener(_,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,O),!0;case 3:return c.fn.call(c.context,O,C),!0;case 4:return c.fn.call(c.context,O,C,L),!0;case 5:return c.fn.call(c.context,O,C,L,S),!0;case 6:return c.fn.call(c.context,O,C,L,S,u),!0}for(v=1,E=new Array(h-1);v<h;v++)E[v-1]=arguments[v];c.fn.apply(c.context,E)}else{var f=c.length,d;for(v=0;v<f;v++)switch(c[v].once&&this.removeListener(_,c[v].fn,void 0,!0),h){case 1:c[v].fn.call(c[v].context);break;case 2:c[v].fn.call(c[v].context,O);break;case 3:c[v].fn.call(c[v].context,O,C);break;case 4:c[v].fn.call(c[v].context,O,C,L);break;default:if(!E)for(d=1,E=new Array(h-1);d<h;d++)E[d-1]=arguments[d];c[v].fn.apply(c[v].context,E)}}return!0},A.prototype.on=function(_,O,C){return I(this,_,O,C,!1)},A.prototype.once=function(_,O,C){return I(this,_,O,C,!0)},A.prototype.removeListener=function(_,O,C,L){var S=o?o+_:_;if(!this._events[S])return this;if(!O)return T(this,S),this;var u=this._events[S];if(u.fn)u.fn===O&&(!L||u.once)&&(!C||u.context===C)&&T(this,S);else{for(var s=0,c=[],h=u.length;s<h;s++)(u[s].fn!==O||L&&!u[s].once||C&&u[s].context!==C)&&c.push(u[s]);c.length?this._events[S]=c.length===1?c[0]:c:T(this,S)}return this},A.prototype.removeAllListeners=function(_){var O;return _?(O=o?o+_:_,this._events[O]&&T(this,O)):(this._events=new l,this._eventsCount=0),this},A.prototype.off=A.prototype.removeListener,A.prototype.addListener=A.prototype.on,A.prefixed=o,A.EventEmitter=A,n.exports=A},"./node_modules/url-toolkit/src/url-toolkit.js":function(n,i,r){(function(a){var o=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,l=/^(?=([^\/?#]*))\1([^]*)$/,b=/(?:\/|^)\.(?=\/)/g,I=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,T={buildAbsoluteURL:function(A,p,_){if(_=_||{},A=A.trim(),p=p.trim(),!p){if(!_.alwaysNormalize)return A;var O=T.parseURL(A);if(!O)throw new Error("Error trying to parse base URL.");return O.path=T.normalizePath(O.path),T.buildURLFromParts(O)}var C=T.parseURL(p);if(!C)throw new Error("Error trying to parse relative URL.");if(C.scheme)return _.alwaysNormalize?(C.path=T.normalizePath(C.path),T.buildURLFromParts(C)):p;var L=T.parseURL(A);if(!L)throw new Error("Error trying to parse base URL.");if(!L.netLoc&&L.path&&L.path[0]!=="/"){var S=l.exec(L.path);L.netLoc=S[1],L.path=S[2]}L.netLoc&&!L.path&&(L.path="/");var u={scheme:L.scheme,netLoc:C.netLoc,path:null,params:C.params,query:C.query,fragment:C.fragment};if(!C.netLoc&&(u.netLoc=L.netLoc,C.path[0]!=="/"))if(!C.path)u.path=L.path,C.params||(u.params=L.params,C.query||(u.query=L.query));else{var s=L.path,c=s.substring(0,s.lastIndexOf("/")+1)+C.path;u.path=T.normalizePath(c)}return u.path===null&&(u.path=_.alwaysNormalize?T.normalizePath(C.path):C.path),T.buildURLFromParts(u)},parseURL:function(A){var p=o.exec(A);return p?{scheme:p[1]||"",netLoc:p[2]||"",path:p[3]||"",params:p[4]||"",query:p[5]||"",fragment:p[6]||""}:null},normalizePath:function(A){for(A=A.split("").reverse().join("").replace(b,"");A.length!==(A=A.replace(I,"")).length;);return A.split("").reverse().join("")},buildURLFromParts:function(A){return A.scheme+A.netLoc+A.path+A.params+A.query+A.fragment}};n.exports=T})()},"./node_modules/webworkify-webpack/index.js":function(n,i,r){function a(_){var O={};function C(S){if(O[S])return O[S].exports;var u=O[S]={i:S,l:!1,exports:{}};return _[S].call(u.exports,u,u.exports,C),u.l=!0,u.exports}C.m=_,C.c=O,C.i=function(S){return S},C.d=function(S,u,s){C.o(S,u)||Object.defineProperty(S,u,{configurable:!1,enumerable:!0,get:s})},C.r=function(S){Object.defineProperty(S,"__esModule",{value:!0})},C.n=function(S){var u=S&&S.__esModule?function(){return S.default}:function(){return S};return C.d(u,"a",u),u},C.o=function(S,u){return Object.prototype.hasOwnProperty.call(S,u)},C.p="/",C.oe=function(S){throw console.error(S),S};var L=C(C.s=ENTRY_MODULE);return L.default||L}var o="[\\.|\\-|\\+|\\w|/|@]+",l="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+o+").*?\\)";function b(_){return(_+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function I(_){return!isNaN(1*_)}function T(_,O,C){var L={};L[C]=[];var S=O.toString(),u=S.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return L;for(var s=u[1],c=new RegExp("(\\\\n|\\W)"+b(s)+l,"g"),h;h=c.exec(S);)h[3]!=="dll-reference"&&L[C].push(h[3]);for(c=new RegExp("\\("+b(s)+'\\("(dll-reference\\s('+o+'))"\\)\\)'+l,"g");h=c.exec(S);)_[h[2]]||(L[C].push(h[1]),_[h[2]]=r(h[1]).m),L[h[2]]=L[h[2]]||[],L[h[2]].push(h[4]);for(var E=Object.keys(L),v=0;v<E.length;v++)for(var f=0;f<L[E[v]].length;f++)I(L[E[v]][f])&&(L[E[v]][f]=1*L[E[v]][f]);return L}function A(_){var O=Object.keys(_);return O.reduce(function(C,L){return C||_[L].length>0},!1)}function p(_,O){for(var C={main:[O]},L={main:[]},S={main:{}};A(C);)for(var u=Object.keys(C),s=0;s<u.length;s++){var c=u[s],h=C[c],E=h.pop();if(S[c]=S[c]||{},!(S[c][E]||!_[c][E])){S[c][E]=!0,L[c]=L[c]||[],L[c].push(E);for(var v=T(_,_[c][E],c),f=Object.keys(v),d=0;d<f.length;d++)C[f[d]]=C[f[d]]||[],C[f[d]]=C[f[d]].concat(v[f[d]])}}return L}n.exports=function(_,O){O=O||{};var C={main:r.m},L=O.all?{main:Object.keys(C.main)}:p(C,_),S="";Object.keys(L).filter(function(E){return E!=="main"}).forEach(function(E){for(var v=0;L[E][v];)v++;L[E].push(v),C[E][v]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",S=S+"var "+E+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(v))+")({"+L[E].map(function(f){return""+JSON.stringify(f)+": "+C[E][f].toString()}).join(",")+`});
`}),S=S+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(_))+")({"+L.main.map(function(E){return""+JSON.stringify(E)+": "+C.main[E].toString()}).join(",")+"}))(self);";var u=new window.Blob([S],{type:"text/javascript"});if(O.bare)return u;var s=window.URL||window.webkitURL||window.mozURL||window.msURL,c=s.createObjectURL(u),h=new window.Worker(c);return h.objectURL=c,h}},"./src/config.ts":function(n,i,r){r.r(i),r.d(i,"hlsDefaultConfig",function(){return d}),r.d(i,"mergeConfig",function(){return D}),r.d(i,"enableStreamingMode",function(){return x});var a=r("./src/controller/abr-controller.ts"),o=r("./src/controller/audio-stream-controller.ts"),l=r("./src/controller/audio-track-controller.ts"),b=r("./src/controller/subtitle-stream-controller.ts"),I=r("./src/controller/subtitle-track-controller.ts"),T=r("./src/controller/buffer-controller.ts"),A=r("./src/controller/timeline-controller.ts"),p=r("./src/controller/cap-level-controller.ts"),_=r("./src/controller/fps-controller.ts"),O=r("./src/controller/eme-controller.ts"),C=r("./src/controller/cmcd-controller.ts"),L=r("./src/utils/xhr-loader.ts"),S=r("./src/utils/fetch-loader.ts"),u=r("./src/utils/cues.ts"),s=r("./src/utils/mediakeys-helper.ts"),c=r("./src/utils/logger.ts");function h(){return h=Object.assign?Object.assign.bind():function(y){for(var g=1;g<arguments.length;g++){var m=arguments[g];for(var R in m)Object.prototype.hasOwnProperty.call(m,R)&&(y[R]=m[R])}return y},h.apply(this,arguments)}function E(y,g){var m=Object.keys(y);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(y);g&&(R=R.filter(function(M){return Object.getOwnPropertyDescriptor(y,M).enumerable})),m.push.apply(m,R)}return m}function v(y){for(var g=1;g<arguments.length;g++){var m=arguments[g]!=null?arguments[g]:{};g%2?E(Object(m),!0).forEach(function(R){f(y,R,m[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(m)):E(Object(m)).forEach(function(R){Object.defineProperty(y,R,Object.getOwnPropertyDescriptor(m,R))})}return y}function f(y,g,m){return g in y?Object.defineProperty(y,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):y[g]=m,y}var d=v(v({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:L.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:a.default,bufferController:T.default,capLevelController:p.default,fpsController:_.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:s.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},P()),{},{subtitleStreamController:b.SubtitleStreamController,subtitleTrackController:I.default,timelineController:A.TimelineController,audioStreamController:o.default,audioTrackController:l.default,emeController:O.default,cmcdController:C.default});function P(){return{cueHandler:u.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function D(y,g){if((g.liveSyncDurationCount||g.liveMaxLatencyDurationCount)&&(g.liveSyncDuration||g.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(g.liveMaxLatencyDurationCount!==void 0&&(g.liveSyncDurationCount===void 0||g.liveMaxLatencyDurationCount<=g.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(g.liveMaxLatencyDuration!==void 0&&(g.liveSyncDuration===void 0||g.liveMaxLatencyDuration<=g.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return h({},y,g)}function x(y){var g=y.loader;if(g!==S.default&&g!==L.default)c.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),y.progressive=!1;else{var m=Object(S.fetchSupported)();m&&(y.loader=S.default,y.progressive=!0,y.enableSoftwareAES=!0,c.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}}},"./src/controller/abr-controller.ts":function(n,i,r){r.r(i);var a=r("./src/polyfills/number.ts"),o=r("./src/utils/ewma-bandwidth-estimator.ts"),l=r("./src/events.ts"),b=r("./src/utils/buffer-helper.ts"),I=r("./src/errors.ts"),T=r("./src/types/loader.ts"),A=r("./src/utils/logger.ts");function p(C,L){for(var S=0;S<L.length;S++){var u=L[S];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(C,u.key,u)}}function _(C,L,S){return L&&p(C.prototype,L),S&&p(C,S),Object.defineProperty(C,"prototype",{writable:!1}),C}var O=function(){function C(S){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=S;var u=S.config;this.bwEstimator=new o.default(u.abrEwmaSlowVoD,u.abrEwmaFastVoD,u.abrEwmaDefaultEstimate),this.registerListeners()}var L=C.prototype;return L.registerListeners=function(){var u=this.hls;u.on(l.Events.FRAG_LOADING,this.onFragLoading,this),u.on(l.Events.FRAG_LOADED,this.onFragLoaded,this),u.on(l.Events.FRAG_BUFFERED,this.onFragBuffered,this),u.on(l.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.on(l.Events.ERROR,this.onError,this)},L.unregisterListeners=function(){var u=this.hls;u.off(l.Events.FRAG_LOADING,this.onFragLoading,this),u.off(l.Events.FRAG_LOADED,this.onFragLoaded,this),u.off(l.Events.FRAG_BUFFERED,this.onFragBuffered,this),u.off(l.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.off(l.Events.ERROR,this.onError,this)},L.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},L.onFragLoading=function(u,s){var c=s.frag;if(c.type===T.PlaylistLevelType.MAIN&&!this.timer){var h;this.fragCurrent=c,this.partCurrent=(h=s.part)!=null?h:null,this.timer=self.setInterval(this.onCheck,100)}},L.onLevelLoaded=function(u,s){var c=this.hls.config;s.details.live?this.bwEstimator.update(c.abrEwmaSlowLive,c.abrEwmaFastLive):this.bwEstimator.update(c.abrEwmaSlowVoD,c.abrEwmaFastVoD)},L._abandonRulesCheck=function(){var u=this.fragCurrent,s=this.partCurrent,c=this.hls,h=c.autoLevelEnabled,E=c.config,v=c.media;if(!(!u||!v)){var f=s?s.stats:u.stats,d=s?s.duration:u.duration;if(f.aborted){A.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;return}if(!(!h||v.paused||!v.playbackRate||!v.readyState)){var P=performance.now()-f.loading.start,D=Math.abs(v.playbackRate);if(!(P<=500*d/D)){var x=c.levels,y=c.minAutoLevel,g=x[u.level],m=f.total||Math.max(f.loaded,Math.round(d*g.maxBitrate/8)),R=Math.max(1,f.bwEstimate?f.bwEstimate/8:f.loaded*1e3/P),M=(m-f.loaded)/R,F=v.currentTime,w=(b.BufferHelper.bufferInfo(v,F,E.maxBufferHole).end-F)/D;if(!(w>=2*d/D||M<=w)){var U=Number.POSITIVE_INFINITY,B;for(B=u.level-1;B>y;B--){var k=x[B].maxBitrate;if(U=d*k/(8*.8*R),U<w)break}if(!(U>=M)){var j=this.bwEstimator.getEstimate();A.logger.warn("Fragment "+u.sn+(s?" part "+s.index:"")+" of level "+u.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+B+`
      Current BW estimate: `+(Object(a.isFiniteNumber)(j)?(j/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+M.toFixed(3)+` s
      Estimated load time for the next fragment: `+U.toFixed(3)+` s
      Time to underbuffer: `+w.toFixed(3)+" s"),c.nextLoadLevel=B,this.bwEstimator.sample(P,f.loaded),this.clearTimer(),u.loader&&(this.fragCurrent=this.partCurrent=null,u.loader.abort()),c.trigger(l.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:u,part:s,stats:f})}}}}}},L.onFragLoaded=function(u,s){var c=s.frag,h=s.part;if(c.type===T.PlaylistLevelType.MAIN&&Object(a.isFiniteNumber)(c.sn)){var E=h?h.stats:c.stats,v=h?h.duration:c.duration;if(this.clearTimer(),this.lastLoadedFragLevel=c.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var f=this.hls.levels[c.level],d=(f.loaded?f.loaded.bytes:0)+E.loaded,P=(f.loaded?f.loaded.duration:0)+v;f.loaded={bytes:d,duration:P},f.realBitrate=Math.round(8*d/P)}if(c.bitrateTest){var D={stats:E,frag:c,part:h,id:c.type};this.onFragBuffered(l.Events.FRAG_BUFFERED,D),c.bitrateTest=!1}}},L.onFragBuffered=function(u,s){var c=s.frag,h=s.part,E=h?h.stats:c.stats;if(!E.aborted&&!(c.type!==T.PlaylistLevelType.MAIN||c.sn==="initSegment")){var v=E.parsing.end-E.loading.start;this.bwEstimator.sample(v,E.loaded),E.bwEstimate=this.bwEstimator.getEstimate(),c.bitrateTest?this.bitrateTestDelay=v/1e3:this.bitrateTestDelay=0}},L.onError=function(u,s){switch(s.details){case I.ErrorDetails.FRAG_LOAD_ERROR:case I.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer();break}},L.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},L.getNextABRAutoLevel=function(){var u=this.fragCurrent,s=this.partCurrent,c=this.hls,h=c.maxAutoLevel,E=c.config,v=c.minAutoLevel,f=c.media,d=s?s.duration:u?u.duration:0,P=f?f.currentTime:0,D=f&&f.playbackRate!==0?Math.abs(f.playbackRate):1,x=this.bwEstimator?this.bwEstimator.getEstimate():E.abrEwmaDefaultEstimate,y=(b.BufferHelper.bufferInfo(f,P,E.maxBufferHole).end-P)/D,g=this.findBestLevel(x,v,h,y,E.abrBandWidthFactor,E.abrBandWidthUpFactor);if(g>=0)return g;A.logger.trace((y?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var m=d?Math.min(d,E.maxStarvationDelay):E.maxStarvationDelay,R=E.abrBandWidthFactor,M=E.abrBandWidthUpFactor;if(!y){var F=this.bitrateTestDelay;if(F){var w=d?Math.min(d,E.maxLoadingDelay):E.maxLoadingDelay;m=w-F,A.logger.trace("bitrate test took "+Math.round(1e3*F)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*m)+" ms"),R=M=1}}return g=this.findBestLevel(x,v,h,y+m,R,M),Math.max(g,0)},L.findBestLevel=function(u,s,c,h,E,v){for(var f,d=this.fragCurrent,P=this.partCurrent,D=this.lastLoadedFragLevel,x=this.hls.levels,y=x[D],g=!!(y!=null&&(f=y.details)!==null&&f!==void 0&&f.live),m=y==null?void 0:y.codecSet,R=P?P.duration:d?d.duration:0,M=c;M>=s;M--){var F=x[M];if(!(!F||m&&F.codecSet!==m)){var w=F.details,U=(P?w==null?void 0:w.partTarget:w==null?void 0:w.averagetargetduration)||R,B=void 0;M<=D?B=E*u:B=v*u;var k=x[M].maxBitrate,j=k*U/B;if(A.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+M+"/"+Math.round(B)+"/"+k+"/"+U+"/"+h+"/"+j),B>k&&(!j||g&&!this.bitrateTestDelay||j<h))return M}}return-1},_(C,[{key:"nextAutoLevel",get:function(){var u=this._nextAutoLevel,s=this.bwEstimator;if(u!==-1&&(!s||!s.canEstimate()))return u;var c=this.getNextABRAutoLevel();return u!==-1&&(c=Math.min(u,c)),c},set:function(u){this._nextAutoLevel=u}}]),C}();i.default=O},"./src/controller/audio-stream-controller.ts":function(n,i,r){r.r(i);var a=r("./src/polyfills/number.ts"),o=r("./src/controller/base-stream-controller.ts"),l=r("./src/events.ts"),b=r("./src/utils/buffer-helper.ts"),I=r("./src/controller/fragment-tracker.ts"),T=r("./src/types/level.ts"),A=r("./src/types/loader.ts"),p=r("./src/loader/fragment.ts"),_=r("./src/demux/chunk-cache.ts"),O=r("./src/demux/transmuxer-interface.ts"),C=r("./src/types/transmuxer.ts"),L=r("./src/controller/fragment-finders.ts"),S=r("./src/utils/discontinuities.ts"),u=r("./src/errors.ts"),s=r("./src/utils/logger.ts");function c(){return c=Object.assign?Object.assign.bind():function(d){for(var P=1;P<arguments.length;P++){var D=arguments[P];for(var x in D)Object.prototype.hasOwnProperty.call(D,x)&&(d[x]=D[x])}return d},c.apply(this,arguments)}function h(d,P){d.prototype=Object.create(P.prototype),d.prototype.constructor=d,E(d,P)}function E(d,P){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,y){return x.__proto__=y,x},E(d,P)}var v=100,f=function(d){h(P,d);function P(x,y){var g;return g=d.call(this,x,y,"[audio-stream-controller]")||this,g.videoBuffer=null,g.videoTrackCC=-1,g.waitingVideoCC=-1,g.audioSwitch=!1,g.trackId=-1,g.waitingData=null,g.mainDetails=null,g.bufferFlushed=!1,g.cachedTrackLoadedData=null,g._registerListeners(),g}var D=P.prototype;return D.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},D._registerListeners=function(){var y=this.hls;y.on(l.Events.MEDIA_ATTACHED,this.onMediaAttached,this),y.on(l.Events.MEDIA_DETACHING,this.onMediaDetaching,this),y.on(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),y.on(l.Events.LEVEL_LOADED,this.onLevelLoaded,this),y.on(l.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),y.on(l.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),y.on(l.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),y.on(l.Events.ERROR,this.onError,this),y.on(l.Events.BUFFER_RESET,this.onBufferReset,this),y.on(l.Events.BUFFER_CREATED,this.onBufferCreated,this),y.on(l.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),y.on(l.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),y.on(l.Events.FRAG_BUFFERED,this.onFragBuffered,this)},D._unregisterListeners=function(){var y=this.hls;y.off(l.Events.MEDIA_ATTACHED,this.onMediaAttached,this),y.off(l.Events.MEDIA_DETACHING,this.onMediaDetaching,this),y.off(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),y.off(l.Events.LEVEL_LOADED,this.onLevelLoaded,this),y.off(l.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),y.off(l.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),y.off(l.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),y.off(l.Events.ERROR,this.onError,this),y.off(l.Events.BUFFER_RESET,this.onBufferReset,this),y.off(l.Events.BUFFER_CREATED,this.onBufferCreated,this),y.off(l.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),y.off(l.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),y.off(l.Events.FRAG_BUFFERED,this.onFragBuffered,this)},D.onInitPtsFound=function(y,g){var m=g.frag,R=g.id,M=g.initPTS;if(R==="main"){var F=m.cc;this.initPTS[m.cc]=M,this.log("InitPTS for cc: "+F+" found from main: "+M),this.videoTrackCC=F,this.state===o.State.WAITING_INIT_PTS&&this.tick()}},D.startLoad=function(y){if(!this.levels){this.startPosition=y,this.state=o.State.STOPPED;return}var g=this.lastCurrentTime;this.stopLoad(),this.setInterval(v),this.fragLoadError=0,g>0&&y===-1?(this.log("Override startPosition with lastCurrentTime @"+g.toFixed(3)),this.state=o.State.IDLE):(this.loadedmetadata=!1,this.state=o.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=y,this.tick()},D.doTick=function(){switch(this.state){case o.State.IDLE:this.doTickIdle();break;case o.State.WAITING_TRACK:{var y,g=this.levels,m=this.trackId,R=g==null||(y=g[m])===null||y===void 0?void 0:y.details;if(R){if(this.waitForCdnTuneIn(R))break;this.state=o.State.WAITING_INIT_PTS}break}case o.State.FRAG_LOADING_WAITING_RETRY:{var M,F=performance.now(),w=this.retryDate;(!w||F>=w||(M=this.media)!==null&&M!==void 0&&M.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=o.State.IDLE);break}case o.State.WAITING_INIT_PTS:{var U=this.waitingData;if(U){var B=U.frag,k=U.part,j=U.cache,G=U.complete;if(this.initPTS[B.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=o.State.FRAG_LOADING;var N=j.flush(),H={frag:B,part:k,payload:N,networkDetails:null};this._handleFragmentLoadProgress(H),G&&d.prototype._handleFragmentLoadComplete.call(this,H)}else if(this.videoTrackCC!==this.waitingVideoCC)s.logger.log("Waiting fragment cc ("+B.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var $=this.getLoadPosition(),z=b.BufferHelper.bufferInfo(this.mediaBuffer,$,this.config.maxBufferHole),ee=Object(L.fragmentWithinToleranceTest)(z.end,this.config.maxFragLookUpTolerance,B);ee<0&&(s.logger.log("Waiting fragment cc ("+B.cc+") @ "+B.start+" cancelled because another fragment at "+z.end+" is needed"),this.clearWaitingFragment())}}else this.state=o.State.IDLE}}this.onTickEnd()},D.clearWaitingFragment=function(){var y=this.waitingData;y&&(this.fragmentTracker.removeFragment(y.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=o.State.IDLE)},D.onTickEnd=function(){var y=this.media;if(!(!y||!y.readyState)){var g=this.mediaBuffer?this.mediaBuffer:y,m=g.buffered;!this.loadedmetadata&&m.length&&(this.loadedmetadata=!0),this.lastCurrentTime=y.currentTime}},D.doTickIdle=function(){var y,g,m=this.hls,R=this.levels,M=this.media,F=this.trackId,w=m.config;if(!(!R||!R[F])&&!(!M&&(this.startFragRequested||!w.startFragPrefetch))){var U=R[F],B=U.details;if(!B||B.live&&this.levelLastLoaded!==F||this.waitForCdnTuneIn(B)){this.state=o.State.WAITING_TRACK;return}this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,p.ElementaryStreamTypes.AUDIO,A.PlaylistLevelType.AUDIO));var k=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,A.PlaylistLevelType.AUDIO);if(k!==null){var j=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,A.PlaylistLevelType.MAIN),G=k.len,N=this.getMaxBufferLength(j==null?void 0:j.len),H=this.audioSwitch;if(!(G>=N&&!H)){if(!H&&this._streamEnded(k,B)){m.trigger(l.Events.BUFFER_EOS,{type:"audio"}),this.state=o.State.ENDED;return}var $=B.fragments,z=$[0].start,ee=k.end;if(H){var X=this.getLoadPosition();ee=X,B.PTSKnown&&X<z&&(k.end>z||k.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),M.currentTime=z+.05)}if(!(j&&ee>j.end+B.targetduration)&&!((!j||!j.len)&&k.len)){var te=this.getNextFragment(ee,B);if(!te){this.bufferFlushed=!0;return}((y=te.decryptdata)===null||y===void 0?void 0:y.keyFormat)==="identity"&&!((g=te.decryptdata)!==null&&g!==void 0&&g.key)?this.loadKey(te,B):this.loadFragment(te,B,ee)}}}}},D.getMaxBufferLength=function(y){var g=d.prototype.getMaxBufferLength.call(this);return y?Math.max(g,y):g},D.onMediaDetaching=function(){this.videoBuffer=null,d.prototype.onMediaDetaching.call(this)},D.onAudioTracksUpdated=function(y,g){var m=g.audioTracks;this.resetTransmuxer(),this.levels=m.map(function(R){return new T.Level(R)})},D.onAudioTrackSwitching=function(y,g){var m=!!g.url;this.trackId=g.id;var R=this.fragCurrent;R!=null&&R.loader&&R.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),m?this.setInterval(v):this.resetTransmuxer(),m?(this.audioSwitch=!0,this.state=o.State.IDLE):this.state=o.State.STOPPED,this.tick()},D.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},D.onLevelLoaded=function(y,g){this.mainDetails=g.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(l.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},D.onAudioTrackLoaded=function(y,g){var m;if(this.mainDetails==null){this.cachedTrackLoadedData=g;return}var R=this.levels,M=g.details,F=g.id;if(!R){this.warn("Audio tracks were reset while loading level "+F);return}this.log("Track "+F+" loaded ["+M.startSN+","+M.endSN+"],duration:"+M.totalduration);var w=R[F],U=0;if(M.live||(m=w.details)!==null&&m!==void 0&&m.live){var B=this.mainDetails;if(M.fragments[0]||(M.deltaUpdateFailed=!0),M.deltaUpdateFailed||!B)return;!w.details&&M.hasProgramDateTime&&B.hasProgramDateTime?(Object(S.alignMediaPlaylistByPDT)(M,B),U=M.fragments[0].start):U=this.alignPlaylists(M,w.details)}w.details=M,this.levelLastLoaded=F,!this.startFragRequested&&(this.mainDetails||!M.live)&&this.setStartPosition(w.details,U),this.state===o.State.WAITING_TRACK&&!this.waitForCdnTuneIn(M)&&(this.state=o.State.IDLE),this.tick()},D._handleFragmentLoadProgress=function(y){var g,m=y.frag,R=y.part,M=y.payload,F=this.config,w=this.trackId,U=this.levels;if(!U){this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+m.sn+" of level "+m.level+" will not be buffered");return}var B=U[w];console.assert(B,"Audio track is defined on fragment load progress");var k=B.details;console.assert(k,"Audio track details are defined on fragment load progress");var j=F.defaultAudioCodec||B.audioCodec||"mp4a.40.2",G=this.transmuxer;G||(G=this.transmuxer=new O.default(this.hls,A.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var N=this.initPTS[m.cc],H=(g=m.initSegment)===null||g===void 0?void 0:g.data;if(N!==void 0){var $=!1,z=R?R.index:-1,ee=z!==-1,X=new C.ChunkMetadata(m.level,m.sn,m.stats.chunkCount,M.byteLength,z,ee);G.push(M,H,j,"",m,R,k.totalduration,$,X,N)}else{s.logger.log("Unknown video PTS for cc "+m.cc+", waiting for video PTS before demuxing audio frag "+m.sn+" of ["+k.startSN+" ,"+k.endSN+"],track "+w);var te=this.waitingData=this.waitingData||{frag:m,part:R,cache:new _.default,complete:!1},se=te.cache;se.push(new Uint8Array(M)),this.waitingVideoCC=this.videoTrackCC,this.state=o.State.WAITING_INIT_PTS}},D._handleFragmentLoadComplete=function(y){if(this.waitingData){this.waitingData.complete=!0;return}d.prototype._handleFragmentLoadComplete.call(this,y)},D.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},D.onBufferCreated=function(y,g){var m=g.tracks.audio;m&&(this.mediaBuffer=m.buffer),g.tracks.video&&(this.videoBuffer=g.tracks.video.buffer)},D.onFragBuffered=function(y,g){var m=g.frag,R=g.part;if(m.type===A.PlaylistLevelType.AUDIO){if(this.fragContextChanged(m)){this.warn("Fragment "+m.sn+(R?" p: "+R.index:"")+" of level "+m.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);return}m.sn!=="initSegment"&&(this.fragPrevious=m,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(l.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(m,R)}},D.onError=function(y,g){switch(g.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(A.PlaylistLevelType.AUDIO,g);break;case u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case u.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==o.State.ERROR&&this.state!==o.State.STOPPED&&(this.state=g.fatal?o.State.ERROR:o.State.IDLE,this.warn(g.details+" while loading frag, switching to "+this.state+" state"));break;case u.ErrorDetails.BUFFER_FULL_ERROR:if(g.parent==="audio"&&(this.state===o.State.PARSING||this.state===o.State.PARSED)){var m=!0,R=this.getFwdBufferInfo(this.mediaBuffer,A.PlaylistLevelType.AUDIO);R&&R.len>.5&&(m=!this.reduceMaxBufferLength(R.len)),m&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,d.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}break}},D.onBufferFlushed=function(y,g){var m=g.type;m===p.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},D._handleTransmuxComplete=function(y){var g,m="audio",R=this.hls,M=y.remuxResult,F=y.chunkMeta,w=this.getCurrentContext(F);if(!w){this.warn("The loading context changed while buffering fragment "+F.sn+" of level "+F.level+". This chunk will not be buffered."),this.resetLiveStartWhenNotLoaded(F.level);return}var U=w.frag,B=w.part,k=w.level.details,j=M.audio,G=M.text,N=M.id3,H=M.initSegment;if(!(this.fragContextChanged(U)||!k)){if(this.state=o.State.PARSING,this.audioSwitch&&j&&this.completeAudioSwitch(),H!=null&&H.tracks&&(this._bufferInitSegment(H.tracks,U,F),R.trigger(l.Events.FRAG_PARSING_INIT_SEGMENT,{frag:U,id:m,tracks:H.tracks})),j){var $=j.startPTS,z=j.endPTS,ee=j.startDTS,X=j.endDTS;B&&(B.elementaryStreams[p.ElementaryStreamTypes.AUDIO]={startPTS:$,endPTS:z,startDTS:ee,endDTS:X}),U.setElementaryStreamInfo(p.ElementaryStreamTypes.AUDIO,$,z,ee,X),this.bufferFragmentData(j,U,B,F)}if(N!=null&&(g=N.samples)!==null&&g!==void 0&&g.length){var te=c({id:m,frag:U,details:k},N);R.trigger(l.Events.FRAG_PARSING_METADATA,te)}if(G){var se=c({id:m,frag:U,details:k},G);R.trigger(l.Events.FRAG_PARSING_USERDATA,se)}}},D._bufferInitSegment=function(y,g,m){if(this.state===o.State.PARSING){y.video&&delete y.video;var R=y.audio;if(!!R){R.levelCodec=R.codec,R.id="audio",this.log("Init audio buffer, container:"+R.container+", codecs[parsed]=["+R.codec+"]"),this.hls.trigger(l.Events.BUFFER_CODECS,y);var M=R.initSegment;if(M!=null&&M.byteLength){var F={type:"audio",frag:g,part:null,chunkMeta:m,parent:g.type,data:M};this.hls.trigger(l.Events.BUFFER_APPENDING,F)}this.tick()}}},D.loadFragment=function(y,g,m){var R=this.fragmentTracker.getState(y);this.fragCurrent=y,(this.audioSwitch||R===I.FragmentState.NOT_LOADED||R===I.FragmentState.PARTIAL)&&(y.sn==="initSegment"?this._loadInitSegment(y):g.live&&!Object(a.isFiniteNumber)(this.initPTS[y.cc])?(this.log("Waiting for video PTS in continuity counter "+y.cc+" of live stream before loading audio fragment "+y.sn+" of level "+this.trackId),this.state=o.State.WAITING_INIT_PTS):(this.startFragRequested=!0,d.prototype.loadFragment.call(this,y,g,m)))},D.completeAudioSwitch=function(){var y=this.hls,g=this.media,m=this.trackId;g&&(this.log("Switching audio track : flushing all audio"),d.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,y.trigger(l.Events.AUDIO_TRACK_SWITCHED,{id:m})},P}(o.default);i.default=f},"./src/controller/audio-track-controller.ts":function(n,i,r){r.r(i);var a=r("./src/events.ts"),o=r("./src/errors.ts"),l=r("./src/controller/base-playlist-controller.ts"),b=r("./src/types/loader.ts");function I(O,C){for(var L=0;L<C.length;L++){var S=C[L];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(O,S.key,S)}}function T(O,C,L){return C&&I(O.prototype,C),L&&I(O,L),Object.defineProperty(O,"prototype",{writable:!1}),O}function A(O,C){O.prototype=Object.create(C.prototype),O.prototype.constructor=O,p(O,C)}function p(O,C){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,u){return S.__proto__=u,S},p(O,C)}var _=function(O){A(C,O);function C(S){var u;return u=O.call(this,S,"[audio-track-controller]")||this,u.tracks=[],u.groupId=null,u.tracksInGroup=[],u.trackId=-1,u.trackName="",u.selectDefaultTrack=!0,u.registerListeners(),u}var L=C.prototype;return L.registerListeners=function(){var u=this.hls;u.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.on(a.Events.LEVEL_LOADING,this.onLevelLoading,this),u.on(a.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),u.on(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.on(a.Events.ERROR,this.onError,this)},L.unregisterListeners=function(){var u=this.hls;u.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.off(a.Events.LEVEL_LOADING,this.onLevelLoading,this),u.off(a.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),u.off(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.off(a.Events.ERROR,this.onError,this)},L.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,O.prototype.destroy.call(this)},L.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},L.onManifestParsed=function(u,s){this.tracks=s.audioTracks||[]},L.onAudioTrackLoaded=function(u,s){var c=s.id,h=s.details,E=this.tracksInGroup[c];if(!E){this.warn("Invalid audio track id "+c);return}var v=E.details;E.details=s.details,this.log("audioTrack "+c+" loaded ["+h.startSN+"-"+h.endSN+"]"),c===this.trackId&&(this.retryCount=0,this.playlistLoaded(c,s,v))},L.onLevelLoading=function(u,s){this.switchLevel(s.level)},L.onLevelSwitching=function(u,s){this.switchLevel(s.level)},L.switchLevel=function(u){var s=this.hls.levels[u];if(!!(s!=null&&s.audioGroupIds)){var c=s.audioGroupIds[s.urlId];if(this.groupId!==c){this.groupId=c;var h=this.tracks.filter(function(v){return!c||v.groupId===c});this.selectDefaultTrack&&!h.some(function(v){return v.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=h;var E={audioTracks:h};this.log("Updating audio tracks, "+h.length+' track(s) found in "'+c+'" group-id'),this.hls.trigger(a.Events.AUDIO_TRACKS_UPDATED,E),this.selectInitialTrack()}}},L.onError=function(u,s){O.prototype.onError.call(this,u,s),!(s.fatal||!s.context)&&s.context.type===b.PlaylistContextType.AUDIO_TRACK&&s.context.id===this.trackId&&s.context.groupId===this.groupId&&this.retryLoadingOrFail(s)},L.setAudioTrack=function(u){var s=this.tracksInGroup;if(u<0||u>=s.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();var c=s[this.trackId];this.log("Now switching to audio-track index "+u);var h=s[u],E=h.id,v=h.groupId,f=v===void 0?"":v,d=h.name,P=h.type,D=h.url;if(this.trackId=u,this.trackName=d,this.selectDefaultTrack=!1,this.hls.trigger(a.Events.AUDIO_TRACK_SWITCHING,{id:E,groupId:f,name:d,type:P,url:D}),!(h.details&&!h.details.live)){var x=this.switchParams(h.url,c==null?void 0:c.details);this.loadPlaylist(x)}},L.selectInitialTrack=function(){var u=this.tracksInGroup;console.assert(u.length,"Initial audio track should be selected when tracks are known");var s=this.trackName,c=this.findTrackId(s)||this.findTrackId();c!==-1?this.setAudioTrack(c):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},L.findTrackId=function(u){for(var s=this.tracksInGroup,c=0;c<s.length;c++){var h=s[c];if((!this.selectDefaultTrack||h.default)&&(!u||u===h.name))return h.id}return-1},L.loadPlaylist=function(u){var s=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(s)){var c=s.id,h=s.groupId,E=s.url;if(u)try{E=u.addDirectives(E)}catch(v){this.warn("Could not construct new URL with HLS Delivery Directives: "+v)}this.log("loading audio-track playlist for id: "+c),this.clearTimer(),this.hls.trigger(a.Events.AUDIO_TRACK_LOADING,{url:E,id:c,groupId:h,deliveryDirectives:u||null})}},T(C,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(u){this.selectDefaultTrack=!1,this.setAudioTrack(u)}}]),C}(l.default);i.default=_},"./src/controller/base-playlist-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return T});var a=r("./src/polyfills/number.ts"),o=r("./src/types/level.ts"),l=r("./src/controller/level-helper.ts"),b=r("./src/utils/logger.ts"),I=r("./src/errors.ts"),T=function(){function A(_,O){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=b.logger.log.bind(b.logger,O+":"),this.warn=b.logger.warn.bind(b.logger,O+":"),this.hls=_}var p=A.prototype;return p.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},p.onError=function(O,C){C.fatal&&C.type===I.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},p.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},p.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},p.stopLoad=function(){this.canLoad=!1,this.clearTimer()},p.switchParams=function(O,C){var L=C==null?void 0:C.renditionReports;if(L)for(var S=0;S<L.length;S++){var u=L[S],s=""+u.URI;if(s===O.slice(-s.length)){var c=parseInt(u["LAST-MSN"]),h=parseInt(u["LAST-PART"]);if(C&&this.hls.config.lowLatencyMode){var E=Math.min(C.age-C.partTarget,C.targetduration);h!==void 0&&E>C.partTarget&&(h+=1)}if(Object(a.isFiniteNumber)(c))return new o.HlsUrlParameters(c,Object(a.isFiniteNumber)(h)?h:void 0,o.HlsSkip.No)}}},p.loadPlaylist=function(O){},p.shouldLoadTrack=function(O){return this.canLoad&&O&&!!O.url&&(!O.details||O.details.live)},p.playlistLoaded=function(O,C,L){var S=this,u=C.details,s=C.stats,c=s.loading.end?Math.max(0,self.performance.now()-s.loading.end):0;if(u.advancedDateTime=Date.now()-c,u.live||L!=null&&L.live){if(u.reloaded(L),L&&this.log("live playlist "+O+" "+(u.advanced?"REFRESHED "+u.lastPartSn+"-"+u.lastPartIndex:"MISSED")),L&&u.fragments.length>0&&Object(l.mergeDetails)(L,u),!this.canLoad||!u.live)return;var h,E=void 0,v=void 0;if(u.canBlockReload&&u.endSN&&u.advanced){var f=this.hls.config.lowLatencyMode,d=u.lastPartSn,P=u.endSN,D=u.lastPartIndex,x=D!==-1,y=d===P,g=f?0:D;x?(E=y?P+1:d,v=y?g:D+1):E=P+1;var m=u.age,R=m+u.ageHeader,M=Math.min(R-u.partTarget,u.targetduration*1.5);if(M>0){if(L&&M>L.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+L.tuneInGoal+" to: "+M+" with playlist age: "+u.age),M=0;else{var F=Math.floor(M/u.targetduration);if(E+=F,v!==void 0){var w=Math.round(M%u.targetduration/u.partTarget);v+=w}this.log("CDN Tune-in age: "+u.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+M+" skip sn "+F+" to part "+v)}u.tuneInGoal=M}if(h=this.getDeliveryDirectives(u,C.deliveryDirectives,E,v),f||!y){this.loadPlaylist(h);return}}else h=this.getDeliveryDirectives(u,C.deliveryDirectives,E,v);var U=Object(l.computeReloadInterval)(u,s);E!==void 0&&u.canBlockReload&&(U-=u.partTarget||1),this.log("reload live playlist "+O+" in "+Math.round(U)+" ms"),this.timer=self.setTimeout(function(){return S.loadPlaylist(h)},U)}else this.clearTimer()},p.getDeliveryDirectives=function(O,C,L,S){var u=Object(o.getSkipValue)(O,L);return C!=null&&C.skip&&O.deltaUpdateFailed&&(L=C.msn,S=C.part,u=o.HlsSkip.No),new o.HlsUrlParameters(L,S,u)},p.retryLoadingOrFail=function(O){var C=this,L=this.hls.config,S=this.retryCount<L.levelLoadingMaxRetry;if(S){var u;if(this.retryCount++,O.details.indexOf("LoadTimeOut")>-1&&(u=O.context)!==null&&u!==void 0&&u.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+O.details+'"'),this.loadPlaylist();else{var s=Math.min(Math.pow(2,this.retryCount)*L.levelLoadingRetryDelay,L.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return C.loadPlaylist()},s),this.warn("retry playlist loading #"+this.retryCount+" in "+s+' ms after "'+O.details+'"')}}else this.warn('cannot recover from error "'+O.details+'"'),this.clearTimer(),O.fatal=!0;return S},A}()},"./src/controller/base-stream-controller.ts":function(n,i,r){r.r(i),r.d(i,"State",function(){return P}),r.d(i,"default",function(){return D});var a=r("./src/polyfills/number.ts"),o=r("./src/task-loop.ts"),l=r("./src/controller/fragment-tracker.ts"),b=r("./src/utils/buffer-helper.ts"),I=r("./src/utils/logger.ts"),T=r("./src/events.ts"),A=r("./src/errors.ts"),p=r("./src/types/transmuxer.ts"),_=r("./src/utils/mp4-tools.ts"),O=r("./src/utils/discontinuities.ts"),C=r("./src/controller/fragment-finders.ts"),L=r("./src/controller/level-helper.ts"),S=r("./src/loader/fragment-loader.ts"),u=r("./src/crypt/decrypter.ts"),s=r("./src/utils/time-ranges.ts"),c=r("./src/types/loader.ts");function h(x,y){for(var g=0;g<y.length;g++){var m=y[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(x,m.key,m)}}function E(x,y,g){return y&&h(x.prototype,y),g&&h(x,g),Object.defineProperty(x,"prototype",{writable:!1}),x}function v(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function f(x,y){x.prototype=Object.create(y.prototype),x.prototype.constructor=x,d(x,y)}function d(x,y){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,R){return m.__proto__=R,m},d(x,y)}var P={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},D=function(x){f(y,x);function y(m,R,M){var F;return F=x.call(this)||this,F.hls=void 0,F.fragPrevious=null,F.fragCurrent=null,F.fragmentTracker=void 0,F.transmuxer=null,F._state=P.STOPPED,F.media=void 0,F.mediaBuffer=void 0,F.config=void 0,F.bitrateTest=!1,F.lastCurrentTime=0,F.nextLoadPosition=0,F.startPosition=0,F.loadedmetadata=!1,F.fragLoadError=0,F.retryDate=0,F.levels=null,F.fragmentLoader=void 0,F.levelLastLoaded=null,F.startFragRequested=!1,F.decrypter=void 0,F.initPTS=[],F.onvseeking=null,F.onvended=null,F.logPrefix="",F.log=void 0,F.warn=void 0,F.logPrefix=M,F.log=I.logger.log.bind(I.logger,M+":"),F.warn=I.logger.warn.bind(I.logger,M+":"),F.hls=m,F.fragmentLoader=new S.default(m.config),F.fragmentTracker=R,F.config=m.config,F.decrypter=new u.default(m,m.config),m.on(T.Events.KEY_LOADED,F.onKeyLoaded,v(F)),F}var g=y.prototype;return g.doTick=function(){this.onTickEnd()},g.onTickEnd=function(){},g.startLoad=function(R){},g.stopLoad=function(){this.fragmentLoader.abort();var R=this.fragCurrent;R&&this.fragmentTracker.removeFragment(R),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=P.STOPPED},g._streamEnded=function(R,M){var F=this.fragCurrent,w=this.fragmentTracker;if(!M.live&&F&&F.sn>=M.endSN&&!R.nextStart){var U=M.partList;if(U!=null&&U.length){var B=U[U.length-1],k=b.BufferHelper.isBuffered(this.media,B.start+B.duration/2);return k}var j=w.getState(F);return j===l.FragmentState.PARTIAL||j===l.FragmentState.OK}return!1},g.onMediaAttached=function(R,M){var F=this.media=this.mediaBuffer=M.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),F.addEventListener("seeking",this.onvseeking),F.addEventListener("ended",this.onvended);var w=this.config;this.levels&&w.autoStartLoad&&this.state===P.STOPPED&&this.startLoad(w.startPosition)},g.onMediaDetaching=function(){var R=this.media;R!=null&&R.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),R&&(R.removeEventListener("seeking",this.onvseeking),R.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},g.onMediaSeeking=function(){var R=this.config,M=this.fragCurrent,F=this.media,w=this.mediaBuffer,U=this.state,B=F?F.currentTime:0,k=b.BufferHelper.bufferInfo(w||F,B,R.maxBufferHole);if(this.log("media seeking to "+(Object(a.isFiniteNumber)(B)?B.toFixed(3):B)+", state: "+U),U===P.ENDED)this.resetLoadingState();else if(M&&!k.len){var j=R.maxFragLookUpTolerance,G=M.start-j,N=M.start+M.duration+j,H=B>N;(B<G||H)&&(H&&M.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),M.loader.abort()),this.resetLoadingState())}F&&(this.lastCurrentTime=B),!this.loadedmetadata&&!k.len&&(this.nextLoadPosition=this.startPosition=B),this.tickImmediate()},g.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},g.onKeyLoaded=function(R,M){if(!(this.state!==P.KEY_LOADING||M.frag!==this.fragCurrent||!this.levels)){this.state=P.IDLE;var F=this.levels[M.frag.level].details;F&&this.loadFragment(M.frag,F,M.frag.start)}},g.onHandlerDestroying=function(){this.stopLoad(),x.prototype.onHandlerDestroying.call(this)},g.onHandlerDestroyed=function(){this.state=P.STOPPED,this.hls.off(T.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,x.prototype.onHandlerDestroyed.call(this)},g.loadKey=function(R,M){this.log("Loading key for "+R.sn+" of ["+M.startSN+"-"+M.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+R.level),this.state=P.KEY_LOADING,this.fragCurrent=R,this.hls.trigger(T.Events.KEY_LOADING,{frag:R})},g.loadFragment=function(R,M,F){this._loadFragForPlayback(R,M,F)},g._loadFragForPlayback=function(R,M,F){var w=this,U=function(k){if(w.fragContextChanged(R)){w.warn("Fragment "+R.sn+(k.part?" p: "+k.part.index:"")+" of level "+R.level+" was dropped during download."),w.fragmentTracker.removeFragment(R);return}R.stats.chunkCount++,w._handleFragmentLoadProgress(k)};this._doFragLoad(R,M,F,U).then(function(B){if(!!B){w.fragLoadError=0;var k=w.state;if(w.fragContextChanged(R)){(k===P.FRAG_LOADING||!w.fragCurrent&&k===P.PARSING)&&(w.fragmentTracker.removeFragment(R),w.state=P.IDLE);return}"payload"in B&&(w.log("Loaded fragment "+R.sn+" of level "+R.level),w.hls.trigger(T.Events.FRAG_LOADED,B)),w._handleFragmentLoadComplete(B)}}).catch(function(B){w.state!==P.STOPPED&&(w.warn(B),w.resetFragmentLoading(R))})},g.flushMainBuffer=function(R,M,F){if(F===void 0&&(F=null),!!(R-M)){var w={startOffset:R,endOffset:M,type:F};this.fragLoadError=0,this.hls.trigger(T.Events.BUFFER_FLUSHING,w)}},g._loadInitSegment=function(R){var M=this;this._doFragLoad(R).then(function(F){if(!F||M.fragContextChanged(R)||!M.levels)throw new Error("init load aborted");return F}).then(function(F){var w=M.hls,U=F.payload,B=R.decryptdata;if(U&&U.byteLength>0&&B&&B.key&&B.iv&&B.method==="AES-128"){var k=self.performance.now();return M.decrypter.webCryptoDecrypt(new Uint8Array(U),B.key.buffer,B.iv.buffer).then(function(j){var G=self.performance.now();return w.trigger(T.Events.FRAG_DECRYPTED,{frag:R,payload:j,stats:{tstart:k,tdecrypt:G}}),F.payload=j,F})}return F}).then(function(F){var w=M.fragCurrent,U=M.hls,B=M.levels;if(!B)throw new Error("init load aborted, missing levels");var k=B[R.level].details;console.assert(k,"Level details are defined when init segment is loaded");var j=R.stats;M.state=P.IDLE,M.fragLoadError=0,R.data=new Uint8Array(F.payload),j.parsing.start=j.buffering.start=self.performance.now(),j.parsing.end=j.buffering.end=self.performance.now(),F.frag===w&&U.trigger(T.Events.FRAG_BUFFERED,{stats:j,frag:w,part:null,id:R.type}),M.tick()}).catch(function(F){M.warn(F),M.resetFragmentLoading(R)})},g.fragContextChanged=function(R){var M=this.fragCurrent;return!R||!M||R.level!==M.level||R.sn!==M.sn||R.urlId!==M.urlId},g.fragBufferedComplete=function(R,M){var F=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+R.type+" sn: "+R.sn+(M?" part: "+M.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+R.level+" "+s.default.toString(b.BufferHelper.getBuffered(F))),this.state=P.IDLE,this.tick()},g._handleFragmentLoadComplete=function(R){var M=this.transmuxer;if(!!M){var F=R.frag,w=R.part,U=R.partsLoaded,B=!U||U.length===0||U.some(function(j){return!j}),k=new p.ChunkMetadata(F.level,F.sn,F.stats.chunkCount+1,0,w?w.index:-1,!B);M.flush(k)}},g._handleFragmentLoadProgress=function(R){},g._doFragLoad=function(R,M,F,w){var U=this;if(F===void 0&&(F=null),!this.levels)throw new Error("frag load aborted, missing levels");if(F=Math.max(R.start,F||0),this.config.lowLatencyMode&&M){var B=M.partList;if(B&&w){F>R.end&&M.fragmentHint&&(R=M.fragmentHint);var k=this.getNextPart(B,R,F);if(k>-1){var j=B[k];return this.log("Loading part sn: "+R.sn+" p: "+j.index+" cc: "+R.cc+" of playlist ["+M.startSN+"-"+M.endSN+"] parts [0-"+k+"-"+(B.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+R.level+", target: "+parseFloat(F.toFixed(3))),this.nextLoadPosition=j.start+j.duration,this.state=P.FRAG_LOADING,this.hls.trigger(T.Events.FRAG_LOADING,{frag:R,part:B[k],targetBufferTime:F}),this.doFragPartsLoad(R,B,k,w).catch(function(G){return U.handleFragLoadError(G)})}else if(!R.url||this.loadedEndOfParts(B,F))return Promise.resolve(null)}}return this.log("Loading fragment "+R.sn+" cc: "+R.cc+" "+(M?"of ["+M.startSN+"-"+M.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+R.level+", target: "+parseFloat(F.toFixed(3))),Object(a.isFiniteNumber)(R.sn)&&!this.bitrateTest&&(this.nextLoadPosition=R.start+R.duration),this.state=P.FRAG_LOADING,this.hls.trigger(T.Events.FRAG_LOADING,{frag:R,targetBufferTime:F}),this.fragmentLoader.load(R,w).catch(function(G){return U.handleFragLoadError(G)})},g.doFragPartsLoad=function(R,M,F,w){var U=this;return new Promise(function(B,k){var j=[],G=function N(H){var $=M[H];U.fragmentLoader.loadPart(R,$,w).then(function(z){j[$.index]=z;var ee=z.part;U.hls.trigger(T.Events.FRAG_LOADED,z);var X=M[H+1];if(X&&X.fragment===R)N(H+1);else return B({frag:R,part:ee,partsLoaded:j})}).catch(k)};G(F)})},g.handleFragLoadError=function(R){var M=R.data;return M&&M.details===A.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(M.frag,M.part):this.hls.trigger(T.Events.ERROR,M),null},g._handleTransmuxerFlush=function(R){var M=this.getCurrentContext(R);if(!M||this.state!==P.PARSING){this.fragCurrent||(this.state=P.IDLE);return}var F=M.frag,w=M.part,U=M.level,B=self.performance.now();F.stats.parsing.end=B,w&&(w.stats.parsing.end=B),this.updateLevelTiming(F,w,U,R.partial)},g.getCurrentContext=function(R){var M=this.levels,F=R.level,w=R.sn,U=R.part;if(!M||!M[F])return this.warn("Levels object was unset while buffering fragment "+w+" of level "+F+". The current chunk will not be buffered."),null;var B=M[F],k=U>-1?Object(L.getPartWith)(B,w,U):null,j=k?k.fragment:Object(L.getFragmentWithSN)(B,w,this.fragCurrent);return j?{frag:j,part:k,level:B}:null},g.bufferFragmentData=function(R,M,F,w){if(!(!R||this.state!==P.PARSING)){var U=R.data1,B=R.data2,k=U;if(U&&B&&(k=Object(_.appendUint8Array)(U,B)),!(!k||!k.length)){var j={type:R.type,frag:M,part:F,chunkMeta:w,parent:M.type,data:k};this.hls.trigger(T.Events.BUFFER_APPENDING,j),R.dropped&&R.independent&&!F&&this.flushBufferGap(M)}}},g.flushBufferGap=function(R){var M=this.media;if(!!M){if(!b.BufferHelper.isBuffered(M,M.currentTime)){this.flushMainBuffer(0,R.start);return}var F=M.currentTime,w=b.BufferHelper.bufferInfo(M,F,0),U=R.duration,B=Math.min(this.config.maxFragLookUpTolerance*2,U*.25),k=Math.max(Math.min(R.start-B,w.end-B),F+B);R.start-k>B&&this.flushMainBuffer(k,R.start)}},g.getFwdBufferInfo=function(R,M){var F=this.config,w=this.getLoadPosition();if(!Object(a.isFiniteNumber)(w))return null;var U=b.BufferHelper.bufferInfo(R,w,F.maxBufferHole);if(U.len===0&&U.nextStart!==void 0){var B=this.fragmentTracker.getBufferedFrag(w,M);if(B&&U.nextStart<B.end)return b.BufferHelper.bufferInfo(R,w,Math.max(U.nextStart,F.maxBufferHole))}return U},g.getMaxBufferLength=function(R){var M=this.config,F;return R?F=Math.max(8*M.maxBufferSize/R,M.maxBufferLength):F=M.maxBufferLength,Math.min(F,M.maxMaxBufferLength)},g.reduceMaxBufferLength=function(R){var M=this.config,F=R||M.maxBufferLength;return M.maxMaxBufferLength>=F?(M.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+M.maxMaxBufferLength+"s"),!0):!1},g.getNextFragment=function(R,M){var F,w,U=M.fragments,B=U.length;if(!B)return null;var k=this.config,j=U[0].start,G;if(M.live){var N=k.initialLiveManifestSize;if(B<N)return this.warn("Not enough fragments to start playback (have: "+B+", need: "+N+")"),null;!M.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(G=this.getInitialLiveFragment(M,U),this.startPosition=G?this.hls.liveSyncPosition||G.start:R)}else R<=j&&(G=U[0]);if(!G){var H=k.lowLatencyMode?M.partEnd:M.fragmentEnd;G=this.getFragmentAtPosition(R,H,M)}return(F=G)!==null&&F!==void 0&&F.initSegment&&!((w=G)!==null&&w!==void 0&&w.initSegment.data)&&!this.bitrateTest&&(G=G.initSegment),G},g.getNextPart=function(R,M,F){for(var w=-1,U=!1,B=!0,k=0,j=R.length;k<j;k++){var G=R[k];if(B=B&&!G.independent,w>-1&&F<G.start)break;var N=G.loaded;!N&&(U||G.independent||B)&&G.fragment===M&&(w=k),U=N}return w},g.loadedEndOfParts=function(R,M){var F=R[R.length-1];return F&&M>F.start&&F.loaded},g.getInitialLiveFragment=function(R,M){var F=this.fragPrevious,w=null;if(F){if(R.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+F.programDateTime),w=Object(C.findFragmentByPDT)(M,F.endProgramDateTime,this.config.maxFragLookUpTolerance)),!w){var U=F.sn+1;if(U>=R.startSN&&U<=R.endSN){var B=M[U-R.startSN];F.cc===B.cc&&(w=B,this.log("Live playlist, switching playlist, load frag with next SN: "+w.sn))}w||(w=Object(C.findFragWithCC)(M,F.cc),w&&this.log("Live playlist, switching playlist, load frag with same CC: "+w.sn))}}else{var k=this.hls.liveSyncPosition;k!==null&&(w=this.getFragmentAtPosition(k,this.bitrateTest?R.fragmentEnd:R.edge,R))}return w},g.getFragmentAtPosition=function(R,M,F){var w=this.config,U=this.fragPrevious,B=F.fragments,k=F.endSN,j=F.fragmentHint,G=w.maxFragLookUpTolerance,N=!!(w.lowLatencyMode&&F.partList&&j);N&&j&&!this.bitrateTest&&(B=B.concat(j),k=j.sn);var H;if(R<M){var $=R>M-G?0:G;H=Object(C.findFragmentByPTS)(U,B,R,$)}else H=B[B.length-1];if(H){var z=H.sn-F.startSN,ee=U&&H.level===U.level,X=B[z+1];U&&H.sn===U.sn&&!N&&ee&&(H.sn<k&&this.fragmentTracker.getState(X)!==l.FragmentState.OK?(this.log("SN "+H.sn+" just loaded, load next one: "+X.sn),H=X):H=null)}return H},g.synchronizeToLiveEdge=function(R){var M=this.config,F=this.media;if(!!F){var w=this.hls.liveSyncPosition,U=F.currentTime,B=R.fragments[0].start,k=R.edge,j=U>=B-M.maxFragLookUpTolerance&&U<=k;if(w!==null&&F.duration>w&&(U<w||!j)){var G=M.liveMaxLatencyDuration!==void 0?M.liveMaxLatencyDuration:M.liveMaxLatencyDurationCount*R.targetduration;(!j&&F.readyState<4||U<k-G)&&(this.loadedmetadata||(this.nextLoadPosition=w),F.readyState&&(this.warn("Playback: "+U.toFixed(3)+" is located too far from the end of live sliding playlist: "+k+", reset currentTime to : "+w.toFixed(3)),F.currentTime=w))}}},g.alignPlaylists=function(R,M){var F=this.levels,w=this.levelLastLoaded,U=this.fragPrevious,B=w!==null?F[w]:null,k=R.fragments.length;if(!k)return this.warn("No fragments in live playlist"),0;var j=R.fragments[0].start,G=!M,N=R.alignedSliding&&Object(a.isFiniteNumber)(j);if(G||!N&&!j){Object(O.alignStream)(U,B,R);var H=R.fragments[0].start;return this.log("Live playlist sliding: "+H.toFixed(2)+" start-sn: "+(M?M.startSN:"na")+"->"+R.startSN+" prev-sn: "+(U?U.sn:"na")+" fragments: "+k),H}return j},g.waitForCdnTuneIn=function(R){var M=3;return R.live&&R.canBlockReload&&R.partTarget&&R.tuneInGoal>Math.max(R.partHoldBack,R.partTarget*M)},g.setStartPosition=function(R,M){var F=this.startPosition;if(F<M&&(F=-1),F===-1||this.lastCurrentTime===-1){var w=R.startTimeOffset;Object(a.isFiniteNumber)(w)?(F=M+w,w<0&&(F+=R.totalduration),F=Math.min(Math.max(M,F),M+R.totalduration),this.log("Start time offset "+w+" found in playlist, adjust startPosition to "+F),this.startPosition=F):R.live?F=this.hls.liveSyncPosition||M:this.startPosition=F=0,this.lastCurrentTime=F}this.nextLoadPosition=F},g.getLoadPosition=function(){var R=this.media,M=0;return this.loadedmetadata&&R?M=R.currentTime:this.nextLoadPosition&&(M=this.nextLoadPosition),M},g.handleFragLoadAborted=function(R,M){this.transmuxer&&R.sn!=="initSegment"&&R.stats.aborted&&(this.warn("Fragment "+R.sn+(M?" part"+M.index:"")+" of level "+R.level+" was aborted"),this.resetFragmentLoading(R))},g.resetFragmentLoading=function(R){(!this.fragCurrent||!this.fragContextChanged(R))&&(this.state=P.IDLE)},g.onFragmentOrKeyLoadError=function(R,M){if(!M.fatal){var F=M.frag;if(!(!F||F.type!==R)){var w=this.fragCurrent;console.assert(w&&F.sn===w.sn&&F.level===w.level&&F.urlId===w.urlId,"Frag load error must match current frag to retry");var U=this.config;if(this.fragLoadError+1<=U.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(F.level))return;var B=Math.min(Math.pow(2,this.fragLoadError)*U.fragLoadingRetryDelay,U.fragLoadingMaxRetryTimeout);this.warn("Fragment "+F.sn+" of "+R+" "+F.level+" failed to load, retrying in "+B+"ms"),this.retryDate=self.performance.now()+B,this.fragLoadError++,this.state=P.FRAG_LOADING_WAITING_RETRY}else M.levelRetry?(R===c.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=P.IDLE):(I.logger.error(M.details+" reaches max retry, redispatch as fatal ..."),M.fatal=!0,this.hls.stopLoad(),this.state=P.ERROR)}}},g.afterBufferFlushed=function(R,M,F){if(!!R){var w=b.BufferHelper.getBuffered(R);this.fragmentTracker.detectEvictedFragments(M,w,F),this.state===P.ENDED&&this.resetLoadingState()}},g.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=P.IDLE},g.resetLiveStartWhenNotLoaded=function(R){if(!this.loadedmetadata){this.startFragRequested=!1;var M=this.levels?this.levels[R].details:null;if(M!=null&&M.live)return this.startPosition=-1,this.setStartPosition(M,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},g.updateLevelTiming=function(R,M,F,w){var U=this,B=F.details;console.assert(!!B,"level.details must be defined");var k=Object.keys(R.elementaryStreams).reduce(function(j,G){var N=R.elementaryStreams[G];if(N){var H=N.endPTS-N.startPTS;if(H<=0)return U.warn("Could not parse fragment "+R.sn+" "+G+" duration reliably ("+H+")"),j||!1;var $=w?0:Object(L.updateFragPTSDTS)(B,R,N.startPTS,N.endPTS,N.startDTS,N.endDTS);return U.hls.trigger(T.Events.LEVEL_PTS_UPDATED,{details:B,level:F,drift:$,type:G,frag:R,start:N.startPTS,end:N.endPTS}),!0}return j},!1);k||(this.warn("Found no media in fragment "+R.sn+" of level "+F.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=P.PARSED,this.hls.trigger(T.Events.FRAG_PARSED,{frag:R,part:M})},g.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},E(y,[{key:"state",get:function(){return this._state},set:function(R){var M=this._state;M!==R&&(this._state=R,this.log(M+"->"+R))}}]),y}(o.default)},"./src/controller/buffer-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return C});var a=r("./src/polyfills/number.ts"),o=r("./src/events.ts"),l=r("./src/utils/logger.ts"),b=r("./src/errors.ts"),I=r("./src/utils/buffer-helper.ts"),T=r("./src/utils/mediasource-helper.ts"),A=r("./src/loader/fragment.ts"),p=r("./src/controller/buffer-operation-queue.ts"),_=Object(T.getMediaSource)(),O=/([ha]vc.)(?:\.[^.,]+)+/,C=function(){function L(u){var s=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var c=s.hls,h=s.media,E=s.mediaSource;l.logger.log("[buffer-controller]: Media source opened"),h&&(s.updateMediaElementDuration(),c.trigger(o.Events.MEDIA_ATTACHED,{media:h})),E&&E.removeEventListener("sourceopen",s._onMediaSourceOpen),s.checkPendingTracks()},this._onMediaSourceClose=function(){l.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){l.logger.log("[buffer-controller]: Media source ended")},this.hls=u,this._initSourceBuffer(),this.registerListeners()}var S=L.prototype;return S.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},S.destroy=function(){this.unregisterListeners(),this.details=null},S.registerListeners=function(){var s=this.hls;s.on(o.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),s.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),s.on(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),s.on(o.Events.BUFFER_RESET,this.onBufferReset,this),s.on(o.Events.BUFFER_APPENDING,this.onBufferAppending,this),s.on(o.Events.BUFFER_CODECS,this.onBufferCodecs,this),s.on(o.Events.BUFFER_EOS,this.onBufferEos,this),s.on(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),s.on(o.Events.LEVEL_UPDATED,this.onLevelUpdated,this),s.on(o.Events.FRAG_PARSED,this.onFragParsed,this),s.on(o.Events.FRAG_CHANGED,this.onFragChanged,this)},S.unregisterListeners=function(){var s=this.hls;s.off(o.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),s.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),s.off(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),s.off(o.Events.BUFFER_RESET,this.onBufferReset,this),s.off(o.Events.BUFFER_APPENDING,this.onBufferAppending,this),s.off(o.Events.BUFFER_CODECS,this.onBufferCodecs,this),s.off(o.Events.BUFFER_EOS,this.onBufferEos,this),s.off(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),s.off(o.Events.LEVEL_UPDATED,this.onLevelUpdated,this),s.off(o.Events.FRAG_PARSED,this.onFragParsed,this),s.off(o.Events.FRAG_CHANGED,this.onFragChanged,this)},S._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new p.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},S.onManifestParsed=function(s,c){var h=2;(c.audio&&!c.video||!c.altAudio)&&(h=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=h,this.details=null,l.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},S.onMediaAttaching=function(s,c){var h=this.media=c.media;if(h&&_){var E=this.mediaSource=new _;E.addEventListener("sourceopen",this._onMediaSourceOpen),E.addEventListener("sourceended",this._onMediaSourceEnded),E.addEventListener("sourceclose",this._onMediaSourceClose),h.src=self.URL.createObjectURL(E),this._objectUrl=h.src}},S.onMediaDetaching=function(){var s=this.media,c=this.mediaSource,h=this._objectUrl;if(c){if(l.logger.log("[buffer-controller]: media source detaching"),c.readyState==="open")try{c.endOfStream()}catch(E){l.logger.warn("[buffer-controller]: onMediaDetaching: "+E.message+" while calling endOfStream")}this.onBufferReset(),c.removeEventListener("sourceopen",this._onMediaSourceOpen),c.removeEventListener("sourceended",this._onMediaSourceEnded),c.removeEventListener("sourceclose",this._onMediaSourceClose),s&&(h&&self.URL.revokeObjectURL(h),s.src===h?(s.removeAttribute("src"),s.load()):l.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(o.Events.MEDIA_DETACHED,void 0)},S.onBufferReset=function(){var s=this;this.getSourceBufferTypes().forEach(function(c){var h=s.sourceBuffer[c];try{h&&(s.removeBufferListeners(c),s.mediaSource&&s.mediaSource.removeSourceBuffer(h),s.sourceBuffer[c]=void 0)}catch(E){l.logger.warn("[buffer-controller]: Failed to reset the "+c+" buffer",E)}}),this._initSourceBuffer()},S.onBufferCodecs=function(s,c){var h=this,E=this.getSourceBufferTypes().length;Object.keys(c).forEach(function(v){if(E){var f=h.tracks[v];if(f&&typeof f.buffer.changeType=="function"){var d=c[v],P=d.id,D=d.codec,x=d.levelCodec,y=d.container,g=d.metadata,m=(f.levelCodec||f.codec).replace(O,"$1"),R=(x||D).replace(O,"$1");if(m!==R){var M=y+";codecs="+(x||D);h.appendChangeType(v,M),l.logger.log("[buffer-controller]: switching codec "+m+" to "+R),h.tracks[v]={buffer:f.buffer,codec:D,container:y,levelCodec:x,metadata:g,id:P}}}}else h.pendingTracks[v]=c[v]}),!E&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},S.appendChangeType=function(s,c){var h=this,E=this.operationQueue,v={execute:function(){var d=h.sourceBuffer[s];d&&(l.logger.log("[buffer-controller]: changing "+s+" sourceBuffer type to "+c),d.changeType(c)),E.shiftAndExecuteNext(s)},onStart:function(){},onComplete:function(){},onError:function(d){l.logger.warn("[buffer-controller]: Failed to change "+s+" SourceBuffer type",d)}};E.append(v,s)},S.onBufferAppending=function(s,c){var h=this,E=this.hls,v=this.operationQueue,f=this.tracks,d=c.data,P=c.type,D=c.frag,x=c.part,y=c.chunkMeta,g=y.buffering[P],m=self.performance.now();g.start=m;var R=D.stats.buffering,M=x?x.stats.buffering:null;R.start===0&&(R.start=m),M&&M.start===0&&(M.start=m);var F=f.audio,w=P==="audio"&&y.id===1&&(F==null?void 0:F.container)==="audio/mpeg",U={execute:function(){if(g.executeStart=self.performance.now(),w){var k=h.sourceBuffer[P];if(k){var j=D.start-k.timestampOffset;Math.abs(j)>=.1&&(l.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+D.start+" (delta: "+j+") sn: "+D.sn+")"),k.timestampOffset=D.start)}}h.appendExecutor(d,P)},onStart:function(){},onComplete:function(){var k=self.performance.now();g.executeEnd=g.end=k,R.first===0&&(R.first=k),M&&M.first===0&&(M.first=k);var j=h.sourceBuffer,G={};for(var N in j)G[N]=I.BufferHelper.getBuffered(j[N]);h.appendError=0,h.hls.trigger(o.Events.BUFFER_APPENDED,{type:P,frag:D,part:x,chunkMeta:y,parent:D.type,timeRanges:G})},onError:function(k){l.logger.error("[buffer-controller]: Error encountered while trying to append to the "+P+" SourceBuffer",k);var j={type:b.ErrorTypes.MEDIA_ERROR,parent:D.type,details:b.ErrorDetails.BUFFER_APPEND_ERROR,err:k,fatal:!1};k.code===DOMException.QUOTA_EXCEEDED_ERR?j.details=b.ErrorDetails.BUFFER_FULL_ERROR:(h.appendError++,j.details=b.ErrorDetails.BUFFER_APPEND_ERROR,h.appendError>E.config.appendErrorMaxRetry&&(l.logger.error("[buffer-controller]: Failed "+E.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),j.fatal=!0)),E.trigger(o.Events.ERROR,j)}};v.append(U,P)},S.onBufferFlushing=function(s,c){var h=this,E=this.operationQueue,v=function(d){return{execute:h.removeExecutor.bind(h,d,c.startOffset,c.endOffset),onStart:function(){},onComplete:function(){h.hls.trigger(o.Events.BUFFER_FLUSHED,{type:d})},onError:function(D){l.logger.warn("[buffer-controller]: Failed to remove from "+d+" SourceBuffer",D)}}};c.type?E.append(v(c.type),c.type):this.getSourceBufferTypes().forEach(function(f){E.append(v(f),f)})},S.onFragParsed=function(s,c){var h=this,E=c.frag,v=c.part,f=[],d=v?v.elementaryStreams:E.elementaryStreams;d[A.ElementaryStreamTypes.AUDIOVIDEO]?f.push("audiovideo"):(d[A.ElementaryStreamTypes.AUDIO]&&f.push("audio"),d[A.ElementaryStreamTypes.VIDEO]&&f.push("video"));var P=function(){var x=self.performance.now();E.stats.buffering.end=x,v&&(v.stats.buffering.end=x);var y=v?v.stats:E.stats;h.hls.trigger(o.Events.FRAG_BUFFERED,{frag:E,part:v,stats:y,id:E.type})};f.length===0&&l.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+E.type+" level: "+E.level+" sn: "+E.sn),this.blockBuffers(P,f)},S.onFragChanged=function(s,c){this.flushBackBuffer()},S.onBufferEos=function(s,c){var h=this,E=this.getSourceBufferTypes().reduce(function(v,f){var d=h.sourceBuffer[f];return(!c.type||c.type===f)&&d&&!d.ended&&(d.ended=!0,l.logger.log("[buffer-controller]: "+f+" sourceBuffer now EOS")),v&&!!(!d||d.ended)},!0);E&&this.blockBuffers(function(){var v=h.mediaSource;!v||v.readyState!=="open"||v.endOfStream()})},S.onLevelUpdated=function(s,c){var h=c.details;!h.fragments.length||(this.details=h,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},S.flushBackBuffer=function(){var s=this.hls,c=this.details,h=this.media,E=this.sourceBuffer;if(!(!h||c===null)){var v=this.getSourceBufferTypes();if(!!v.length){var f=c.live&&s.config.liveBackBufferLength!==null?s.config.liveBackBufferLength:s.config.backBufferLength;if(!(!Object(a.isFiniteNumber)(f)||f<0)){var d=h.currentTime,P=c.levelTargetDuration,D=Math.max(f,P),x=Math.floor(d/P)*P-D;v.forEach(function(y){var g=E[y];if(g){var m=I.BufferHelper.getBuffered(g);m.length>0&&x>m.start(0)&&(s.trigger(o.Events.BACK_BUFFER_REACHED,{bufferEnd:x}),c.live&&s.trigger(o.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:x}),s.trigger(o.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:x,type:y}))}})}}}},S.updateMediaElementDuration=function(){if(!(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")){var s=this.details,c=this.hls,h=this.media,E=this.mediaSource,v=s.fragments[0].start+s.totalduration,f=h.duration,d=Object(a.isFiniteNumber)(E.duration)?E.duration:0;s.live&&c.config.liveDurationInfinity?(l.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),E.duration=1/0,this.updateSeekableRange(s)):(v>d&&v>f||!Object(a.isFiniteNumber)(f))&&(l.logger.log("[buffer-controller]: Updating Media Source duration to "+v.toFixed(3)),E.duration=v)}},S.updateSeekableRange=function(s){var c=this.mediaSource,h=s.fragments,E=h.length;if(E&&s.live&&c!==null&&c!==void 0&&c.setLiveSeekableRange){var v=Math.max(0,h[0].start),f=Math.max(v,v+s.totalduration);c.setLiveSeekableRange(v,f)}},S.checkPendingTracks=function(){var s=this.bufferCodecEventsExpected,c=this.operationQueue,h=this.pendingTracks,E=Object.keys(h).length;if(E&&!s||E===2){this.createSourceBuffers(h),this.pendingTracks={};var v=this.getSourceBufferTypes();if(v.length===0){this.hls.trigger(o.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});return}v.forEach(function(f){c.executeNext(f)})}},S.createSourceBuffers=function(s){var c=this.sourceBuffer,h=this.mediaSource;if(!h)throw Error("createSourceBuffers called when mediaSource was null");var E=0;for(var v in s)if(!c[v]){var f=s[v];if(!f)throw Error("source buffer exists for track "+v+", however track does not");var d=f.levelCodec||f.codec,P=f.container+";codecs="+d;l.logger.log("[buffer-controller]: creating sourceBuffer("+P+")");try{var D=c[v]=h.addSourceBuffer(P),x=v;this.addBufferListener(x,"updatestart",this._onSBUpdateStart),this.addBufferListener(x,"updateend",this._onSBUpdateEnd),this.addBufferListener(x,"error",this._onSBUpdateError),this.tracks[v]={buffer:D,codec:d,container:f.container,levelCodec:f.levelCodec,metadata:f.metadata,id:f.id},E++}catch(y){l.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+y.message),this.hls.trigger(o.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:y,mimeType:P})}}E&&this.hls.trigger(o.Events.BUFFER_CREATED,{tracks:this.tracks})},S._onSBUpdateStart=function(s){var c=this.operationQueue,h=c.current(s);h.onStart()},S._onSBUpdateEnd=function(s){var c=this.operationQueue,h=c.current(s);h.onComplete(),c.shiftAndExecuteNext(s)},S._onSBUpdateError=function(s,c){l.logger.error("[buffer-controller]: "+s+" SourceBuffer error",c),this.hls.trigger(o.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var h=this.operationQueue.current(s);h&&h.onError(c)},S.removeExecutor=function(s,c,h){var E=this.media,v=this.mediaSource,f=this.operationQueue,d=this.sourceBuffer,P=d[s];if(!E||!v||!P){l.logger.warn("[buffer-controller]: Attempting to remove from the "+s+" SourceBuffer, but it does not exist"),f.shiftAndExecuteNext(s);return}var D=Object(a.isFiniteNumber)(E.duration)?E.duration:1/0,x=Object(a.isFiniteNumber)(v.duration)?v.duration:1/0,y=Math.max(0,c),g=Math.min(h,D,x);g>y?(l.logger.log("[buffer-controller]: Removing ["+y+","+g+"] from the "+s+" SourceBuffer"),console.assert(!P.updating,s+" sourceBuffer must not be updating"),P.remove(y,g)):f.shiftAndExecuteNext(s)},S.appendExecutor=function(s,c){var h=this.operationQueue,E=this.sourceBuffer,v=E[c];if(!v){l.logger.warn("[buffer-controller]: Attempting to append to the "+c+" SourceBuffer, but it does not exist"),h.shiftAndExecuteNext(c);return}v.ended=!1,console.assert(!v.updating,c+" sourceBuffer must not be updating"),v.appendBuffer(s)},S.blockBuffers=function(s,c){var h=this;if(c===void 0&&(c=this.getSourceBufferTypes()),!c.length){l.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(s);return}var E=this.operationQueue,v=c.map(function(f){return E.appendBlocker(f)});Promise.all(v).then(function(){s(),c.forEach(function(f){var d=h.sourceBuffer[f];(!d||!d.updating)&&E.shiftAndExecuteNext(f)})})},S.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},S.addBufferListener=function(s,c,h){var E=this.sourceBuffer[s];if(!!E){var v=h.bind(this,s);this.listeners[s].push({event:c,listener:v}),E.addEventListener(c,v)}},S.removeBufferListeners=function(s){var c=this.sourceBuffer[s];!c||this.listeners[s].forEach(function(h){c.removeEventListener(h.event,h.listener)})},L}()},"./src/controller/buffer-operation-queue.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return o});var a=r("./src/utils/logger.ts"),o=function(){function l(I){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=I}var b=l.prototype;return b.append=function(T,A){var p=this.queues[A];p.push(T),p.length===1&&this.buffers[A]&&this.executeNext(A)},b.insertAbort=function(T,A){var p=this.queues[A];p.unshift(T),this.executeNext(A)},b.appendBlocker=function(T){var A,p=new Promise(function(O){A=O}),_={execute:A,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(_,T),p},b.executeNext=function(T){var A=this.buffers,p=this.queues,_=A[T],O=p[T];if(O.length){var C=O[0];try{C.execute()}catch(L){a.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),C.onError(L),(!_||!_.updating)&&(O.shift(),this.executeNext(T))}}},b.shiftAndExecuteNext=function(T){this.queues[T].shift(),this.executeNext(T)},b.current=function(T){return this.queues[T][0]},l}()},"./src/controller/cap-level-controller.ts":function(n,i,r){r.r(i);var a=r("./src/events.ts");function o(I,T){for(var A=0;A<T.length;A++){var p=T[A];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(I,p.key,p)}}function l(I,T,A){return T&&o(I.prototype,T),A&&o(I,A),Object.defineProperty(I,"prototype",{writable:!1}),I}var b=function(){function I(A){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=A,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var T=I.prototype;return T.setStreamController=function(p){this.streamController=p},T.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},T.registerListeners=function(){var p=this.hls;p.on(a.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),p.on(a.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),p.on(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),p.on(a.Events.BUFFER_CODECS,this.onBufferCodecs,this),p.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},T.unregisterListener=function(){var p=this.hls;p.off(a.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),p.off(a.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),p.off(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),p.off(a.Events.BUFFER_CODECS,this.onBufferCodecs,this),p.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},T.onFpsDropLevelCapping=function(p,_){I.isLevelAllowed(_.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(_.droppedLevel)},T.onMediaAttaching=function(p,_){this.media=_.media instanceof HTMLVideoElement?_.media:null},T.onManifestParsed=function(p,_){var O=this.hls;this.restrictedLevels=[],this.firstLevel=_.firstLevel,O.config.capLevelToPlayerSize&&_.video&&this.startCapping()},T.onBufferCodecs=function(p,_){var O=this.hls;O.config.capLevelToPlayerSize&&_.video&&this.startCapping()},T.onMediaDetaching=function(){this.stopCapping()},T.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var p=this.hls.levels;if(p.length){var _=this.hls;_.autoLevelCapping=this.getMaxLevel(p.length-1),_.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=_.autoLevelCapping}}},T.getMaxLevel=function(p){var _=this,O=this.hls.levels;if(!O.length)return-1;var C=O.filter(function(L,S){return I.isLevelAllowed(S,_.restrictedLevels)&&S<=p});return this.clientRect=null,I.getMaxLevelByMediaSize(C,this.mediaWidth,this.mediaHeight)},T.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},T.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},T.getDimensions=function(){if(this.clientRect)return this.clientRect;var p=this.media,_={width:0,height:0};if(p){var O=p.getBoundingClientRect();_.width=O.width,_.height=O.height,!_.width&&!_.height&&(_.width=O.right-O.left||p.width||0,_.height=O.bottom-O.top||p.height||0)}return this.clientRect=_,_},I.isLevelAllowed=function(p,_){return _===void 0&&(_=[]),_.indexOf(p)===-1},I.getMaxLevelByMediaSize=function(p,_,O){if(!p||!p.length)return-1;for(var C=function(c,h){return h?c.width!==h.width||c.height!==h.height:!0},L=p.length-1,S=0;S<p.length;S+=1){var u=p[S];if((u.width>=_||u.height>=O)&&C(u,p[S+1])){L=S;break}}return L},l(I,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var p=1;if(!this.hls.config.ignoreDevicePixelRatio)try{p=self.devicePixelRatio}catch{}return p}}]),I}();i.default=b},"./src/controller/cmcd-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return C});var a=r("./src/events.ts"),o=r("./src/types/cmcd.ts"),l=r("./src/utils/buffer-helper.ts"),b=r("./src/utils/logger.ts");function I(L,S){for(var u=0;u<S.length;u++){var s=S[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(L,s.key,s)}}function T(L,S,u){return S&&I(L.prototype,S),u&&I(L,u),Object.defineProperty(L,"prototype",{writable:!1}),L}function A(L,S){var u=typeof Symbol!="undefined"&&L[Symbol.iterator]||L["@@iterator"];if(u)return(u=u.call(L)).next.bind(u);if(Array.isArray(L)||(u=p(L))||S&&L&&typeof L.length=="number"){u&&(L=u);var s=0;return function(){return s>=L.length?{done:!0}:{done:!1,value:L[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(L,S){if(!!L){if(typeof L=="string")return _(L,S);var u=Object.prototype.toString.call(L).slice(8,-1);if(u==="Object"&&L.constructor&&(u=L.constructor.name),u==="Map"||u==="Set")return Array.from(L);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return _(L,S)}}function _(L,S){(S==null||S>L.length)&&(S=L.length);for(var u=0,s=new Array(S);u<S;u++)s[u]=L[u];return s}function O(){return O=Object.assign?Object.assign.bind():function(L){for(var S=1;S<arguments.length;S++){var u=arguments[S];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(L[s]=u[s])}return L},O.apply(this,arguments)}var C=function(){function L(u){var s=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){s.initialized&&(s.starved=!0),s.buffering=!0},this.onPlaying=function(){s.initialized||(s.initialized=!0),s.buffering=!1},this.applyPlaylistData=function(E){try{s.apply(E,{ot:o.CMCDObjectType.MANIFEST,su:!s.initialized})}catch(v){b.logger.warn("Could not generate manifest CMCD data.",v)}},this.applyFragmentData=function(E){try{var v=E.frag,f=s.hls.levels[v.level],d=s.getObjectType(v),P={d:v.duration*1e3,ot:d};(d===o.CMCDObjectType.VIDEO||d===o.CMCDObjectType.AUDIO||d==o.CMCDObjectType.MUXED)&&(P.br=f.bitrate/1e3,P.tb=s.getTopBandwidth(d)/1e3,P.bl=s.getBufferLength(d)),s.apply(E,P)}catch(D){b.logger.warn("Could not generate segment CMCD data.",D)}},this.hls=u;var c=this.config=u.config,h=c.cmcd;h!=null&&(c.pLoader=this.createPlaylistLoader(),c.fLoader=this.createFragmentLoader(),this.sid=h.sessionId||L.uuid(),this.cid=h.contentId,this.useHeaders=h.useHeaders===!0,this.registerListeners())}var S=L.prototype;return S.registerListeners=function(){var s=this.hls;s.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),s.on(a.Events.MEDIA_DETACHED,this.onMediaDetached,this),s.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this)},S.unregisterListeners=function(){var s=this.hls;s.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),s.off(a.Events.MEDIA_DETACHED,this.onMediaDetached,this),s.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},S.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},S.onMediaAttached=function(s,c){this.media=c.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},S.onMediaDetached=function(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},S.onBufferCreated=function(s,c){var h,E;this.audioBuffer=(h=c.tracks.audio)===null||h===void 0?void 0:h.buffer,this.videoBuffer=(E=c.tracks.video)===null||E===void 0?void 0:E.buffer},S.createData=function(){var s;return{v:o.CMCDVersion,sf:o.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(s=this.media)===null||s===void 0?void 0:s.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},S.apply=function(s,c){c===void 0&&(c={}),O(c,this.createData());var h=c.ot===o.CMCDObjectType.INIT||c.ot===o.CMCDObjectType.VIDEO||c.ot===o.CMCDObjectType.MUXED;if(this.starved&&h&&(c.bs=!0,c.su=!0,this.starved=!1),c.su==null&&(c.su=this.buffering),this.useHeaders){var E=L.toHeaders(c);if(!Object.keys(E).length)return;s.headers||(s.headers={}),O(s.headers,E)}else{var v=L.toQuery(c);if(!v)return;s.url=L.appendQueryToUri(s.url,v)}},S.getObjectType=function(s){var c=s.type;if(c==="subtitle")return o.CMCDObjectType.TIMED_TEXT;if(s.sn==="initSegment")return o.CMCDObjectType.INIT;if(c==="audio")return o.CMCDObjectType.AUDIO;if(c==="main")return this.hls.audioTracks.length?o.CMCDObjectType.VIDEO:o.CMCDObjectType.MUXED},S.getTopBandwidth=function(s){var c=0,h,E=this.hls;if(s===o.CMCDObjectType.AUDIO)h=E.audioTracks;else{var v=E.maxAutoLevel,f=v>-1?v+1:E.levels.length;h=E.levels.slice(0,f)}for(var d=A(h),P;!(P=d()).done;){var D=P.value;D.bitrate>c&&(c=D.bitrate)}return c>0?c:NaN},S.getBufferLength=function(s){var c=this.hls.media,h=s===o.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;if(!h||!c)return NaN;var E=l.BufferHelper.bufferInfo(h,c.currentTime,this.config.maxBufferHole);return E.len*1e3},S.createPlaylistLoader=function(){var s=this.config.pLoader,c=this.applyPlaylistData,h=s||this.config.loader;return function(){function E(f){this.loader=void 0,this.loader=new h(f)}var v=E.prototype;return v.destroy=function(){this.loader.destroy()},v.abort=function(){this.loader.abort()},v.load=function(d,P,D){c(d),this.loader.load(d,P,D)},T(E,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),E}()},S.createFragmentLoader=function(){var s=this.config.fLoader,c=this.applyFragmentData,h=s||this.config.loader;return function(){function E(f){this.loader=void 0,this.loader=new h(f)}var v=E.prototype;return v.destroy=function(){this.loader.destroy()},v.abort=function(){this.loader.abort()},v.load=function(d,P,D){c(d),this.loader.load(d,P,D)},T(E,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),E}()},L.uuid=function(){var s=URL.createObjectURL(new Blob),c=s.toString();return URL.revokeObjectURL(s),c.slice(c.lastIndexOf("/")+1)},L.serialize=function(s){for(var c=[],h=function(w){return!Number.isNaN(w)&&w!=null&&w!==""&&w!==!1},E=function(w){return Math.round(w)},v=function(w){return E(w/100)*100},f=function(w){return encodeURIComponent(w)},d={br:E,d:E,bl:v,dl:v,mtp:v,nor:f,rtp:v,tb:E},P=Object.keys(s||{}).sort(),D=A(P),x;!(x=D()).done;){var y=x.value,g=s[y];if(!!h(g)&&!(y==="v"&&g===1)&&!(y=="pr"&&g===1)){var m=d[y];m&&(g=m(g));var R=typeof g,M=void 0;y==="ot"||y==="sf"||y==="st"?M=y+"="+g:R==="boolean"?M=y:R==="number"?M=y+"="+g:M=y+"="+JSON.stringify(g),c.push(M)}}return c.join(",")},L.toHeaders=function(s){for(var c=Object.keys(s),h={},E=["Object","Request","Session","Status"],v=[{},{},{},{}],f={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},d=0,P=c;d<P.length;d++){var D=P[d],x=f[D]!=null?f[D]:1;v[x][D]=s[D]}for(var y=0;y<v.length;y++){var g=L.serialize(v[y]);g&&(h["CMCD-"+E[y]]=g)}return h},L.toQuery=function(s){return"CMCD="+encodeURIComponent(L.serialize(s))},L.appendQueryToUri=function(s,c){if(!c)return s;var h=s.includes("?")?"&":"?";return""+s+h+c},L}()},"./src/controller/eme-controller.ts":function(n,i,r){r.r(i);var a=r("./src/events.ts"),o=r("./src/errors.ts"),l=r("./src/utils/logger.ts"),b=r("./src/utils/mediakeys-helper.ts");function I(C,L){for(var S=0;S<L.length;S++){var u=L[S];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(C,u.key,u)}}function T(C,L,S){return L&&I(C.prototype,L),S&&I(C,S),Object.defineProperty(C,"prototype",{writable:!1}),C}var A=3,p=function(L,S,u){var s={audioCapabilities:[],videoCapabilities:[]};return L.forEach(function(c){s.audioCapabilities.push({contentType:'audio/mp4; codecs="'+c+'"',robustness:u.audioRobustness||""})}),S.forEach(function(c){s.videoCapabilities.push({contentType:'video/mp4; codecs="'+c+'"',robustness:u.videoRobustness||""})}),[s]},_=function(L,S,u,s){switch(L){case b.KeySystems.WIDEVINE:return p(S,u,s);default:throw new Error("Unknown key-system: "+L)}},O=function(){function C(S){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=S,this._config=S.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var L=C.prototype;return L.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},L._registerListeners=function(){this.hls.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(a.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(a.Events.MANIFEST_PARSED,this.onManifestParsed,this)},L._unregisterListeners=function(){this.hls.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(a.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(a.Events.MANIFEST_PARSED,this.onManifestParsed,this)},L.getLicenseServerUrl=function(u){switch(u){case b.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+u+'"')},L._attemptKeySystemAccess=function(u,s,c){var h=this,E=_(u,s,c,this._drmSystemOptions);l.logger.log("Requesting encrypted media key-system access");var v=this.requestMediaKeySystemAccess(u,E);this.mediaKeysPromise=v.then(function(f){return h._onMediaKeySystemAccessObtained(u,f)}),v.catch(function(f){l.logger.error('Failed to obtain key-system "'+u+'" access:',f)})},L._onMediaKeySystemAccessObtained=function(u,s){var c=this;l.logger.log('Access for key-system "'+u+'" obtained');var h={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:s,mediaKeySystemDomain:u};this._mediaKeysList.push(h);var E=Promise.resolve().then(function(){return s.createMediaKeys()}).then(function(v){return h.mediaKeys=v,l.logger.log('Media-keys created for key-system "'+u+'"'),c._onMediaKeysCreated(),v});return E.catch(function(v){l.logger.error("Failed to create media-keys:",v)}),E},L._onMediaKeysCreated=function(){var u=this;this._mediaKeysList.forEach(function(s){s.mediaKeysSession||(s.mediaKeysSession=s.mediaKeys.createSession(),u._onNewMediaKeySession(s.mediaKeysSession))})},L._onNewMediaKeySession=function(u){var s=this;l.logger.log("New key-system session "+u.sessionId),u.addEventListener("message",function(c){s._onKeySessionMessage(u,c.message)},!1)},L._onKeySessionMessage=function(u,s){l.logger.log("Got EME message event, creating license request"),this._requestLicense(s,function(c){l.logger.log("Received license data (length: "+(c&&c.byteLength)+"), updating key-session"),u.update(c).catch(function(h){l.logger.warn("Updating key-session failed: "+h)})})},L.onMediaEncrypted=function(u){var s=this;if(l.logger.log('Media is encrypted using "'+u.initDataType+'" init data type'),!this.mediaKeysPromise){l.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}var c=function(E){!s._media||(s._attemptSetMediaKeys(E),s._generateRequestWithPreferredKeySession(u.initDataType,u.initData))};this.mediaKeysPromise.then(c).catch(c)},L._attemptSetMediaKeys=function(u){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var s=this._mediaKeysList[0];if(!s||!s.mediaKeys){l.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}l.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(s.mediaKeys),this._hasSetMediaKeys=!0}},L._generateRequestWithPreferredKeySession=function(u,s){var c=this,h=this._mediaKeysList[0];if(!h){l.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(h.mediaKeysSessionInitialized){l.logger.warn("Key-Session already initialized but requested again");return}var E=h.mediaKeysSession;if(!E){l.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});return}if(!s){l.logger.warn("Fatal: initData required for generating a key session is null"),this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});return}l.logger.log('Generating key-session request for "'+u+'" init data type'),h.mediaKeysSessionInitialized=!0,E.generateRequest(u,s).then(function(){l.logger.debug("Key-session generation succeeded")}).catch(function(v){l.logger.error("Error generating key-session request:",v),c.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},L._createLicenseXhr=function(u,s,c){var h=new XMLHttpRequest;h.responseType="arraybuffer",h.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,h,u,s,c);var E=this._licenseXhrSetup;if(E)try{E.call(this.hls,h,u),E=void 0}catch(v){l.logger.error(v)}try{h.readyState||h.open("POST",u,!0),E&&E.call(this.hls,h,u)}catch(v){throw new Error("issue setting up KeySystem license XHR "+v)}return h},L._onLicenseRequestReadyStageChange=function(u,s,c,h){switch(u.readyState){case 4:if(u.status===200){this._requestLicenseFailureCount=0,l.logger.log("License request succeeded");var E=u.response,v=this._licenseResponseCallback;if(v)try{E=v.call(this.hls,u,s)}catch(d){l.logger.error(d)}h(E)}else{if(l.logger.error("License Request XHR failed ("+s+"). Status: "+u.status+" ("+u.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>A){this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}var f=A-this._requestLicenseFailureCount+1;l.logger.warn("Retrying license request, "+f+" attempts left"),this._requestLicense(c,h)}break}},L._generateLicenseRequestChallenge=function(u,s){switch(u.mediaKeySystemDomain){case b.KeySystems.WIDEVINE:return s}throw new Error("unsupported key-system: "+u.mediaKeySystemDomain)},L._requestLicense=function(u,s){l.logger.log("Requesting content license for key-system");var c=this._mediaKeysList[0];if(!c){l.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}try{var h=this.getLicenseServerUrl(c.mediaKeySystemDomain),E=this._createLicenseXhr(h,u,s);l.logger.log("Sending license request to URL: "+h);var v=this._generateLicenseRequestChallenge(c,u);E.send(v)}catch(f){l.logger.error("Failure requesting DRM license: "+f),this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},L.onMediaAttached=function(u,s){if(!!this._emeEnabled){var c=s.media;this._media=c,c.addEventListener("encrypted",this._onMediaEncrypted)}},L.onMediaDetached=function(){var u=this._media,s=this._mediaKeysList;!u||(u.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(s.map(function(c){if(c.mediaKeysSession)return c.mediaKeysSession.close().catch(function(){})})).then(function(){return u.setMediaKeys(null)}).catch(function(){}))},L.onManifestParsed=function(u,s){if(!!this._emeEnabled){var c=s.levels.map(function(E){return E.audioCodec}).filter(function(E){return!!E}),h=s.levels.map(function(E){return E.videoCodec}).filter(function(E){return!!E});this._attemptKeySystemAccess(b.KeySystems.WIDEVINE,c,h)}},T(C,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),C}();i.default=O},"./src/controller/fps-controller.ts":function(n,i,r){r.r(i);var a=r("./src/events.ts"),o=r("./src/utils/logger.ts"),l=function(){function b(T){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=T,this.registerListeners()}var I=b.prototype;return I.setStreamController=function(A){this.streamController=A},I.registerListeners=function(){this.hls.on(a.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},I.unregisterListeners=function(){this.hls.off(a.Events.MEDIA_ATTACHING,this.onMediaAttaching)},I.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},I.onMediaAttaching=function(A,p){var _=this.hls.config;if(_.capLevelOnFPSDrop){var O=p.media instanceof self.HTMLVideoElement?p.media:null;this.media=O,O&&typeof O.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),_.fpsDroppedMonitoringPeriod)}},I.checkFPS=function(A,p,_){var O=performance.now();if(p){if(this.lastTime){var C=O-this.lastTime,L=_-this.lastDroppedFrames,S=p-this.lastDecodedFrames,u=1e3*L/C,s=this.hls;if(s.trigger(a.Events.FPS_DROP,{currentDropped:L,currentDecoded:S,totalDroppedFrames:_}),u>0&&L>s.config.fpsDroppedMonitoringThreshold*S){var c=s.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(s.autoLevelCapping===-1||s.autoLevelCapping>=c)&&(c=c-1,s.trigger(a.Events.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:s.currentLevel}),s.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=O,this.lastDroppedFrames=_,this.lastDecodedFrames=p}},I.checkFPSInterval=function(){var A=this.media;if(A)if(this.isVideoPlaybackQualityAvailable){var p=A.getVideoPlaybackQuality();this.checkFPS(A,p.totalVideoFrames,p.droppedVideoFrames)}else this.checkFPS(A,A.webkitDecodedFrameCount,A.webkitDroppedFrameCount)},b}();i.default=l},"./src/controller/fragment-finders.ts":function(n,i,r){r.r(i),r.d(i,"findFragmentByPDT",function(){return l}),r.d(i,"findFragmentByPTS",function(){return b}),r.d(i,"fragmentWithinToleranceTest",function(){return I}),r.d(i,"pdtWithinToleranceTest",function(){return T}),r.d(i,"findFragWithCC",function(){return A});var a=r("./src/polyfills/number.ts"),o=r("./src/utils/binary-search.ts");function l(p,_,O){if(_===null||!Array.isArray(p)||!p.length||!Object(a.isFiniteNumber)(_))return null;var C=p[0].programDateTime;if(_<(C||0))return null;var L=p[p.length-1].endProgramDateTime;if(_>=(L||0))return null;O=O||0;for(var S=0;S<p.length;++S){var u=p[S];if(T(_,O,u))return u}return null}function b(p,_,O,C){O===void 0&&(O=0),C===void 0&&(C=0);var L=null;if(p?L=_[p.sn-_[0].sn+1]||null:O===0&&_[0].start===0&&(L=_[0]),L&&I(O,C,L)===0)return L;var S=o.default.search(_,I.bind(null,O,C));return S||L}function I(p,_,O){p===void 0&&(p=0),_===void 0&&(_=0);var C=Math.min(_,O.duration+(O.deltaPTS?O.deltaPTS:0));return O.start+O.duration-C<=p?1:O.start-C>p&&O.start?-1:0}function T(p,_,O){var C=Math.min(_,O.duration+(O.deltaPTS?O.deltaPTS:0))*1e3,L=O.endProgramDateTime||0;return L-C>p}function A(p,_){return o.default.search(p,function(O){return O.cc<_?1:O.cc>_?-1:0})}},"./src/controller/fragment-tracker.ts":function(n,i,r){r.r(i),r.d(i,"FragmentState",function(){return l}),r.d(i,"FragmentTracker",function(){return b});var a=r("./src/events.ts"),o=r("./src/types/loader.ts"),l;(function(A){A.NOT_LOADED="NOT_LOADED",A.APPENDING="APPENDING",A.PARTIAL="PARTIAL",A.OK="OK"})(l||(l={}));var b=function(){function A(_){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=_,this._registerListeners()}var p=A.prototype;return p._registerListeners=function(){var O=this.hls;O.on(a.Events.BUFFER_APPENDED,this.onBufferAppended,this),O.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),O.on(a.Events.FRAG_LOADED,this.onFragLoaded,this)},p._unregisterListeners=function(){var O=this.hls;O.off(a.Events.BUFFER_APPENDED,this.onBufferAppended,this),O.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),O.off(a.Events.FRAG_LOADED,this.onFragLoaded,this)},p.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},p.getAppendedFrag=function(O,C){if(C===o.PlaylistLevelType.MAIN){var L=this.activeFragment,S=this.activeParts;if(!L)return null;if(S)for(var u=S.length;u--;){var s=S[u],c=s?s.end:L.appendedPTS;if(s.start<=O&&c!==void 0&&O<=c)return u>9&&(this.activeParts=S.slice(u-9)),s}else if(L.start<=O&&L.appendedPTS!==void 0&&O<=L.appendedPTS)return L}return this.getBufferedFrag(O,C)},p.getBufferedFrag=function(O,C){for(var L=this.fragments,S=Object.keys(L),u=S.length;u--;){var s=L[S[u]];if((s==null?void 0:s.body.type)===C&&s.buffered){var c=s.body;if(c.start<=O&&O<=c.end)return c}}return null},p.detectEvictedFragments=function(O,C,L){var S=this;Object.keys(this.fragments).forEach(function(u){var s=S.fragments[u];if(!!s){if(!s.buffered){s.body.type===L&&S.removeFragment(s.body);return}var c=s.range[O];!c||c.time.some(function(h){var E=!S.isTimeBuffered(h.startPTS,h.endPTS,C);return E&&S.removeFragment(s.body),E})}})},p.detectPartialFragments=function(O){var C=this,L=this.timeRanges,S=O.frag,u=O.part;if(!(!L||S.sn==="initSegment")){var s=T(S),c=this.fragments[s];!c||(Object.keys(L).forEach(function(h){var E=S.elementaryStreams[h];if(!!E){var v=L[h],f=u!==null||E.partial===!0;c.range[h]=C.getBufferedTimes(S,u,f,v)}}),c.loaded=null,Object.keys(c.range).length?c.buffered=!0:this.removeFragment(c.body))}},p.fragBuffered=function(O){var C=T(O),L=this.fragments[C];L&&(L.loaded=null,L.buffered=!0)},p.getBufferedTimes=function(O,C,L,S){for(var u={time:[],partial:L},s=C?C.start:O.start,c=C?C.end:O.end,h=O.minEndPTS||c,E=O.maxStartPTS||s,v=0;v<S.length;v++){var f=S.start(v)-this.bufferPadding,d=S.end(v)+this.bufferPadding;if(E>=f&&h<=d){u.time.push({startPTS:Math.max(s,S.start(v)),endPTS:Math.min(c,S.end(v))});break}else if(s<d&&c>f)u.partial=!0,u.time.push({startPTS:Math.max(s,S.start(v)),endPTS:Math.min(c,S.end(v))});else if(c<=f)break}return u},p.getPartialFragment=function(O){var C=null,L,S,u,s=0,c=this.bufferPadding,h=this.fragments;return Object.keys(h).forEach(function(E){var v=h[E];!v||I(v)&&(S=v.body.start-c,u=v.body.end+c,O>=S&&O<=u&&(L=Math.min(O-S,u-O),s<=L&&(C=v.body,s=L)))}),C},p.getState=function(O){var C=T(O),L=this.fragments[C];return L?L.buffered?I(L)?l.PARTIAL:l.OK:l.APPENDING:l.NOT_LOADED},p.isTimeBuffered=function(O,C,L){for(var S,u,s=0;s<L.length;s++){if(S=L.start(s)-this.bufferPadding,u=L.end(s)+this.bufferPadding,O>=S&&C<=u)return!0;if(C<=S)return!1}return!1},p.onFragLoaded=function(O,C){var L=C.frag,S=C.part;if(!(L.sn==="initSegment"||L.bitrateTest||S)){var u=T(L);this.fragments[u]={body:L,loaded:C,buffered:!1,range:Object.create(null)}}},p.onBufferAppended=function(O,C){var L=this,S=C.frag,u=C.part,s=C.timeRanges;if(S.type===o.PlaylistLevelType.MAIN)if(this.activeFragment=S,u){var c=this.activeParts;c||(this.activeParts=c=[]),c.push(u)}else this.activeParts=null;this.timeRanges=s,Object.keys(s).forEach(function(h){var E=s[h];if(L.detectEvictedFragments(h,E),!u)for(var v=0;v<E.length;v++)S.appendedPTS=Math.max(E.end(v),S.appendedPTS||0)})},p.onFragBuffered=function(O,C){this.detectPartialFragments(C)},p.hasFragment=function(O){var C=T(O);return!!this.fragments[C]},p.removeFragmentsInRange=function(O,C,L){var S=this;Object.keys(this.fragments).forEach(function(u){var s=S.fragments[u];if(!!s&&s.buffered){var c=s.body;c.type===L&&c.start<C&&c.end>O&&S.removeFragment(c)}})},p.removeFragment=function(O){var C=T(O);O.stats.loaded=0,O.clearElementaryStreamInfo(),delete this.fragments[C]},p.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},A}();function I(A){var p,_;return A.buffered&&(((p=A.range.video)===null||p===void 0?void 0:p.partial)||((_=A.range.audio)===null||_===void 0?void 0:_.partial))}function T(A){return A.type+"_"+A.level+"_"+A.urlId+"_"+A.sn}},"./src/controller/gap-controller.ts":function(n,i,r){r.r(i),r.d(i,"STALL_MINIMUM_DURATION_MS",function(){return I}),r.d(i,"MAX_START_GAP_JUMP",function(){return T}),r.d(i,"SKIP_BUFFER_HOLE_STEP_SECONDS",function(){return A}),r.d(i,"SKIP_BUFFER_RANGE_START",function(){return p}),r.d(i,"default",function(){return _});var a=r("./src/utils/buffer-helper.ts"),o=r("./src/errors.ts"),l=r("./src/events.ts"),b=r("./src/utils/logger.ts"),I=250,T=2,A=.1,p=.05,_=function(){function O(L,S,u,s){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=L,this.media=S,this.fragmentTracker=u,this.hls=s}var C=O.prototype;return C.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},C.poll=function(S,u){var s=this.config,c=this.media,h=this.stalled;if(c!==null){var E=c.currentTime,v=c.seeking,f=this.seeking&&!v,d=!this.seeking&&v;if(this.seeking=v,E!==S){if(this.moved=!0,h!==null){if(this.stallReported){var P=self.performance.now()-h;b.logger.warn("playback not stuck anymore @"+E+", after "+Math.round(P)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((d||f)&&(this.stalled=null),!(c.paused&&!v||c.ended||c.playbackRate===0||!a.BufferHelper.getBuffered(c).length)){var D=a.BufferHelper.bufferInfo(c,E,0),x=D.len>0,y=D.nextStart||0;if(!(!x&&!y)){if(v){var g=D.len>T,m=!y||u&&u.start<=E||y-E>T&&!this.fragmentTracker.getPartialFragment(E);if(g||m)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var R,M=Math.max(y,D.start||0)-E,F=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,w=F==null||(R=F.details)===null||R===void 0?void 0:R.live,U=w?F.details.targetduration*2:T;if(M>0&&M<=U){this._trySkipBufferHole(null);return}}var B=self.performance.now();if(h===null){this.stalled=B;return}var k=B-h;if(!(!v&&k>=I&&(this._reportStall(D),!this.media))){var j=a.BufferHelper.bufferInfo(c,E,s.maxBufferHole);this._tryFixBufferStall(j,k)}}}}},C._tryFixBufferStall=function(S,u){var s=this.config,c=this.fragmentTracker,h=this.media;if(h!==null){var E=h.currentTime,v=c.getPartialFragment(E);if(v){var f=this._trySkipBufferHole(v);if(f||!this.media)return}S.len>s.maxBufferHole&&u>s.highBufferWatchdogPeriod*1e3&&(b.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},C._reportStall=function(S){var u=this.hls,s=this.media,c=this.stallReported;!c&&s&&(this.stallReported=!0,b.logger.warn("Playback stalling at @"+s.currentTime+" due to low buffer ("+JSON.stringify(S)+")"),u.trigger(l.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:S.len}))},C._trySkipBufferHole=function(S){var u=this.config,s=this.hls,c=this.media;if(c===null)return 0;for(var h=c.currentTime,E=0,v=a.BufferHelper.getBuffered(c),f=0;f<v.length;f++){var d=v.start(f);if(h+u.maxBufferHole>=E&&h<d){var P=Math.max(d+p,c.currentTime+A);return b.logger.warn("skipping hole, adjusting currentTime from "+h+" to "+P),this.moved=!0,this.stalled=null,c.currentTime=P,S&&s.trigger(l.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+h+" to "+P,frag:S}),P}E=v.end(f)}return 0},C._tryNudgeBuffer=function(){var S=this.config,u=this.hls,s=this.media,c=this.nudgeRetry;if(s!==null){var h=s.currentTime;if(this.nudgeRetry++,c<S.nudgeMaxRetry){var E=h+(c+1)*S.nudgeOffset;b.logger.warn("Nudging 'currentTime' from "+h+" to "+E),s.currentTime=E,u.trigger(l.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else b.logger.error("Playhead still not moving while enough data buffered @"+h+" after "+S.nudgeMaxRetry+" nudges"),u.trigger(l.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},O}()},"./src/controller/id3-track-controller.ts":function(n,i,r){r.r(i);var a=r("./src/polyfills/number.ts"),o=r("./src/events.ts"),l=r("./src/utils/texttrack-utils.ts"),b=r("./src/demux/id3.ts"),I=r("./src/loader/date-range.ts"),T=r("./src/types/demuxer.ts"),A=.25;function p(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}function _(L,S){return L.getTime()/1e3-S}function O(L){return Uint8Array.from(L.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var C=function(){function L(u){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=u,this._registerListeners()}var S=L.prototype;return S.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},S._registerListeners=function(){var s=this.hls;s.on(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),s.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),s.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),s.on(o.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),s.on(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),s.on(o.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},S._unregisterListeners=function(){var s=this.hls;s.off(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),s.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),s.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),s.off(o.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),s.off(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),s.off(o.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},S.onMediaAttached=function(s,c){this.media=c.media},S.onMediaDetaching=function(){!this.id3Track||(Object(l.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},S.onManifestLoading=function(){this.dateRangeCuesAppended={}},S.createTrack=function(s){var c=this.getID3Track(s.textTracks);return c.mode="hidden",c},S.getID3Track=function(s){if(!!this.media){for(var c=0;c<s.length;c++){var h=s[c];if(h.kind==="metadata"&&h.label==="id3")return Object(l.sendAddTrackEvent)(h,this.media),h}return this.media.addTextTrack("metadata","id3")}},S.onFragParsingMetadata=function(s,c){if(!!this.media){var h=this.hls.config,E=h.enableEmsgMetadataCues,v=h.enableID3MetadataCues;if(!(!E&&!v)){var f=c.frag,d=c.samples,P=c.details;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var D=P.edge||f.end,x=p(),y=!1,g={},m=0;m<d.length;m++){var R=d[m].type;if(!(R===T.MetadataSchema.emsg&&!E||!v)){var M=b.getID3Frames(d[m].data);if(M){var F=d[m].pts,w=D,U=w-F;U<=0&&(w=F+A);for(var B=0;B<M.length;B++){var k=M[B];if(!b.isTimeStampFrame(k)){var j=new x(F,w,"");j.value=k,R&&(j.type=R),this.id3Track.addCue(j),g[k.key]=null,y=!0}}}}}y&&this.updateId3CueEnds(g)}}},S.updateId3CueEnds=function(s){var c,h=(c=this.id3Track)===null||c===void 0?void 0:c.cues;if(h)for(var E=h.length;E--;){var v,f=h[E],d=(v=f.value)===null||v===void 0?void 0:v.key;if(d&&d in s){var P=s[d];P&&f.endTime!==P&&(f.endTime=P),s[d]=f.startTime}}},S.onBufferFlushing=function(s,c){var h=c.startOffset,E=c.endOffset,v=c.type,f=this.id3Track,d=this.hls;if(!!d){var P=d.config,D=P.enableEmsgMetadataCues,x=P.enableID3MetadataCues;if(f&&(D||x)){var y;v==="audio"?y=function(m){return m.type===T.MetadataSchema.audioId3&&x}:v==="video"?y=function(m){return m.type===T.MetadataSchema.emsg&&D}:y=function(m){return m.type===T.MetadataSchema.audioId3&&x||m.type===T.MetadataSchema.emsg&&D},Object(l.removeCuesInRange)(f,h,E,y)}}},S.onLevelUpdated=function(s,c){var h=this,E=c.details;if(!(!this.media||!E.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)){var v=this.dateRangeCuesAppended,f=this.id3Track,d=E.dateRanges,P=Object.keys(d);if(f)for(var D=Object.keys(v).filter(function(U){return!P.includes(U)}),x=function(B){var k=D[B];Object.keys(v[k].cues).forEach(function(j){f.removeCue(v[k].cues[j])}),delete v[k]},y=D.length;y--;)x(y);var g=E.fragments[E.fragments.length-1];if(!(P.length===0||!Object(a.isFiniteNumber)(g==null?void 0:g.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var m=g.programDateTime/1e3-g.start,R=E.edge||g.end,M=p(),F=function(B){var k=P[B],j=d[k],G=v[k],N=(G==null?void 0:G.cues)||{},H=(G==null?void 0:G.durationKnown)||!1,$=_(j.startDate,m),z=R,ee=j.endDate;if(ee)z=_(ee,m),H=!0;else if(j.endOnNext&&!H){var X=P.reduce(function(Q,Y){var Z=d[Y];return Z.class===j.class&&Z.id!==Y&&Z.startDate>j.startDate&&Q.push(Z),Q},[]).sort(function(Q,Y){return Q.startDate.getTime()-Y.startDate.getTime()})[0];X&&(z=_(X.startDate,m),H=!0)}for(var te=Object.keys(j.attr),se=0;se<te.length;se++){var K=te[se];if(!(K===I.DateRangeAttribute.ID||K===I.DateRangeAttribute.CLASS||K===I.DateRangeAttribute.START_DATE||K===I.DateRangeAttribute.DURATION||K===I.DateRangeAttribute.END_DATE||K===I.DateRangeAttribute.END_ON_NEXT)){var W=N[K];if(W)H&&!G.durationKnown&&(W.endTime=z);else{var V=j.attr[K];W=new M($,z,""),(K===I.DateRangeAttribute.SCTE35_OUT||K===I.DateRangeAttribute.SCTE35_IN)&&(V=O(V)),W.value={key:K,data:V},W.type=T.MetadataSchema.dateRange,h.id3Track.addCue(W),N[K]=W}}}v[k]={cues:N,dateRange:j,durationKnown:H}},w=0;w<P.length;w++)F(w)}}},L}();i.default=C},"./src/controller/latency-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return T});var a=r("./src/errors.ts"),o=r("./src/events.ts"),l=r("./src/utils/logger.ts");function b(A,p){for(var _=0;_<p.length;_++){var O=p[_];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(A,O.key,O)}}function I(A,p,_){return p&&b(A.prototype,p),_&&b(A,_),Object.defineProperty(A,"prototype",{writable:!1}),A}var T=function(){function A(_){var O=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return O.timeupdate()},this.hls=_,this.config=_.config,this.registerListeners()}var p=A.prototype;return p.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},p.registerListeners=function(){this.hls.on(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(o.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(o.Events.ERROR,this.onError,this)},p.unregisterListeners=function(){this.hls.off(o.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(o.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(o.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(o.Events.ERROR,this.onError)},p.onMediaAttached=function(O,C){this.media=C.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},p.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},p.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},p.onLevelUpdated=function(O,C){var L=C.details;this.levelDetails=L,L.advanced&&this.timeupdate(),!L.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},p.onError=function(O,C){C.details===a.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,l.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},p.timeupdate=function(){var O=this.media,C=this.levelDetails;if(!(!O||!C)){this.currentTime=O.currentTime;var L=this.computeLatency();if(L!==null){this._latency=L;var S=this.config,u=S.lowLatencyMode,s=S.maxLiveSyncPlaybackRate;if(!(!u||s===1)){var c=this.targetLatency;if(c!==null){var h=L-c,E=Math.min(this.maxLatency,c+C.targetduration),v=h<E;if(C.live&&v&&h>.05&&this.forwardBufferLength>1){var f=Math.min(2,Math.max(1,s)),d=Math.round(2/(1+Math.exp(-.75*h-this.edgeStalled))*20)/20;O.playbackRate=Math.min(f,Math.max(1,d))}else O.playbackRate!==1&&O.playbackRate!==0&&(O.playbackRate=1)}}}}},p.estimateLiveEdge=function(){var O=this.levelDetails;return O===null?null:O.edge+O.age},p.computeLatency=function(){var O=this.estimateLiveEdge();return O===null?null:O-this.currentTime},I(A,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var O=this.config,C=this.levelDetails;return O.liveMaxLatencyDuration!==void 0?O.liveMaxLatencyDuration:C?O.liveMaxLatencyDurationCount*C.targetduration:0}},{key:"targetLatency",get:function(){var O=this.levelDetails;if(O===null)return null;var C=O.holdBack,L=O.partHoldBack,S=O.targetduration,u=this.config,s=u.liveSyncDuration,c=u.liveSyncDurationCount,h=u.lowLatencyMode,E=this.hls.userConfig,v=h&&L||C;(E.liveSyncDuration||E.liveSyncDurationCount||v===0)&&(v=s!==void 0?s:c*S);var f=S,d=1;return v+Math.min(this.stallCount*d,f)}},{key:"liveSyncPosition",get:function(){var O=this.estimateLiveEdge(),C=this.targetLatency,L=this.levelDetails;if(O===null||C===null||L===null)return null;var S=L.edge,u=O-C-this.edgeStalled,s=S-L.totalduration,c=S-(this.config.lowLatencyMode&&L.partTarget||L.targetduration);return Math.min(Math.max(s,u),c)}},{key:"drift",get:function(){var O=this.levelDetails;return O===null?1:O.drift}},{key:"edgeStalled",get:function(){var O=this.levelDetails;if(O===null)return 0;var C=(this.config.lowLatencyMode&&O.partTarget||O.targetduration)*3;return Math.max(O.age-C,0)}},{key:"forwardBufferLength",get:function(){var O=this.media,C=this.levelDetails;if(!O||!C)return 0;var L=O.buffered.length;return(L?O.buffered.end(L-1):C.edge)-this.currentTime}}]),A}()},"./src/controller/level-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return u});var a=r("./src/types/level.ts"),o=r("./src/events.ts"),l=r("./src/errors.ts"),b=r("./src/utils/codecs.ts"),I=r("./src/controller/level-helper.ts"),T=r("./src/controller/base-playlist-controller.ts"),A=r("./src/types/loader.ts");function p(){return p=Object.assign?Object.assign.bind():function(s){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var E in h)Object.prototype.hasOwnProperty.call(h,E)&&(s[E]=h[E])}return s},p.apply(this,arguments)}function _(s,c){for(var h=0;h<c.length;h++){var E=c[h];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(s,E.key,E)}}function O(s,c,h){return c&&_(s.prototype,c),h&&_(s,h),Object.defineProperty(s,"prototype",{writable:!1}),s}function C(s,c){s.prototype=Object.create(c.prototype),s.prototype.constructor=s,L(s,c)}function L(s,c){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,v){return E.__proto__=v,E},L(s,c)}var S=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),u=function(s){C(c,s);function c(E){var v;return v=s.call(this,E,"[level-controller]")||this,v._levels=[],v._firstLevel=-1,v._startLevel=void 0,v.currentLevelIndex=-1,v.manualLevelIndex=-1,v.onParsedComplete=void 0,v._registerListeners(),v}var h=c.prototype;return h._registerListeners=function(){var v=this.hls;v.on(o.Events.MANIFEST_LOADED,this.onManifestLoaded,this),v.on(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),v.on(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),v.on(o.Events.FRAG_LOADED,this.onFragLoaded,this),v.on(o.Events.ERROR,this.onError,this)},h._unregisterListeners=function(){var v=this.hls;v.off(o.Events.MANIFEST_LOADED,this.onManifestLoaded,this),v.off(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),v.off(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),v.off(o.Events.FRAG_LOADED,this.onFragLoaded,this),v.off(o.Events.ERROR,this.onError,this)},h.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,s.prototype.destroy.call(this)},h.startLoad=function(){var v=this._levels;v.forEach(function(f){f.loadError=0}),s.prototype.startLoad.call(this)},h.onManifestLoaded=function(v,f){var d=[],P=[],D=[],x,y={},g,m=!1,R=!1,M=!1;if(f.levels.forEach(function(B){var k=B.attrs;m=m||!!(B.width&&B.height),R=R||!!B.videoCodec,M=M||!!B.audioCodec,S&&B.audioCodec&&B.audioCodec.indexOf("mp4a.40.34")!==-1&&(B.audioCodec=void 0);var j=B.bitrate+"-"+B.attrs.RESOLUTION+"-"+B.attrs.CODECS;g=y[j],g?g.url.push(B.url):(g=new a.Level(B),y[j]=g,d.push(g)),k&&(k.AUDIO&&Object(I.addGroupId)(g,"audio",k.AUDIO),k.SUBTITLES&&Object(I.addGroupId)(g,"text",k.SUBTITLES))}),(m||R)&&M&&(d=d.filter(function(B){var k=B.videoCodec,j=B.width,G=B.height;return!!k||!!(j&&G)})),d=d.filter(function(B){var k=B.audioCodec,j=B.videoCodec;return(!k||Object(b.isCodecSupportedInMp4)(k,"audio"))&&(!j||Object(b.isCodecSupportedInMp4)(j,"video"))}),f.audioTracks&&(P=f.audioTracks.filter(function(B){return!B.audioCodec||Object(b.isCodecSupportedInMp4)(B.audioCodec,"audio")}),Object(I.assignTrackIdsByGroup)(P)),f.subtitles&&(D=f.subtitles,Object(I.assignTrackIdsByGroup)(D)),d.length>0){x=d[0].bitrate,d.sort(function(B,k){return B.bitrate-k.bitrate}),this._levels=d;for(var F=0;F<d.length;F++)if(d[F].bitrate===x){this._firstLevel=F,this.log("manifest loaded, "+d.length+" level(s) found, first bitrate: "+x);break}var w=M&&!R,U={levels:d,audioTracks:P,subtitleTracks:D,firstLevel:this._firstLevel,stats:f.stats,audio:M,video:R,altAudio:!w&&P.some(function(B){return!!B.url})};this.hls.trigger(o.Events.MANIFEST_PARSED,U),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(o.Events.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:f.url,reason:"no level with compatible codecs found in manifest"})},h.onError=function(v,f){if(s.prototype.onError.call(this,v,f),!f.fatal){var d=f.context,P=this._levels[this.currentLevelIndex];if(d&&(d.type===A.PlaylistContextType.AUDIO_TRACK&&P.audioGroupIds&&d.groupId===P.audioGroupIds[P.urlId]||d.type===A.PlaylistContextType.SUBTITLE_TRACK&&P.textGroupIds&&d.groupId===P.textGroupIds[P.urlId])){this.redundantFailover(this.currentLevelIndex);return}var D=!1,x=!0,y;switch(f.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:if(f.frag){var g=this._levels[f.frag.level];g?(g.fragmentError++,g.fragmentError>this.hls.config.fragLoadingMaxRetry&&(y=f.frag.level)):y=f.frag.level}break;case l.ErrorDetails.LEVEL_LOAD_ERROR:case l.ErrorDetails.LEVEL_LOAD_TIMEOUT:d&&(d.deliveryDirectives&&(x=!1),y=d.level),D=!0;break;case l.ErrorDetails.REMUX_ALLOC_ERROR:y=f.level,D=!0;break}y!==void 0&&this.recoverLevel(f,y,D,x)}},h.recoverLevel=function(v,f,d,P){var D=v.details,x=this._levels[f];if(x.loadError++,d){var y=this.retryLoadingOrFail(v);if(y)v.levelRetry=!0;else{this.currentLevelIndex=-1;return}}if(P){var g=x.url.length;if(g>1&&x.loadError<g)v.levelRetry=!0,this.redundantFailover(f);else if(this.manualLevelIndex===-1){var m=f===0?this._levels.length-1:f-1;this.currentLevelIndex!==m&&this._levels[m].loadError===0&&(this.warn(D+": switch to "+m),v.levelRetry=!0,this.hls.nextAutoLevel=m)}}},h.redundantFailover=function(v){var f=this._levels[v],d=f.url.length;if(d>1){var P=(f.urlId+1)%d;this.warn("Switching to redundant URL-id "+P),this._levels.forEach(function(D){D.urlId=P}),this.level=v}},h.onFragLoaded=function(v,f){var d=f.frag;if(d!==void 0&&d.type===A.PlaylistLevelType.MAIN){var P=this._levels[d.level];P!==void 0&&(P.fragmentError=0,P.loadError=0)}},h.onLevelLoaded=function(v,f){var d,P=f.level,D=f.details,x=this._levels[P];if(!x){var y;this.warn("Invalid level index "+P),(y=f.deliveryDirectives)!==null&&y!==void 0&&y.skip&&(D.deltaUpdateFailed=!0);return}P===this.currentLevelIndex?(x.fragmentError===0&&(x.loadError=0,this.retryCount=0),this.playlistLoaded(P,f,x.details)):(d=f.deliveryDirectives)!==null&&d!==void 0&&d.skip&&(D.deltaUpdateFailed=!0)},h.onAudioTrackSwitched=function(v,f){var d=this.hls.levels[this.currentLevelIndex];if(!!d&&d.audioGroupIds){for(var P=-1,D=this.hls.audioTracks[f.id].groupId,x=0;x<d.audioGroupIds.length;x++)if(d.audioGroupIds[x]===D){P=x;break}P!==d.urlId&&(d.urlId=P,this.startLoad())}},h.loadPlaylist=function(v){var f=this.currentLevelIndex,d=this._levels[f];if(this.canLoad&&d&&d.url.length>0){var P=d.urlId,D=d.url[P];if(v)try{D=v.addDirectives(D)}catch(x){this.warn("Could not construct new URL with HLS Delivery Directives: "+x)}this.log("Attempt loading level index "+f+(v?" at sn "+v.msn+" part "+v.part:"")+" with URL-id "+P+" "+D),this.clearTimer(),this.hls.trigger(o.Events.LEVEL_LOADING,{url:D,level:f,id:P,deliveryDirectives:v||null})}},h.removeLevel=function(v,f){var d=function(x,y){return y!==f},P=this._levels.filter(function(D,x){return x!==v?!0:D.url.length>1&&f!==void 0?(D.url=D.url.filter(d),D.audioGroupIds&&(D.audioGroupIds=D.audioGroupIds.filter(d)),D.textGroupIds&&(D.textGroupIds=D.textGroupIds.filter(d)),D.urlId=0,!0):!1}).map(function(D,x){var y=D.details;return y!=null&&y.fragments&&y.fragments.forEach(function(g){g.level=x}),D});this._levels=P,this.hls.trigger(o.Events.LEVELS_UPDATED,{levels:P})},O(c,[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(v){var f,d=this._levels;if(d.length!==0&&!(this.currentLevelIndex===v&&(f=d[v])!==null&&f!==void 0&&f.details)){if(v<0||v>=d.length){var P=v<0;if(this.hls.trigger(o.Events.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.LEVEL_SWITCH_ERROR,level:v,fatal:P,reason:"invalid level idx"}),P)return;v=Math.min(v,d.length-1)}this.clearTimer();var D=this.currentLevelIndex,x=d[D],y=d[v];this.log("switching to level "+v+" from "+D),this.currentLevelIndex=v;var g=p({},y,{level:v,maxBitrate:y.maxBitrate,uri:y.uri,urlId:y.urlId});delete g._urlId,this.hls.trigger(o.Events.LEVEL_SWITCHING,g);var m=y.details;if(!m||m.live){var R=this.switchParams(y.uri,x==null?void 0:x.details);this.loadPlaylist(R)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(v){this.manualLevelIndex=v,this._startLevel===void 0&&(this._startLevel=v),v!==-1&&(this.level=v)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(v){this._firstLevel=v}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var v=this.hls.config.startLevel;return v!==void 0?v:this._firstLevel}else return this._startLevel},set:function(v){this._startLevel=v}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(v){this.level=v,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=v)}}]),c}(T.default)},"./src/controller/level-helper.ts":function(n,i,r){r.r(i),r.d(i,"addGroupId",function(){return I}),r.d(i,"assignTrackIdsByGroup",function(){return T}),r.d(i,"updatePTS",function(){return A}),r.d(i,"updateFragPTSDTS",function(){return _}),r.d(i,"mergeDetails",function(){return O}),r.d(i,"mapPartIntersection",function(){return L}),r.d(i,"mapFragmentIntersection",function(){return S}),r.d(i,"adjustSliding",function(){return u}),r.d(i,"addSliding",function(){return s}),r.d(i,"computeReloadInterval",function(){return c}),r.d(i,"getFragmentWithSN",function(){return h}),r.d(i,"getPartWith",function(){return E});var a=r("./src/polyfills/number.ts"),o=r("./src/utils/logger.ts"),l=r("./src/loader/date-range.ts");function b(){return b=Object.assign?Object.assign.bind():function(v){for(var f=1;f<arguments.length;f++){var d=arguments[f];for(var P in d)Object.prototype.hasOwnProperty.call(d,P)&&(v[P]=d[P])}return v},b.apply(this,arguments)}function I(v,f,d){switch(f){case"audio":v.audioGroupIds||(v.audioGroupIds=[]),v.audioGroupIds.push(d);break;case"text":v.textGroupIds||(v.textGroupIds=[]),v.textGroupIds.push(d);break}}function T(v){var f={};v.forEach(function(d){var P=d.groupId||"";d.id=f[P]=f[P]||0,f[P]++})}function A(v,f,d){var P=v[f],D=v[d];p(P,D)}function p(v,f){var d=f.startPTS;if(Object(a.isFiniteNumber)(d)){var P=0,D;f.sn>v.sn?(P=d-v.start,D=v):(P=v.start-d,D=f),D.duration!==P&&(D.duration=P)}else if(f.sn>v.sn){var x=v.cc===f.cc;x&&v.minEndPTS?f.start=v.start+(v.minEndPTS-v.start):f.start=v.start+v.duration}else f.start=Math.max(v.start-f.duration,0)}function _(v,f,d,P,D,x){var y=P-d;y<=0&&(o.logger.warn("Fragment should have a positive duration",f),P=d+f.duration,x=D+f.duration);var g=d,m=P,R=f.startPTS,M=f.endPTS;if(Object(a.isFiniteNumber)(R)){var F=Math.abs(R-d);Object(a.isFiniteNumber)(f.deltaPTS)?f.deltaPTS=Math.max(F,f.deltaPTS):f.deltaPTS=F,g=Math.max(d,R),d=Math.min(d,R),D=Math.min(D,f.startDTS),m=Math.min(P,M),P=Math.max(P,M),x=Math.max(x,f.endDTS)}f.duration=P-d;var w=d-f.start;f.appendedPTS=P,f.start=f.startPTS=d,f.maxStartPTS=g,f.startDTS=D,f.endPTS=P,f.minEndPTS=m,f.endDTS=x;var U=f.sn;if(!v||U<v.startSN||U>v.endSN)return 0;var B,k=U-v.startSN,j=v.fragments;for(j[k]=f,B=k;B>0;B--)p(j[B],j[B-1]);for(B=k;B<j.length-1;B++)p(j[B],j[B+1]);return v.fragmentHint&&p(j[j.length-1],v.fragmentHint),v.PTSKnown=v.alignedSliding=!0,w}function O(v,f){for(var d=null,P=v.fragments,D=P.length-1;D>=0;D--){var x=P[D].initSegment;if(x){d=x;break}}v.fragmentHint&&delete v.fragmentHint.endPTS;var y=0,g;if(S(v,f,function(B,k){B.relurl&&(y=B.cc-k.cc),Object(a.isFiniteNumber)(B.startPTS)&&Object(a.isFiniteNumber)(B.endPTS)&&(k.start=k.startPTS=B.startPTS,k.startDTS=B.startDTS,k.appendedPTS=B.appendedPTS,k.maxStartPTS=B.maxStartPTS,k.endPTS=B.endPTS,k.endDTS=B.endDTS,k.minEndPTS=B.minEndPTS,k.duration=B.endPTS-B.startPTS,k.duration&&(g=k),f.PTSKnown=f.alignedSliding=!0),k.elementaryStreams=B.elementaryStreams,k.loader=B.loader,k.stats=B.stats,k.urlId=B.urlId,B.initSegment&&(k.initSegment=B.initSegment,d=B.initSegment)}),d){var m=f.fragmentHint?f.fragments.concat(f.fragmentHint):f.fragments;m.forEach(function(B){var k;(!B.initSegment||B.initSegment.relurl===((k=d)===null||k===void 0?void 0:k.relurl))&&(B.initSegment=d)})}if(f.skippedSegments)if(f.deltaUpdateFailed=f.fragments.some(function(B){return!B}),f.deltaUpdateFailed){o.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var R=f.skippedSegments;R--;)f.fragments.shift();f.startSN=f.fragments[0].sn,f.startCC=f.fragments[0].cc}else f.canSkipDateRanges&&(f.dateRanges=C(v.dateRanges,f.dateRanges,f.recentlyRemovedDateranges));var M=f.fragments;if(y){o.logger.warn("discontinuity sliding from playlist, take drift into account");for(var F=0;F<M.length;F++)M[F].cc+=y}f.skippedSegments&&(f.startCC=f.fragments[0].cc),L(v.partList,f.partList,function(B,k){k.elementaryStreams=B.elementaryStreams,k.stats=B.stats}),g?_(f,g,g.startPTS,g.endPTS,g.startDTS,g.endDTS):u(v,f),M.length&&(f.totalduration=f.edge-M[0].start),f.driftStartTime=v.driftStartTime,f.driftStart=v.driftStart;var w=f.advancedDateTime;if(f.advanced&&w){var U=f.edge;f.driftStart||(f.driftStartTime=w,f.driftStart=U),f.driftEndTime=w,f.driftEnd=U}else f.driftEndTime=v.driftEndTime,f.driftEnd=v.driftEnd,f.advancedDateTime=v.advancedDateTime}function C(v,f,d){var P=b({},v);return d&&d.forEach(function(D){delete P[D]}),Object.keys(f).forEach(function(D){var x=new l.DateRange(f[D].attr,P[D]);x.isValid?P[D]=x:o.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(f[D].attr)+'"')}),P}function L(v,f,d){if(v&&f)for(var P=0,D=0,x=v.length;D<=x;D++){var y=v[D],g=f[D+P];y&&g&&y.index===g.index&&y.fragment.sn===g.fragment.sn?d(y,g):P--}}function S(v,f,d){for(var P=f.skippedSegments,D=Math.max(v.startSN,f.startSN)-f.startSN,x=(v.fragmentHint?1:0)+(P?f.endSN:Math.min(v.endSN,f.endSN))-f.startSN,y=f.startSN-v.startSN,g=f.fragmentHint?f.fragments.concat(f.fragmentHint):f.fragments,m=v.fragmentHint?v.fragments.concat(v.fragmentHint):v.fragments,R=D;R<=x;R++){var M=m[y+R],F=g[R];P&&!F&&R<P&&(F=f.fragments[R]=M),M&&F&&d(M,F)}}function u(v,f){var d=f.startSN+f.skippedSegments-v.startSN,P=v.fragments;d<0||d>=P.length||s(f,P[d].start)}function s(v,f){if(f){for(var d=v.fragments,P=v.skippedSegments;P<d.length;P++)d[P].start+=f;v.fragmentHint&&(v.fragmentHint.start+=f)}}function c(v,f){var d=1e3*v.levelTargetDuration,P=d/2,D=v.age,x=D>0&&D<d*3,y=f.loading.end-f.loading.start,g,m=v.availabilityDelay;if(v.updated===!1)if(x){var R=333*v.misses;g=Math.max(Math.min(P,y*2),R),v.availabilityDelay=(v.availabilityDelay||0)+g}else g=P;else x?(m=Math.min(m||d/2,D),v.availabilityDelay=m,g=m+d-D):g=d-y;return Math.round(g)}function h(v,f,d){if(!v||!v.details)return null;var P=v.details,D=P.fragments[f-P.startSN];return D||(D=P.fragmentHint,D&&D.sn===f)?D:f<P.startSN&&d&&d.sn===f?d:null}function E(v,f,d){if(!v||!v.details)return null;var P=v.details.partList;if(P)for(var D=P.length;D--;){var x=P[D];if(x.index===d&&x.fragment.sn===f)return x}return null}},"./src/controller/stream-controller.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return v});var a=r("./src/polyfills/number.ts"),o=r("./src/controller/base-stream-controller.ts"),l=r("./src/is-supported.ts"),b=r("./src/events.ts"),I=r("./src/utils/buffer-helper.ts"),T=r("./src/controller/fragment-tracker.ts"),A=r("./src/types/loader.ts"),p=r("./src/loader/fragment.ts"),_=r("./src/demux/transmuxer-interface.ts"),O=r("./src/types/transmuxer.ts"),C=r("./src/controller/gap-controller.ts"),L=r("./src/errors.ts"),S=r("./src/utils/logger.ts");function u(f,d){for(var P=0;P<d.length;P++){var D=d[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(f,D.key,D)}}function s(f,d,P){return d&&u(f.prototype,d),P&&u(f,P),Object.defineProperty(f,"prototype",{writable:!1}),f}function c(f,d){f.prototype=Object.create(d.prototype),f.prototype.constructor=f,h(f,d)}function h(f,d){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,x){return D.__proto__=x,D},h(f,d)}var E=100,v=function(f){c(d,f);function d(D,x){var y;return y=f.call(this,D,x,"[stream-controller]")||this,y.audioCodecSwap=!1,y.gapController=null,y.level=-1,y._forceStartLoad=!1,y.altAudio=!1,y.audioOnly=!1,y.fragPlaying=null,y.onvplaying=null,y.onvseeked=null,y.fragLastKbps=0,y.stalled=!1,y.couldBacktrack=!1,y.backtrackFragment=null,y.audioCodecSwitch=!1,y.videoBuffer=null,y._registerListeners(),y}var P=d.prototype;return P._registerListeners=function(){var x=this.hls;x.on(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),x.on(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),x.on(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),x.on(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),x.on(b.Events.LEVEL_LOADING,this.onLevelLoading,this),x.on(b.Events.LEVEL_LOADED,this.onLevelLoaded,this),x.on(b.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),x.on(b.Events.ERROR,this.onError,this),x.on(b.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),x.on(b.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),x.on(b.Events.BUFFER_CREATED,this.onBufferCreated,this),x.on(b.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),x.on(b.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),x.on(b.Events.FRAG_BUFFERED,this.onFragBuffered,this)},P._unregisterListeners=function(){var x=this.hls;x.off(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),x.off(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),x.off(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),x.off(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),x.off(b.Events.LEVEL_LOADED,this.onLevelLoaded,this),x.off(b.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),x.off(b.Events.ERROR,this.onError,this),x.off(b.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),x.off(b.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),x.off(b.Events.BUFFER_CREATED,this.onBufferCreated,this),x.off(b.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),x.off(b.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),x.off(b.Events.FRAG_BUFFERED,this.onFragBuffered,this)},P.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},P.startLoad=function(x){if(this.levels){var y=this.lastCurrentTime,g=this.hls;if(this.stopLoad(),this.setInterval(E),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var m=g.startLevel;m===-1&&(g.config.testBandwidth?(m=0,this.bitrateTest=!0):m=g.nextAutoLevel),this.level=g.nextLoadLevel=m,this.loadedmetadata=!1}y>0&&x===-1&&(this.log("Override startPosition with lastCurrentTime @"+y.toFixed(3)),x=y),this.state=o.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=x,this.tick()}else this._forceStartLoad=!0,this.state=o.State.STOPPED},P.stopLoad=function(){this._forceStartLoad=!1,f.prototype.stopLoad.call(this)},P.doTick=function(){switch(this.state){case o.State.IDLE:this.doTickIdle();break;case o.State.WAITING_LEVEL:{var x,y=this.levels,g=this.level,m=y==null||(x=y[g])===null||x===void 0?void 0:x.details;if(m&&(!m.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(m))break;this.state=o.State.IDLE;break}break}case o.State.FRAG_LOADING_WAITING_RETRY:{var R,M=self.performance.now(),F=this.retryDate;(!F||M>=F||(R=this.media)!==null&&R!==void 0&&R.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=o.State.IDLE)}break}this.onTickEnd()},P.onTickEnd=function(){f.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},P.doTickIdle=function(){var x,y,g=this.hls,m=this.levelLastLoaded,R=this.levels,M=this.media,F=g.config,w=g.nextLoadLevel;if(!(m===null||!M&&(this.startFragRequested||!F.startFragPrefetch))&&!(this.altAudio&&this.audioOnly)&&!(!R||!R[w])){var U=R[w];this.level=g.nextLoadLevel=w;var B=U.details;if(!B||this.state===o.State.WAITING_LEVEL||B.live&&this.levelLastLoaded!==w){this.state=o.State.WAITING_LEVEL;return}var k=this.getMainFwdBufferInfo();if(k!==null){var j=k.len,G=this.getMaxBufferLength(U.maxBitrate);if(!(j>=G)){if(this._streamEnded(k,B)){var N={};this.altAudio&&(N.type="video"),this.hls.trigger(b.Events.BUFFER_EOS,N),this.state=o.State.ENDED;return}this.backtrackFragment&&this.backtrackFragment.start>k.end&&(this.backtrackFragment=null);var H=this.backtrackFragment?this.backtrackFragment.start:k.end,$=this.getNextFragment(H,B);if(this.couldBacktrack&&!this.fragPrevious&&$&&$.sn!=="initSegment"&&this.fragmentTracker.getState($)!==T.FragmentState.OK){var z,ee=((z=this.backtrackFragment)!=null?z:$).sn,X=ee-B.startSN,te=B.fragments[X-1];te&&$.cc===te.cc&&($=te,this.fragmentTracker.removeFragment(te))}else this.backtrackFragment&&k.len&&(this.backtrackFragment=null);if($&&this.fragmentTracker.getState($)===T.FragmentState.OK&&this.nextLoadPosition>H){var se=this.audioOnly&&!this.altAudio?p.ElementaryStreamTypes.AUDIO:p.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(M,se,A.PlaylistLevelType.MAIN),$=this.getNextFragment(this.nextLoadPosition,B)}!$||($.initSegment&&!$.initSegment.data&&!this.bitrateTest&&($=$.initSegment),((x=$.decryptdata)===null||x===void 0?void 0:x.keyFormat)==="identity"&&!((y=$.decryptdata)!==null&&y!==void 0&&y.key)?this.loadKey($,B):this.loadFragment($,B,H))}}}},P.loadFragment=function(x,y,g){var m,R=this.fragmentTracker.getState(x);this.fragCurrent=x,R===T.FragmentState.NOT_LOADED||R===T.FragmentState.PARTIAL?x.sn==="initSegment"?this._loadInitSegment(x):this.bitrateTest?(x.bitrateTest=!0,this.log("Fragment "+x.sn+" of level "+x.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(x)):(this.startFragRequested=!0,f.prototype.loadFragment.call(this,x,y,g)):R===T.FragmentState.APPENDING?this.reduceMaxBufferLength(x.duration)&&this.fragmentTracker.removeFragment(x):((m=this.media)===null||m===void 0?void 0:m.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},P.getAppendedFrag=function(x){var y=this.fragmentTracker.getAppendedFrag(x,A.PlaylistLevelType.MAIN);return y&&"fragment"in y?y.fragment:y},P.getBufferedFrag=function(x){return this.fragmentTracker.getBufferedFrag(x,A.PlaylistLevelType.MAIN)},P.followingBufferedFrag=function(x){return x?this.getBufferedFrag(x.end+.5):null},P.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},P.nextLevelSwitch=function(){var x=this.levels,y=this.media;if(y!=null&&y.readyState){var g,m=this.getAppendedFrag(y.currentTime);if(m&&m.start>1&&this.flushMainBuffer(0,m.start-1),!y.paused&&x){var R=this.hls.nextLoadLevel,M=x[R],F=this.fragLastKbps;F&&this.fragCurrent?g=this.fragCurrent.duration*M.maxBitrate/(1e3*F)+1:g=0}else g=0;var w=this.getBufferedFrag(y.currentTime+g);if(w){var U=this.followingBufferedFrag(w);if(U){this.abortCurrentFrag();var B=U.maxStartPTS?U.maxStartPTS:U.start,k=U.duration,j=Math.max(w.end,B+Math.min(Math.max(k-this.config.maxFragLookUpTolerance,k*.5),k*.75));this.flushMainBuffer(j,Number.POSITIVE_INFINITY)}}}},P.abortCurrentFrag=function(){var x=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,x!=null&&x.loader&&x.loader.abort(),this.state){case o.State.KEY_LOADING:case o.State.FRAG_LOADING:case o.State.FRAG_LOADING_WAITING_RETRY:case o.State.PARSING:case o.State.PARSED:this.state=o.State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()},P.flushMainBuffer=function(x,y){f.prototype.flushMainBuffer.call(this,x,y,this.altAudio?"video":null)},P.onMediaAttached=function(x,y){f.prototype.onMediaAttached.call(this,x,y);var g=y.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),g.addEventListener("playing",this.onvplaying),g.addEventListener("seeked",this.onvseeked),this.gapController=new C.default(this.config,g,this.fragmentTracker,this.hls)},P.onMediaDetaching=function(){var x=this.media;x&&(x.removeEventListener("playing",this.onvplaying),x.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),f.prototype.onMediaDetaching.call(this)},P.onMediaPlaying=function(){this.tick()},P.onMediaSeeked=function(){var x=this.media,y=x?x.currentTime:null;Object(a.isFiniteNumber)(y)&&this.log("Media seeked to "+y.toFixed(3)),this.tick()},P.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(b.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},P.onManifestParsed=function(x,y){var g=!1,m=!1,R;y.levels.forEach(function(M){R=M.audioCodec,R&&(R.indexOf("mp4a.40.2")!==-1&&(g=!0),R.indexOf("mp4a.40.5")!==-1&&(m=!0))}),this.audioCodecSwitch=g&&m&&!Object(l.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=y.levels,this.startFragRequested=!1},P.onLevelLoading=function(x,y){var g=this.levels;if(!(!g||this.state!==o.State.IDLE)){var m=g[y.level];(!m.details||m.details.live&&this.levelLastLoaded!==y.level||this.waitForCdnTuneIn(m.details))&&(this.state=o.State.WAITING_LEVEL)}},P.onLevelLoaded=function(x,y){var g,m=this.levels,R=y.level,M=y.details,F=M.totalduration;if(!m){this.warn("Levels were reset while loading level "+R);return}this.log("Level "+R+" loaded ["+M.startSN+","+M.endSN+"], cc ["+M.startCC+", "+M.endCC+"] duration:"+F);var w=this.fragCurrent;w&&(this.state===o.State.FRAG_LOADING||this.state===o.State.FRAG_LOADING_WAITING_RETRY)&&w.level!==y.level&&w.loader&&(this.state=o.State.IDLE,this.backtrackFragment=null,w.loader.abort());var U=m[R],B=0;if(M.live||(g=U.details)!==null&&g!==void 0&&g.live){if(M.fragments[0]||(M.deltaUpdateFailed=!0),M.deltaUpdateFailed)return;B=this.alignPlaylists(M,U.details)}if(U.details=M,this.levelLastLoaded=R,this.hls.trigger(b.Events.LEVEL_UPDATED,{details:M,level:R}),this.state===o.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(M))return;this.state=o.State.IDLE}this.startFragRequested?M.live&&this.synchronizeToLiveEdge(M):this.setStartPosition(M,B),this.tick()},P._handleFragmentLoadProgress=function(x){var y,g=x.frag,m=x.part,R=x.payload,M=this.levels;if(!M){this.warn("Levels were reset while fragment load was in progress. Fragment "+g.sn+" of level "+g.level+" will not be buffered");return}var F=M[g.level],w=F.details;if(!w){this.warn("Dropping fragment "+g.sn+" of level "+g.level+" after level details were reset");return}var U=F.videoCodec,B=w.PTSKnown||!w.live,k=(y=g.initSegment)===null||y===void 0?void 0:y.data,j=this._getAudioCodec(F),G=this.transmuxer=this.transmuxer||new _.default(this.hls,A.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),N=m?m.index:-1,H=N!==-1,$=new O.ChunkMetadata(g.level,g.sn,g.stats.chunkCount,R.byteLength,N,H),z=this.initPTS[g.cc];G.push(R,k,j,U,g,m,w.totalduration,B,$,z)},P.onAudioTrackSwitching=function(x,y){var g=this.altAudio,m=!!y.url,R=y.id;if(!m){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var M=this.fragCurrent;M!=null&&M.loader&&(this.log("Switching to main audio track, cancel main fragment load"),M.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var F=this.hls;g&&F.trigger(b.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),F.trigger(b.Events.AUDIO_TRACK_SWITCHED,{id:R})}},P.onAudioTrackSwitched=function(x,y){var g=y.id,m=!!this.hls.audioTracks[g].url;if(m){var R=this.videoBuffer;R&&this.mediaBuffer!==R&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=R)}this.altAudio=m,this.tick()},P.onBufferCreated=function(x,y){var g=y.tracks,m,R,M=!1;for(var F in g){var w=g[F];if(w.id==="main"){if(R=F,m=w,F==="video"){var U=g[F];U&&(this.videoBuffer=U.buffer)}}else M=!0}M&&m?(this.log("Alternate track found, use "+R+".buffered to schedule main fragment loading"),this.mediaBuffer=m.buffer):this.mediaBuffer=this.media},P.onFragBuffered=function(x,y){var g=y.frag,m=y.part;if(!(g&&g.type!==A.PlaylistLevelType.MAIN)){if(this.fragContextChanged(g)){this.warn("Fragment "+g.sn+(m?" p: "+m.index:"")+" of level "+g.level+" finished buffering, but was aborted. state: "+this.state),this.state===o.State.PARSED&&(this.state=o.State.IDLE);return}var R=m?m.stats:g.stats;this.fragLastKbps=Math.round(8*R.total/(R.buffering.end-R.loading.first)),g.sn!=="initSegment"&&(this.fragPrevious=g),this.fragBufferedComplete(g,m)}},P.onError=function(x,y){switch(y.details){case L.ErrorDetails.FRAG_LOAD_ERROR:case L.ErrorDetails.FRAG_LOAD_TIMEOUT:case L.ErrorDetails.KEY_LOAD_ERROR:case L.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(A.PlaylistLevelType.MAIN,y);break;case L.ErrorDetails.LEVEL_LOAD_ERROR:case L.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==o.State.ERROR&&(y.fatal?(this.warn(""+y.details),this.state=o.State.ERROR):!y.levelRetry&&this.state===o.State.WAITING_LEVEL&&(this.state=o.State.IDLE));break;case L.ErrorDetails.BUFFER_FULL_ERROR:if(y.parent==="main"&&(this.state===o.State.PARSING||this.state===o.State.PARSED)){var g=!0,m=this.getFwdBufferInfo(this.media,A.PlaylistLevelType.MAIN);m&&m.len>.5&&(g=!this.reduceMaxBufferLength(m.len)),g&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}break}},P.checkBuffer=function(){var x=this.media,y=this.gapController;if(!(!x||!y||!x.readyState)){var g=I.BufferHelper.getBuffered(x);if(!this.loadedmetadata&&g.length)this.loadedmetadata=!0,this.seekToStartPos();else{var m=this.state!==o.State.IDLE?this.fragCurrent:null;y.poll(this.lastCurrentTime,m)}this.lastCurrentTime=x.currentTime}},P.onFragLoadEmergencyAborted=function(){this.state=o.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},P.onBufferFlushed=function(x,y){var g=y.type;if(g!==p.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var m=(g===p.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(m,g,A.PlaylistLevelType.MAIN)}},P.onLevelsUpdated=function(x,y){this.levels=y.levels},P.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},P.seekToStartPos=function(){var x=this.media,y=x.currentTime,g=this.startPosition;if(g>=0&&y<g){if(x.seeking){S.logger.log("could not seek to "+g+", already seeking at "+y);return}var m=I.BufferHelper.getBuffered(x),R=m.length?m.start(0):0,M=R-g;M>0&&(M<this.config.maxBufferHole||M<this.config.maxFragLookUpTolerance)&&(S.logger.log("adjusting start position by "+M+" to match buffer start"),g+=M,this.startPosition=g),this.log("seek to target start position "+g+" from current time "+y),x.currentTime=g}},P._getAudioCodec=function(x){var y=this.config.defaultAudioCodec||x.audioCodec;return this.audioCodecSwap&&y&&(this.log("Swapping audio codec"),y.indexOf("mp4a.40.5")!==-1?y="mp4a.40.2":y="mp4a.40.5"),y},P._loadBitrateTestFrag=function(x){var y=this;this._doFragLoad(x).then(function(g){var m=y.hls;if(!(!g||m.nextLoadLevel||y.fragContextChanged(x))){y.fragLoadError=0,y.state=o.State.IDLE,y.startFragRequested=!1,y.bitrateTest=!1;var R=x.stats;R.parsing.start=R.parsing.end=R.buffering.start=R.buffering.end=self.performance.now(),m.trigger(b.Events.FRAG_LOADED,g)}})},P._handleTransmuxComplete=function(x){var y,g="main",m=this.hls,R=x.remuxResult,M=x.chunkMeta,F=this.getCurrentContext(M);if(!F){this.warn("The loading context changed while buffering fragment "+M.sn+" of level "+M.level+". This chunk will not be buffered."),this.resetLiveStartWhenNotLoaded(M.level);return}var w=F.frag,U=F.part,B=F.level,k=R.video,j=R.text,G=R.id3,N=R.initSegment,H=B.details,$=this.altAudio?void 0:R.audio;if(!this.fragContextChanged(w)){if(this.state=o.State.PARSING,N){N.tracks&&(this._bufferInitSegment(B,N.tracks,w,M),m.trigger(b.Events.FRAG_PARSING_INIT_SEGMENT,{frag:w,id:g,tracks:N.tracks}));var z=N.initPTS,ee=N.timescale;Object(a.isFiniteNumber)(z)&&(this.initPTS[w.cc]=z,m.trigger(b.Events.INIT_PTS_FOUND,{frag:w,id:g,initPTS:z,timescale:ee}))}if(k&&R.independent!==!1){if(H){var X=k.startPTS,te=k.endPTS,se=k.startDTS,K=k.endDTS;if(U)U.elementaryStreams[k.type]={startPTS:X,endPTS:te,startDTS:se,endDTS:K};else if(k.firstKeyFrame&&k.independent&&(this.couldBacktrack=!0),k.dropped&&k.independent){var W=this.getMainFwdBufferInfo(),V=(W?W.end:this.getLoadPosition())+this.config.maxBufferHole,Q=k.firstKeyFramePTS?k.firstKeyFramePTS:X;if(V<Q-this.config.maxBufferHole){this.backtrack(w);return}w.setElementaryStreamInfo(k.type,w.start,te,w.start,K,!0)}w.setElementaryStreamInfo(k.type,X,te,se,K),this.backtrackFragment&&(this.backtrackFragment=w),this.bufferFragmentData(k,w,U,M)}}else if(R.independent===!1){this.backtrack(w);return}if($){var Y=$.startPTS,Z=$.endPTS,ne=$.startDTS,q=$.endDTS;U&&(U.elementaryStreams[p.ElementaryStreamTypes.AUDIO]={startPTS:Y,endPTS:Z,startDTS:ne,endDTS:q}),w.setElementaryStreamInfo(p.ElementaryStreamTypes.AUDIO,Y,Z,ne,q),this.bufferFragmentData($,w,U,M)}if(H&&G!==null&&G!==void 0&&(y=G.samples)!==null&&y!==void 0&&y.length){var re={id:g,frag:w,details:H,samples:G.samples};m.trigger(b.Events.FRAG_PARSING_METADATA,re)}if(H&&j){var J={id:g,frag:w,details:H,samples:j.samples};m.trigger(b.Events.FRAG_PARSING_USERDATA,J)}}},P._bufferInitSegment=function(x,y,g,m){var R=this;if(this.state===o.State.PARSING){this.audioOnly=!!y.audio&&!y.video,this.altAudio&&!this.audioOnly&&delete y.audio;var M=y.audio,F=y.video,w=y.audiovideo;if(M){var U=x.audioCodec,B=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(U&&(U.indexOf("mp4a.40.5")!==-1?U="mp4a.40.2":U="mp4a.40.5"),M.metadata.channelCount!==1&&B.indexOf("firefox")===-1&&(U="mp4a.40.5")),B.indexOf("android")!==-1&&M.container!=="audio/mpeg"&&(U="mp4a.40.2",this.log("Android: force audio codec to "+U)),x.audioCodec&&x.audioCodec!==U&&this.log('Swapping manifest audio codec "'+x.audioCodec+'" for "'+U+'"'),M.levelCodec=U,M.id="main",this.log("Init audio buffer, container:"+M.container+", codecs[selected/level/parsed]=["+(U||"")+"/"+(x.audioCodec||"")+"/"+M.codec+"]")}F&&(F.levelCodec=x.videoCodec,F.id="main",this.log("Init video buffer, container:"+F.container+", codecs[level/parsed]=["+(x.videoCodec||"")+"/"+F.codec+"]")),w&&this.log("Init audiovideo buffer, container:"+w.container+", codecs[level/parsed]=["+(x.attrs.CODECS||"")+"/"+w.codec+"]"),this.hls.trigger(b.Events.BUFFER_CODECS,y),Object.keys(y).forEach(function(k){var j=y[k],G=j.initSegment;G!=null&&G.byteLength&&R.hls.trigger(b.Events.BUFFER_APPENDING,{type:k,data:G,frag:g,part:null,chunkMeta:m,parent:g.type})}),this.tick()}},P.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,A.PlaylistLevelType.MAIN)},P.backtrack=function(x){this.couldBacktrack=!0,this.backtrackFragment=x,this.resetTransmuxer(),this.flushBufferGap(x),this.fragmentTracker.removeFragment(x),this.fragPrevious=null,this.nextLoadPosition=x.start,this.state=o.State.IDLE},P.checkFragmentChanged=function(){var x=this.media,y=null;if(x&&x.readyState>1&&x.seeking===!1){var g=x.currentTime;if(I.BufferHelper.isBuffered(x,g)?y=this.getAppendedFrag(g):I.BufferHelper.isBuffered(x,g+.1)&&(y=this.getAppendedFrag(g+.1)),y){this.backtrackFragment=null;var m=this.fragPlaying,R=y.level;(!m||y.sn!==m.sn||m.level!==R||y.urlId!==m.urlId)&&(this.hls.trigger(b.Events.FRAG_CHANGED,{frag:y}),(!m||m.level!==R)&&this.hls.trigger(b.Events.LEVEL_SWITCHED,{level:R}),this.fragPlaying=y)}}},s(d,[{key:"nextLevel",get:function(){var x=this.nextBufferedFrag;return x?x.level:-1}},{key:"currentFrag",get:function(){var x=this.media;return x?this.fragPlaying||this.getAppendedFrag(x.currentTime):null}},{key:"currentProgramDateTime",get:function(){var x=this.media;if(x){var y=x.currentTime,g=this.currentFrag;if(g&&Object(a.isFiniteNumber)(y)&&Object(a.isFiniteNumber)(g.programDateTime)){var m=g.programDateTime+(y-g.start)*1e3;return new Date(m)}}return null}},{key:"currentLevel",get:function(){var x=this.currentFrag;return x?x.level:-1}},{key:"nextBufferedFrag",get:function(){var x=this.currentFrag;return x?this.followingBufferedFrag(x):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),d}(o.default)},"./src/controller/subtitle-stream-controller.ts":function(n,i,r){r.r(i),r.d(i,"SubtitleStreamController",function(){return s});var a=r("./src/events.ts"),o=r("./src/utils/buffer-helper.ts"),l=r("./src/controller/fragment-finders.ts"),b=r("./src/utils/discontinuities.ts"),I=r("./src/controller/level-helper.ts"),T=r("./src/controller/fragment-tracker.ts"),A=r("./src/controller/base-stream-controller.ts"),p=r("./src/types/loader.ts"),_=r("./src/types/level.ts");function O(c,h){for(var E=0;E<h.length;E++){var v=h[E];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function C(c,h,E){return h&&O(c.prototype,h),E&&O(c,E),Object.defineProperty(c,"prototype",{writable:!1}),c}function L(c,h){c.prototype=Object.create(h.prototype),c.prototype.constructor=c,S(c,h)}function S(c,h){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,f){return v.__proto__=f,v},S(c,h)}var u=500,s=function(c){L(h,c);function h(v,f){var d;return d=c.call(this,v,f,"[subtitle-stream-controller]")||this,d.levels=[],d.currentTrackId=-1,d.tracksBuffered=[],d.mainDetails=null,d._registerListeners(),d}var E=h.prototype;return E.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},E._registerListeners=function(){var f=this.hls;f.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),f.on(a.Events.ERROR,this.onError,this),f.on(a.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),f.on(a.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),f.on(a.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),f.on(a.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),f.on(a.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},E._unregisterListeners=function(){var f=this.hls;f.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),f.off(a.Events.ERROR,this.onError,this),f.off(a.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),f.off(a.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),f.off(a.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),f.off(a.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),f.off(a.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},E.startLoad=function(){this.stopLoad(),this.state=A.State.IDLE,this.setInterval(u),this.tick()},E.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},E.onLevelLoaded=function(f,d){this.mainDetails=d.details},E.onSubtitleFragProcessed=function(f,d){var P=d.frag,D=d.success;if(this.fragPrevious=P,this.state=A.State.IDLE,!!D){var x=this.tracksBuffered[this.currentTrackId];if(!!x){for(var y,g=P.start,m=0;m<x.length;m++)if(g>=x[m].start&&g<=x[m].end){y=x[m];break}var R=P.start+P.duration;y?y.end=R:(y={start:g,end:R},x.push(y)),this.fragmentTracker.fragBuffered(P)}}},E.onBufferFlushing=function(f,d){var P=d.startOffset,D=d.endOffset;if(P===0&&D!==Number.POSITIVE_INFINITY){var x=this.currentTrackId,y=this.levels;if(!y.length||!y[x]||!y[x].details)return;var g=y[x].details,m=g.targetduration,R=D-m;if(R<=0)return;d.endOffsetSubtitles=Math.max(0,R),this.tracksBuffered.forEach(function(M){for(var F=0;F<M.length;){if(M[F].end<=R){M.shift();continue}else if(M[F].start<R)M[F].start=R;else break;F++}}),this.fragmentTracker.removeFragmentsInRange(P,R,p.PlaylistLevelType.SUBTITLE)}},E.onError=function(f,d){var P,D=d.frag;!D||D.type!==p.PlaylistLevelType.SUBTITLE||((P=this.fragCurrent)!==null&&P!==void 0&&P.loader&&this.fragCurrent.loader.abort(),this.state=A.State.IDLE)},E.onSubtitleTracksUpdated=function(f,d){var P=this,D=d.subtitleTracks;this.tracksBuffered=[],this.levels=D.map(function(x){return new _.Level(x)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(x){P.tracksBuffered[x.id]=[]}),this.mediaBuffer=null},E.onSubtitleTrackSwitch=function(f,d){if(this.currentTrackId=d.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}var P=this.levels[this.currentTrackId];P!=null&&P.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,P&&this.setInterval(u)},E.onSubtitleTrackLoaded=function(f,d){var P,D=d.details,x=d.id,y=this.currentTrackId,g=this.levels;if(!!g.length){var m=g[y];if(!(x>=g.length||x!==y||!m)){if(this.mediaBuffer=this.mediaBufferTimeRanges,D.live||(P=m.details)!==null&&P!==void 0&&P.live){var R=this.mainDetails;if(D.deltaUpdateFailed||!R)return;var M=R.fragments[0];if(!m.details)D.hasProgramDateTime&&R.hasProgramDateTime?Object(b.alignMediaPlaylistByPDT)(D,R):M&&Object(I.addSliding)(D,M.start);else{var F=this.alignPlaylists(D,m.details);F===0&&M&&Object(I.addSliding)(D,M.start)}}if(m.details=D,this.levelLastLoaded=x,this.tick(),D.live&&!this.fragCurrent&&this.media&&this.state===A.State.IDLE){var w=Object(l.findFragmentByPTS)(null,D.fragments,this.media.currentTime,0);w||(this.warn("Subtitle playlist not aligned with playback"),m.details=void 0)}}}},E._handleFragmentLoadComplete=function(f){var d=f.frag,P=f.payload,D=d.decryptdata,x=this.hls;if(!this.fragContextChanged(d)&&P&&P.byteLength>0&&D&&D.key&&D.iv&&D.method==="AES-128"){var y=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(P),D.key.buffer,D.iv.buffer).then(function(g){var m=performance.now();x.trigger(a.Events.FRAG_DECRYPTED,{frag:d,payload:g,stats:{tstart:y,tdecrypt:m}})})}},E.doTick=function(){if(!this.media){this.state=A.State.IDLE;return}if(this.state===A.State.IDLE){var f,d=this.currentTrackId,P=this.levels;if(!P.length||!P[d]||!P[d].details)return;var D=P[d].details,x=D.targetduration,y=this.config,g=this.media,m=o.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,g.currentTime-x,y.maxBufferHole),R=m.end,M=m.len,F=this.getMaxBufferLength()+x;if(M>F)return;console.assert(D,"Subtitle track details are defined on idle subtitle stream controller tick");var w=D.fragments,U=w.length,B=D.edge,k,j=this.fragPrevious;if(R<B){var G=y.maxFragLookUpTolerance;k=Object(l.findFragmentByPTS)(j,w,Math.max(w[0].start,R),G),!k&&j&&j.start<w[0].start&&(k=w[0])}else k=w[U-1];(f=k)!==null&&f!==void 0&&f.encrypted?this.loadKey(k,D):k&&this.fragmentTracker.getState(k)===T.FragmentState.NOT_LOADED&&this.loadFragment(k,D,R)}},E.loadFragment=function(f,d,P){this.fragCurrent=f,c.prototype.loadFragment.call(this,f,d,P)},C(h,[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}]),h}(A.default)},"./src/controller/subtitle-track-controller.ts":function(n,i,r){r.r(i);var a=r("./src/events.ts"),o=r("./src/utils/texttrack-utils.ts"),l=r("./src/controller/base-playlist-controller.ts"),b=r("./src/types/loader.ts");function I(C,L){for(var S=0;S<L.length;S++){var u=L[S];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(C,u.key,u)}}function T(C,L,S){return L&&I(C.prototype,L),S&&I(C,S),Object.defineProperty(C,"prototype",{writable:!1}),C}function A(C,L){C.prototype=Object.create(L.prototype),C.prototype.constructor=C,p(C,L)}function p(C,L){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,s){return u.__proto__=s,u},p(C,L)}var _=function(C){A(L,C);function L(u){var s;return s=C.call(this,u,"[subtitle-track-controller]")||this,s.media=null,s.tracks=[],s.groupId=null,s.tracksInGroup=[],s.trackId=-1,s.selectDefaultTrack=!0,s.queuedDefaultTrack=-1,s.trackChangeListener=function(){return s.onTextTracksChanged()},s.asyncPollTrackChange=function(){return s.pollTrackChange(0)},s.useTextTrackPolling=!1,s.subtitlePollingInterval=-1,s._subtitleDisplay=!0,s.registerListeners(),s}var S=L.prototype;return S.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,C.prototype.destroy.call(this)},S.registerListeners=function(){var s=this.hls;s.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),s.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),s.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),s.on(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),s.on(a.Events.LEVEL_LOADING,this.onLevelLoading,this),s.on(a.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),s.on(a.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),s.on(a.Events.ERROR,this.onError,this)},S.unregisterListeners=function(){var s=this.hls;s.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),s.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),s.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),s.off(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),s.off(a.Events.LEVEL_LOADING,this.onLevelLoading,this),s.off(a.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),s.off(a.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),s.off(a.Events.ERROR,this.onError,this)},S.onMediaAttached=function(s,c){this.media=c.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},S.pollTrackChange=function(s){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,s)},S.onMediaDetaching=function(){if(!!this.media){self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);var s=O(this.media.textTracks);s.forEach(function(c){Object(o.clearCurrentCues)(c)}),this.subtitleTrack=-1,this.media=null}},S.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},S.onManifestParsed=function(s,c){this.tracks=c.subtitleTracks},S.onSubtitleTrackLoaded=function(s,c){var h=c.id,E=c.details,v=this.trackId,f=this.tracksInGroup[v];if(!f){this.warn("Invalid subtitle track id "+h);return}var d=f.details;f.details=c.details,this.log("subtitle track "+h+" loaded ["+E.startSN+"-"+E.endSN+"]"),h===this.trackId&&(this.retryCount=0,this.playlistLoaded(h,c,d))},S.onLevelLoading=function(s,c){this.switchLevel(c.level)},S.onLevelSwitching=function(s,c){this.switchLevel(c.level)},S.switchLevel=function(s){var c=this.hls.levels[s];if(!!(c!=null&&c.textGroupIds)){var h=c.textGroupIds[c.urlId];if(this.groupId!==h){var E=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,v=this.tracks.filter(function(P){return!h||P.groupId===h});this.tracksInGroup=v;var f=this.findTrackId(E==null?void 0:E.name)||this.findTrackId();this.groupId=h;var d={subtitleTracks:v};this.log("Updating subtitle tracks, "+v.length+' track(s) found in "'+h+'" group-id'),this.hls.trigger(a.Events.SUBTITLE_TRACKS_UPDATED,d),f!==-1&&this.setSubtitleTrack(f,E)}}},S.findTrackId=function(s){for(var c=this.tracksInGroup,h=0;h<c.length;h++){var E=c[h];if((!this.selectDefaultTrack||E.default)&&(!s||s===E.name))return E.id}return-1},S.onError=function(s,c){C.prototype.onError.call(this,s,c),!(c.fatal||!c.context)&&c.context.type===b.PlaylistContextType.SUBTITLE_TRACK&&c.context.id===this.trackId&&c.context.groupId===this.groupId&&this.retryLoadingOrFail(c)},S.loadPlaylist=function(s){var c=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(c)){var h=c.id,E=c.groupId,v=c.url;if(s)try{v=s.addDirectives(v)}catch(f){this.warn("Could not construct new URL with HLS Delivery Directives: "+f)}this.log("Loading subtitle playlist for id "+h),this.hls.trigger(a.Events.SUBTITLE_TRACK_LOADING,{url:v,id:h,groupId:E,deliveryDirectives:s||null})}},S.toggleTrackModes=function(s){var c=this,h=this.media,E=this.trackId;if(!!h){var v=O(h.textTracks),f=v.filter(function(D){return D.groupId===c.groupId});if(s===-1)[].slice.call(v).forEach(function(D){D.mode="disabled"});else{var d=f[E];d&&(d.mode="disabled")}var P=f[s];P&&(P.mode=this.subtitleDisplay?"showing":"hidden")}},S.setSubtitleTrack=function(s,c){var h,E=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=s;return}if(this.trackId!==s&&this.toggleTrackModes(s),!(this.trackId===s&&(s===-1||(h=E[s])!==null&&h!==void 0&&h.details)||s<-1||s>=E.length)){this.clearTimer();var v=E[s];if(this.log("Switching to subtitle track "+s),this.trackId=s,v){var f=v.id,d=v.groupId,P=d===void 0?"":d,D=v.name,x=v.type,y=v.url;this.hls.trigger(a.Events.SUBTITLE_TRACK_SWITCH,{id:f,groupId:P,name:D,type:x,url:y});var g=this.switchParams(v.url,c==null?void 0:c.details);this.loadPlaylist(g)}else this.hls.trigger(a.Events.SUBTITLE_TRACK_SWITCH,{id:s})}},S.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var s=-1,c=O(this.media.textTracks),h=0;h<c.length;h++)if(c[h].mode==="hidden")s=h;else if(c[h].mode==="showing"){s=h;break}this.subtitleTrack!==s&&(this.subtitleTrack=s)}},T(L,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(s){this._subtitleDisplay=s,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(s){this.selectDefaultTrack=!1;var c=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(s,c)}}]),L}(l.default);function O(C){for(var L=[],S=0;S<C.length;S++){var u=C[S];u.kind==="subtitles"&&u.label&&L.push(C[S])}return L}i.default=_},"./src/controller/timeline-controller.ts":function(n,i,r){r.r(i),r.d(i,"TimelineController",function(){return O});var a=r("./src/polyfills/number.ts"),o=r("./src/events.ts"),l=r("./src/utils/cea-608-parser.ts"),b=r("./src/utils/output-filter.ts"),I=r("./src/utils/webvtt-parser.ts"),T=r("./src/utils/texttrack-utils.ts"),A=r("./src/utils/imsc1-ttml-parser.ts"),p=r("./src/types/loader.ts"),_=r("./src/utils/logger.ts"),O=function(){function u(c){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=S(),this.captionsProperties=void 0,this.hls=c,this.config=c.config,this.Cues=c.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var h=new b.default(this,"textTrack1"),E=new b.default(this,"textTrack2"),v=new b.default(this,"textTrack3"),f=new b.default(this,"textTrack4");this.cea608Parser1=new l.default(1,h,E),this.cea608Parser2=new l.default(3,v,f)}c.on(o.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),c.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.on(o.Events.MANIFEST_LOADED,this.onManifestLoaded,this),c.on(o.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),c.on(o.Events.FRAG_LOADING,this.onFragLoading,this),c.on(o.Events.FRAG_LOADED,this.onFragLoaded,this),c.on(o.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),c.on(o.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),c.on(o.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),c.on(o.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),c.on(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var s=u.prototype;return s.destroy=function(){var h=this.hls;h.off(o.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),h.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),h.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),h.off(o.Events.MANIFEST_LOADED,this.onManifestLoaded,this),h.off(o.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),h.off(o.Events.FRAG_LOADING,this.onFragLoading,this),h.off(o.Events.FRAG_LOADED,this.onFragLoaded,this),h.off(o.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),h.off(o.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),h.off(o.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),h.off(o.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),h.off(o.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},s.addCues=function(h,E,v,f,d){for(var P=!1,D=d.length;D--;){var x=d[D],y=L(x[0],x[1],E,v);if(y>=0&&(x[0]=Math.min(x[0],E),x[1]=Math.max(x[1],v),P=!0,y/(v-E)>.5))return}if(P||d.push([E,v]),this.config.renderTextTracksNatively){var g=this.captionsTracks[h];this.Cues.newCue(g,E,v,f)}else{var m=this.Cues.newCue(null,E,v,f);this.hls.trigger(o.Events.CUES_PARSED,{type:"captions",cues:m,track:h})}},s.onInitPtsFound=function(h,E){var v=this,f=E.frag,d=E.id,P=E.initPTS,D=E.timescale,x=this.unparsedVttFrags;d==="main"&&(this.initPTS[f.cc]=P,this.timescale[f.cc]=D),x.length&&(this.unparsedVttFrags=[],x.forEach(function(y){v.onFragLoaded(o.Events.FRAG_LOADED,y)}))},s.getExistingTrack=function(h){var E=this.media;if(E)for(var v=0;v<E.textTracks.length;v++){var f=E.textTracks[v];if(f[h])return f}return null},s.createCaptionsTrack=function(h){this.config.renderTextTracksNatively?this.createNativeTrack(h):this.createNonNativeTrack(h)},s.createNativeTrack=function(h){if(!this.captionsTracks[h]){var E=this.captionsProperties,v=this.captionsTracks,f=this.media,d=E[h],P=d.label,D=d.languageCode,x=this.getExistingTrack(h);if(x)v[h]=x,Object(T.clearCurrentCues)(v[h]),Object(T.sendAddTrackEvent)(v[h],f);else{var y=this.createTextTrack("captions",P,D);y&&(y[h]=!0,v[h]=y)}}},s.createNonNativeTrack=function(h){if(!this.nonNativeCaptionsTracks[h]){var E=this.captionsProperties[h];if(!!E){var v=E.label,f={_id:h,label:v,kind:"captions",default:E.media?!!E.media.default:!1,closedCaptions:E.media};this.nonNativeCaptionsTracks[h]=f,this.hls.trigger(o.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[f]})}}},s.createTextTrack=function(h,E,v){var f=this.media;if(!!f)return f.addTextTrack(h,E,v)},s.onMediaAttaching=function(h,E){this.media=E.media,this._cleanTracks()},s.onMediaDetaching=function(){var h=this.captionsTracks;Object.keys(h).forEach(function(E){Object(T.clearCurrentCues)(h[E]),delete h[E]}),this.nonNativeCaptionsTracks={}},s.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=S(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},s._cleanTracks=function(){var h=this.media;if(!!h){var E=h.textTracks;if(E)for(var v=0;v<E.length;v++)Object(T.clearCurrentCues)(E[v])}},s.onSubtitleTracksUpdated=function(h,E){var v=this;this.textTracks=[];var f=E.subtitleTracks||[],d=f.some(function(y){return y.textCodec===A.IMSC1_CODEC});if(this.config.enableWebVTT||d&&this.config.enableIMSC1){var P=this.tracks&&f&&this.tracks.length===f.length;if(this.tracks=f||[],this.config.renderTextTracksNatively){var D=this.media?this.media.textTracks:[];this.tracks.forEach(function(y,g){var m;if(g<D.length){for(var R=null,M=0;M<D.length;M++)if(C(D[M],y)){R=D[M];break}R&&(m=R)}m?Object(T.clearCurrentCues)(m):(m=v.createTextTrack("subtitles",y.name,y.lang),m&&(m.mode="disabled")),m&&(m.groupId=y.groupId,v.textTracks.push(m))})}else if(!P&&this.tracks&&this.tracks.length){var x=this.tracks.map(function(y){return{label:y.name,kind:y.type.toLowerCase(),default:y.default,subtitleTrack:y}});this.hls.trigger(o.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:x})}}},s.onManifestLoaded=function(h,E){var v=this;this.config.enableCEA708Captions&&E.captions&&E.captions.forEach(function(f){var d=/(?:CC|SERVICE)([1-4])/.exec(f.instreamId);if(!!d){var P="textTrack"+d[1],D=v.captionsProperties[P];!D||(D.label=f.name,f.lang&&(D.languageCode=f.lang),D.media=f)}})},s.onFragLoading=function(h,E){var v=this.cea608Parser1,f=this.cea608Parser2,d=this.lastSn,P=this.lastPartIndex;if(!(!this.enabled||!(v&&f))&&E.frag.type===p.PlaylistLevelType.MAIN){var D,x,y=E.frag.sn,g=(D=E==null||(x=E.part)===null||x===void 0?void 0:x.index)!=null?D:-1;y===d+1||y===d&&g===P+1||(v.reset(),f.reset()),this.lastSn=y,this.lastPartIndex=g}},s.onFragLoaded=function(h,E){var v=E.frag,f=E.payload,d=this.initPTS,P=this.unparsedVttFrags;if(v.type===p.PlaylistLevelType.SUBTITLE)if(f.byteLength){if(!Object(a.isFiniteNumber)(d[v.cc])){P.push(E),d.length&&this.hls.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:v,error:new Error("Missing initial subtitle PTS")});return}var D=v.decryptdata,x="stats"in E;if(D==null||D.key==null||D.method!=="AES-128"||x){var y=this.tracks[v.level],g=this.vttCCs;g[v.cc]||(g[v.cc]={start:v.start,prevCC:this.prevCC,new:!0},this.prevCC=v.cc),y&&y.textCodec===A.IMSC1_CODEC?this._parseIMSC1(v,f):this._parseVTTs(v,f,g)}}else this.hls.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:v,error:new Error("Empty subtitle payload")})},s._parseIMSC1=function(h,E){var v=this,f=this.hls;Object(A.parseIMSC1)(E,this.initPTS[h.cc],this.timescale[h.cc],function(d){v._appendCues(d,h.level),f.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:h})},function(d){_.logger.log("Failed to parse IMSC1: "+d),f.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:h,error:d})})},s._parseVTTs=function(h,E,v){var f=this,d=this.hls;Object(I.parseWebVTT)(E,this.initPTS[h.cc],this.timescale[h.cc],v,h.cc,h.start,function(P){f._appendCues(P,h.level),d.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:h})},function(P){f._fallbackToIMSC1(h,E),_.logger.log("Failed to parse VTT cue: "+P),d.trigger(o.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:h,error:P})})},s._fallbackToIMSC1=function(h,E){var v=this,f=this.tracks[h.level];f.textCodec||Object(A.parseIMSC1)(E,this.initPTS[h.cc],this.timescale[h.cc],function(){f.textCodec=A.IMSC1_CODEC,v._parseIMSC1(h,E)},function(){f.textCodec="wvtt"})},s._appendCues=function(h,E){var v=this.hls;if(this.config.renderTextTracksNatively){var f=this.textTracks[E];if(!f||f.mode==="disabled")return;h.forEach(function(D){return Object(T.addCueToTrack)(f,D)})}else{var d=this.tracks[E];if(!d)return;var P=d.default?"default":"subtitles"+E;v.trigger(o.Events.CUES_PARSED,{type:"subtitles",cues:h,track:P})}},s.onFragDecrypted=function(h,E){var v=E.frag;if(v.type===p.PlaylistLevelType.SUBTITLE){if(!Object(a.isFiniteNumber)(this.initPTS[v.cc])){this.unparsedVttFrags.push(E);return}this.onFragLoaded(o.Events.FRAG_LOADED,E)}},s.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},s.onFragParsingUserdata=function(h,E){var v=this.cea608Parser1,f=this.cea608Parser2;if(!(!this.enabled||!(v&&f)))for(var d=0;d<E.samples.length;d++){var P=E.samples[d].bytes;if(P){var D=this.extractCea608Data(P);v.addData(E.samples[d].pts,D[0]),f.addData(E.samples[d].pts,D[1])}}},s.onBufferFlushing=function(h,E){var v=E.startOffset,f=E.endOffset,d=E.endOffsetSubtitles,P=E.type,D=this.media;if(!(!D||D.currentTime<f)){if(!P||P==="video"){var x=this.captionsTracks;Object.keys(x).forEach(function(g){return Object(T.removeCuesInRange)(x[g],v,f)})}if(this.config.renderTextTracksNatively&&v===0&&d!==void 0){var y=this.textTracks;Object.keys(y).forEach(function(g){return Object(T.removeCuesInRange)(y[g],v,d)})}}},s.extractCea608Data=function(h){for(var E=[[],[]],v=h[0]&31,f=2,d=0;d<v;d++){var P=h[f++],D=127&h[f++],x=127&h[f++];if(!(D===0&&x===0)){var y=(4&P)!==0;if(y){var g=3&P;(g===0||g===1)&&(E[g].push(D),E[g].push(x))}}}return E},u}();function C(u,s){return u&&u.label===s.name&&!(u.textTrack1||u.textTrack2)}function L(u,s,c,h){return Math.min(s,h)-Math.max(u,c)}function S(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}},"./src/crypt/aes-crypto.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return a});var a=function(){function o(b,I){this.subtle=void 0,this.aesIV=void 0,this.subtle=b,this.aesIV=I}var l=o.prototype;return l.decrypt=function(I,T){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},T,I)},o}()},"./src/crypt/aes-decryptor.ts":function(n,i,r){r.r(i),r.d(i,"removePadding",function(){return o}),r.d(i,"default",function(){return l});var a=r("./src/utils/typed-array.ts");function o(b){var I=b.byteLength,T=I&&new DataView(b.buffer).getUint8(I-1);return T?Object(a.sliceUint8)(b,0,I-T):b}var l=function(){function b(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var I=b.prototype;return I.uint8ArrayToUint32Array_=function(A){for(var p=new DataView(A),_=new Uint32Array(4),O=0;O<4;O++)_[O]=p.getUint32(O*4);return _},I.initTable=function(){var A=this.sBox,p=this.invSBox,_=this.subMix,O=_[0],C=_[1],L=_[2],S=_[3],u=this.invSubMix,s=u[0],c=u[1],h=u[2],E=u[3],v=new Uint32Array(256),f=0,d=0,P=0;for(P=0;P<256;P++)P<128?v[P]=P<<1:v[P]=P<<1^283;for(P=0;P<256;P++){var D=d^d<<1^d<<2^d<<3^d<<4;D=D>>>8^D&255^99,A[f]=D,p[D]=f;var x=v[f],y=v[x],g=v[y],m=v[D]*257^D*16843008;O[f]=m<<24|m>>>8,C[f]=m<<16|m>>>16,L[f]=m<<8|m>>>24,S[f]=m,m=g*16843009^y*65537^x*257^f*16843008,s[D]=m<<24|m>>>8,c[D]=m<<16|m>>>16,h[D]=m<<8|m>>>24,E[D]=m,f?(f=x^v[v[v[g^x]]],d^=v[v[d]]):f=d=1}},I.expandKey=function(A){for(var p=this.uint8ArrayToUint32Array_(A),_=!0,O=0;O<p.length&&_;)_=p[O]===this.key[O],O++;if(!_){this.key=p;var C=this.keySize=p.length;if(C!==4&&C!==6&&C!==8)throw new Error("Invalid aes key size="+C);var L=this.ksRows=(C+6+1)*4,S,u,s=this.keySchedule=new Uint32Array(L),c=this.invKeySchedule=new Uint32Array(L),h=this.sBox,E=this.rcon,v=this.invSubMix,f=v[0],d=v[1],P=v[2],D=v[3],x,y;for(S=0;S<L;S++){if(S<C){x=s[S]=p[S];continue}y=x,S%C===0?(y=y<<8|y>>>24,y=h[y>>>24]<<24|h[y>>>16&255]<<16|h[y>>>8&255]<<8|h[y&255],y^=E[S/C|0]<<24):C>6&&S%C===4&&(y=h[y>>>24]<<24|h[y>>>16&255]<<16|h[y>>>8&255]<<8|h[y&255]),s[S]=x=(s[S-C]^y)>>>0}for(u=0;u<L;u++)S=L-u,u&3?y=s[S]:y=s[S-4],u<4||S<=4?c[u]=y:c[u]=f[h[y>>>24]]^d[h[y>>>16&255]]^P[h[y>>>8&255]]^D[h[y&255]],c[u]=c[u]>>>0}},I.networkToHostOrderSwap=function(A){return A<<24|(A&65280)<<8|(A&16711680)>>8|A>>>24},I.decrypt=function(A,p,_){for(var O=this.keySize+6,C=this.invKeySchedule,L=this.invSBox,S=this.invSubMix,u=S[0],s=S[1],c=S[2],h=S[3],E=this.uint8ArrayToUint32Array_(_),v=E[0],f=E[1],d=E[2],P=E[3],D=new Int32Array(A),x=new Int32Array(D.length),y,g,m,R,M,F,w,U,B,k,j,G,N,H,$=this.networkToHostOrderSwap;p<D.length;){for(B=$(D[p]),k=$(D[p+1]),j=$(D[p+2]),G=$(D[p+3]),M=B^C[0],F=G^C[1],w=j^C[2],U=k^C[3],N=4,H=1;H<O;H++)y=u[M>>>24]^s[F>>16&255]^c[w>>8&255]^h[U&255]^C[N],g=u[F>>>24]^s[w>>16&255]^c[U>>8&255]^h[M&255]^C[N+1],m=u[w>>>24]^s[U>>16&255]^c[M>>8&255]^h[F&255]^C[N+2],R=u[U>>>24]^s[M>>16&255]^c[F>>8&255]^h[w&255]^C[N+3],M=y,F=g,w=m,U=R,N=N+4;y=L[M>>>24]<<24^L[F>>16&255]<<16^L[w>>8&255]<<8^L[U&255]^C[N],g=L[F>>>24]<<24^L[w>>16&255]<<16^L[U>>8&255]<<8^L[M&255]^C[N+1],m=L[w>>>24]<<24^L[U>>16&255]<<16^L[M>>8&255]<<8^L[F&255]^C[N+2],R=L[U>>>24]<<24^L[M>>16&255]<<16^L[F>>8&255]<<8^L[w&255]^C[N+3],x[p]=$(y^v),x[p+1]=$(R^f),x[p+2]=$(m^d),x[p+3]=$(g^P),v=B,f=k,d=j,P=G,p=p+4}return x.buffer},b}()},"./src/crypt/decrypter.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return p});var a=r("./src/crypt/aes-crypto.ts"),o=r("./src/crypt/fast-aes-key.ts"),l=r("./src/crypt/aes-decryptor.ts"),b=r("./src/utils/logger.ts"),I=r("./src/utils/mp4-tools.ts"),T=r("./src/utils/typed-array.ts"),A=16,p=function(){function _(C,L,S){var u=S===void 0?{}:S,s=u.removePKCS7Padding,c=s===void 0?!0:s;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=C,this.config=L,this.removePKCS7Padding=c,c)try{var h=self.crypto;h&&(this.subtle=h.subtle||h.webkitSubtle)}catch{}this.subtle===null&&(this.config.enableSoftwareAES=!0)}var O=_.prototype;return O.destroy=function(){this.observer=null},O.isSync=function(){return this.config.enableSoftwareAES},O.flush=function(){var L=this.currentResult;if(!L){this.reset();return}var S=new Uint8Array(L);return this.reset(),this.removePKCS7Padding?Object(l.removePadding)(S):S},O.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},O.decrypt=function(L,S,u,s){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(L),S,u);var c=this.flush();c&&s(c.buffer)}else this.webCryptoDecrypt(new Uint8Array(L),S,u).then(s)},O.softwareDecrypt=function(L,S,u){var s=this.currentIV,c=this.currentResult,h=this.remainderData;this.logOnce("JS AES decrypt"),h&&(L=Object(I.appendUint8Array)(h,L),this.remainderData=null);var E=this.getValidChunk(L);if(!E.length)return null;s&&(u=s);var v=this.softwareDecrypter;v||(v=this.softwareDecrypter=new l.default),v.expandKey(S);var f=c;return this.currentResult=v.decrypt(E.buffer,0,u),this.currentIV=Object(T.sliceUint8)(E,-16).buffer,f||null},O.webCryptoDecrypt=function(L,S,u){var s=this,c=this.subtle;return(this.key!==S||!this.fastAesKey)&&(this.key=S,this.fastAesKey=new o.default(c,S)),this.fastAesKey.expandKey().then(function(h){if(!c)return Promise.reject(new Error("web crypto not initialized"));var E=new a.default(c,u);return E.decrypt(L.buffer,h)}).catch(function(h){return s.onWebCryptoError(h,L,S,u)})},O.onWebCryptoError=function(L,S,u,s){return b.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",L),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(S,u,s)},O.getValidChunk=function(L){var S=L,u=L.length-L.length%A;return u!==L.length&&(S=Object(T.sliceUint8)(L,0,u),this.remainderData=Object(T.sliceUint8)(L,u)),S},O.logOnce=function(L){!this.logEnabled||(b.logger.log("[decrypter.ts]: "+L),this.logEnabled=!1)},_}()},"./src/crypt/fast-aes-key.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return a});var a=function(){function o(b,I){this.subtle=void 0,this.key=void 0,this.subtle=b,this.key=I}var l=o.prototype;return l.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},o}()},"./src/demux/aacdemuxer.ts":function(n,i,r){r.r(i);var a=r("./src/demux/base-audio-demuxer.ts"),o=r("./src/demux/adts.ts"),l=r("./src/utils/logger.ts"),b=r("./src/demux/id3.ts");function I(p,_){p.prototype=Object.create(_.prototype),p.prototype.constructor=p,T(p,_)}function T(p,_){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,L){return C.__proto__=L,C},T(p,_)}var A=function(p){I(_,p);function _(C,L){var S;return S=p.call(this)||this,S.observer=void 0,S.config=void 0,S.observer=C,S.config=L,S}var O=_.prototype;return O.resetInitSegment=function(L,S,u,s){p.prototype.resetInitSegment.call(this,L,S,u,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:S,duration:s,inputTimeScale:9e4,dropped:0}},_.probe=function(L){if(!L)return!1;for(var S=b.getID3Data(L,0)||[],u=S.length,s=L.length;u<s;u++)if(o.probe(L,u))return l.logger.log("ADTS sync word found !"),!0;return!1},O.canParse=function(L,S){return o.canParse(L,S)},O.appendFrame=function(L,S,u){o.initTrackConfig(L,this.observer,S,u,L.manifestCodec);var s=o.appendFrame(L,S,u,this.initPTS,this.frameIndex);if(s&&s.missing===0)return s},_}(a.default);A.minProbeByteLength=9,i.default=A},"./src/demux/adts.ts":function(n,i,r){r.r(i),r.d(i,"getAudioConfig",function(){return b}),r.d(i,"isHeaderPattern",function(){return I}),r.d(i,"getHeaderLength",function(){return T}),r.d(i,"getFullFrameLength",function(){return A}),r.d(i,"canGetFrameLength",function(){return p}),r.d(i,"isHeader",function(){return _}),r.d(i,"canParse",function(){return O}),r.d(i,"probe",function(){return C}),r.d(i,"initTrackConfig",function(){return L}),r.d(i,"getFrameDuration",function(){return S}),r.d(i,"parseFrameHeader",function(){return u}),r.d(i,"appendFrame",function(){return s});var a=r("./src/utils/logger.ts"),o=r("./src/errors.ts"),l=r("./src/events.ts");function b(c,h,E,v){var f,d,P,D,x=navigator.userAgent.toLowerCase(),y=v,g=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];f=((h[E+2]&192)>>>6)+1;var m=(h[E+2]&60)>>>2;if(m>g.length-1){c.trigger(l.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+m});return}return P=(h[E+2]&1)<<2,P|=(h[E+3]&192)>>>6,a.logger.log("manifest codec:"+v+", ADTS type:"+f+", samplingIndex:"+m),/firefox/i.test(x)?m>=6?(f=5,D=new Array(4),d=m-3):(f=2,D=new Array(2),d=m):x.indexOf("android")!==-1?(f=2,D=new Array(2),d=m):(f=5,D=new Array(4),v&&(v.indexOf("mp4a.40.29")!==-1||v.indexOf("mp4a.40.5")!==-1)||!v&&m>=6?d=m-3:((v&&v.indexOf("mp4a.40.2")!==-1&&(m>=6&&P===1||/vivaldi/i.test(x))||!v&&P===1)&&(f=2,D=new Array(2)),d=m)),D[0]=f<<3,D[0]|=(m&14)>>1,D[1]|=(m&1)<<7,D[1]|=P<<3,f===5&&(D[1]|=(d&14)>>1,D[2]=(d&1)<<7,D[2]|=2<<2,D[3]=0),{config:D,samplerate:g[m],channelCount:P,codec:"mp4a.40."+f,manifestCodec:y}}function I(c,h){return c[h]===255&&(c[h+1]&246)===240}function T(c,h){return c[h+1]&1?7:9}function A(c,h){return(c[h+3]&3)<<11|c[h+4]<<3|(c[h+5]&224)>>>5}function p(c,h){return h+5<c.length}function _(c,h){return h+1<c.length&&I(c,h)}function O(c,h){return p(c,h)&&I(c,h)&&A(c,h)<=c.length-h}function C(c,h){if(_(c,h)){var E=T(c,h);if(h+E>=c.length)return!1;var v=A(c,h);if(v<=E)return!1;var f=h+v;return f===c.length||_(c,f)}return!1}function L(c,h,E,v,f){if(!c.samplerate){var d=b(h,E,v,f);if(!d)return;c.config=d.config,c.samplerate=d.samplerate,c.channelCount=d.channelCount,c.codec=d.codec,c.manifestCodec=d.manifestCodec,a.logger.log("parsed codec:"+c.codec+", rate:"+d.samplerate+", channels:"+d.channelCount)}}function S(c){return 1024*9e4/c}function u(c,h){var E=T(c,h);if(h+E<=c.length){var v=A(c,h)-E;if(v>0)return{headerLength:E,frameLength:v}}}function s(c,h,E,v,f){var d=S(c.samplerate),P=v+f*d,D=u(h,E),x;if(D){var y=D.frameLength,g=D.headerLength,m=g+y,R=Math.max(0,E+m-h.length);R?(x=new Uint8Array(m-g),x.set(h.subarray(E+g,h.length),0)):x=h.subarray(E+g,E+m);var M={unit:x,pts:P};return R||c.samples.push(M),{sample:M,length:m,missing:R}}var F=h.length-E;x=new Uint8Array(F),x.set(h.subarray(E,h.length),0);var w={unit:x,pts:P};return{sample:w,length:F,missing:-1}}},"./src/demux/base-audio-demuxer.ts":function(n,i,r){r.r(i),r.d(i,"initPTSFn",function(){return p});var a=r("./src/polyfills/number.ts"),o=r("./src/demux/id3.ts"),l=r("./src/types/demuxer.ts"),b=r("./src/demux/dummy-demuxed-track.ts"),I=r("./src/utils/mp4-tools.ts"),T=r("./src/utils/typed-array.ts"),A=function(){function _(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var O=_.prototype;return O.resetInitSegment=function(L,S,u,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},O.resetTimeStamp=function(){},O.resetContiguity=function(){},O.canParse=function(L,S){return!1},O.appendFrame=function(L,S,u){},O.demux=function(L,S){this.cachedData&&(L=Object(I.appendUint8Array)(this.cachedData,L),this.cachedData=null);var u=o.getID3Data(L,0),s=u?u.length:0,c,h,E=this._audioTrack,v=this._id3Track,f=u?o.getTimeStamp(u):void 0,d=L.length;for((this.frameIndex===0||this.initPTS===null)&&(this.initPTS=p(f,S)),u&&u.length>0&&v.samples.push({pts:this.initPTS,dts:this.initPTS,data:u,type:l.MetadataSchema.audioId3}),h=this.initPTS;s<d;){if(this.canParse(L,s)){var P=this.appendFrame(E,L,s);P?(this.frameIndex++,h=P.sample.pts,s+=P.length,c=s):s=d}else o.canParse(L,s)?(u=o.getID3Data(L,s),v.samples.push({pts:h,dts:h,data:u,type:l.MetadataSchema.audioId3}),s+=u.length,c=s):s++;if(s===d&&c!==d){var D=Object(T.sliceUint8)(L,c);this.cachedData?this.cachedData=Object(I.appendUint8Array)(this.cachedData,D):this.cachedData=D}}return{audioTrack:E,videoTrack:Object(b.dummyTrack)(),id3Track:v,textTrack:Object(b.dummyTrack)()}},O.demuxSampleAes=function(L,S,u){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},O.flush=function(L){var S=this.cachedData;return S&&(this.cachedData=null,this.demux(S,0)),this.frameIndex=0,{audioTrack:this._audioTrack,videoTrack:Object(b.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(b.dummyTrack)()}},O.destroy=function(){},_}(),p=function(O,C){return Object(a.isFiniteNumber)(O)?O*90:C*9e4};i.default=A},"./src/demux/chunk-cache.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return a});var a=function(){function l(){this.chunks=[],this.dataLength=0}var b=l.prototype;return b.push=function(T){this.chunks.push(T),this.dataLength+=T.length},b.flush=function(){var T=this.chunks,A=this.dataLength,p;if(T.length)T.length===1?p=T[0]:p=o(T,A);else return new Uint8Array(0);return this.reset(),p},b.reset=function(){this.chunks.length=0,this.dataLength=0},l}();function o(l,b){for(var I=new Uint8Array(b),T=0,A=0;A<l.length;A++){var p=l[A];I.set(p,T),T+=p.length}return I}},"./src/demux/dummy-demuxed-track.ts":function(n,i,r){r.r(i),r.d(i,"dummyTrack",function(){return a});function a(o,l){return o===void 0&&(o=""),l===void 0&&(l=9e4),{type:o,id:-1,pid:-1,inputTimeScale:l,sequenceNumber:-1,samples:[],dropped:0}}},"./src/demux/exp-golomb.ts":function(n,i,r){r.r(i);var a=r("./src/utils/logger.ts"),o=function(){function l(I){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=I,this.bytesAvailable=I.byteLength,this.word=0,this.bitsAvailable=0}var b=l.prototype;return b.loadWord=function(){var T=this.data,A=this.bytesAvailable,p=T.byteLength-A,_=new Uint8Array(4),O=Math.min(4,A);if(O===0)throw new Error("no bytes available");_.set(T.subarray(p,p+O)),this.word=new DataView(_.buffer).getUint32(0),this.bitsAvailable=O*8,this.bytesAvailable-=O},b.skipBits=function(T){var A;this.bitsAvailable>T?(this.word<<=T,this.bitsAvailable-=T):(T-=this.bitsAvailable,A=T>>3,T-=A>>3,this.bytesAvailable-=A,this.loadWord(),this.word<<=T,this.bitsAvailable-=T)},b.readBits=function(T){var A=Math.min(this.bitsAvailable,T),p=this.word>>>32-A;return T>32&&a.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=A,this.bitsAvailable>0?this.word<<=A:this.bytesAvailable>0&&this.loadWord(),A=T-A,A>0&&this.bitsAvailable?p<<A|this.readBits(A):p},b.skipLZ=function(){var T;for(T=0;T<this.bitsAvailable;++T)if((this.word&2147483648>>>T)!==0)return this.word<<=T,this.bitsAvailable-=T,T;return this.loadWord(),T+this.skipLZ()},b.skipUEG=function(){this.skipBits(1+this.skipLZ())},b.skipEG=function(){this.skipBits(1+this.skipLZ())},b.readUEG=function(){var T=this.skipLZ();return this.readBits(T+1)-1},b.readEG=function(){var T=this.readUEG();return 1&T?1+T>>>1:-1*(T>>>1)},b.readBoolean=function(){return this.readBits(1)===1},b.readUByte=function(){return this.readBits(8)},b.readUShort=function(){return this.readBits(16)},b.readUInt=function(){return this.readBits(32)},b.skipScalingList=function(T){for(var A=8,p=8,_,O=0;O<T;O++)p!==0&&(_=this.readEG(),p=(A+_+256)%256),A=p===0?A:p},b.readSPS=function(){var T=0,A=0,p=0,_=0,O,C,L,S=this.readUByte.bind(this),u=this.readBits.bind(this),s=this.readUEG.bind(this),c=this.readBoolean.bind(this),h=this.skipBits.bind(this),E=this.skipEG.bind(this),v=this.skipUEG.bind(this),f=this.skipScalingList.bind(this);S();var d=S();if(u(5),h(3),S(),v(),d===100||d===110||d===122||d===244||d===44||d===83||d===86||d===118||d===128){var P=s();if(P===3&&h(1),v(),v(),h(1),c())for(C=P!==3?8:12,L=0;L<C;L++)c()&&(L<6?f(16):f(64))}v();var D=s();if(D===0)s();else if(D===1)for(h(1),E(),E(),O=s(),L=0;L<O;L++)E();v(),h(1);var x=s(),y=s(),g=u(1);g===0&&h(1),h(1),c()&&(T=s(),A=s(),p=s(),_=s());var m=[1,1];if(c()&&c()){var R=S();switch(R){case 1:m=[1,1];break;case 2:m=[12,11];break;case 3:m=[10,11];break;case 4:m=[16,11];break;case 5:m=[40,33];break;case 6:m=[24,11];break;case 7:m=[20,11];break;case 8:m=[32,11];break;case 9:m=[80,33];break;case 10:m=[18,11];break;case 11:m=[15,11];break;case 12:m=[64,33];break;case 13:m=[160,99];break;case 14:m=[4,3];break;case 15:m=[3,2];break;case 16:m=[2,1];break;case 255:{m=[S()<<8|S(),S()<<8|S()];break}}}return{width:Math.ceil((x+1)*16-T*2-A*2),height:(2-g)*(y+1)*16-(g?2:4)*(p+_),pixelRatio:m}},b.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},l}();i.default=o},"./src/demux/id3.ts":function(n,i,r){r.r(i),r.d(i,"isHeader",function(){return a}),r.d(i,"isFooter",function(){return o}),r.d(i,"getID3Data",function(){return l}),r.d(i,"canParse",function(){return I}),r.d(i,"getTimeStamp",function(){return T}),r.d(i,"isTimeStampFrame",function(){return A}),r.d(i,"getID3Frames",function(){return _}),r.d(i,"decodeFrame",function(){return O}),r.d(i,"utf8ArrayToStr",function(){return s}),r.d(i,"testables",function(){return c});var a=function(f,d){return d+10<=f.length&&f[d]===73&&f[d+1]===68&&f[d+2]===51&&f[d+3]<255&&f[d+4]<255&&f[d+6]<128&&f[d+7]<128&&f[d+8]<128&&f[d+9]<128},o=function(f,d){return d+10<=f.length&&f[d]===51&&f[d+1]===68&&f[d+2]===73&&f[d+3]<255&&f[d+4]<255&&f[d+6]<128&&f[d+7]<128&&f[d+8]<128&&f[d+9]<128},l=function(f,d){for(var P=d,D=0;a(f,d);){D+=10;var x=b(f,d+6);D+=x,o(f,d+10)&&(D+=10),d+=D}if(D>0)return f.subarray(P,P+D)},b=function(f,d){var P=0;return P=(f[d]&127)<<21,P|=(f[d+1]&127)<<14,P|=(f[d+2]&127)<<7,P|=f[d+3]&127,P},I=function(f,d){return a(f,d)&&b(f,d+6)+10<=f.length-d},T=function(f){for(var d=_(f),P=0;P<d.length;P++){var D=d[P];if(A(D))return u(D)}},A=function(f){return f&&f.key==="PRIV"&&f.info==="com.apple.streaming.transportStreamTimestamp"},p=function(f){var d=String.fromCharCode(f[0],f[1],f[2],f[3]),P=b(f,4),D=10;return{type:d,size:P,data:f.subarray(D,D+P)}},_=function(f){for(var d=0,P=[];a(f,d);){var D=b(f,d+6);d+=10;for(var x=d+D;d+8<x;){var y=p(f.subarray(d)),g=O(y);g&&P.push(g),d+=y.size+10}o(f,d)&&(d+=10)}return P},O=function(f){return f.type==="PRIV"?C(f):f.type[0]==="W"?S(f):L(f)},C=function(f){if(!(f.size<2)){var d=s(f.data,!0),P=new Uint8Array(f.data.subarray(d.length+1));return{key:f.type,info:d,data:P.buffer}}},L=function(f){if(!(f.size<2)){if(f.type==="TXXX"){var d=1,P=s(f.data.subarray(d),!0);d+=P.length+1;var D=s(f.data.subarray(d));return{key:f.type,info:P,data:D}}var x=s(f.data.subarray(1));return{key:f.type,data:x}}},S=function(f){if(f.type==="WXXX"){if(f.size<2)return;var d=1,P=s(f.data.subarray(d),!0);d+=P.length+1;var D=s(f.data.subarray(d));return{key:f.type,info:P,data:D}}var x=s(f.data);return{key:f.type,data:x}},u=function(f){if(f.data.byteLength===8){var d=new Uint8Array(f.data),P=d[3]&1,D=(d[4]<<23)+(d[5]<<15)+(d[6]<<7)+d[7];return D/=45,P&&(D+=4772185884e-2),Math.round(D)}},s=function(f,d){d===void 0&&(d=!1);var P=E();if(P){var D=P.decode(f);if(d){var x=D.indexOf("\0");return x!==-1?D.substring(0,x):D}return D.replace(/\0/g,"")}for(var y=f.length,g,m,R,M="",F=0;F<y;){if(g=f[F++],g===0&&d)return M;if(g===0||g===3)continue;switch(g>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:M+=String.fromCharCode(g);break;case 12:case 13:m=f[F++],M+=String.fromCharCode((g&31)<<6|m&63);break;case 14:m=f[F++],R=f[F++],M+=String.fromCharCode((g&15)<<12|(m&63)<<6|(R&63)<<0);break}}return M},c={decodeTextFrame:L},h;function E(){return!h&&typeof self.TextDecoder!="undefined"&&(h=new self.TextDecoder("utf-8")),h}},"./src/demux/mp3demuxer.ts":function(n,i,r){r.r(i);var a=r("./src/demux/base-audio-demuxer.ts"),o=r("./src/demux/id3.ts"),l=r("./src/utils/logger.ts"),b=r("./src/demux/mpegaudio.ts");function I(p,_){p.prototype=Object.create(_.prototype),p.prototype.constructor=p,T(p,_)}function T(p,_){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,L){return C.__proto__=L,C},T(p,_)}var A=function(p){I(_,p);function _(){return p.apply(this,arguments)||this}var O=_.prototype;return O.resetInitSegment=function(L,S,u,s){p.prototype.resetInitSegment.call(this,L,S,u,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:S,duration:s,inputTimeScale:9e4,dropped:0}},_.probe=function(L){if(!L)return!1;for(var S=o.getID3Data(L,0)||[],u=S.length,s=L.length;u<s;u++)if(b.probe(L,u))return l.logger.log("MPEG Audio sync word found !"),!0;return!1},O.canParse=function(L,S){return b.canParse(L,S)},O.appendFrame=function(L,S,u){if(this.initPTS!==null)return b.appendFrame(L,S,u,this.initPTS,this.frameIndex)},_}(a.default);A.minProbeByteLength=4,i.default=A},"./src/demux/mp4demuxer.ts":function(n,i,r){r.r(i);var a=r("./src/polyfills/number.ts"),o=r("./src/types/demuxer.ts"),l=r("./src/utils/mp4-tools.ts"),b=r("./src/demux/dummy-demuxed-track.ts"),I=/\/emsg[-/]ID3/i,T=function(){function A(_,O){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=O}var p=A.prototype;return p.resetTimeStamp=function(){},p.resetInitSegment=function(O,C,L,S){var u=Object(l.parseInitSegment)(O),s=this.videoTrack=Object(b.dummyTrack)("video",1),c=this.audioTrack=Object(b.dummyTrack)("audio",1),h=this.txtTrack=Object(b.dummyTrack)("text",1);if(this.id3Track=Object(b.dummyTrack)("id3",1),this.timeOffset=0,u.video){var E=u.video,v=E.id,f=E.timescale,d=E.codec;s.id=v,s.timescale=h.timescale=f,s.codec=d}if(u.audio){var P=u.audio,D=P.id,x=P.timescale,y=P.codec;c.id=D,c.timescale=x,c.codec=y}h.id=l.RemuxerTrackIdConfig.text,s.sampleDuration=0,s.duration=c.duration=S},p.resetContiguity=function(){},A.probe=function(O){return O=O.length>16384?O.subarray(0,16384):O,Object(l.findBox)(O,["moof"]).length>0},p.demux=function(O,C){this.timeOffset=C;var L=O,S=this.videoTrack,u=this.txtTrack;if(this.config.progressive){this.remainderData&&(L=Object(l.appendUint8Array)(this.remainderData,O));var s=Object(l.segmentValidRange)(L);this.remainderData=s.remainder,S.samples=s.valid||new Uint8Array}else S.samples=L;var c=this.extractID3Track(S,C);return u.samples=Object(l.parseSamples)(C,S),{videoTrack:S,audioTrack:this.audioTrack,id3Track:c,textTrack:this.txtTrack}},p.flush=function(){var O=this.timeOffset,C=this.videoTrack,L=this.txtTrack;C.samples=this.remainderData||new Uint8Array,this.remainderData=null;var S=this.extractID3Track(C,this.timeOffset);return L.samples=Object(l.parseSamples)(O,C),{videoTrack:C,audioTrack:Object(b.dummyTrack)(),id3Track:S,textTrack:Object(b.dummyTrack)()}},p.extractID3Track=function(O,C){var L=this.id3Track;if(O.samples.length){var S=Object(l.findBox)(O.samples,["emsg"]);S&&S.forEach(function(u){var s=Object(l.parseEmsg)(u);if(I.test(s.schemeIdUri)){var c=Object(a.isFiniteNumber)(s.presentationTime)?s.presentationTime/s.timeScale:C+s.presentationTimeDelta/s.timeScale,h=s.payload;L.samples.push({data:h,len:h.byteLength,dts:c,pts:c,type:o.MetadataSchema.emsg})}})}return L},p.demuxSampleAes=function(O,C,L){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},p.destroy=function(){},A}();T.minProbeByteLength=1024,i.default=T},"./src/demux/mpegaudio.ts":function(n,i,r){r.r(i),r.d(i,"appendFrame",function(){return T}),r.d(i,"parseHeader",function(){return A}),r.d(i,"isHeaderPattern",function(){return p}),r.d(i,"isHeader",function(){return _}),r.d(i,"canParse",function(){return O}),r.d(i,"probe",function(){return C});var a=null,o=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],l=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],b=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],I=[0,1,1,4];function T(L,S,u,s,c){if(!(u+24>S.length)){var h=A(S,u);if(h&&u+h.frameLength<=S.length){var E=h.samplesPerFrame*9e4/h.sampleRate,v=s+c*E,f={unit:S.subarray(u,u+h.frameLength),pts:v,dts:v};return L.config=[],L.channelCount=h.channelCount,L.samplerate=h.sampleRate,L.samples.push(f),{sample:f,length:h.frameLength,missing:0}}}}function A(L,S){var u=L[S+1]>>3&3,s=L[S+1]>>1&3,c=L[S+2]>>4&15,h=L[S+2]>>2&3;if(u!==1&&c!==0&&c!==15&&h!==3){var E=L[S+2]>>1&1,v=L[S+3]>>6,f=u===3?3-s:s===3?3:4,d=o[f*14+c-1]*1e3,P=u===3?0:u===2?1:2,D=l[P*3+h],x=v===3?1:2,y=b[u][s],g=I[s],m=y*8*g,R=Math.floor(y*d/D+E)*g;if(a===null){var M=navigator.userAgent||"",F=M.match(/Chrome\/(\d+)/i);a=F?parseInt(F[1]):0}var w=!!a&&a<=87;return w&&s===2&&d>=224e3&&v===0&&(L[S+3]=L[S+3]|128),{sampleRate:D,channelCount:x,frameLength:R,samplesPerFrame:m}}}function p(L,S){return L[S]===255&&(L[S+1]&224)===224&&(L[S+1]&6)!==0}function _(L,S){return S+1<L.length&&p(L,S)}function O(L,S){var u=4;return p(L,S)&&u<=L.length-S}function C(L,S){if(S+1<L.length&&p(L,S)){var u=4,s=A(L,S),c=u;s!=null&&s.frameLength&&(c=s.frameLength);var h=S+c;return h===L.length||_(L,h)}return!1}},"./src/demux/sample-aes.ts":function(n,i,r){r.r(i);var a=r("./src/crypt/decrypter.ts"),o=r("./src/demux/tsdemuxer.ts"),l=function(){function b(T,A,p){this.keyData=void 0,this.decrypter=void 0,this.keyData=p,this.decrypter=new a.default(T,A,{removePKCS7Padding:!1})}var I=b.prototype;return I.decryptBuffer=function(A,p){this.decrypter.decrypt(A,this.keyData.key.buffer,this.keyData.iv.buffer,p)},I.decryptAacSample=function(A,p,_,O){var C=A[p].unit;if(!(C.length<=16)){var L=C.subarray(16,C.length-C.length%16),S=L.buffer.slice(L.byteOffset,L.byteOffset+L.length),u=this;this.decryptBuffer(S,function(s){var c=new Uint8Array(s);C.set(c,16),O||u.decryptAacSamples(A,p+1,_)})}},I.decryptAacSamples=function(A,p,_){for(;;p++){if(p>=A.length){_();return}if(!(A[p].unit.length<32)){var O=this.decrypter.isSync();if(this.decryptAacSample(A,p,_,O),!O)return}}},I.getAvcEncryptedData=function(A){for(var p=Math.floor((A.length-48)/160)*16+16,_=new Int8Array(p),O=0,C=32;C<A.length-16;C+=160,O+=16)_.set(A.subarray(C,C+16),O);return _},I.getAvcDecryptedUnit=function(A,p){for(var _=new Uint8Array(p),O=0,C=32;C<A.length-16;C+=160,O+=16)A.set(_.subarray(O,O+16),C);return A},I.decryptAvcSample=function(A,p,_,O,C,L){var S=Object(o.discardEPB)(C.data),u=this.getAvcEncryptedData(S),s=this;this.decryptBuffer(u.buffer,function(c){C.data=s.getAvcDecryptedUnit(S,c),L||s.decryptAvcSamples(A,p,_+1,O)})},I.decryptAvcSamples=function(A,p,_,O){if(A instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;p++,_=0){if(p>=A.length){O();return}for(var C=A[p].units;!(_>=C.length);_++){var L=C[_];if(!(L.data.length<=48||L.type!==1&&L.type!==5)){var S=this.decrypter.isSync();if(this.decryptAvcSample(A,p,_,O,L,S),!S)return}}}},b}();i.default=l},"./src/demux/transmuxer-interface.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return _});var a=r("./node_modules/webworkify-webpack/index.js"),o=r("./src/events.ts"),l=r("./src/demux/transmuxer.ts"),b=r("./src/utils/logger.ts"),I=r("./src/errors.ts"),T=r("./src/utils/mediasource-helper.ts"),A=r("./node_modules/eventemitter3/index.js"),p=Object(T.getMediaSource)()||{isTypeSupported:function(){return!1}},_=function(){function O(L,S,u,s){var c=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=L,this.id=S,this.onTransmuxComplete=u,this.onFlush=s;var h=L.config,E=function(D,x){x=x||{},x.frag=c.frag,x.id=c.id,L.trigger(D,x)};this.observer=new A.EventEmitter,this.observer.on(o.Events.FRAG_DECRYPTED,E),this.observer.on(o.Events.ERROR,E);var v={mp4:p.isTypeSupported("video/mp4"),mpeg:p.isTypeSupported("audio/mpeg"),mp3:p.isTypeSupported('audio/mp4; codecs="mp3"')},f=navigator.vendor;if(h.enableWorker&&typeof Worker!="undefined"){b.logger.log("demuxing in webworker");var d;try{d=this.worker=a("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(P){L.trigger(o.Events.ERROR,{type:I.ErrorTypes.OTHER_ERROR,details:I.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(P.message+"  ("+P.filename+":"+P.lineno+")")})},d.postMessage({cmd:"init",typeSupported:v,vendor:f,id:S,config:JSON.stringify(h)})}catch(P){b.logger.warn("Error in worker:",P),b.logger.error("Error while initializing DemuxerWorker, fallback to inline"),d&&self.URL.revokeObjectURL(d.objectURL),this.transmuxer=new l.default(this.observer,v,h,f,S),this.worker=null}}else this.transmuxer=new l.default(this.observer,v,h,f,S)}var C=O.prototype;return C.destroy=function(){var S=this.worker;if(S)S.removeEventListener("message",this.onwmsg),S.terminate(),this.worker=null,this.onwmsg=void 0;else{var u=this.transmuxer;u&&(u.destroy(),this.transmuxer=null)}var s=this.observer;s&&s.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},C.push=function(S,u,s,c,h,E,v,f,d,P){var D,x,y=this;d.transmuxing.start=self.performance.now();var g=this.transmuxer,m=this.worker,R=E?E.start:h.start,M=h.decryptdata,F=this.frag,w=!(F&&h.cc===F.cc),U=!(F&&d.level===F.level),B=F?d.sn-F.sn:-1,k=this.part?d.part-this.part.index:-1,j=!U&&(B===1||B===0&&k===1),G=self.performance.now();(U||B||h.stats.parsing.start===0)&&(h.stats.parsing.start=G),E&&(k||!j)&&(E.stats.parsing.start=G);var N=!(F&&((D=h.initSegment)===null||D===void 0?void 0:D.url)===((x=F.initSegment)===null||x===void 0?void 0:x.url)),H=new l.TransmuxState(w,j,f,U,R,N);if(!j||w||N){b.logger.log("[transmuxer-interface, "+h.type+"]: Starting new transmux session for sn: "+d.sn+" p: "+d.part+" level: "+d.level+" id: "+d.id+`
        discontinuity: `+w+`
        trackSwitch: `+U+`
        contiguous: `+j+`
        accurateTimeOffset: `+f+`
        timeOffset: `+R+`
        initSegmentChange: `+N);var $=new l.TransmuxConfig(s,c,u,v,P);this.configureTransmuxer($)}if(this.frag=h,this.part=E,m)m.postMessage({cmd:"demux",data:S,decryptdata:M,chunkMeta:d,state:H},S instanceof ArrayBuffer?[S]:[]);else if(g){var z=g.push(S,M,d,H);Object(l.isPromise)(z)?z.then(function(ee){y.handleTransmuxComplete(ee)}):this.handleTransmuxComplete(z)}},C.flush=function(S){var u=this;S.transmuxing.start=self.performance.now();var s=this.transmuxer,c=this.worker;if(c)c.postMessage({cmd:"flush",chunkMeta:S});else if(s){var h=s.flush(S);Object(l.isPromise)(h)?h.then(function(E){u.handleFlushResult(E,S)}):this.handleFlushResult(h,S)}},C.handleFlushResult=function(S,u){var s=this;S.forEach(function(c){s.handleTransmuxComplete(c)}),this.onFlush(u)},C.onWorkerMessage=function(S){var u=S.data,s=this.hls;switch(u.event){case"init":{self.URL.revokeObjectURL(this.worker.objectURL);break}case"transmuxComplete":{this.handleTransmuxComplete(u.data);break}case"flush":{this.onFlush(u.data);break}default:{u.data=u.data||{},u.data.frag=this.frag,u.data.id=this.id,s.trigger(u.event,u.data);break}}},C.configureTransmuxer=function(S){var u=this.worker,s=this.transmuxer;u?u.postMessage({cmd:"configure",config:S}):s&&s.configure(S)},C.handleTransmuxComplete=function(S){S.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(S)},O}()},"./src/demux/transmuxer-worker.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return I});var a=r("./src/demux/transmuxer.ts"),o=r("./src/events.ts"),l=r("./src/utils/logger.ts"),b=r("./node_modules/eventemitter3/index.js");function I(O){var C=new b.EventEmitter,L=function(u,s){O.postMessage({event:u,data:s})};C.on(o.Events.FRAG_DECRYPTED,L),C.on(o.Events.ERROR,L),O.addEventListener("message",function(S){var u=S.data;switch(u.cmd){case"init":{var s=JSON.parse(u.config);O.transmuxer=new a.default(C,u.typeSupported,s,u.vendor,u.id),Object(l.enableLogs)(s.debug),L("init",null);break}case"configure":{O.transmuxer.configure(u.config);break}case"demux":{var c=O.transmuxer.push(u.data,u.decryptdata,u.chunkMeta,u.state);Object(a.isPromise)(c)?c.then(function(v){T(O,v)}):T(O,c);break}case"flush":{var h=u.chunkMeta,E=O.transmuxer.flush(h);Object(a.isPromise)(E)?E.then(function(v){p(O,v,h)}):p(O,E,h);break}}})}function T(O,C){if(_(C.remuxResult))return!1;var L=[],S=C.remuxResult,u=S.audio,s=S.video;return u&&A(L,u),s&&A(L,s),O.postMessage({event:"transmuxComplete",data:C},L),!0}function A(O,C){C.data1&&O.push(C.data1.buffer),C.data2&&O.push(C.data2.buffer)}function p(O,C,L){var S=C.reduce(function(u,s){return T(O,s)||u},!1);S||O.postMessage({event:"transmuxComplete",data:C[0]}),O.postMessage({event:"flush",data:L})}function _(O){return!O.audio&&!O.video&&!O.text&&!O.id3&&!O.initSegment}},"./src/demux/transmuxer.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return c}),r.d(i,"isPromise",function(){return v}),r.d(i,"TransmuxConfig",function(){return f}),r.d(i,"TransmuxState",function(){return d});var a=r("./src/events.ts"),o=r("./src/errors.ts"),l=r("./src/crypt/decrypter.ts"),b=r("./src/demux/aacdemuxer.ts"),I=r("./src/demux/mp4demuxer.ts"),T=r("./src/demux/tsdemuxer.ts"),A=r("./src/demux/mp3demuxer.ts"),p=r("./src/remux/mp4-remuxer.ts"),_=r("./src/remux/passthrough-remuxer.ts"),O=r("./src/demux/chunk-cache.ts"),C=r("./src/utils/mp4-tools.ts"),L=r("./src/utils/logger.ts"),S;try{S=self.performance.now.bind(self.performance)}catch{L.logger.debug("Unable to use Performance API on this environment"),S=self.Date.now}var u=[{demux:T.default,remux:p.default},{demux:I.default,remux:_.default},{demux:b.default,remux:p.default},{demux:A.default,remux:p.default}],s=1024;u.forEach(function(P){var D=P.demux;s=Math.max(s,D.minProbeByteLength)});var c=function(){function P(x,y,g,m,R){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new O.default,this.observer=x,this.typeSupported=y,this.config=g,this.vendor=m,this.id=R}var D=P.prototype;return D.configure=function(y){this.transmuxConfig=y,this.decrypter&&this.decrypter.reset()},D.push=function(y,g,m,R){var M=this,F=m.transmuxing;F.executeStart=S();var w=new Uint8Array(y),U=this.cache,B=this.config,k=this.currentTransmuxState,j=this.transmuxConfig;R&&(this.currentTransmuxState=R);var G=h(w,g);if(G&&G.method==="AES-128"){var N=this.getDecrypter();if(B.enableSoftwareAES){var H=N.softwareDecrypt(w,G.key.buffer,G.iv.buffer);if(!H)return F.executeEnd=S(),E(m);w=new Uint8Array(H)}else return this.decryptionPromise=N.webCryptoDecrypt(w,G.key.buffer,G.iv.buffer).then(function(J){var le=M.push(J,null,m);return M.decryptionPromise=null,le}),this.decryptionPromise}var $=R||k,z=$.contiguous,ee=$.discontinuity,X=$.trackSwitch,te=$.accurateTimeOffset,se=$.timeOffset,K=$.initSegmentChange,W=j.audioCodec,V=j.videoCodec,Q=j.defaultInitPts,Y=j.duration,Z=j.initSegmentData;if((ee||X||K)&&this.resetInitSegment(Z,W,V,Y),(ee||K)&&this.resetInitialTimestamp(Q),z||this.resetContiguity(),this.needsProbing(w,ee,X)){if(U.dataLength){var ne=U.flush();w=Object(C.appendUint8Array)(ne,w)}this.configureTransmuxer(w,j)}var q=this.transmux(w,G,se,te,m),re=this.currentTransmuxState;return re.contiguous=!0,re.discontinuity=!1,re.trackSwitch=!1,F.executeEnd=S(),q},D.flush=function(y){var g=this,m=y.transmuxing;m.executeStart=S();var R=this.decrypter,M=this.cache,F=this.currentTransmuxState,w=this.decryptionPromise;if(w)return w.then(function(){return g.flush(y)});var U=[],B=F.timeOffset;if(R){var k=R.flush();k&&U.push(this.push(k,null,y))}var j=M.dataLength;M.reset();var G=this.demuxer,N=this.remuxer;if(!G||!N)return j>=s&&this.observer.emit(a.Events.ERROR,a.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),m.executeEnd=S(),[E(y)];var H=G.flush(B);return v(H)?H.then(function($){return g.flushRemux(U,$,y),U}):(this.flushRemux(U,H,y),U)},D.flushRemux=function(y,g,m){var R=g.audioTrack,M=g.videoTrack,F=g.id3Track,w=g.textTrack,U=this.currentTransmuxState,B=U.accurateTimeOffset,k=U.timeOffset;L.logger.log("[transmuxer.ts]: Flushed fragment "+m.sn+(m.part>-1?" p: "+m.part:"")+" of level "+m.level);var j=this.remuxer.remux(R,M,F,w,k,B,!0,this.id);y.push({remuxResult:j,chunkMeta:m}),m.transmuxing.executeEnd=S()},D.resetInitialTimestamp=function(y){var g=this.demuxer,m=this.remuxer;!g||!m||(g.resetTimeStamp(y),m.resetTimeStamp(y))},D.resetContiguity=function(){var y=this.demuxer,g=this.remuxer;!y||!g||(y.resetContiguity(),g.resetNextTimestamp())},D.resetInitSegment=function(y,g,m,R){var M=this.demuxer,F=this.remuxer;!M||!F||(M.resetInitSegment(y,g,m,R),F.resetInitSegment(y,g,m))},D.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},D.transmux=function(y,g,m,R,M){var F;return g&&g.method==="SAMPLE-AES"?F=this.transmuxSampleAes(y,g,m,R,M):F=this.transmuxUnencrypted(y,m,R,M),F},D.transmuxUnencrypted=function(y,g,m,R){var M=this.demuxer.demux(y,g,!1,!this.config.progressive),F=M.audioTrack,w=M.videoTrack,U=M.id3Track,B=M.textTrack,k=this.remuxer.remux(F,w,U,B,g,m,!1,this.id);return{remuxResult:k,chunkMeta:R}},D.transmuxSampleAes=function(y,g,m,R,M){var F=this;return this.demuxer.demuxSampleAes(y,g,m).then(function(w){var U=F.remuxer.remux(w.audioTrack,w.videoTrack,w.id3Track,w.textTrack,m,R,!1,F.id);return{remuxResult:U,chunkMeta:M}})},D.configureTransmuxer=function(y,g){for(var m=this.config,R=this.observer,M=this.typeSupported,F=this.vendor,w=g.audioCodec,U=g.defaultInitPts,B=g.duration,k=g.initSegmentData,j=g.videoCodec,G,N=0,H=u.length;N<H;N++)if(u[N].demux.probe(y)){G=u[N];break}G||(L.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),G={demux:I.default,remux:_.default});var $=this.demuxer,z=this.remuxer,ee=G.remux,X=G.demux;(!z||!(z instanceof ee))&&(this.remuxer=new ee(R,m,M,F)),(!$||!($ instanceof X))&&(this.demuxer=new X(R,m,M),this.probe=X.probe),this.resetInitSegment(k,w,j,B),this.resetInitialTimestamp(U)},D.needsProbing=function(y,g,m){return!this.demuxer||!this.remuxer||g||m},D.getDecrypter=function(){var y=this.decrypter;return y||(y=this.decrypter=new l.default(this.observer,this.config)),y},P}();function h(P,D){var x=null;return P.byteLength>0&&D!=null&&D.key!=null&&D.iv!==null&&D.method!=null&&(x=D),x}var E=function(D){return{remuxResult:{},chunkMeta:D}};function v(P){return"then"in P&&P.then instanceof Function}var f=function(D,x,y,g,m){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=D,this.videoCodec=x,this.initSegmentData=y,this.duration=g,this.defaultInitPts=m},d=function(D,x,y,g,m,R){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=D,this.contiguous=x,this.accurateTimeOffset=y,this.trackSwitch=g,this.timeOffset=m,this.initSegmentChange=R}},"./src/demux/tsdemuxer.ts":function(n,i,r){r.r(i),r.d(i,"discardEPB",function(){return h});var a=r("./src/demux/adts.ts"),o=r("./src/demux/mpegaudio.ts"),l=r("./src/demux/exp-golomb.ts"),b=r("./src/demux/sample-aes.ts"),I=r("./src/events.ts"),T=r("./src/utils/mp4-tools.ts"),A=r("./src/utils/logger.ts"),p=r("./src/errors.ts"),_=r("./src/types/demuxer.ts");function O(){return O=Object.assign?Object.assign.bind():function(E){for(var v=1;v<arguments.length;v++){var f=arguments[v];for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(E[d]=f[d])}return E},O.apply(this,arguments)}var C=function(){function E(f,d,P){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=f,this.config=d,this.typeSupported=P}E.probe=function(d){var P=E.syncOffset(d);return P<0?!1:(P&&A.logger.warn("MPEG2-TS detected but first sync word found @ offset "+P+", junk ahead ?"),!0)},E.syncOffset=function(d){for(var P=Math.min(1e3,d.length-564),D=0;D<P;){if(d[D]===71&&d[D+188]===71&&d[D+2*188]===71)return D;D++}return-1},E.createTrack=function(d,P){return{container:d==="video"||d==="audio"?"video/mp2t":void 0,type:d,id:T.RemuxerTrackIdConfig[d],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:d==="audio"?P:void 0}};var v=E.prototype;return v.resetInitSegment=function(d,P,D,x){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=E.createTrack("video"),this._audioTrack=E.createTrack("audio",x),this._id3Track=E.createTrack("id3"),this._txtTrack=E.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.audioCodec=P,this.videoCodec=D,this._duration=x},v.resetTimeStamp=function(){},v.resetContiguity=function(){var d=this._audioTrack,P=this._avcTrack,D=this._id3Track;d&&(d.pesData=null),P&&(P.pesData=null),D&&(D.pesData=null),this.aacOverFlow=null},v.demux=function(d,P,D,x){D===void 0&&(D=!1),x===void 0&&(x=!1),D||(this.sampleAes=null);var y,g=this._avcTrack,m=this._audioTrack,R=this._id3Track,M=this._txtTrack,F=g.pid,w=g.pesData,U=m.pid,B=R.pid,k=m.pesData,j=R.pesData,G=!1,N=this.pmtParsed,H=this._pmtId,$=d.length;if(this.remainderData&&(d=Object(T.appendUint8Array)(this.remainderData,d),$=d.length,this.remainderData=null),$<188&&!x)return this.remainderData=d,{audioTrack:m,videoTrack:g,id3Track:R,textTrack:M};var z=Math.max(0,E.syncOffset(d));$-=($+z)%188,$<d.byteLength&&!x&&(this.remainderData=new Uint8Array(d.buffer,$,d.buffer.byteLength-$));for(var ee=0,X=z;X<$;X+=188)if(d[X]===71){var te=!!(d[X+1]&64),se=((d[X+1]&31)<<8)+d[X+2],K=(d[X+3]&48)>>4,W=void 0;if(K>1){if(W=X+5+d[X+4],W===X+188)continue}else W=X+4;switch(se){case F:te&&(w&&(y=s(w))&&this.parseAVCPES(g,M,y,!1),w={data:[],size:0}),w&&(w.data.push(d.subarray(W,X+188)),w.size+=X+188-W);break;case U:if(te){if(k&&(y=s(k)))switch(m.segmentCodec){case"aac":this.parseAACPES(m,y);break;case"mp3":this.parseMPEGPES(m,y);break}k={data:[],size:0}}k&&(k.data.push(d.subarray(W,X+188)),k.size+=X+188-W);break;case B:te&&(j&&(y=s(j))&&this.parseID3PES(R,y),j={data:[],size:0}),j&&(j.data.push(d.subarray(W,X+188)),j.size+=X+188-W);break;case 0:te&&(W+=d[W]+1),H=this._pmtId=S(d,W);break;case H:{te&&(W+=d[W]+1);var V=u(d,W,this.typeSupported,D);F=V.avc,F>0&&(g.pid=F),U=V.audio,U>0&&(m.pid=U,m.segmentCodec=V.segmentCodec),B=V.id3,B>0&&(R.pid=B),G&&!N&&(A.logger.log("reparse from beginning"),G=!1,X=z-188),N=this.pmtParsed=!0;break}case 17:case 8191:break;default:G=!0;break}}else ee++;ee>0&&this.observer.emit(I.Events.ERROR,I.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+ee+" TS packet/s that do not start with 0x47"}),g.pesData=w,m.pesData=k,R.pesData=j;var Q={audioTrack:m,videoTrack:g,id3Track:R,textTrack:M};return x&&this.extractRemainingSamples(Q),Q},v.flush=function(){var d=this.remainderData;this.remainderData=null;var P;return d?P=this.demux(d,-1,!1,!0):P={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(P),this.sampleAes?this.decrypt(P,this.sampleAes):P},v.extractRemainingSamples=function(d){var P=d.audioTrack,D=d.videoTrack,x=d.id3Track,y=d.textTrack,g=D.pesData,m=P.pesData,R=x.pesData,M;if(g&&(M=s(g))?(this.parseAVCPES(D,y,M,!0),D.pesData=null):D.pesData=g,m&&(M=s(m))){switch(P.segmentCodec){case"aac":this.parseAACPES(P,M);break;case"mp3":this.parseMPEGPES(P,M);break}P.pesData=null}else m!=null&&m.size&&A.logger.log("last AAC PES packet truncated,might overlap between fragments"),P.pesData=m;R&&(M=s(R))?(this.parseID3PES(x,M),x.pesData=null):x.pesData=R},v.demuxSampleAes=function(d,P,D){var x=this.demux(d,D,!0,!this.config.progressive),y=this.sampleAes=new b.default(this.observer,this.config,P);return this.decrypt(x,y)},v.decrypt=function(d,P){return new Promise(function(D){var x=d.audioTrack,y=d.videoTrack;x.samples&&x.segmentCodec==="aac"?P.decryptAacSamples(x.samples,0,function(){y.samples?P.decryptAvcSamples(y.samples,0,0,function(){D(d)}):D(d)}):y.samples&&P.decryptAvcSamples(y.samples,0,0,function(){D(d)})})},v.destroy=function(){this._duration=0},v.parseAVCPES=function(d,P,D,x){var y=this,g=this.parseAVCNALu(d,D.data),m=this.avcSample,R,M=!1;D.data=null,m&&g.length&&!d.audFound&&(c(m,d),m=this.avcSample=L(!1,D.pts,D.dts,"")),g.forEach(function(F){switch(F.type){case 1:{R=!0,m||(m=y.avcSample=L(!0,D.pts,D.dts,"")),m.frame=!0;var w=F.data;if(M&&w.length>4){var U=new l.default(w).readSliceType();(U===2||U===4||U===7||U===9)&&(m.key=!0)}break}case 5:R=!0,m||(m=y.avcSample=L(!0,D.pts,D.dts,"")),m.key=!0,m.frame=!0;break;case 6:{R=!0,Object(T.parseSEIMessageFromNALu)(h(F.data),D.pts,P.samples);break}case 7:if(R=!0,M=!0,!d.sps){var B=new l.default(F.data),k=B.readSPS();d.width=k.width,d.height=k.height,d.pixelRatio=k.pixelRatio,d.sps=[F.data],d.duration=y._duration;for(var j=F.data.subarray(1,4),G="avc1.",N=0;N<3;N++){var H=j[N].toString(16);H.length<2&&(H="0"+H),G+=H}d.codec=G}break;case 8:R=!0,d.pps||(d.pps=[F.data]);break;case 9:R=!1,d.audFound=!0,m&&c(m,d),m=y.avcSample=L(!1,D.pts,D.dts,"");break;case 12:R=!0;break;default:R=!1,m&&(m.debug+="unknown NAL "+F.type+" ");break}if(m&&R){var $=m.units;$.push(F)}}),x&&m&&(c(m,d),this.avcSample=null)},v.getLastNalUnit=function(d){var P,D=this.avcSample,x;if((!D||D.units.length===0)&&(D=d[d.length-1]),(P=D)!==null&&P!==void 0&&P.units){var y=D.units;x=y[y.length-1]}return x},v.parseAVCNALu=function(d,P){var D=P.byteLength,x=d.naluState||0,y=x,g=[],m=0,R,M,F,w=-1,U=0;for(x===-1&&(w=0,U=P[0]&31,x=0,m=1);m<D;){if(R=P[m++],!x){x=R?0:1;continue}if(x===1){x=R?0:2;continue}if(!R)x=3;else if(R===1){if(w>=0){var B={data:P.subarray(w,m-x-1),type:U};g.push(B)}else{var k=this.getLastNalUnit(d.samples);if(k&&(y&&m<=4-y&&k.state&&(k.data=k.data.subarray(0,k.data.byteLength-y)),M=m-x-1,M>0)){var j=new Uint8Array(k.data.byteLength+M);j.set(k.data,0),j.set(P.subarray(0,M),k.data.byteLength),k.data=j,k.state=0}}m<D?(F=P[m]&31,w=m,U=F,x=0):x=-1}else x=0}if(w>=0&&x>=0){var G={data:P.subarray(w,D),type:U,state:x};g.push(G)}if(g.length===0){var N=this.getLastNalUnit(d.samples);if(N){var H=new Uint8Array(N.data.byteLength+P.byteLength);H.set(N.data,0),H.set(P,N.data.byteLength),N.data=H}}return d.naluState=x,g},v.parseAACPES=function(d,P){var D=0,x=this.aacOverFlow,y=P.data;if(x){this.aacOverFlow=null;var g=x.missing,m=x.sample.unit.byteLength;if(g===-1){var R=new Uint8Array(m+y.byteLength);R.set(x.sample.unit,0),R.set(y,m),y=R}else{var M=m-g;x.sample.unit.set(y.subarray(0,g),M),d.samples.push(x.sample),D=x.missing}}var F,w;for(F=D,w=y.length;F<w-1&&!a.isHeader(y,F);F++);if(F!==D){var U,B;if(F<w-1?(U="AAC PES did not start with ADTS header,offset:"+F,B=!1):(U="no ADTS header found in AAC PES",B=!0),A.logger.warn("parsing error:"+U),this.observer.emit(I.Events.ERROR,I.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:B,reason:U}),B)return}a.initTrackConfig(d,this.observer,y,F,this.audioCodec);var k;if(P.pts!==void 0)k=P.pts;else if(x){var j=a.getFrameDuration(d.samplerate);k=x.sample.pts+j}else{A.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}for(var G=0,N;F<w;)if(N=a.appendFrame(d,y,F,k,G),F+=N.length,N.missing){this.aacOverFlow=N;break}else for(G++;F<w-1&&!a.isHeader(y,F);F++);},v.parseMPEGPES=function(d,P){var D=P.data,x=D.length,y=0,g=0,m=P.pts;if(m===void 0){A.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;g<x;)if(o.isHeader(D,g)){var R=o.appendFrame(d,D,g,m,y);if(R)g+=R.length,y++;else break}else g++},v.parseID3PES=function(d,P){if(P.pts===void 0){A.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}var D=O({},P,{type:this._avcTrack?_.MetadataSchema.emsg:_.MetadataSchema.audioId3});d.samples.push(D)},E}();C.minProbeByteLength=188;function L(E,v,f,d){return{key:E,frame:!1,pts:v,dts:f,units:[],debug:d,length:0}}function S(E,v){return(E[v+10]&31)<<8|E[v+11]}function u(E,v,f,d){var P={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},D=(E[v+1]&15)<<8|E[v+2],x=v+3+D-4,y=(E[v+10]&15)<<8|E[v+11];for(v+=12+y;v<x;){var g=(E[v+1]&31)<<8|E[v+2];switch(E[v]){case 207:if(!d){A.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:P.audio===-1&&(P.audio=g);break;case 21:P.id3===-1&&(P.id3=g);break;case 219:if(!d){A.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:P.avc===-1&&(P.avc=g);break;case 3:case 4:f.mpeg!==!0&&f.mp3!==!0?A.logger.log("MPEG audio found, not supported in this browser"):P.audio===-1&&(P.audio=g,P.segmentCodec="mp3");break;case 36:A.logger.warn("Unsupported HEVC stream type found");break}v+=((E[v+3]&15)<<8|E[v+4])+5}return P}function s(E){var v=0,f,d,P,D,x,y=E.data;if(!E||E.size===0)return null;for(;y[0].length<19&&y.length>1;){var g=new Uint8Array(y[0].length+y[1].length);g.set(y[0]),g.set(y[1],y[0].length),y[0]=g,y.splice(1,1)}f=y[0];var m=(f[0]<<16)+(f[1]<<8)+f[2];if(m===1){if(d=(f[4]<<8)+f[5],d&&d>E.size-6)return null;var R=f[7];R&192&&(D=(f[9]&14)*536870912+(f[10]&255)*4194304+(f[11]&254)*16384+(f[12]&255)*128+(f[13]&254)/2,R&64?(x=(f[14]&14)*536870912+(f[15]&255)*4194304+(f[16]&254)*16384+(f[17]&255)*128+(f[18]&254)/2,D-x>60*9e4&&(A.logger.warn(Math.round((D-x)/9e4)+"s delta between PTS and DTS, align them"),D=x)):x=D),P=f[8];var M=P+9;if(E.size<=M)return null;E.size-=M;for(var F=new Uint8Array(E.size),w=0,U=y.length;w<U;w++){f=y[w];var B=f.byteLength;if(M)if(M>B){M-=B;continue}else f=f.subarray(M),B-=M,M=0;F.set(f,v),v+=B}return d&&(d-=P+3),{data:F,pts:D,dts:x,len:d}}return null}function c(E,v){if(E.units.length&&E.frame){if(E.pts===void 0){var f=v.samples,d=f.length;if(d){var P=f[d-1];E.pts=P.pts,E.dts=P.dts}else{v.dropped++;return}}v.samples.push(E)}E.debug.length&&A.logger.log(E.pts+"/"+E.dts+":"+E.debug)}function h(E){for(var v=E.byteLength,f=[],d=1;d<v-2;)E[d]===0&&E[d+1]===0&&E[d+2]===3?(f.push(d+2),d+=2):d++;if(f.length===0)return E;var P=v-f.length,D=new Uint8Array(P),x=0;for(d=0;d<P;x++,d++)x===f[0]&&(x++,f.shift()),D[d]=E[x];return D}i.default=C},"./src/errors.ts":function(n,i,r){r.r(i),r.d(i,"ErrorTypes",function(){return a}),r.d(i,"ErrorDetails",function(){return o});var a;(function(l){l.NETWORK_ERROR="networkError",l.MEDIA_ERROR="mediaError",l.KEY_SYSTEM_ERROR="keySystemError",l.MUX_ERROR="muxError",l.OTHER_ERROR="otherError"})(a||(a={}));var o;(function(l){l.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",l.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",l.KEY_SYSTEM_NO_SESSION="keySystemNoSession",l.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",l.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",l.MANIFEST_LOAD_ERROR="manifestLoadError",l.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",l.MANIFEST_PARSING_ERROR="manifestParsingError",l.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",l.LEVEL_EMPTY_ERROR="levelEmptyError",l.LEVEL_LOAD_ERROR="levelLoadError",l.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",l.LEVEL_SWITCH_ERROR="levelSwitchError",l.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",l.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",l.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",l.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",l.FRAG_LOAD_ERROR="fragLoadError",l.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",l.FRAG_DECRYPT_ERROR="fragDecryptError",l.FRAG_PARSING_ERROR="fragParsingError",l.REMUX_ALLOC_ERROR="remuxAllocError",l.KEY_LOAD_ERROR="keyLoadError",l.KEY_LOAD_TIMEOUT="keyLoadTimeOut",l.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",l.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",l.BUFFER_APPEND_ERROR="bufferAppendError",l.BUFFER_APPENDING_ERROR="bufferAppendingError",l.BUFFER_STALLED_ERROR="bufferStalledError",l.BUFFER_FULL_ERROR="bufferFullError",l.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",l.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",l.INTERNAL_EXCEPTION="internalException",l.INTERNAL_ABORTED="aborted",l.UNKNOWN="unknown"})(o||(o={}))},"./src/events.ts":function(n,i,r){r.r(i),r.d(i,"Events",function(){return a});var a;(function(o){o.MEDIA_ATTACHING="hlsMediaAttaching",o.MEDIA_ATTACHED="hlsMediaAttached",o.MEDIA_DETACHING="hlsMediaDetaching",o.MEDIA_DETACHED="hlsMediaDetached",o.BUFFER_RESET="hlsBufferReset",o.BUFFER_CODECS="hlsBufferCodecs",o.BUFFER_CREATED="hlsBufferCreated",o.BUFFER_APPENDING="hlsBufferAppending",o.BUFFER_APPENDED="hlsBufferAppended",o.BUFFER_EOS="hlsBufferEos",o.BUFFER_FLUSHING="hlsBufferFlushing",o.BUFFER_FLUSHED="hlsBufferFlushed",o.MANIFEST_LOADING="hlsManifestLoading",o.MANIFEST_LOADED="hlsManifestLoaded",o.MANIFEST_PARSED="hlsManifestParsed",o.LEVEL_SWITCHING="hlsLevelSwitching",o.LEVEL_SWITCHED="hlsLevelSwitched",o.LEVEL_LOADING="hlsLevelLoading",o.LEVEL_LOADED="hlsLevelLoaded",o.LEVEL_UPDATED="hlsLevelUpdated",o.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",o.LEVELS_UPDATED="hlsLevelsUpdated",o.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",o.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",o.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",o.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",o.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",o.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",o.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",o.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",o.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",o.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",o.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",o.CUES_PARSED="hlsCuesParsed",o.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",o.INIT_PTS_FOUND="hlsInitPtsFound",o.FRAG_LOADING="hlsFragLoading",o.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",o.FRAG_LOADED="hlsFragLoaded",o.FRAG_DECRYPTED="hlsFragDecrypted",o.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",o.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",o.FRAG_PARSING_METADATA="hlsFragParsingMetadata",o.FRAG_PARSED="hlsFragParsed",o.FRAG_BUFFERED="hlsFragBuffered",o.FRAG_CHANGED="hlsFragChanged",o.FPS_DROP="hlsFpsDrop",o.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",o.ERROR="hlsError",o.DESTROYING="hlsDestroying",o.KEY_LOADING="hlsKeyLoading",o.KEY_LOADED="hlsKeyLoaded",o.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",o.BACK_BUFFER_REACHED="hlsBackBufferReached"})(a||(a={}))},"./src/hls.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return h});var a=r("./node_modules/url-toolkit/src/url-toolkit.js"),o=r("./src/loader/playlist-loader.ts"),l=r("./src/loader/key-loader.ts"),b=r("./src/controller/id3-track-controller.ts"),I=r("./src/controller/latency-controller.ts"),T=r("./src/controller/level-controller.ts"),A=r("./src/controller/fragment-tracker.ts"),p=r("./src/controller/stream-controller.ts"),_=r("./src/is-supported.ts"),O=r("./src/utils/logger.ts"),C=r("./src/config.ts"),L=r("./node_modules/eventemitter3/index.js"),S=r("./src/events.ts"),u=r("./src/errors.ts");function s(E,v){for(var f=0;f<v.length;f++){var d=v[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(E,d.key,d)}}function c(E,v,f){return v&&s(E.prototype,v),f&&s(E,f),Object.defineProperty(E,"prototype",{writable:!1}),E}var h=function(){E.isSupported=function(){return Object(_.isSupported)()};function E(f){f===void 0&&(f={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new L.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var d=this.config=Object(C.mergeConfig)(E.DefaultConfig,f);this.userConfig=f,Object(O.enableLogs)(d.debug),this._autoLevelCapping=-1,d.progressive&&Object(C.enableStreamingMode)(d);var P=d.abrController,D=d.bufferController,x=d.capLevelController,y=d.fpsController,g=this.abrController=new P(this),m=this.bufferController=new D(this),R=this.capLevelController=new x(this),M=new y(this),F=new o.default(this),w=new l.default(this),U=new b.default(this),B=this.levelController=new T.default(this),k=new A.FragmentTracker(this),j=this.streamController=new p.default(this,k);R.setStreamController(j),M.setStreamController(j);var G=[B,j];this.networkControllers=G;var N=[F,w,g,m,R,M,U,k];this.audioTrackController=this.createController(d.audioTrackController,null,G),this.createController(d.audioStreamController,k,G),this.subtitleTrackController=this.createController(d.subtitleTrackController,null,G),this.createController(d.subtitleStreamController,k,G),this.createController(d.timelineController,null,N),this.emeController=this.createController(d.emeController,null,N),this.cmcdController=this.createController(d.cmcdController,null,N),this.latencyController=this.createController(I.default,null,N),this.coreComponents=N}var v=E.prototype;return v.createController=function(d,P,D){if(d){var x=P?new d(this,P):new d(this);return D&&D.push(x),x}return null},v.on=function(d,P,D){D===void 0&&(D=this),this._emitter.on(d,P,D)},v.once=function(d,P,D){D===void 0&&(D=this),this._emitter.once(d,P,D)},v.removeAllListeners=function(d){this._emitter.removeAllListeners(d)},v.off=function(d,P,D,x){D===void 0&&(D=this),this._emitter.off(d,P,D,x)},v.listeners=function(d){return this._emitter.listeners(d)},v.emit=function(d,P,D){return this._emitter.emit(d,P,D)},v.trigger=function(d,P){if(this.config.debug)return this.emit(d,d,P);try{return this.emit(d,d,P)}catch(D){O.logger.error("An internal error happened while handling event "+d+'. Error message: "'+D.message+'". Here is a stacktrace:',D),this.trigger(S.Events.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:d,error:D})}return!1},v.listenerCount=function(d){return this._emitter.listenerCount(d)},v.destroy=function(){O.logger.log("destroy"),this.trigger(S.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(d){return d.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(d){return d.destroy()}),this.coreComponents.length=0},v.attachMedia=function(d){O.logger.log("attachMedia"),this._media=d,this.trigger(S.Events.MEDIA_ATTACHING,{media:d})},v.detachMedia=function(){O.logger.log("detachMedia"),this.trigger(S.Events.MEDIA_DETACHING,void 0),this._media=null},v.loadSource=function(d){this.stopLoad();var P=this.media,D=this.url,x=this.url=a.buildAbsoluteURL(self.location.href,d,{alwaysNormalize:!0});O.logger.log("loadSource:"+x),P&&D&&D!==x&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(P)),this.trigger(S.Events.MANIFEST_LOADING,{url:d})},v.startLoad=function(d){d===void 0&&(d=-1),O.logger.log("startLoad("+d+")"),this.networkControllers.forEach(function(P){P.startLoad(d)})},v.stopLoad=function(){O.logger.log("stopLoad"),this.networkControllers.forEach(function(d){d.stopLoad()})},v.swapAudioCodec=function(){O.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},v.recoverMediaError=function(){O.logger.log("recoverMediaError");var d=this._media;this.detachMedia(),d&&this.attachMedia(d)},v.removeLevel=function(d,P){P===void 0&&(P=0),this.levelController.removeLevel(d,P)},c(E,[{key:"levels",get:function(){var d=this.levelController.levels;return d||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(d){O.logger.log("set currentLevel:"+d),this.loadLevel=d,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(d){O.logger.log("set nextLevel:"+d),this.levelController.manualLevel=d,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(d){O.logger.log("set loadLevel:"+d),this.levelController.manualLevel=d}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(d){this.levelController.nextLoadLevel=d}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(d){O.logger.log("set firstLevel:"+d),this.levelController.firstLevel=d}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(d){O.logger.log("set startLevel:"+d),d!==-1&&(d=Math.max(d,this.minAutoLevel)),this.levelController.startLevel=d}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(d){var P=!!d;P!==this.config.capLevelToPlayerSize&&(P?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=P)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(d){this._autoLevelCapping!==d&&(O.logger.log("set autoLevelCapping:"+d),this._autoLevelCapping=d)}},{key:"bandwidthEstimate",get:function(){var d=this.abrController.bwEstimator;return d?d.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var d=this.levels,P=this.config.minAutoBitrate;if(!d)return 0;for(var D=d.length,x=0;x<D;x++)if(d[x].maxBitrate>=P)return x;return 0}},{key:"maxAutoLevel",get:function(){var d=this.levels,P=this.autoLevelCapping,D;return P===-1&&d&&d.length?D=d.length-1:D=P,D}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(d){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,d)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"audioTracks",get:function(){var d=this.audioTrackController;return d?d.audioTracks:[]}},{key:"audioTrack",get:function(){var d=this.audioTrackController;return d?d.audioTrack:-1},set:function(d){var P=this.audioTrackController;P&&(P.audioTrack=d)}},{key:"subtitleTracks",get:function(){var d=this.subtitleTrackController;return d?d.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var d=this.subtitleTrackController;return d?d.subtitleTrack:-1},set:function(d){var P=this.subtitleTrackController;P&&(P.subtitleTrack=d)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var d=this.subtitleTrackController;return d?d.subtitleDisplay:!1},set:function(d){var P=this.subtitleTrackController;P&&(P.subtitleDisplay=d)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(d){this.config.lowLatencyMode=d}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.2.0"}},{key:"Events",get:function(){return S.Events}},{key:"ErrorTypes",get:function(){return u.ErrorTypes}},{key:"ErrorDetails",get:function(){return u.ErrorDetails}},{key:"DefaultConfig",get:function(){return E.defaultConfig?E.defaultConfig:C.hlsDefaultConfig},set:function(d){E.defaultConfig=d}}]),E}();h.defaultConfig=void 0},"./src/is-supported.ts":function(n,i,r){r.r(i),r.d(i,"isSupported",function(){return l}),r.d(i,"changeTypeSupported",function(){return b});var a=r("./src/utils/mediasource-helper.ts");function o(){return self.SourceBuffer||self.WebKitSourceBuffer}function l(){var I=Object(a.getMediaSource)();if(!I)return!1;var T=o(),A=I&&typeof I.isTypeSupported=="function"&&I.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),p=!T||T.prototype&&typeof T.prototype.appendBuffer=="function"&&typeof T.prototype.remove=="function";return!!A&&!!p}function b(){var I,T=o();return typeof(T==null||(I=T.prototype)===null||I===void 0?void 0:I.changeType)=="function"}},"./src/loader/date-range.ts":function(n,i,r){r.r(i),r.d(i,"DateRangeAttribute",function(){return A}),r.d(i,"DateRange",function(){return p});var a=r("./src/polyfills/number.ts"),o=r("./src/utils/attr-list.ts"),l=r("./src/utils/logger.ts");function b(){return b=Object.assign?Object.assign.bind():function(_){for(var O=1;O<arguments.length;O++){var C=arguments[O];for(var L in C)Object.prototype.hasOwnProperty.call(C,L)&&(_[L]=C[L])}return _},b.apply(this,arguments)}function I(_,O){for(var C=0;C<O.length;C++){var L=O[C];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(_,L.key,L)}}function T(_,O,C){return O&&I(_.prototype,O),C&&I(_,C),Object.defineProperty(_,"prototype",{writable:!1}),_}var A;(function(_){_.ID="ID",_.CLASS="CLASS",_.START_DATE="START-DATE",_.DURATION="DURATION",_.END_DATE="END-DATE",_.END_ON_NEXT="END-ON-NEXT",_.PLANNED_DURATION="PLANNED-DURATION",_.SCTE35_OUT="SCTE35-OUT",_.SCTE35_IN="SCTE35-IN"})(A||(A={}));var p=function(){function _(O,C){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,C){var L=C.attr;for(var S in L)if(Object.prototype.hasOwnProperty.call(O,S)&&O[S]!==L[S]){l.logger.warn('DATERANGE tag attribute: "'+S+'" does not match for tags with ID: "'+O.ID+'"'),this._badValueForSameId=S;break}O=b(new o.AttrList({}),L,O)}if(this.attr=O,this._startDate=new Date(O[A.START_DATE]),A.END_DATE in this.attr){var u=new Date(this.attr[A.END_DATE]);Object(a.isFiniteNumber)(u.getTime())&&(this._endDate=u)}}return T(_,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var C=this.duration;return C!==null?new Date(this._startDate.getTime()+C*1e3):null}},{key:"duration",get:function(){if(A.DURATION in this.attr){var C=this.attr.decimalFloatingPoint(A.DURATION);if(Object(a.isFiniteNumber)(C))return C}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return A.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(A.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(A.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&Object(a.isFiniteNumber)(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),_}()},"./src/loader/fragment-loader.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return C}),r.d(i,"LoadError",function(){return S});var a=r("./src/polyfills/number.ts"),o=r("./src/errors.ts");function l(u,s){u.prototype=Object.create(s.prototype),u.prototype.constructor=u,p(u,s)}function b(u){var s=typeof Map=="function"?new Map:void 0;return b=function(h){if(h===null||!A(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s!="undefined"){if(s.has(h))return s.get(h);s.set(h,E)}function E(){return I(h,arguments,_(this).constructor)}return E.prototype=Object.create(h.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),p(E,h)},b(u)}function I(u,s,c){return T()?I=Reflect.construct.bind():I=function(E,v,f){var d=[null];d.push.apply(d,v);var P=Function.bind.apply(E,d),D=new P;return f&&p(D,f.prototype),D},I.apply(null,arguments)}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(u){return Function.toString.call(u).indexOf("[native code]")!==-1}function p(u,s){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,E){return h.__proto__=E,h},p(u,s)}function _(u){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},_(u)}var O=Math.pow(2,17),C=function(){function u(c){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=c}var s=u.prototype;return s.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},s.abort=function(){this.loader&&this.loader.abort()},s.load=function(h,E){var v=this,f=h.url;if(!f)return Promise.reject(new S({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:h,networkDetails:null},"Fragment does not have a "+(f?"part list":"url")));this.abort();var d=this.config,P=d.fLoader,D=d.loader;return new Promise(function(x,y){v.loader&&v.loader.destroy();var g=v.loader=h.loader=P?new P(d):new D(d),m=L(h),R={timeout:d.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:d.fragLoadingMaxRetryTimeout,highWaterMark:h.sn==="initSegment"?1/0:O};h.stats=g.stats,g.load(m,R,{onSuccess:function(F,w,U,B){v.resetLoader(h,g),x({frag:h,part:null,payload:F.data,networkDetails:B})},onError:function(F,w,U){v.resetLoader(h,g),y(new S({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:h,response:F,networkDetails:U}))},onAbort:function(F,w,U){v.resetLoader(h,g),y(new S({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:h,networkDetails:U}))},onTimeout:function(F,w,U){v.resetLoader(h,g),y(new S({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:h,networkDetails:U}))},onProgress:function(F,w,U,B){E&&E({frag:h,part:null,payload:U,networkDetails:B})}})})},s.loadPart=function(h,E,v){var f=this;this.abort();var d=this.config,P=d.fLoader,D=d.loader;return new Promise(function(x,y){f.loader&&f.loader.destroy();var g=f.loader=h.loader=P?new P(d):new D(d),m=L(h,E),R={timeout:d.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:d.fragLoadingMaxRetryTimeout,highWaterMark:O};E.stats=g.stats,g.load(m,R,{onSuccess:function(F,w,U,B){f.resetLoader(h,g),f.updateStatsFromPart(h,E);var k={frag:h,part:E,payload:F.data,networkDetails:B};v(k),x(k)},onError:function(F,w,U){f.resetLoader(h,g),y(new S({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:h,part:E,response:F,networkDetails:U}))},onAbort:function(F,w,U){h.stats.aborted=E.stats.aborted,f.resetLoader(h,g),y(new S({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:h,part:E,networkDetails:U}))},onTimeout:function(F,w,U){f.resetLoader(h,g),y(new S({type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:h,part:E,networkDetails:U}))}})})},s.updateStatsFromPart=function(h,E){var v=h.stats,f=E.stats,d=f.total;if(v.loaded+=f.loaded,d){var P=Math.round(h.duration/E.duration),D=Math.min(Math.round(v.loaded/d),P),x=P-D,y=x*Math.round(v.loaded/D);v.total=v.loaded+y}else v.total=Math.max(v.loaded,v.total);var g=v.loading,m=f.loading;g.start?g.first+=m.first-m.start:(g.start=m.start,g.first=m.first),g.end=m.end},s.resetLoader=function(h,E){h.loader=null,this.loader===E&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),E.destroy()},u}();function L(u,s){s===void 0&&(s=null);var c=s||u,h={frag:u,part:s,responseType:"arraybuffer",url:c.url,headers:{},rangeStart:0,rangeEnd:0},E=c.byteRangeStartOffset,v=c.byteRangeEndOffset;return Object(a.isFiniteNumber)(E)&&Object(a.isFiniteNumber)(v)&&(h.rangeStart=E,h.rangeEnd=v),h}var S=function(u){l(s,u);function s(c){for(var h,E=arguments.length,v=new Array(E>1?E-1:0),f=1;f<E;f++)v[f-1]=arguments[f];return h=u.call.apply(u,[this].concat(v))||this,h.data=void 0,h.data=c,h}return s}(b(Error))},"./src/loader/fragment.ts":function(n,i,r){r.r(i),r.d(i,"ElementaryStreamTypes",function(){return O}),r.d(i,"BaseSegment",function(){return C}),r.d(i,"Fragment",function(){return L}),r.d(i,"Part",function(){return S});var a=r("./src/polyfills/number.ts"),o=r("./node_modules/url-toolkit/src/url-toolkit.js"),l=r("./src/utils/logger.ts"),b=r("./src/loader/level-key.ts"),I=r("./src/loader/load-stats.ts");function T(u,s){u.prototype=Object.create(s.prototype),u.prototype.constructor=u,A(u,s)}function A(u,s){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,E){return h.__proto__=E,h},A(u,s)}function p(u,s){for(var c=0;c<s.length;c++){var h=s[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}function _(u,s,c){return s&&p(u.prototype,s),c&&p(u,c),Object.defineProperty(u,"prototype",{writable:!1}),u}var O;(function(u){u.AUDIO="audio",u.VIDEO="video",u.AUDIOVIDEO="audiovideo"})(O||(O={}));var C=function(){function u(c){var h;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=(h={},h[O.AUDIO]=null,h[O.VIDEO]=null,h[O.AUDIOVIDEO]=null,h),this.baseurl=c}var s=u.prototype;return s.setByteRange=function(h,E){var v=h.split("@",2),f=[];v.length===1?f[0]=E?E.byteRangeEndOffset:0:f[0]=parseInt(v[1]),f[1]=parseInt(v[0])+f[0],this._byteRange=f},_(u,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(h){this._url=h}}]),u}(),L=function(u){T(s,u);function s(h,E){var v;return v=u.call(this,E)||this,v._decryptdata=null,v.rawProgramDateTime=null,v.programDateTime=null,v.tagList=[],v.duration=0,v.sn=0,v.levelkey=void 0,v.type=void 0,v.loader=null,v.level=-1,v.cc=0,v.startPTS=void 0,v.endPTS=void 0,v.appendedPTS=void 0,v.startDTS=void 0,v.endDTS=void 0,v.start=0,v.deltaPTS=void 0,v.maxStartPTS=void 0,v.minEndPTS=void 0,v.stats=new I.LoadStats,v.urlId=0,v.data=void 0,v.bitrateTest=!1,v.title=null,v.initSegment=null,v.type=h,v}var c=s.prototype;return c.createInitializationVector=function(E){for(var v=new Uint8Array(16),f=12;f<16;f++)v[f]=E>>8*(15-f)&255;return v},c.setDecryptDataFromLevelKey=function(E,v){var f=E;return(E==null?void 0:E.method)==="AES-128"&&E.uri&&!E.iv&&(f=b.LevelKey.fromURI(E.uri),f.method=E.method,f.iv=this.createInitializationVector(v),f.keyFormat="identity"),f},c.setElementaryStreamInfo=function(E,v,f,d,P,D){D===void 0&&(D=!1);var x=this.elementaryStreams,y=x[E];if(!y){x[E]={startPTS:v,endPTS:f,startDTS:d,endDTS:P,partial:D};return}y.startPTS=Math.min(y.startPTS,v),y.endPTS=Math.max(y.endPTS,f),y.startDTS=Math.min(y.startDTS,d),y.endDTS=Math.max(y.endDTS,P)},c.clearElementaryStreamInfo=function(){var E=this.elementaryStreams;E[O.AUDIO]=null,E[O.VIDEO]=null,E[O.AUDIOVIDEO]=null},_(s,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var E=this.sn;typeof E!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&l.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),E=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,E)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(a.isFiniteNumber)(this.programDateTime))return null;var E=Object(a.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+E*1e3}},{key:"encrypted",get:function(){var E;return!!((E=this.decryptdata)!==null&&E!==void 0&&E.keyFormat&&this.decryptdata.uri)}}]),s}(C),S=function(u){T(s,u);function s(c,h,E,v,f){var d;d=u.call(this,E)||this,d.fragOffset=0,d.duration=0,d.gap=!1,d.independent=!1,d.relurl=void 0,d.fragment=void 0,d.index=void 0,d.stats=new I.LoadStats,d.duration=c.decimalFloatingPoint("DURATION"),d.gap=c.bool("GAP"),d.independent=c.bool("INDEPENDENT"),d.relurl=c.enumeratedString("URI"),d.fragment=h,d.index=v;var P=c.enumeratedString("BYTERANGE");return P&&d.setByteRange(P,f),f&&(d.fragOffset=f.fragOffset+f.duration),d}return _(s,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var h=this.elementaryStreams;return!!(h.audio||h.video||h.audiovideo)}}]),s}(C)},"./src/loader/key-loader.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return b});var a=r("./src/events.ts"),o=r("./src/errors.ts"),l=r("./src/utils/logger.ts"),b=function(){function I(A){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=A,this._registerListeners()}var T=I.prototype;return T._registerListeners=function(){this.hls.on(a.Events.KEY_LOADING,this.onKeyLoading,this)},T._unregisterListeners=function(){this.hls.off(a.Events.KEY_LOADING,this.onKeyLoading)},T.destroy=function(){this._unregisterListeners();for(var p in this.loaders){var _=this.loaders[p];_&&_.destroy()}this.loaders={}},T.onKeyLoading=function(p,_){var O=_.frag,C=O.type,L=this.loaders[C];if(!O.decryptdata){l.logger.warn("Missing decryption data on fragment in onKeyLoading");return}var S=O.decryptdata.uri;if(S!==this.decrypturl||this.decryptkey===null){var u=this.hls.config;if(L&&(l.logger.warn("abort previous key loader for type:"+C),L.abort()),!S){l.logger.warn("key uri is falsy");return}var s=u.loader,c=O.loader=this.loaders[C]=new s(u);this.decrypturl=S,this.decryptkey=null;var h={url:S,frag:O,responseType:"arraybuffer"},E={timeout:u.fragLoadingTimeOut,maxRetry:0,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout,highWaterMark:0},v={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(h,E,v)}else this.decryptkey&&(O.decryptdata.key=this.decryptkey,this.hls.trigger(a.Events.KEY_LOADED,{frag:O}))},T.loadsuccess=function(p,_,O){var C=O.frag;if(!C.decryptdata){l.logger.error("after key load, decryptdata unset");return}this.decryptkey=C.decryptdata.key=new Uint8Array(p.data),C.loader=null,delete this.loaders[C.type],this.hls.trigger(a.Events.KEY_LOADED,{frag:C})},T.loaderror=function(p,_){var O=_.frag,C=O.loader;C&&C.abort(),delete this.loaders[O.type],this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:O,response:p})},T.loadtimeout=function(p,_){var O=_.frag,C=O.loader;C&&C.abort(),delete this.loaders[O.type],this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:O})},I}()},"./src/loader/level-details.ts":function(n,i,r){r.r(i),r.d(i,"LevelDetails",function(){return I});var a=r("./src/polyfills/number.ts");function o(T,A){for(var p=0;p<A.length;p++){var _=A[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}function l(T,A,p){return A&&o(T.prototype,A),p&&o(T,p),Object.defineProperty(T,"prototype",{writable:!1}),T}var b=10,I=function(){function T(p){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.dateRanges={},this.url=p}var A=T.prototype;return A.reloaded=function(_){if(!_){this.advanced=!0,this.updated=!0;return}var O=this.lastPartSn-_.lastPartSn,C=this.lastPartIndex-_.lastPartIndex;this.updated=this.endSN!==_.endSN||!!C||!!O,this.advanced=this.endSN>_.endSN||O>0||O===0&&C>0,this.updated||this.advanced?this.misses=Math.floor(_.misses*.6):this.misses=_.misses+1,this.availabilityDelay=_.availabilityDelay},l(T,[{key:"hasProgramDateTime",get:function(){return this.fragments.length?Object(a.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime):!1}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||b}},{key:"drift",get:function(){var _=this.driftEndTime-this.driftStartTime;if(_>0){var O=this.driftEnd-this.driftStart;return O*1e3/_}return 1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var _;return(_=this.partList)!==null&&_!==void 0&&_.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var _;return(_=this.fragments)!==null&&_!==void 0&&_.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var _;return(_=this.partList)!==null&&_!==void 0&&_.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var _;return(_=this.partList)!==null&&_!==void 0&&_.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),T}()},"./src/loader/level-key.ts":function(n,i,r){r.r(i),r.d(i,"LevelKey",function(){return b});var a=r("./node_modules/url-toolkit/src/url-toolkit.js");function o(I,T){for(var A=0;A<T.length;A++){var p=T[A];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(I,p.key,p)}}function l(I,T,A){return T&&o(I.prototype,T),A&&o(I,A),Object.defineProperty(I,"prototype",{writable:!1}),I}var b=function(){I.fromURL=function(A,p){return new I(A,p)},I.fromURI=function(A){return new I(A)};function I(T,A){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,A?this._uri=Object(a.buildAbsoluteURL)(T,A,{alwaysNormalize:!0}):this._uri=T}return l(I,[{key:"uri",get:function(){return this._uri}}]),I}()},"./src/loader/load-stats.ts":function(n,i,r){r.r(i),r.d(i,"LoadStats",function(){return a});var a=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return c});var a=r("./src/polyfills/number.ts"),o=r("./node_modules/url-toolkit/src/url-toolkit.js"),l=r("./src/loader/date-range.ts"),b=r("./src/loader/fragment.ts"),I=r("./src/loader/level-details.ts"),T=r("./src/loader/level-key.ts"),A=r("./src/utils/attr-list.ts"),p=r("./src/utils/logger.ts"),_=r("./src/utils/codecs.ts"),O=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,C=/#EXT-X-MEDIA:(.*)/g,L=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),S=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),u=/\.(mp4|m4s|m4v|m4a)$/i;function s(P){var D,x;return u.test((D=(x=o.parseURL(P))===null||x===void 0?void 0:x.path)!=null?D:"")}var c=function(){function P(){}return P.findGroup=function(x,y){for(var g=0;g<x.length;g++){var m=x[g];if(m.id===y)return m}},P.convertAVC1ToAVCOTI=function(x){var y=x.split(".");if(y.length>2){var g=y.shift()+".";return g+=parseInt(y.shift()).toString(16),g+=("000"+parseInt(y.shift()).toString(16)).slice(-4),g}return x},P.resolve=function(x,y){return o.buildAbsoluteURL(y,x,{alwaysNormalize:!0})},P.parseMasterPlaylist=function(x,y){var g=[],m={},R=!1;O.lastIndex=0;for(var M;(M=O.exec(x))!=null;)if(M[1]){var F=new A.AttrList(M[1]),w={attrs:F,bitrate:F.decimalInteger("AVERAGE-BANDWIDTH")||F.decimalInteger("BANDWIDTH"),name:F.NAME,url:P.resolve(M[2],y)},U=F.decimalResolution("RESOLUTION");U&&(w.width=U.width,w.height=U.height),h((F.CODECS||"").split(/[ ,]+/).filter(function(k){return k}),w),w.videoCodec&&w.videoCodec.indexOf("avc1")!==-1&&(w.videoCodec=P.convertAVC1ToAVCOTI(w.videoCodec)),g.push(w)}else if(M[3]){var B=new A.AttrList(M[3]);B["DATA-ID"]&&(R=!0,m[B["DATA-ID"]]=B)}return{levels:g,sessionData:R?m:null}},P.parseMasterPlaylistMedia=function(x,y,g,m){m===void 0&&(m=[]);var R,M=[],F=0;for(C.lastIndex=0;(R=C.exec(x))!==null;){var w=new A.AttrList(R[1]);if(w.TYPE===g){var U={attrs:w,bitrate:0,id:F++,groupId:w["GROUP-ID"],instreamId:w["INSTREAM-ID"],name:w.NAME||w.LANGUAGE||"",type:g,default:w.bool("DEFAULT"),autoselect:w.bool("AUTOSELECT"),forced:w.bool("FORCED"),lang:w.LANGUAGE,url:w.URI?P.resolve(w.URI,y):""};if(m.length){var B=P.findGroup(m,U.groupId)||m[0];E(U,B,"audioCodec"),E(U,B,"textCodec")}M.push(U)}}return M},P.parseLevelPlaylist=function(x,y,g,m,R){var M=new I.LevelDetails(y),F=M.fragments,w=null,U=0,B=0,k=0,j=0,G=null,N=new b.Fragment(m,y),H,$,z,ee=-1,X=!1;for(L.lastIndex=0,M.m3u8=x;(H=L.exec(x))!==null;){X&&(X=!1,N=new b.Fragment(m,y),N.start=k,N.sn=U,N.cc=j,N.level=g,w&&(N.initSegment=w,N.rawProgramDateTime=w.rawProgramDateTime,w.rawProgramDateTime=null));var te=H[1];if(te){N.duration=parseFloat(te);var se=(" "+H[2]).slice(1);N.title=se||null,N.tagList.push(se?["INF",te,se]:["INF",te])}else if(H[3])Object(a.isFiniteNumber)(N.duration)&&(N.start=k,z&&(N.levelkey=z),N.sn=U,N.level=g,N.cc=j,N.urlId=R,F.push(N),N.relurl=(" "+H[3]).slice(1),f(N,G),G=N,k+=N.duration,U++,B=0,X=!0);else if(H[4]){var K=(" "+H[4]).slice(1);G?N.setByteRange(K,G):N.setByteRange(K)}else if(H[5])N.rawProgramDateTime=(" "+H[5]).slice(1),N.tagList.push(["PROGRAM-DATE-TIME",N.rawProgramDateTime]),ee===-1&&(ee=F.length);else{if(H=H[0].match(S),!H){p.logger.warn("No matches on slow regex match for level playlist!");continue}for($=1;$<H.length&&typeof H[$]=="undefined";$++);var W=(" "+H[$]).slice(1),V=(" "+H[$+1]).slice(1),Q=H[$+2]?(" "+H[$+2]).slice(1):"";switch(W){case"PLAYLIST-TYPE":M.type=V.toUpperCase();break;case"MEDIA-SEQUENCE":U=M.startSN=parseInt(V);break;case"SKIP":{var Y=new A.AttrList(V),Z=Y.decimalInteger("SKIPPED-SEGMENTS");if(Object(a.isFiniteNumber)(Z)){M.skippedSegments=Z;for(var ne=Z;ne--;)F.unshift(null);U+=Z}var q=Y.enumeratedString("RECENTLY-REMOVED-DATERANGES");q&&(M.recentlyRemovedDateranges=q.split("	"));break}case"TARGETDURATION":M.targetduration=parseFloat(V);break;case"VERSION":M.version=parseInt(V);break;case"EXTM3U":break;case"ENDLIST":M.live=!1;break;case"#":(V||Q)&&N.tagList.push(Q?[V,Q]:[V]);break;case"DISCONTINUITY":j++,N.tagList.push(["DIS"]);break;case"GAP":N.tagList.push([W]);break;case"BITRATE":N.tagList.push([W,V]);break;case"DATERANGE":{var re=new A.AttrList(V),J=new l.DateRange(re,M.dateRanges[re.ID]);J.isValid||M.skippedSegments?M.dateRanges[J.id]=J:p.logger.warn('Ignoring invalid DATERANGE tag: "'+V+'"'),N.tagList.push(["EXT-X-DATERANGE",V]);break}case"DISCONTINUITY-SEQUENCE":j=parseInt(V);break;case"KEY":{var le,oe=new A.AttrList(V),ue=oe.enumeratedString("METHOD"),ce=oe.URI,ve=oe.hexadecimalInteger("IV"),me=oe.enumeratedString("KEYFORMATVERSIONS"),he=oe.enumeratedString("KEYID"),pe=(le=oe.enumeratedString("KEYFORMAT"))!=null?le:"identity",be=["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"];if(be.indexOf(pe)>-1){p.logger.warn("Keyformat "+pe+" is not supported from the manifest");continue}else if(pe!=="identity")continue;ue&&(z=T.LevelKey.fromURL(y,ce),ce&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(ue)>=0&&(z.method=ue,z.keyFormat=pe,he&&(z.keyID=he),me&&(z.keyFormatVersions=me),z.iv=ve));break}case"START":{var Ue=new A.AttrList(V),Oe=Ue.decimalFloatingPoint("TIME-OFFSET");Object(a.isFiniteNumber)(Oe)&&(M.startTimeOffset=Oe);break}case"MAP":{var Re=new A.AttrList(V);if(N.duration){var ke=new b.Fragment(m,y);d(ke,Re,g,z),w=ke,N.initSegment=w,w.rawProgramDateTime&&!N.rawProgramDateTime&&(N.rawProgramDateTime=w.rawProgramDateTime)}else d(N,Re,g,z),w=N,X=!0;break}case"SERVER-CONTROL":{var Se=new A.AttrList(V);M.canBlockReload=Se.bool("CAN-BLOCK-RELOAD"),M.canSkipUntil=Se.optionalFloat("CAN-SKIP-UNTIL",0),M.canSkipDateRanges=M.canSkipUntil>0&&Se.bool("CAN-SKIP-DATERANGES"),M.partHoldBack=Se.optionalFloat("PART-HOLD-BACK",0),M.holdBack=Se.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{var Pe=new A.AttrList(V);M.partTarget=Pe.decimalFloatingPoint("PART-TARGET");break}case"PART":{var Ie=M.partList;Ie||(Ie=M.partList=[]);var Ve=B>0?Ie[Ie.length-1]:void 0,Ut=B++,kt=new b.Part(new A.AttrList(V),N,y,Ut,Ve);Ie.push(kt),N.duration+=kt.duration;break}case"PRELOAD-HINT":{var Nt=new A.AttrList(V);M.preloadHint=Nt;break}case"RENDITION-REPORT":{var mt=new A.AttrList(V);M.renditionReports=M.renditionReports||[],M.renditionReports.push(mt);break}default:p.logger.warn("line parsed but not handled: "+H);break}}}G&&!G.relurl?(F.pop(),k-=G.duration,M.partList&&(M.fragmentHint=G)):M.partList&&(f(N,G),N.cc=j,M.fragmentHint=N);var nr=F.length,ir=F[0],Kt=F[nr-1];if(k+=M.skippedSegments*M.targetduration,k>0&&nr&&Kt){M.averagetargetduration=k/nr;var Ir=Kt.sn;M.endSN=Ir!=="initSegment"?Ir:0,ir&&(M.startCC=ir.cc,ir.initSegment||M.fragments.every(function(jt){return jt.relurl&&s(jt.relurl)})&&(p.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),N=new b.Fragment(m,y),N.relurl=Kt.relurl,N.level=g,N.sn="initSegment",ir.initSegment=N,M.needSidxRanges=!0))}else M.endSN=0,M.startCC=0;return M.fragmentHint&&(k+=M.fragmentHint.duration),M.totalduration=k,M.endCC=j,ee>0&&v(F,ee),M},P}();function h(P,D){["video","audio","text"].forEach(function(x){var y=P.filter(function(m){return Object(_.isCodecType)(m,x)});if(y.length){var g=y.filter(function(m){return m.lastIndexOf("avc1",0)===0||m.lastIndexOf("mp4a",0)===0});D[x+"Codec"]=g.length>0?g[0]:y[0],P=P.filter(function(m){return y.indexOf(m)===-1})}}),D.unknownCodecs=P}function E(P,D,x){var y=D[x];y&&(P[x]=y)}function v(P,D){for(var x=P[D],y=D;y--;){var g=P[y];if(!g)return;g.programDateTime=x.programDateTime-g.duration*1e3,x=g}}function f(P,D){P.rawProgramDateTime?P.programDateTime=Date.parse(P.rawProgramDateTime):D!=null&&D.programDateTime&&(P.programDateTime=D.endProgramDateTime),Object(a.isFiniteNumber)(P.programDateTime)||(P.programDateTime=null,P.rawProgramDateTime=null)}function d(P,D,x,y){P.relurl=D.URI,D.BYTERANGE&&P.setByteRange(D.BYTERANGE),P.level=x,P.sn="initSegment",y&&(P.levelkey=y),P.initSegment=null}},"./src/loader/playlist-loader.ts":function(n,i,r){r.r(i);var a=r("./src/polyfills/number.ts"),o=r("./src/events.ts"),l=r("./src/errors.ts"),b=r("./src/utils/logger.ts"),I=r("./src/utils/mp4-tools.ts"),T=r("./src/loader/m3u8-parser.ts"),A=r("./src/types/loader.ts"),p=r("./src/utils/attr-list.ts");function _(L){var S=L.type;switch(S){case A.PlaylistContextType.AUDIO_TRACK:return A.PlaylistLevelType.AUDIO;case A.PlaylistContextType.SUBTITLE_TRACK:return A.PlaylistLevelType.SUBTITLE;default:return A.PlaylistLevelType.MAIN}}function O(L,S){var u=L.url;return(u===void 0||u.indexOf("data:")===0)&&(u=S.url),u}var C=function(){function L(u){this.hls=void 0,this.loaders=Object.create(null),this.hls=u,this.registerListeners()}var S=L.prototype;return S.registerListeners=function(){var s=this.hls;s.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),s.on(o.Events.LEVEL_LOADING,this.onLevelLoading,this),s.on(o.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),s.on(o.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},S.unregisterListeners=function(){var s=this.hls;s.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),s.off(o.Events.LEVEL_LOADING,this.onLevelLoading,this),s.off(o.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),s.off(o.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},S.createInternalLoader=function(s){var c=this.hls.config,h=c.pLoader,E=c.loader,v=h||E,f=new v(c);return s.loader=f,this.loaders[s.type]=f,f},S.getInternalLoader=function(s){return this.loaders[s.type]},S.resetInternalLoader=function(s){this.loaders[s]&&delete this.loaders[s]},S.destroyInternalLoaders=function(){for(var s in this.loaders){var c=this.loaders[s];c&&c.destroy(),this.resetInternalLoader(s)}},S.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},S.onManifestLoading=function(s,c){var h=c.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:A.PlaylistContextType.MANIFEST,url:h,deliveryDirectives:null})},S.onLevelLoading=function(s,c){var h=c.id,E=c.level,v=c.url,f=c.deliveryDirectives;this.load({id:h,groupId:null,level:E,responseType:"text",type:A.PlaylistContextType.LEVEL,url:v,deliveryDirectives:f})},S.onAudioTrackLoading=function(s,c){var h=c.id,E=c.groupId,v=c.url,f=c.deliveryDirectives;this.load({id:h,groupId:E,level:null,responseType:"text",type:A.PlaylistContextType.AUDIO_TRACK,url:v,deliveryDirectives:f})},S.onSubtitleTrackLoading=function(s,c){var h=c.id,E=c.groupId,v=c.url,f=c.deliveryDirectives;this.load({id:h,groupId:E,level:null,responseType:"text",type:A.PlaylistContextType.SUBTITLE_TRACK,url:v,deliveryDirectives:f})},S.load=function(s){var c,h=this.hls.config,E=this.getInternalLoader(s);if(E){var v=E.context;if(v&&v.url===s.url){b.logger.trace("[playlist-loader]: playlist request ongoing");return}b.logger.log("[playlist-loader]: aborting previous loader for type: "+s.type),E.abort()}var f,d,P,D;switch(s.type){case A.PlaylistContextType.MANIFEST:f=h.manifestLoadingMaxRetry,d=h.manifestLoadingTimeOut,P=h.manifestLoadingRetryDelay,D=h.manifestLoadingMaxRetryTimeout;break;case A.PlaylistContextType.LEVEL:case A.PlaylistContextType.AUDIO_TRACK:case A.PlaylistContextType.SUBTITLE_TRACK:f=0,d=h.levelLoadingTimeOut;break;default:f=h.levelLoadingMaxRetry,d=h.levelLoadingTimeOut,P=h.levelLoadingRetryDelay,D=h.levelLoadingMaxRetryTimeout;break}if(E=this.createInternalLoader(s),(c=s.deliveryDirectives)!==null&&c!==void 0&&c.part){var x;if(s.type===A.PlaylistContextType.LEVEL&&s.level!==null?x=this.hls.levels[s.level].details:s.type===A.PlaylistContextType.AUDIO_TRACK&&s.id!==null?x=this.hls.audioTracks[s.id].details:s.type===A.PlaylistContextType.SUBTITLE_TRACK&&s.id!==null&&(x=this.hls.subtitleTracks[s.id].details),x){var y=x.partTarget,g=x.targetduration;y&&g&&(d=Math.min(Math.max(y*3,g*.8)*1e3,d))}}var m={timeout:d,maxRetry:f,retryDelay:P,maxRetryDelay:D,highWaterMark:0},R={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};E.load(s,m,R)},S.loadsuccess=function(s,c,h,E){if(E===void 0&&(E=null),h.isSidxRequest){this.handleSidxRequest(s,h),this.handlePlaylistLoaded(s,c,h,E);return}this.resetInternalLoader(h.type);var v=s.data;if(v.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(s,h,"no EXTM3U delimiter",E);return}c.parsing.start=performance.now(),v.indexOf("#EXTINF:")>0||v.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(s,c,h,E):this.handleMasterPlaylist(s,c,h,E)},S.loaderror=function(s,c,h){h===void 0&&(h=null),this.handleNetworkError(c,h,!1,s)},S.loadtimeout=function(s,c,h){h===void 0&&(h=null),this.handleNetworkError(c,h,!0)},S.handleMasterPlaylist=function(s,c,h,E){var v=this.hls,f=s.data,d=O(s,h),P=T.default.parseMasterPlaylist(f,d),D=P.levels,x=P.sessionData;if(!D.length){this.handleManifestParsingError(s,h,"no level found in manifest",E);return}var y=D.map(function(w){return{id:w.attrs.AUDIO,audioCodec:w.audioCodec}}),g=D.map(function(w){return{id:w.attrs.SUBTITLES,textCodec:w.textCodec}}),m=T.default.parseMasterPlaylistMedia(f,d,"AUDIO",y),R=T.default.parseMasterPlaylistMedia(f,d,"SUBTITLES",g),M=T.default.parseMasterPlaylistMedia(f,d,"CLOSED-CAPTIONS");if(m.length){var F=m.some(function(w){return!w.url});!F&&D[0].audioCodec&&!D[0].attrs.AUDIO&&(b.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new p.AttrList({}),bitrate:0,url:""}))}v.trigger(o.Events.MANIFEST_LOADED,{levels:D,audioTracks:m,subtitles:R,captions:M,url:d,stats:c,networkDetails:E,sessionData:x})},S.handleTrackOrLevelPlaylist=function(s,c,h,E){var v=this.hls,f=h.id,d=h.level,P=h.type,D=O(s,h),x=Object(a.isFiniteNumber)(f)?f:0,y=Object(a.isFiniteNumber)(d)?d:x,g=_(h),m=T.default.parseLevelPlaylist(s.data,D,y,g,x);if(!m.fragments.length){v.trigger(o.Events.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:D,reason:"no fragments found in level",level:typeof h.level=="number"?h.level:void 0});return}if(P===A.PlaylistContextType.MANIFEST){var R={attrs:new p.AttrList({}),bitrate:0,details:m,name:"",url:D};v.trigger(o.Events.MANIFEST_LOADED,{levels:[R],audioTracks:[],url:D,stats:c,networkDetails:E,sessionData:null})}if(c.parsing.end=performance.now(),m.needSidxRanges){var M,F=(M=m.fragments[0].initSegment)===null||M===void 0?void 0:M.url;this.load({url:F,isSidxRequest:!0,type:P,level:d,levelDetails:m,id:f,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null});return}h.levelDetails=m,this.handlePlaylistLoaded(s,c,h,E)},S.handleSidxRequest=function(s,c){var h=Object(I.parseSegmentIndex)(new Uint8Array(s.data));if(!!h){var E=h.references,v=c.levelDetails;E.forEach(function(f,d){var P=f.info,D=v.fragments[d];D.byteRange.length===0&&D.setByteRange(String(1+P.end-P.start)+"@"+String(P.start)),D.initSegment&&D.initSegment.setByteRange(String(h.moovEndOffset)+"@0")})}},S.handleManifestParsingError=function(s,c,h,E){this.hls.trigger(o.Events.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:c.type===A.PlaylistContextType.MANIFEST,url:s.url,reason:h,response:s,context:c,networkDetails:E})},S.handleNetworkError=function(s,c,h,E){h===void 0&&(h=!1),b.logger.warn("[playlist-loader]: A network "+(h?"timeout":"error")+" occurred while loading "+s.type+" level: "+s.level+" id: "+s.id+' group-id: "'+s.groupId+'"');var v=l.ErrorDetails.UNKNOWN,f=!1,d=this.getInternalLoader(s);switch(s.type){case A.PlaylistContextType.MANIFEST:v=h?l.ErrorDetails.MANIFEST_LOAD_TIMEOUT:l.ErrorDetails.MANIFEST_LOAD_ERROR,f=!0;break;case A.PlaylistContextType.LEVEL:v=h?l.ErrorDetails.LEVEL_LOAD_TIMEOUT:l.ErrorDetails.LEVEL_LOAD_ERROR,f=!1;break;case A.PlaylistContextType.AUDIO_TRACK:v=h?l.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,f=!1;break;case A.PlaylistContextType.SUBTITLE_TRACK:v=h?l.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:l.ErrorDetails.SUBTITLE_LOAD_ERROR,f=!1;break}d&&this.resetInternalLoader(s.type);var P={type:l.ErrorTypes.NETWORK_ERROR,details:v,fatal:f,url:s.url,loader:d,context:s,networkDetails:c};E&&(P.response=E),this.hls.trigger(o.Events.ERROR,P)},S.handlePlaylistLoaded=function(s,c,h,E){var v=h.type,f=h.level,d=h.id,P=h.groupId,D=h.loader,x=h.levelDetails,y=h.deliveryDirectives;if(!(x!=null&&x.targetduration)){this.handleManifestParsingError(s,h,"invalid target duration",E);return}if(!!D)switch(x.live&&(D.getCacheAge&&(x.ageHeader=D.getCacheAge()||0),(!D.getCacheAge||isNaN(x.ageHeader))&&(x.ageHeader=0)),v){case A.PlaylistContextType.MANIFEST:case A.PlaylistContextType.LEVEL:this.hls.trigger(o.Events.LEVEL_LOADED,{details:x,level:f||0,id:d||0,stats:c,networkDetails:E,deliveryDirectives:y});break;case A.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(o.Events.AUDIO_TRACK_LOADED,{details:x,id:d||0,groupId:P||"",stats:c,networkDetails:E,deliveryDirectives:y});break;case A.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(o.Events.SUBTITLE_TRACK_LOADED,{details:x,id:d||0,groupId:P||"",stats:c,networkDetails:E,deliveryDirectives:y});break}},L}();i.default=C},"./src/polyfills/number.ts":function(n,i,r){r.r(i),r.d(i,"isFiniteNumber",function(){return a}),r.d(i,"MAX_SAFE_INTEGER",function(){return o});var a=Number.isFinite||function(l){return typeof l=="number"&&isFinite(l)},o=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(n,i,r){r.r(i);var a=function(){function o(){}return o.getSilentFrame=function(b,I){switch(b){case"mp4a.40.2":if(I===1)return new Uint8Array([0,200,0,128,35,128]);if(I===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(I===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(I===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(I===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(I===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(I===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(I===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(I===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}},o}();i.default=a},"./src/remux/mp4-generator.ts":function(n,i,r){r.r(i);var a=Math.pow(2,32)-1,o=function(){function l(){}return l.init=function(){l.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var I;for(I in l.types)l.types.hasOwnProperty(I)&&(l.types[I]=[I.charCodeAt(0),I.charCodeAt(1),I.charCodeAt(2),I.charCodeAt(3)]);var T=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);l.HDLR_TYPES={video:T,audio:A};var p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),_=new Uint8Array([0,0,0,0,0,0,0,0]);l.STTS=l.STSC=l.STCO=_,l.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),l.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),l.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),l.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var O=new Uint8Array([105,115,111,109]),C=new Uint8Array([97,118,99,49]),L=new Uint8Array([0,0,0,1]);l.FTYP=l.box(l.types.ftyp,O,L,O,C),l.DINF=l.box(l.types.dinf,l.box(l.types.dref,p))},l.box=function(I){for(var T=8,A=arguments.length,p=new Array(A>1?A-1:0),_=1;_<A;_++)p[_-1]=arguments[_];for(var O=p.length,C=O;O--;)T+=p[O].byteLength;var L=new Uint8Array(T);for(L[0]=T>>24&255,L[1]=T>>16&255,L[2]=T>>8&255,L[3]=T&255,L.set(I,4),O=0,T=8;O<C;O++)L.set(p[O],T),T+=p[O].byteLength;return L},l.hdlr=function(I){return l.box(l.types.hdlr,l.HDLR_TYPES[I])},l.mdat=function(I){return l.box(l.types.mdat,I)},l.mdhd=function(I,T){T*=I;var A=Math.floor(T/(a+1)),p=Math.floor(T%(a+1));return l.box(l.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,I>>24&255,I>>16&255,I>>8&255,I&255,A>>24,A>>16&255,A>>8&255,A&255,p>>24,p>>16&255,p>>8&255,p&255,85,196,0,0]))},l.mdia=function(I){return l.box(l.types.mdia,l.mdhd(I.timescale,I.duration),l.hdlr(I.type),l.minf(I))},l.mfhd=function(I){return l.box(l.types.mfhd,new Uint8Array([0,0,0,0,I>>24,I>>16&255,I>>8&255,I&255]))},l.minf=function(I){return I.type==="audio"?l.box(l.types.minf,l.box(l.types.smhd,l.SMHD),l.DINF,l.stbl(I)):l.box(l.types.minf,l.box(l.types.vmhd,l.VMHD),l.DINF,l.stbl(I))},l.moof=function(I,T,A){return l.box(l.types.moof,l.mfhd(I),l.traf(A,T))},l.moov=function(I){for(var T=I.length,A=[];T--;)A[T]=l.trak(I[T]);return l.box.apply(null,[l.types.moov,l.mvhd(I[0].timescale,I[0].duration)].concat(A).concat(l.mvex(I)))},l.mvex=function(I){for(var T=I.length,A=[];T--;)A[T]=l.trex(I[T]);return l.box.apply(null,[l.types.mvex].concat(A))},l.mvhd=function(I,T){T*=I;var A=Math.floor(T/(a+1)),p=Math.floor(T%(a+1)),_=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,I>>24&255,I>>16&255,I>>8&255,I&255,A>>24,A>>16&255,A>>8&255,A&255,p>>24,p>>16&255,p>>8&255,p&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return l.box(l.types.mvhd,_)},l.sdtp=function(I){var T=I.samples||[],A=new Uint8Array(4+T.length),p,_;for(p=0;p<T.length;p++)_=T[p].flags,A[p+4]=_.dependsOn<<4|_.isDependedOn<<2|_.hasRedundancy;return l.box(l.types.sdtp,A)},l.stbl=function(I){return l.box(l.types.stbl,l.stsd(I),l.box(l.types.stts,l.STTS),l.box(l.types.stsc,l.STSC),l.box(l.types.stsz,l.STSZ),l.box(l.types.stco,l.STCO))},l.avc1=function(I){var T=[],A=[],p,_,O;for(p=0;p<I.sps.length;p++)_=I.sps[p],O=_.byteLength,T.push(O>>>8&255),T.push(O&255),T=T.concat(Array.prototype.slice.call(_));for(p=0;p<I.pps.length;p++)_=I.pps[p],O=_.byteLength,A.push(O>>>8&255),A.push(O&255),A=A.concat(Array.prototype.slice.call(_));var C=l.box(l.types.avcC,new Uint8Array([1,T[3],T[4],T[5],255,224|I.sps.length].concat(T).concat([I.pps.length]).concat(A))),L=I.width,S=I.height,u=I.pixelRatio[0],s=I.pixelRatio[1];return l.box(l.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,L>>8&255,L&255,S>>8&255,S&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),C,l.box(l.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),l.box(l.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,s>>24,s>>16&255,s>>8&255,s&255])))},l.esds=function(I){var T=I.config.length;return new Uint8Array([0,0,0,0,3,23+T,0,1,0,4,15+T,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([T]).concat(I.config).concat([6,1,2]))},l.mp4a=function(I){var T=I.samplerate;return l.box(l.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,I.channelCount,0,16,0,0,0,0,T>>8&255,T&255,0,0]),l.box(l.types.esds,l.esds(I)))},l.mp3=function(I){var T=I.samplerate;return l.box(l.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,I.channelCount,0,16,0,0,0,0,T>>8&255,T&255,0,0]))},l.stsd=function(I){return I.type==="audio"?I.segmentCodec==="mp3"&&I.codec==="mp3"?l.box(l.types.stsd,l.STSD,l.mp3(I)):l.box(l.types.stsd,l.STSD,l.mp4a(I)):l.box(l.types.stsd,l.STSD,l.avc1(I))},l.tkhd=function(I){var T=I.id,A=I.duration*I.timescale,p=I.width,_=I.height,O=Math.floor(A/(a+1)),C=Math.floor(A%(a+1));return l.box(l.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,T>>24&255,T>>16&255,T>>8&255,T&255,0,0,0,0,O>>24,O>>16&255,O>>8&255,O&255,C>>24,C>>16&255,C>>8&255,C&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,p>>8&255,p&255,0,0,_>>8&255,_&255,0,0]))},l.traf=function(I,T){var A=l.sdtp(I),p=I.id,_=Math.floor(T/(a+1)),O=Math.floor(T%(a+1));return l.box(l.types.traf,l.box(l.types.tfhd,new Uint8Array([0,0,0,0,p>>24,p>>16&255,p>>8&255,p&255])),l.box(l.types.tfdt,new Uint8Array([1,0,0,0,_>>24,_>>16&255,_>>8&255,_&255,O>>24,O>>16&255,O>>8&255,O&255])),l.trun(I,A.length+16+20+8+16+8+8),A)},l.trak=function(I){return I.duration=I.duration||4294967295,l.box(l.types.trak,l.tkhd(I),l.mdia(I))},l.trex=function(I){var T=I.id;return l.box(l.types.trex,new Uint8Array([0,0,0,0,T>>24,T>>16&255,T>>8&255,T&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},l.trun=function(I,T){var A=I.samples||[],p=A.length,_=12+16*p,O=new Uint8Array(_),C,L,S,u,s,c;for(T+=8+_,O.set([0,0,15,1,p>>>24&255,p>>>16&255,p>>>8&255,p&255,T>>>24&255,T>>>16&255,T>>>8&255,T&255],0),C=0;C<p;C++)L=A[C],S=L.duration,u=L.size,s=L.flags,c=L.cts,O.set([S>>>24&255,S>>>16&255,S>>>8&255,S&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,s.degradPrio&240<<8,s.degradPrio&15,c>>>24&255,c>>>16&255,c>>>8&255,c&255],12+16*C);return l.box(l.types.trun,O)},l.initSegment=function(I){l.types||l.init();var T=l.moov(I),A=new Uint8Array(l.FTYP.byteLength+T.byteLength);return A.set(l.FTYP),A.set(T,l.FTYP.byteLength),A},l}();o.types=void 0,o.HDLR_TYPES=void 0,o.STTS=void 0,o.STSC=void 0,o.STCO=void 0,o.STSZ=void 0,o.VMHD=void 0,o.SMHD=void 0,o.STSD=void 0,o.FTYP=void 0,o.DINF=void 0,i.default=o},"./src/remux/mp4-remuxer.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return c}),r.d(i,"normalizePts",function(){return h}),r.d(i,"flushTextTrackMetadataCueSamples",function(){return v}),r.d(i,"flushTextTrackUserdataCueSamples",function(){return f});var a=r("./src/polyfills/number.ts"),o=r("./src/remux/aac-helper.ts"),l=r("./src/remux/mp4-generator.ts"),b=r("./src/events.ts"),I=r("./src/errors.ts"),T=r("./src/utils/logger.ts"),A=r("./src/types/loader.ts"),p=r("./src/utils/timescale-conversion.ts");function _(){return _=Object.assign?Object.assign.bind():function(D){for(var x=1;x<arguments.length;x++){var y=arguments[x];for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(D[g]=y[g])}return D},_.apply(this,arguments)}var O=10*1e3,C=1024,L=1152,S=null,u=null,s=!1,c=function(){function D(y,g,m,R){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=y,this.config=g,this.typeSupported=m,this.ISGenerated=!1,S===null){var M=navigator.userAgent||"",F=M.match(/Chrome\/(\d+)/i);S=F?parseInt(F[1]):0}if(u===null){var w=navigator.userAgent.match(/Safari\/(\d+)/i);u=w?parseInt(w[1]):0}s=!(!!S&&S>=75||!!u&&u>=600)}var x=D.prototype;return x.destroy=function(){},x.resetTimeStamp=function(g){T.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=g},x.resetNextTimestamp=function(){T.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},x.resetInitSegment=function(){T.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},x.getVideoStartPts=function(g){var m=!1,R=g.reduce(function(M,F){var w=F.pts-M;return w<-4294967296?(m=!0,h(M,F.pts)):w>0?M:F.pts},g[0].pts);return m&&T.logger.debug("PTS rollover detected"),R},x.remux=function(g,m,R,M,F,w,U,B){var k,j,G,N,H,$,z=F,ee=F,X=g.pid>-1,te=m.pid>-1,se=m.samples.length,K=g.samples.length>0,W=U&&se>0||se>1,V=(!X||K)&&(!te||W)||this.ISGenerated||U;if(V){this.ISGenerated||(G=this.generateIS(g,m,F));var Q=this.isVideoContiguous,Y=-1,Z;if(W&&(Y=E(m.samples),!Q&&this.config.forceKeyFrameOnDiscontinuity))if($=!0,Y>0){T.logger.warn("[mp4-remuxer]: Dropped "+Y+" out of "+se+" video samples due to a missing keyframe");var ne=this.getVideoStartPts(m.samples);m.samples=m.samples.slice(Y),m.dropped+=Y,ee+=(m.samples[0].pts-ne)/m.inputTimeScale,Z=ee}else Y===-1&&(T.logger.warn("[mp4-remuxer]: No keyframe found out of "+se+" video samples"),$=!1);if(this.ISGenerated){if(K&&W){var q=this.getVideoStartPts(m.samples),re=h(g.samples[0].pts,q)-q,J=re/m.inputTimeScale;z+=Math.max(0,J),ee+=Math.max(0,-J)}if(K){if(g.samplerate||(T.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),G=this.generateIS(g,m,F)),j=this.remuxAudio(g,z,this.isAudioContiguous,w,te||W||B===A.PlaylistLevelType.AUDIO?ee:void 0),W){var le=j?j.endPTS-j.startPTS:0;m.inputTimeScale||(T.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),G=this.generateIS(g,m,F)),k=this.remuxVideo(m,ee,Q,le)}}else W&&(k=this.remuxVideo(m,ee,Q,0));k&&(k.firstKeyFrame=Y,k.independent=Y!==-1,k.firstKeyFramePTS=Z)}}return this.ISGenerated&&(R.samples.length&&(H=v(R,F,this._initPTS,this._initDTS)),M.samples.length&&(N=f(M,F,this._initPTS))),{audio:j,video:k,initSegment:G,independent:$,text:N,id3:H}},x.generateIS=function(g,m,R){var M=g.samples,F=m.samples,w=this.typeSupported,U={},B=!Object(a.isFiniteNumber)(this._initPTS),k="audio/mp4",j,G,N;if(B&&(j=G=1/0),g.config&&M.length){switch(g.timescale=g.samplerate,g.segmentCodec){case"mp3":w.mpeg?(k="audio/mpeg",g.codec=""):w.mp3&&(g.codec="mp3");break}U.audio={id:"audio",container:k,codec:g.codec,initSegment:g.segmentCodec==="mp3"&&w.mpeg?new Uint8Array(0):l.default.initSegment([g]),metadata:{channelCount:g.channelCount}},B&&(N=g.inputTimeScale,j=G=M[0].pts-Math.round(N*R))}if(m.sps&&m.pps&&F.length&&(m.timescale=m.inputTimeScale,U.video={id:"main",container:"video/mp4",codec:m.codec,initSegment:l.default.initSegment([m]),metadata:{width:m.width,height:m.height}},B)){N=m.inputTimeScale;var H=this.getVideoStartPts(F),$=Math.round(N*R);G=Math.min(G,h(F[0].dts,H)-$),j=Math.min(j,H-$)}if(Object.keys(U).length)return this.ISGenerated=!0,B&&(this._initPTS=j,this._initDTS=G),{tracks:U,initPTS:j,timescale:N}},x.remuxVideo=function(g,m,R,M){var F=g.inputTimeScale,w=g.samples,U=[],B=w.length,k=this._initPTS,j=this.nextAvcDts,G=8,N=this.videoSampleDuration,H,$,z=Number.POSITIVE_INFINITY,ee=Number.NEGATIVE_INFINITY,X=0,te=!1;if(!R||j===null){var se=m*F,K=w[0].pts-h(w[0].dts,w[0].pts);j=se-K}for(var W=0;W<B;W++){var V=w[W];if(V.pts=h(V.pts-k,j),V.dts=h(V.dts-k,j),V.dts>V.pts){var Q=18e3;X=Math.max(Math.min(X,V.pts-V.dts),-1*Q)}V.dts<w[W>0?W-1:W].dts&&(te=!0)}te&&w.sort(function(Xn,ys){var $l=Xn.dts-ys.dts,Vl=Xn.pts-ys.pts;return $l||Vl}),H=w[0].dts,$=w[w.length-1].dts;var Y=$-H,Z=Y?Math.round(Y/(B-1)):N||g.inputTimeScale/30;if(X<0){if(X<Z*-2){T.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(p.toMsFromMpegTsClock)(-Z,!0)+" ms");for(var ne=X,q=0;q<B;q++)w[q].dts=ne=Math.max(ne,w[q].pts-Z),w[q].pts=Math.max(ne,w[q].pts)}else{T.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(p.toMsFromMpegTsClock)(X,!0)+" ms to overcome this issue");for(var re=0;re<B;re++)w[re].dts=w[re].dts+X}H=w[0].dts}if(R){var J=H-j,le=J>Z,oe=J<-1;if(le||oe){le?T.logger.warn("AVC: "+Object(p.toMsFromMpegTsClock)(J,!0)+" ms ("+J+"dts) hole between fragments detected, filling it"):T.logger.warn("AVC: "+Object(p.toMsFromMpegTsClock)(-J,!0)+" ms ("+J+"dts) overlapping between fragments detected"),H=j;var ue=w[0].pts-J;w[0].dts=H,w[0].pts=ue,T.logger.log("Video: First PTS/DTS adjusted: "+Object(p.toMsFromMpegTsClock)(ue,!0)+"/"+Object(p.toMsFromMpegTsClock)(H,!0)+", delta: "+Object(p.toMsFromMpegTsClock)(J,!0)+" ms")}}s&&(H=Math.max(0,H));for(var ce=0,ve=0,me=0;me<B;me++){for(var he=w[me],pe=he.units,be=pe.length,Ue=0,Oe=0;Oe<be;Oe++)Ue+=pe[Oe].data.length;ve+=Ue,ce+=be,he.length=Ue,he.dts=Math.max(he.dts,H),he.pts=Math.max(he.pts,he.dts,0),z=Math.min(he.pts,z),ee=Math.max(he.pts,ee)}$=w[B-1].dts;var Re=ve+4*ce+8,ke;try{ke=new Uint8Array(Re)}catch{this.observer.emit(b.Events.ERROR,b.Events.ERROR,{type:I.ErrorTypes.MUX_ERROR,details:I.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Re,reason:"fail allocating video mdat "+Re});return}var Se=new DataView(ke.buffer);Se.setUint32(0,Re),ke.set(l.default.types.mdat,4);for(var Pe=!1,Ie=0;Ie<B;Ie++){for(var Ve=w[Ie],Ut=Ve.units,kt=0,Nt=0,mt=Ut.length;Nt<mt;Nt++){var nr=Ut[Nt],ir=nr.data,Kt=nr.data.byteLength;Se.setUint32(G,Kt),G+=4,ke.set(ir,G),G+=Kt,kt+=4+Kt}if(Ie<B-1)N=w[Ie+1].dts-Ve.dts;else{var Ir=this.config,jt=Ie>0?Ve.dts-w[Ie-1].dts:Z;if(Ir.stretchShortVideoTrack&&this.nextAudioPts!==null){var Kl=Math.floor(Ir.maxBufferHole*F),Yn=(M?z+M*F:this.nextAudioPts)-Ve.pts;Yn>Kl?(N=Yn-jt,N<0?N=jt:Pe=!0,T.logger.log("[mp4-remuxer]: It is approximately "+Yn/90+" ms to the next segment; using duration "+N/90+" ms for the last video frame.")):N=jt}else N=jt}var jl=Math.round(Ve.pts-Ve.dts);U.push(new d(Ve.key,N,kt,jl))}if(U.length&&S&&S<70){var Es=U[0].flags;Es.dependsOn=2,Es.isNonSync=0}console.assert(N!==null,"mp4SampleDuration must be computed"),N=Pe||!N?Z:N,this.nextAvcDts=j=$+N,this.videoSampleDuration=N,this.isVideoContiguous=!0;var Wl=l.default.moof(g.sequenceNumber++,H,_({},g,{samples:U})),Gl="video",Hl={data1:Wl,data2:ke,startPTS:z/F,endPTS:(ee+N)/F,startDTS:H/F,endDTS:j/F,type:Gl,hasAudio:!1,hasVideo:!0,nb:U.length,dropped:g.dropped};return g.samples=[],g.dropped=0,console.assert(ke.length,"MDAT length must not be zero"),Hl},x.remuxAudio=function(g,m,R,M,F){var w=g.inputTimeScale,U=g.samplerate?g.samplerate:w,B=w/U,k=g.segmentCodec==="aac"?C:L,j=k*B,G=this._initPTS,N=g.segmentCodec==="mp3"&&this.typeSupported.mpeg,H=[],$=F!==void 0,z=g.samples,ee=N?0:8,X=this.nextAudioPts||-1,te=m*w;if(this.isAudioContiguous=R=R||z.length&&X>0&&(M&&Math.abs(te-X)<9e3||Math.abs(h(z[0].pts-G,te)-X)<20*j),z.forEach(function(mt){mt.pts=h(mt.pts-G,te)}),!R||X<0){if(z=z.filter(function(mt){return mt.pts>=0}),!z.length)return;F===0?X=0:M&&!$?X=Math.max(0,te):X=z[0].pts}if(g.segmentCodec==="aac")for(var se=this.config.maxAudioFramesDrift,K=0,W=X;K<z.length;K++){var V=z[K],Q=V.pts,Y=Q-W,Z=Math.abs(1e3*Y/w);if(Y<=-se*j&&$)K===0&&(T.logger.warn("Audio frame @ "+(Q/w).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*Y/w)+" ms."),this.nextAudioPts=X=W=Q);else if(Y>=se*j&&Z<O&&$){var ne=Math.round(Y/j);W=Q-ne*j,W<0&&(ne--,W+=j),K===0&&(this.nextAudioPts=X=W),T.logger.warn("[mp4-remuxer]: Injecting "+ne+" audio frame @ "+(W/w).toFixed(3)+"s due to "+Math.round(1e3*Y/w)+" ms gap.");for(var q=0;q<ne;q++){var re=Math.max(W,0),J=o.default.getSilentFrame(g.manifestCodec||g.codec,g.channelCount);J||(T.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),J=V.unit.subarray()),z.splice(K,0,{unit:J,pts:re}),W+=j,K++}}V.pts=W,W+=j}for(var le=null,oe=null,ue,ce=0,ve=z.length;ve--;)ce+=z[ve].unit.byteLength;for(var me=0,he=z.length;me<he;me++){var pe=z[me],be=pe.unit,Ue=pe.pts;if(oe!==null){var Oe=H[me-1];Oe.duration=Math.round((Ue-oe)/B)}else if(R&&g.segmentCodec==="aac"&&(Ue=X),le=Ue,ce>0){ce+=ee;try{ue=new Uint8Array(ce)}catch{this.observer.emit(b.Events.ERROR,b.Events.ERROR,{type:I.ErrorTypes.MUX_ERROR,details:I.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:ce,reason:"fail allocating audio mdat "+ce});return}if(!N){var Re=new DataView(ue.buffer);Re.setUint32(0,ce),ue.set(l.default.types.mdat,4)}}else return;ue.set(be,ee);var ke=be.byteLength;ee+=ke,H.push(new d(!0,k,ke,0)),oe=Ue}var Se=H.length;if(!!Se){var Pe=H[H.length-1];this.nextAudioPts=X=oe+B*Pe.duration;var Ie=N?new Uint8Array(0):l.default.moof(g.sequenceNumber++,le/B,_({},g,{samples:H}));g.samples=[];var Ve=le/w,Ut=X/w,kt="audio",Nt={data1:Ie,data2:ue,startPTS:Ve,endPTS:Ut,startDTS:Ve,endDTS:Ut,type:kt,hasAudio:!0,hasVideo:!1,nb:Se};return this.isAudioContiguous=!0,console.assert(ue.length,"MDAT length must not be zero"),Nt}},x.remuxEmptyAudio=function(g,m,R,M){var F=g.inputTimeScale,w=g.samplerate?g.samplerate:F,U=F/w,B=this.nextAudioPts,k=(B!==null?B:M.startDTS*F)+this._initDTS,j=M.endDTS*F+this._initDTS,G=U*C,N=Math.ceil((j-k)/G),H=o.default.getSilentFrame(g.manifestCodec||g.codec,g.channelCount);if(T.logger.warn("[mp4-remuxer]: remux empty Audio"),!H){T.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}for(var $=[],z=0;z<N;z++){var ee=k+z*G;$.push({unit:H,pts:ee,dts:ee})}return g.samples=$,this.remuxAudio(g,m,R,!1)},D}();function h(D,x){var y;if(x===null)return D;for(x<D?y=-8589934592:y=8589934592;Math.abs(D-x)>4294967296;)D+=y;return D}function E(D){for(var x=0;x<D.length;x++)if(D[x].key)return x;return-1}function v(D,x,y,g){var m=D.samples.length;if(!!m){for(var R=D.inputTimeScale,M=0;M<m;M++){var F=D.samples[M];F.pts=h(F.pts-y,x*R)/R,F.dts=h(F.dts-g,x*R)/R}var w=D.samples;return D.samples=[],{samples:w}}}function f(D,x,y){var g=D.samples.length;if(!!g){for(var m=D.inputTimeScale,R=0;R<g;R++){var M=D.samples[R];M.pts=h(M.pts-y,x*m)/m}D.samples.sort(function(w,U){return w.pts-U.pts});var F=D.samples;return D.samples=[],{samples:F}}}var d=function(x,y,g,m){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=y,this.size=g,this.cts=m,this.flags=new P(x)},P=function(x){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=x?2:1,this.isNonSync=x?0:1}},"./src/remux/passthrough-remuxer.ts":function(n,i,r){r.r(i);var a=r("./src/polyfills/number.ts"),o=r("./src/remux/mp4-remuxer.ts"),l=r("./src/utils/mp4-tools.ts"),b=r("./src/loader/fragment.ts"),I=r("./src/utils/logger.ts"),T=function(){function _(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var O=_.prototype;return O.destroy=function(){},O.resetTimeStamp=function(L){this.initPTS=L,this.lastEndDTS=null},O.resetNextTimestamp=function(){this.lastEndDTS=null},O.resetInitSegment=function(L,S,u){this.audioCodec=S,this.videoCodec=u,this.generateInitSegment(L),this.emitInitSegment=!0},O.generateInitSegment=function(L){var S=this.audioCodec,u=this.videoCodec;if(!L||!L.byteLength){this.initTracks=void 0,this.initData=void 0;return}var s=this.initData=Object(l.parseInitSegment)(L);S||(S=p(s.audio,b.ElementaryStreamTypes.AUDIO)),u||(u=p(s.video,b.ElementaryStreamTypes.VIDEO));var c={};s.audio&&s.video?c.audiovideo={container:"video/mp4",codec:S+","+u,initSegment:L,id:"main"}:s.audio?c.audio={container:"audio/mp4",codec:S,initSegment:L,id:"audio"}:s.video?c.video={container:"video/mp4",codec:u,initSegment:L,id:"main"}:I.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=c},O.remux=function(L,S,u,s,c){var h,E=this.initPTS,v=this.lastEndDTS,f={audio:void 0,video:void 0,text:s,id3:u,initSegment:void 0};Object(a.isFiniteNumber)(v)||(v=this.lastEndDTS=c||0);var d=S.samples;if(!d||!d.length)return f;var P={initPTS:void 0,timescale:1},D=this.initData;if((!D||!D.length)&&(this.generateInitSegment(d),D=this.initData),!D||!D.length)return I.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),f;this.emitInitSegment&&(P.tracks=this.initTracks,this.emitInitSegment=!1),Object(a.isFiniteNumber)(E)||(this.initPTS=P.initPTS=E=A(D,d,v));var x=Object(l.getDuration)(d,D),y=v,g=x+y;Object(l.offsetStartDTS)(D,d,E),x>0?this.lastEndDTS=g:(I.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var m=!!D.audio,R=!!D.video,M="";m&&(M+="audio"),R&&(M+="video");var F={data1:d,startPTS:y,startDTS:y,endPTS:g,endDTS:g,type:M,hasAudio:m,hasVideo:R,nb:1,dropped:0};f.audio=F.type==="audio"?F:void 0,f.video=F.type!=="audio"?F:void 0,f.initSegment=P;var w=(h=this.initPTS)!=null?h:0;return f.id3=Object(o.flushTextTrackMetadataCueSamples)(u,c,w,w),s.samples.length&&(f.text=Object(o.flushTextTrackUserdataCueSamples)(s,c,w)),f},_}(),A=function(O,C,L){return Object(l.getStartDTS)(O,C)-L};function p(_,O){var C=_==null?void 0:_.codec;return C&&C.length>4?C:C==="hvc1"||C==="hev1"?"hvc1.1.c.L120.90":C==="av01"?"av01.0.04M.08":C==="avc1"||O===b.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}i.default=T},"./src/task-loop.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return a});var a=function(){function o(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var l=o.prototype;return l.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},l.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},l.onHandlerDestroyed=function(){},l.hasInterval=function(){return!!this._tickInterval},l.hasNextTick=function(){return!!this._tickTimer},l.setInterval=function(I){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,I),!0)},l.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},l.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},l.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},l.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},l.doTick=function(){},o}()},"./src/types/cmcd.ts":function(n,i,r){r.r(i),r.d(i,"CMCDVersion",function(){return a}),r.d(i,"CMCDObjectType",function(){return o}),r.d(i,"CMCDStreamingFormat",function(){return l}),r.d(i,"CMCDStreamType",function(){return b});var a=1,o;(function(I){I.MANIFEST="m",I.AUDIO="a",I.VIDEO="v",I.MUXED="av",I.INIT="i",I.CAPTION="c",I.TIMED_TEXT="tt",I.KEY="k",I.OTHER="o"})(o||(o={}));var l;(function(I){I.DASH="d",I.HLS="h",I.SMOOTH="s",I.OTHER="o"})(l||(l={}));var b;(function(I){I.VOD="v",I.LIVE="l"})(b||(b={}))},"./src/types/demuxer.ts":function(n,i,r){r.r(i),r.d(i,"MetadataSchema",function(){return a});var a;(function(o){o.audioId3="org.id3",o.dateRange="com.apple.quicktime.HLS",o.emsg="https://aomedia.org/emsg/ID3"})(a||(a={}))},"./src/types/level.ts":function(n,i,r){r.r(i),r.d(i,"HlsSkip",function(){return l}),r.d(i,"getSkipValue",function(){return b}),r.d(i,"HlsUrlParameters",function(){return I}),r.d(i,"Level",function(){return T});function a(A,p){for(var _=0;_<p.length;_++){var O=p[_];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(A,O.key,O)}}function o(A,p,_){return p&&a(A.prototype,p),_&&a(A,_),Object.defineProperty(A,"prototype",{writable:!1}),A}var l;(function(A){A.No="",A.Yes="YES",A.v2="v2"})(l||(l={}));function b(A,p){var _=A.canSkipUntil,O=A.canSkipDateRanges,C=A.endSN,L=p!==void 0?p-C:0;return _&&L<_?O?l.v2:l.Yes:l.No}var I=function(){function A(_,O,C){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=_,this.part=O,this.skip=C}var p=A.prototype;return p.addDirectives=function(O){var C=new self.URL(O);return this.msn!==void 0&&C.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&C.searchParams.set("_HLS_part",this.part.toString()),this.skip&&C.searchParams.set("_HLS_skip",this.skip),C.toString()},A}(),T=function(){function A(p){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[p.url],this.attrs=p.attrs,this.bitrate=p.bitrate,p.details&&(this.details=p.details),this.id=p.id||0,this.name=p.name,this.width=p.width||0,this.height=p.height||0,this.audioCodec=p.audioCodec,this.videoCodec=p.videoCodec,this.unknownCodecs=p.unknownCodecs,this.codecSet=[p.videoCodec,p.audioCodec].filter(function(_){return _}).join(",").replace(/\.[^.,]+/g,"")}return o(A,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(_){var O=_%this.url.length;this._urlId!==O&&(this.details=void 0,this._urlId=O)}}]),A}()},"./src/types/loader.ts":function(n,i,r){r.r(i),r.d(i,"PlaylistContextType",function(){return a}),r.d(i,"PlaylistLevelType",function(){return o});var a;(function(l){l.MANIFEST="manifest",l.LEVEL="level",l.AUDIO_TRACK="audioTrack",l.SUBTITLE_TRACK="subtitleTrack"})(a||(a={}));var o;(function(l){l.MAIN="main",l.AUDIO="audio",l.SUBTITLE="subtitle"})(o||(o={}))},"./src/types/transmuxer.ts":function(n,i,r){r.r(i),r.d(i,"ChunkMetadata",function(){return a});var a=function(b,I,T,A,p,_){A===void 0&&(A=0),p===void 0&&(p=-1),_===void 0&&(_=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=o(),this.buffering={audio:o(),video:o(),audiovideo:o()},this.level=b,this.sn=I,this.id=T,this.size=A,this.part=p,this.partial=_};function o(){return{start:0,executeStart:0,executeEnd:0,end:0}}},"./src/utils/attr-list.ts":function(n,i,r){r.r(i),r.d(i,"AttrList",function(){return l});var a=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,l=function(){function b(T){typeof T=="string"&&(T=b.parseAttrList(T));for(var A in T)T.hasOwnProperty(A)&&(this[A]=T[A])}var I=b.prototype;return I.decimalInteger=function(A){var p=parseInt(this[A],10);return p>Number.MAX_SAFE_INTEGER?1/0:p},I.hexadecimalInteger=function(A){if(this[A]){var p=(this[A]||"0x").slice(2);p=(p.length&1?"0":"")+p;for(var _=new Uint8Array(p.length/2),O=0;O<p.length/2;O++)_[O]=parseInt(p.slice(O*2,O*2+2),16);return _}else return null},I.hexadecimalIntegerAsNumber=function(A){var p=parseInt(this[A],16);return p>Number.MAX_SAFE_INTEGER?1/0:p},I.decimalFloatingPoint=function(A){return parseFloat(this[A])},I.optionalFloat=function(A,p){var _=this[A];return _?parseFloat(_):p},I.enumeratedString=function(A){return this[A]},I.bool=function(A){return this[A]==="YES"},I.decimalResolution=function(A){var p=a.exec(this[A]);if(p!==null)return{width:parseInt(p[1],10),height:parseInt(p[2],10)}},b.parseAttrList=function(A){var p,_={},O='"';for(o.lastIndex=0;(p=o.exec(A))!==null;){var C=p[2];C.indexOf(O)===0&&C.lastIndexOf(O)===C.length-1&&(C=C.slice(1,-1)),_[p[1]]=C}return _},b}()},"./src/utils/binary-search.ts":function(n,i,r){r.r(i);var a={search:function(l,b){for(var I=0,T=l.length-1,A=null,p=null;I<=T;){A=(I+T)/2|0,p=l[A];var _=b(p);if(_>0)I=A+1;else if(_<0)T=A-1;else return p}return null}};i.default=a},"./src/utils/buffer-helper.ts":function(n,i,r){r.r(i),r.d(i,"BufferHelper",function(){return l});var a=r("./src/utils/logger.ts"),o={length:0,start:function(){return 0},end:function(){return 0}},l=function(){function b(){}return b.isBuffered=function(T,A){try{if(T){for(var p=b.getBuffered(T),_=0;_<p.length;_++)if(A>=p.start(_)&&A<=p.end(_))return!0}}catch{}return!1},b.bufferInfo=function(T,A,p){try{if(T){var _=b.getBuffered(T),O=[],C;for(C=0;C<_.length;C++)O.push({start:_.start(C),end:_.end(C)});return this.bufferedInfo(O,A,p)}}catch{}return{len:0,start:A,end:A,nextStart:void 0}},b.bufferedInfo=function(T,A,p){A=Math.max(0,A),T.sort(function(f,d){var P=f.start-d.start;return P||d.end-f.end});var _=[];if(p)for(var O=0;O<T.length;O++){var C=_.length;if(C){var L=_[C-1].end;T[O].start-L<p?T[O].end>L&&(_[C-1].end=T[O].end):_.push(T[O])}else _.push(T[O])}else _=T;for(var S=0,u,s=A,c=A,h=0;h<_.length;h++){var E=_[h].start,v=_[h].end;if(A+p>=E&&A<v)s=E,c=v,S=c-A;else if(A+p<E){u=E;break}}return{len:S,start:s||0,end:c||0,nextStart:u}},b.getBuffered=function(T){try{return T.buffered}catch(A){return a.logger.log("failed to get media.buffered",A),o}},b}()},"./src/utils/cea-608-parser.ts":function(n,i,r){r.r(i),r.d(i,"Row",function(){return c}),r.d(i,"CaptionScreen",function(){return h});var a=r("./src/utils/logger.ts"),o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},l=function(x){var y=x;return o.hasOwnProperty(x)&&(y=o[x]),String.fromCharCode(y)},b=15,I=100,T={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},A={17:2,18:4,21:6,22:8,23:10,19:13,20:15},p={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},_={25:2,26:4,29:6,30:8,31:10,27:13,28:15},O=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],C;(function(D){D[D.ERROR=0]="ERROR",D[D.TEXT=1]="TEXT",D[D.WARNING=2]="WARNING",D[D.INFO=2]="INFO",D[D.DEBUG=3]="DEBUG",D[D.DATA=3]="DATA"})(C||(C={}));var L=function(){function D(){this.time=null,this.verboseLevel=C.ERROR}var x=D.prototype;return x.log=function(g,m){this.verboseLevel>=g&&a.logger.log(this.time+" ["+g+"] "+m)},D}(),S=function(x){for(var y=[],g=0;g<x.length;g++)y.push(x[g].toString(16));return y},u=function(){function D(y,g,m,R,M){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=y||"white",this.underline=g||!1,this.italics=m||!1,this.background=R||"black",this.flash=M||!1}var x=D.prototype;return x.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},x.setStyles=function(g){for(var m=["foreground","underline","italics","background","flash"],R=0;R<m.length;R++){var M=m[R];g.hasOwnProperty(M)&&(this[M]=g[M])}},x.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},x.equals=function(g){return this.foreground===g.foreground&&this.underline===g.underline&&this.italics===g.italics&&this.background===g.background&&this.flash===g.flash},x.copy=function(g){this.foreground=g.foreground,this.underline=g.underline,this.italics=g.italics,this.background=g.background,this.flash=g.flash},x.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},D}(),s=function(){function D(y,g,m,R,M,F){this.uchar=void 0,this.penState=void 0,this.uchar=y||" ",this.penState=new u(g,m,R,M,F)}var x=D.prototype;return x.reset=function(){this.uchar=" ",this.penState.reset()},x.setChar=function(g,m){this.uchar=g,this.penState.copy(m)},x.setPenState=function(g){this.penState.copy(g)},x.equals=function(g){return this.uchar===g.uchar&&this.penState.equals(g.penState)},x.copy=function(g){this.uchar=g.uchar,this.penState.copy(g.penState)},x.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},D}(),c=function(){function D(y){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var g=0;g<I;g++)this.chars.push(new s);this.logger=y,this.pos=0,this.currPenState=new u}var x=D.prototype;return x.equals=function(g){for(var m=!0,R=0;R<I;R++)if(!this.chars[R].equals(g.chars[R])){m=!1;break}return m},x.copy=function(g){for(var m=0;m<I;m++)this.chars[m].copy(g.chars[m])},x.isEmpty=function(){for(var g=!0,m=0;m<I;m++)if(!this.chars[m].isEmpty()){g=!1;break}return g},x.setCursor=function(g){this.pos!==g&&(this.pos=g),this.pos<0?(this.logger.log(C.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>I&&(this.logger.log(C.DEBUG,"Too large cursor position "+this.pos),this.pos=I)},x.moveCursor=function(g){var m=this.pos+g;if(g>1)for(var R=this.pos+1;R<m+1;R++)this.chars[R].setPenState(this.currPenState);this.setCursor(m)},x.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},x.insertChar=function(g){g>=144&&this.backSpace();var m=l(g);if(this.pos>=I){this.logger.log(C.ERROR,"Cannot insert "+g.toString(16)+" ("+m+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(m,this.currPenState),this.moveCursor(1)},x.clearFromPos=function(g){var m;for(m=g;m<I;m++)this.chars[m].reset()},x.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},x.clearToEndOfRow=function(){this.clearFromPos(this.pos)},x.getTextString=function(){for(var g=[],m=!0,R=0;R<I;R++){var M=this.chars[R].uchar;M!==" "&&(m=!1),g.push(M)}return m?"":g.join("")},x.setPenStyles=function(g){this.currPenState.setStyles(g);var m=this.chars[this.pos];m.setPenState(this.currPenState)},D}(),h=function(){function D(y){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var g=0;g<b;g++)this.rows.push(new c(y));this.logger=y,this.currRow=b-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var x=D.prototype;return x.reset=function(){for(var g=0;g<b;g++)this.rows[g].clear();this.currRow=b-1},x.equals=function(g){for(var m=!0,R=0;R<b;R++)if(!this.rows[R].equals(g.rows[R])){m=!1;break}return m},x.copy=function(g){for(var m=0;m<b;m++)this.rows[m].copy(g.rows[m])},x.isEmpty=function(){for(var g=!0,m=0;m<b;m++)if(!this.rows[m].isEmpty()){g=!1;break}return g},x.backSpace=function(){var g=this.rows[this.currRow];g.backSpace()},x.clearToEndOfRow=function(){var g=this.rows[this.currRow];g.clearToEndOfRow()},x.insertChar=function(g){var m=this.rows[this.currRow];m.insertChar(g)},x.setPen=function(g){var m=this.rows[this.currRow];m.setPenStyles(g)},x.moveCursor=function(g){var m=this.rows[this.currRow];m.moveCursor(g)},x.setCursor=function(g){this.logger.log(C.INFO,"setCursor: "+g);var m=this.rows[this.currRow];m.setCursor(g)},x.setPAC=function(g){this.logger.log(C.INFO,"pacData = "+JSON.stringify(g));var m=g.row-1;if(this.nrRollUpRows&&m<this.nrRollUpRows-1&&(m=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==m){for(var R=0;R<b;R++)this.rows[R].clear();var M=this.currRow+1-this.nrRollUpRows,F=this.lastOutputScreen;if(F){var w=F.rows[M].cueStartTime,U=this.logger.time;if(w&&U!==null&&w<U)for(var B=0;B<this.nrRollUpRows;B++)this.rows[m-this.nrRollUpRows+B+1].copy(F.rows[M+B])}}this.currRow=m;var k=this.rows[this.currRow];if(g.indent!==null){var j=g.indent,G=Math.max(j-1,0);k.setCursor(g.indent),g.color=k.chars[G].penState.foreground}var N={foreground:g.color,underline:g.underline,italics:g.italics,background:"black",flash:!1};this.setPen(N)},x.setBkgData=function(g){this.logger.log(C.INFO,"bkgData = "+JSON.stringify(g)),this.backSpace(),this.setPen(g),this.insertChar(32)},x.setRollUpRows=function(g){this.nrRollUpRows=g},x.rollUp=function(){if(this.nrRollUpRows===null){this.logger.log(C.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(C.TEXT,this.getDisplayText());var g=this.currRow+1-this.nrRollUpRows,m=this.rows.splice(g,1)[0];m.clear(),this.rows.splice(this.currRow,0,m),this.logger.log(C.INFO,"Rolling up")},x.getDisplayText=function(g){g=g||!1;for(var m=[],R="",M=-1,F=0;F<b;F++){var w=this.rows[F].getTextString();w&&(M=F+1,g?m.push("Row "+M+": '"+w+"'"):m.push(w.trim()))}return m.length>0&&(g?R="["+m.join(" | ")+"]":R=m.join(`
`)),R},x.getTextAndFormat=function(){return this.rows},D}(),E=function(){function D(y,g,m){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=y,this.outputFilter=g,this.mode=null,this.verbose=0,this.displayedMemory=new h(m),this.nonDisplayedMemory=new h(m),this.lastOutputScreen=new h(m),this.currRollUpRow=this.displayedMemory.rows[b-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=m}var x=D.prototype;return x.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[b-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},x.getHandler=function(){return this.outputFilter},x.setHandler=function(g){this.outputFilter=g},x.setPAC=function(g){this.writeScreen.setPAC(g)},x.setBkgData=function(g){this.writeScreen.setBkgData(g)},x.setMode=function(g){g!==this.mode&&(this.mode=g,this.logger.log(C.INFO,"MODE="+g),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=g)},x.insertChars=function(g){for(var m=0;m<g.length;m++)this.writeScreen.insertChar(g[m]);var R=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(C.INFO,R+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(C.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},x.ccRCL=function(){this.logger.log(C.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},x.ccBS=function(){this.logger.log(C.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},x.ccAOF=function(){},x.ccAON=function(){},x.ccDER=function(){this.logger.log(C.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},x.ccRU=function(g){this.logger.log(C.INFO,"RU("+g+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(g)},x.ccFON=function(){this.logger.log(C.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},x.ccRDC=function(){this.logger.log(C.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},x.ccTR=function(){this.logger.log(C.INFO,"TR"),this.setMode("MODE_TEXT")},x.ccRTD=function(){this.logger.log(C.INFO,"RTD"),this.setMode("MODE_TEXT")},x.ccEDM=function(){this.logger.log(C.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},x.ccCR=function(){this.logger.log(C.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},x.ccENM=function(){this.logger.log(C.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},x.ccEOC=function(){if(this.logger.log(C.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var g=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=g,this.writeScreen=this.nonDisplayedMemory,this.logger.log(C.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},x.ccTO=function(g){this.logger.log(C.INFO,"TO("+g+") - Tab Offset"),this.writeScreen.moveCursor(g)},x.ccMIDROW=function(g){var m={flash:!1};if(m.underline=g%2===1,m.italics=g>=46,m.italics)m.foreground="white";else{var R=Math.floor(g/2)-16,M=["white","green","blue","cyan","red","yellow","magenta"];m.foreground=M[R]}this.logger.log(C.INFO,"MIDROW: "+JSON.stringify(m)),this.writeScreen.setPen(m)},x.outputDataUpdate=function(g){g===void 0&&(g=!1);var m=this.logger.time;m!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=m:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,m,this.lastOutputScreen),g&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:m),this.lastOutputScreen.copy(this.displayedMemory))},x.cueSplitAtTime=function(g){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,g,this.displayedMemory),this.cueStartTime=g))},D}(),v=function(){function D(y,g,m){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var R=new L;this.channels=[null,new E(y,g,R),new E(y+1,m,R)],this.cmdHistory=P(),this.logger=R}var x=D.prototype;return x.getHandler=function(g){return this.channels[g].getHandler()},x.setHandler=function(g,m){this.channels[g].setHandler(m)},x.addData=function(g,m){var R,M,F,w=!1;this.logger.time=g;for(var U=0;U<m.length;U+=2)if(M=m[U]&127,F=m[U+1]&127,!(M===0&&F===0)){if(this.logger.log(C.DATA,"["+S([m[U],m[U+1]])+"] -> ("+S([M,F])+")"),R=this.parseCmd(M,F),R||(R=this.parseMidrow(M,F)),R||(R=this.parsePAC(M,F)),R||(R=this.parseBackgroundAttributes(M,F)),!R&&(w=this.parseChars(M,F),w)){var B=this.currentChannel;if(B&&B>0){var k=this.channels[B];k.insertChars(w)}else this.logger.log(C.WARNING,"No channel found yet. TEXT-MODE?")}!R&&!w&&this.logger.log(C.WARNING,"Couldn't parse cleaned data "+S([M,F])+" orig: "+S([m[U],m[U+1]]))}},x.parseCmd=function(g,m){var R=this.cmdHistory,M=(g===20||g===28||g===21||g===29)&&m>=32&&m<=47,F=(g===23||g===31)&&m>=33&&m<=35;if(!(M||F))return!1;if(d(g,m,R))return f(null,null,R),this.logger.log(C.DEBUG,"Repeated command ("+S([g,m])+") is dropped"),!0;var w=g===20||g===21||g===23?1:2,U=this.channels[w];return g===20||g===21||g===28||g===29?m===32?U.ccRCL():m===33?U.ccBS():m===34?U.ccAOF():m===35?U.ccAON():m===36?U.ccDER():m===37?U.ccRU(2):m===38?U.ccRU(3):m===39?U.ccRU(4):m===40?U.ccFON():m===41?U.ccRDC():m===42?U.ccTR():m===43?U.ccRTD():m===44?U.ccEDM():m===45?U.ccCR():m===46?U.ccENM():m===47&&U.ccEOC():U.ccTO(m-32),f(g,m,R),this.currentChannel=w,!0},x.parseMidrow=function(g,m){var R=0;if((g===17||g===25)&&m>=32&&m<=47){if(g===17?R=1:R=2,R!==this.currentChannel)return this.logger.log(C.ERROR,"Mismatch channel in midrow parsing"),!1;var M=this.channels[R];return M?(M.ccMIDROW(m),this.logger.log(C.DEBUG,"MIDROW ("+S([g,m])+")"),!0):!1}return!1},x.parsePAC=function(g,m){var R,M=this.cmdHistory,F=(g>=17&&g<=23||g>=25&&g<=31)&&m>=64&&m<=127,w=(g===16||g===24)&&m>=64&&m<=95;if(!(F||w))return!1;if(d(g,m,M))return f(null,null,M),!0;var U=g<=23?1:2;m>=64&&m<=95?R=U===1?T[g]:p[g]:R=U===1?A[g]:_[g];var B=this.channels[U];return B?(B.setPAC(this.interpretPAC(R,m)),f(g,m,M),this.currentChannel=U,!0):!1},x.interpretPAC=function(g,m){var R,M={color:null,italics:!1,indent:null,underline:!1,row:g};return m>95?R=m-96:R=m-64,M.underline=(R&1)===1,R<=13?M.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(R/2)]:R<=15?(M.italics=!0,M.color="white"):M.indent=Math.floor((R-16)/2)*4,M},x.parseChars=function(g,m){var R,M=null,F=null;if(g>=25?(R=2,F=g-8):(R=1,F=g),F>=17&&F<=19){var w;F===17?w=m+80:F===18?w=m+112:w=m+144,this.logger.log(C.INFO,"Special char '"+l(w)+"' in channel "+R),M=[w]}else g>=32&&g<=127&&(M=m===0?[g]:[g,m]);if(M){var U=S(M);this.logger.log(C.DEBUG,"Char codes =  "+U.join(",")),f(g,m,this.cmdHistory)}return M},x.parseBackgroundAttributes=function(g,m){var R=(g===16||g===24)&&m>=32&&m<=47,M=(g===23||g===31)&&m>=45&&m<=47;if(!(R||M))return!1;var F,w={};g===16||g===24?(F=Math.floor((m-32)/2),w.background=O[F],m%2===1&&(w.background=w.background+"_semi")):m===45?w.background="transparent":(w.foreground="black",m===47&&(w.underline=!0));var U=g<=23?1:2,B=this.channels[U];return B.setBkgData(w),f(g,m,this.cmdHistory),!0},x.reset=function(){for(var g=0;g<Object.keys(this.channels).length;g++){var m=this.channels[g];m&&m.reset()}this.cmdHistory=P()},x.cueSplitAtTime=function(g){for(var m=0;m<this.channels.length;m++){var R=this.channels[m];R&&R.cueSplitAtTime(g)}},D}();function f(D,x,y){y.a=D,y.b=x}function d(D,x,y){return y.a===D&&y.b===x}function P(){return{a:null,b:null}}i.default=v},"./src/utils/codecs.ts":function(n,i,r){r.r(i),r.d(i,"isCodecType",function(){return o}),r.d(i,"isCodecSupportedInMp4",function(){return l});var a={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function o(b,I){var T=a[I];return!!T&&T[b.slice(0,4)]===!0}function l(b,I){return MediaSource.isTypeSupported((I||"video")+'/mp4;codecs="'+b+'"')}},"./src/utils/cues.ts":function(n,i,r){r.r(i);var a=r("./src/utils/vttparser.ts"),o=r("./src/utils/webvtt-parser.ts"),l=r("./src/utils/texttrack-utils.ts"),b=/\s/,I={newCue:function(A,p,_,O){for(var C=[],L,S,u,s,c,h=self.VTTCue||self.TextTrackCue,E=0;E<O.rows.length;E++)if(L=O.rows[E],u=!0,s=0,c="",!L.isEmpty()){for(var v=0;v<L.chars.length;v++)b.test(L.chars[v].uchar)&&u?s++:(c+=L.chars[v].uchar,u=!1);L.cueStartTime=p,p===_&&(_+=1e-4),s>=16?s--:s++;var f=Object(a.fixLineBreaks)(c.trim()),d=Object(o.generateCueId)(p,_,f);(!A||!A.cues||!A.cues.getCueById(d))&&(S=new h(p,_,f),S.id=d,S.line=E+1,S.align="left",S.position=10+Math.min(80,Math.floor(s*8/32)*10),C.push(S))}return A&&C.length&&(C.sort(function(P,D){return P.line==="auto"||D.line==="auto"?0:P.line>8&&D.line>8?D.line-P.line:P.line-D.line}),C.forEach(function(P){return Object(l.addCueToTrack)(A,P)})),C}};i.default=I},"./src/utils/discontinuities.ts":function(n,i,r){r.r(i),r.d(i,"findFirstFragWithCC",function(){return b}),r.d(i,"shouldAlignOnDiscontinuities",function(){return I}),r.d(i,"findDiscontinuousReferenceFrag",function(){return T}),r.d(i,"adjustSlidingStart",function(){return p}),r.d(i,"alignStream",function(){return _}),r.d(i,"alignPDT",function(){return C}),r.d(i,"alignFragmentByPDTDelta",function(){return L}),r.d(i,"alignMediaPlaylistByPDT",function(){return S});var a=r("./src/polyfills/number.ts"),o=r("./src/utils/logger.ts"),l=r("./src/controller/level-helper.ts");function b(u,s){for(var c=null,h=0,E=u.length;h<E;h++){var v=u[h];if(v&&v.cc===s){c=v;break}}return c}function I(u,s,c){return!!(s.details&&(c.endCC>c.startCC||u&&u.cc<c.startCC))}function T(u,s){var c=u.fragments,h=s.fragments;if(!h.length||!c.length){o.logger.log("No fragments to align");return}var E=b(c,h[0].cc);if(!E||E&&!E.startPTS){o.logger.log("No frag in previous level to align on");return}return E}function A(u,s){if(u){var c=u.start+s;u.start=u.startPTS=c,u.endPTS=c+u.duration}}function p(u,s){for(var c=s.fragments,h=0,E=c.length;h<E;h++)A(c[h],u);s.fragmentHint&&A(s.fragmentHint,u),s.alignedSliding=!0}function _(u,s,c){!s||(O(u,c,s),!c.alignedSliding&&s.details&&C(c,s.details),!c.alignedSliding&&s.details&&!c.skippedSegments&&Object(l.adjustSliding)(s.details,c))}function O(u,s,c){if(I(u,c,s)){var h=T(c.details,s);h&&Object(a.isFiniteNumber)(h.start)&&(o.logger.log("Adjusting PTS using last level due to CC increase within current level "+s.url),p(h.start,s))}}function C(u,s){if(!(!s.fragments.length||!u.hasProgramDateTime||!s.hasProgramDateTime)){var c=s.fragments[0].programDateTime,h=u.fragments[0].programDateTime,E=(h-c)/1e3+s.fragments[0].start;E&&Object(a.isFiniteNumber)(E)&&(o.logger.log("Adjusting PTS using programDateTime delta "+(h-c)+"ms, sliding:"+E.toFixed(3)+" "+u.url+" "),p(E,u))}}function L(u,s){var c=u.programDateTime;if(!!c){var h=(c-s)/1e3;u.start=u.startPTS=h,u.endPTS=h+u.duration}}function S(u,s){if(!(!s.fragments.length||!u.hasProgramDateTime||!s.hasProgramDateTime)){var c=s.fragments[0].programDateTime,h=s.fragments[0].start,E=c-h*1e3;u.fragments.forEach(function(v){L(v,E)}),u.fragmentHint&&L(u.fragmentHint,E),u.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":function(n,i,r){r.r(i);var a=r("./src/utils/ewma.ts"),o=function(){function l(I,T,A){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=A,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new a.default(I),this.fast_=new a.default(T)}var b=l.prototype;return b.update=function(T,A){var p=this.slow_,_=this.fast_;this.slow_.halfLife!==T&&(this.slow_=new a.default(T,p.getEstimate(),p.getTotalWeight())),this.fast_.halfLife!==A&&(this.fast_=new a.default(A,_.getEstimate(),_.getTotalWeight()))},b.sample=function(T,A){T=Math.max(T,this.minDelayMs_);var p=8*A,_=T/1e3,O=p/_;this.fast_.sample(_,O),this.slow_.sample(_,O)},b.canEstimate=function(){var T=this.fast_;return T&&T.getTotalWeight()>=this.minWeight_},b.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},b.destroy=function(){},l}();i.default=o},"./src/utils/ewma.ts":function(n,i,r){r.r(i);var a=function(){function o(b,I,T){I===void 0&&(I=0),T===void 0&&(T=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=b,this.alpha_=b?Math.exp(Math.log(.5)/b):0,this.estimate_=I,this.totalWeight_=T}var l=o.prototype;return l.sample=function(I,T){var A=Math.pow(this.alpha_,I);this.estimate_=T*(1-A)+A*this.estimate_,this.totalWeight_+=I},l.getTotalWeight=function(){return this.totalWeight_},l.getEstimate=function(){if(this.alpha_){var I=1-Math.pow(this.alpha_,this.totalWeight_);if(I)return this.estimate_/I}return this.estimate_},o}();i.default=a},"./src/utils/fetch-loader.ts":function(n,i,r){r.r(i),r.d(i,"fetchSupported",function(){return L});var a=r("./src/polyfills/number.ts"),o=r("./src/loader/load-stats.ts"),l=r("./src/demux/chunk-cache.ts");function b(h,E){h.prototype=Object.create(E.prototype),h.prototype.constructor=h,_(h,E)}function I(h){var E=typeof Map=="function"?new Map:void 0;return I=function(f){if(f===null||!p(f))return f;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(typeof E!="undefined"){if(E.has(f))return E.get(f);E.set(f,d)}function d(){return T(f,arguments,O(this).constructor)}return d.prototype=Object.create(f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),_(d,f)},I(h)}function T(h,E,v){return A()?T=Reflect.construct.bind():T=function(d,P,D){var x=[null];x.push.apply(x,P);var y=Function.bind.apply(d,x),g=new y;return D&&_(g,D.prototype),g},T.apply(null,arguments)}function A(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p(h){return Function.toString.call(h).indexOf("[native code]")!==-1}function _(h,E){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,d){return f.__proto__=d,f},_(h,E)}function O(h){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},O(h)}function C(){return C=Object.assign?Object.assign.bind():function(h){for(var E=1;E<arguments.length;E++){var v=arguments[E];for(var f in v)Object.prototype.hasOwnProperty.call(v,f)&&(h[f]=v[f])}return h},C.apply(this,arguments)}function L(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var S=function(){function h(v){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=v.fetchSetup||s,this.controller=new self.AbortController,this.stats=new o.LoadStats}var E=h.prototype;return E.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},E.abortInternal=function(){var f=this.response;(!f||!f.ok)&&(this.stats.aborted=!0,this.controller.abort())},E.abort=function(){var f;this.abortInternal(),(f=this.callbacks)!==null&&f!==void 0&&f.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},E.load=function(f,d,P){var D=this,x=this.stats;if(x.loading.start)throw new Error("Loader can only be used once.");x.loading.start=self.performance.now();var y=u(f,this.controller.signal),g=P.onProgress,m=f.responseType==="arraybuffer",R=m?"byteLength":"length";this.context=f,this.config=d,this.callbacks=P,this.request=this.fetchSetup(f,y),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){D.abortInternal(),P.onTimeout(x,f,D.response)},d.timeout),self.fetch(this.request).then(function(M){if(D.response=D.loader=M,!M.ok){var F=M.status,w=M.statusText;throw new c(w||"fetch, bad network response",F,M)}return x.loading.first=Math.max(self.performance.now(),x.loading.start),x.total=parseInt(M.headers.get("Content-Length")||"0"),g&&Object(a.isFiniteNumber)(d.highWaterMark)?D.loadProgressively(M,x,f,d.highWaterMark,g):m?M.arrayBuffer():M.text()}).then(function(M){var F=D.response;self.clearTimeout(D.requestTimeout),x.loading.end=Math.max(self.performance.now(),x.loading.first),x.loaded=x.total=M[R];var w={url:F.url,data:M};g&&!Object(a.isFiniteNumber)(d.highWaterMark)&&g(x,f,M,F),P.onSuccess(w,x,f,F)}).catch(function(M){if(self.clearTimeout(D.requestTimeout),!x.aborted){var F=M&&M.code||0,w=M?M.message:null;P.onError({code:F,text:w},f,M?M.details:null)}})},E.getCacheAge=function(){var f=null;if(this.response){var d=this.response.headers.get("age");f=d?parseFloat(d):null}return f},E.loadProgressively=function(f,d,P,D,x){D===void 0&&(D=0);var y=new l.default,g=f.body.getReader(),m=function R(){return g.read().then(function(M){if(M.done)return y.dataLength&&x(d,P,y.flush(),f),Promise.resolve(new ArrayBuffer(0));var F=M.value,w=F.length;return d.loaded+=w,w<D||y.dataLength?(y.push(F),y.dataLength>=D&&x(d,P,y.flush(),f)):x(d,P,F,f),R()}).catch(function(){return Promise.reject()})};return m()},h}();function u(h,E){var v={method:"GET",mode:"cors",credentials:"same-origin",signal:E,headers:new self.Headers(C({},h.headers))};return h.rangeEnd&&v.headers.set("Range","bytes="+h.rangeStart+"-"+String(h.rangeEnd-1)),v}function s(h,E){return new self.Request(h.url,E)}var c=function(h){b(E,h);function E(v,f,d){var P;return P=h.call(this,v)||this,P.code=void 0,P.details=void 0,P.code=f,P.details=d,P}return E}(I(Error));i.default=S},"./src/utils/imsc1-ttml-parser.ts":function(n,i,r){r.r(i),r.d(i,"IMSC1_CODEC",function(){return p}),r.d(i,"parseIMSC1",function(){return L});var a=r("./src/utils/mp4-tools.ts"),o=r("./src/utils/vttparser.ts"),l=r("./src/utils/vttcue.ts"),b=r("./src/demux/id3.ts"),I=r("./src/utils/timescale-conversion.ts"),T=r("./src/utils/webvtt-parser.ts");function A(){return A=Object.assign?Object.assign.bind():function(D){for(var x=1;x<arguments.length;x++){var y=arguments[x];for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(D[g]=y[g])}return D},A.apply(this,arguments)}var p="stpp.ttml.im1t",_=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,O=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,C={left:"start",center:"center",right:"end",start:"start",end:"end"};function L(D,x,y,g,m){var R=Object(a.findBox)(new Uint8Array(D),["mdat"]);if(R.length===0){m(new Error("Could not parse IMSC1 mdat"));return}var M=R.map(function(w){return Object(b.utf8ArrayToStr)(w)}),F=Object(I.toTimescaleFromScale)(x,1,y);try{M.forEach(function(w){return g(S(w,F))})}catch(w){m(w)}}function S(D,x){var y=new DOMParser,g=y.parseFromString(D,"text/xml"),m=g.getElementsByTagName("tt")[0];if(!m)throw new Error("Invalid ttml");var R={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},M=Object.keys(R).reduce(function(k,j){return k[j]=m.getAttribute("ttp:"+j)||R[j],k},{}),F=m.getAttribute("xml:space")!=="preserve",w=s(u(m,"styling","style")),U=s(u(m,"layout","region")),B=u(m,"body","[begin]");return[].map.call(B,function(k){var j=c(k,F);if(!j||!k.hasAttribute("begin"))return null;var G=f(k.getAttribute("begin"),M),N=f(k.getAttribute("dur"),M),H=f(k.getAttribute("end"),M);if(G===null)throw v(k);if(H===null){if(N===null)throw v(k);H=G+N}var $=new l.default(G-x,H-x,j);$.id=Object(T.generateCueId)($.startTime,$.endTime,$.text);var z=U[k.getAttribute("region")],ee=w[k.getAttribute("style")];$.position=10,$.size=80;var X=h(z,ee,w),te=X.textAlign;if(te){var se=C[te];se&&($.lineAlign=se),$.align=te}return A($,X),$}).filter(function(k){return k!==null})}function u(D,x,y){var g=D.getElementsByTagName(x)[0];return g?[].slice.call(g.querySelectorAll(y)):[]}function s(D){return D.reduce(function(x,y){var g=y.getAttribute("xml:id");return g&&(x[g]=y),x},{})}function c(D,x){return[].slice.call(D.childNodes).reduce(function(y,g,m){var R;return g.nodeName==="br"&&m?y+`
`:(R=g.childNodes)!==null&&R!==void 0&&R.length?c(g,x):x?y+g.textContent.trim().replace(/\s+/g," "):y+g.textContent},"")}function h(D,x,y){var g="http://www.w3.org/ns/ttml#styling",m=null,R=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],M=D!=null&&D.hasAttribute("style")?D.getAttribute("style"):null;return M&&y.hasOwnProperty(M)&&(m=y[M]),R.reduce(function(F,w){var U=E(x,g,w)||E(D,g,w)||E(m,g,w);return U&&(F[w]=U),F},{})}function E(D,x,y){return D&&D.hasAttributeNS(x,y)?D.getAttributeNS(x,y):null}function v(D){return new Error("Could not parse ttml timestamp "+D)}function f(D,x){if(!D)return null;var y=Object(o.parseTimeStamp)(D);return y===null&&(_.test(D)?y=d(D,x):O.test(D)&&(y=P(D,x))),y}function d(D,x){var y=_.exec(D),g=(y[4]|0)+(y[5]|0)/x.subFrameRate;return(y[1]|0)*3600+(y[2]|0)*60+(y[3]|0)+g/x.frameRate}function P(D,x){var y=O.exec(D),g=Number(y[1]),m=y[2];switch(m){case"h":return g*3600;case"m":return g*60;case"ms":return g*1e3;case"f":return g/x.frameRate;case"t":return g/x.tickRate}return g}},"./src/utils/logger.ts":function(n,i,r){r.r(i),r.d(i,"enableLogs",function(){return T}),r.d(i,"logger",function(){return A});var a=function(){},o={trace:a,debug:a,log:a,warn:a,info:a,error:a},l=o;function b(p){var _=self.console[p];return _?_.bind(self.console,"["+p+"] >"):a}function I(p){for(var _=arguments.length,O=new Array(_>1?_-1:0),C=1;C<_;C++)O[C-1]=arguments[C];O.forEach(function(L){l[L]=p[L]?p[L].bind(p):b(L)})}function T(p){if(self.console&&p===!0||typeof p=="object"){I(p,"debug","log","info","warn","error");try{l.log()}catch{l=o}}else l=o}var A=l},"./src/utils/mediakeys-helper.ts":function(n,i,r){r.r(i),r.d(i,"KeySystems",function(){return a}),r.d(i,"requestMediaKeySystemAccess",function(){return o});var a;(function(l){l.WIDEVINE="com.widevine.alpha",l.PLAYREADY="com.microsoft.playready"})(a||(a={}));var o=function(){return typeof self!="undefined"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}()},"./src/utils/mediasource-helper.ts":function(n,i,r){r.r(i),r.d(i,"getMediaSource",function(){return a});function a(){return self.MediaSource||self.WebKitMediaSource}},"./src/utils/mp4-tools.ts":function(n,i,r){r.r(i),r.d(i,"RemuxerTrackIdConfig",function(){return T}),r.d(i,"bin2str",function(){return A}),r.d(i,"readUint16",function(){return p}),r.d(i,"readUint32",function(){return _}),r.d(i,"readSint32",function(){return O}),r.d(i,"writeUint32",function(){return C}),r.d(i,"findBox",function(){return L}),r.d(i,"parseSegmentIndex",function(){return S}),r.d(i,"parseInitSegment",function(){return u}),r.d(i,"getStartDTS",function(){return s}),r.d(i,"getDuration",function(){return c}),r.d(i,"computeRawDurationFromSamples",function(){return h}),r.d(i,"offsetStartDTS",function(){return E}),r.d(i,"segmentValidRange",function(){return v}),r.d(i,"appendUint8Array",function(){return f}),r.d(i,"parseSamples",function(){return d}),r.d(i,"parseSEIMessageFromNALu",function(){return x}),r.d(i,"parseEmsg",function(){return g});var a=r("./src/utils/typed-array.ts"),o=r("./src/loader/fragment.ts"),l=r("./src/demux/id3.ts"),b=Math.pow(2,32)-1,I=[].push,T={video:1,audio:2,id3:3,text:4};function A(m){return String.fromCharCode.apply(null,m)}function p(m,R){var M=m[R]<<8|m[R+1];return M<0?65536+M:M}function _(m,R){var M=O(m,R);return M<0?4294967296+M:M}function O(m,R){return m[R]<<24|m[R+1]<<16|m[R+2]<<8|m[R+3]}function C(m,R,M){m[R]=M>>24,m[R+1]=M>>16&255,m[R+2]=M>>8&255,m[R+3]=M&255}function L(m,R){var M=[];if(!R.length)return M;for(var F=m.byteLength,w=0;w<F;){var U=_(m,w),B=A(m.subarray(w+4,w+8)),k=U>1?w+U:F;if(B===R[0])if(R.length===1)M.push(m.subarray(w+8,k));else{var j=L(m.subarray(w+8,k),R.slice(1));j.length&&I.apply(M,j)}w=k}return M}function S(m){var R=L(m,["moov"]),M=R[0],F=M?M.length:null,w=L(m,["sidx"]);if(!w||!w[0])return null;var U=[],B=w[0],k=B[0],j=8,G=_(B,j);j+=4;var N=0,H=0;k===0?j+=8:j+=16,j+=2;var $=B.length+H,z=p(B,j);j+=2;for(var ee=0;ee<z;ee++){var X=j,te=_(B,X);X+=4;var se=te&2147483647,K=(te&2147483648)>>>31;if(K===1)return console.warn("SIDX has hierarchical references (not supported)"),null;var W=_(B,X);X+=4,U.push({referenceSize:se,subsegmentDuration:W,info:{duration:W/G,start:$,end:$+se-1}}),$+=se,X+=4,j=X}return{earliestPresentationTime:N,timescale:G,version:k,referencesCount:z,references:U,moovEndOffset:F}}function u(m){for(var R=[],M=L(m,["moov","trak"]),F=0;F<M.length;F++){var w=M[F],U=L(w,["tkhd"])[0];if(U){var B=U[0],k=B===0?12:20,j=_(U,k),G=L(w,["mdia","mdhd"])[0];if(G){B=G[0],k=B===0?12:20;var N=_(G,k),H=L(w,["mdia","hdlr"])[0];if(H){var $=A(H.subarray(8,12)),z={soun:o.ElementaryStreamTypes.AUDIO,vide:o.ElementaryStreamTypes.VIDEO}[$];if(z){var ee=L(w,["mdia","minf","stbl","stsd"])[0],X=void 0;ee&&(X=A(ee.subarray(12,16))),R[j]={timescale:N,type:z},R[z]={timescale:N,id:j,codec:X}}}}}}var te=L(m,["moov","mvex","trex"]);return te.forEach(function(se){var K=_(se,4),W=R[K];W&&(W.default={duration:_(se,12),flags:_(se,20)})}),R}function s(m,R){return L(R,["moof","traf"]).reduce(function(M,F){var w=L(F,["tfdt"])[0],U=w[0],B=L(F,["tfhd"]).reduce(function(k,j){var G=_(j,4),N=m[G];if(N){var H=_(w,4);U===1&&(H*=Math.pow(2,32),H+=_(w,8));var $=N.timescale||9e4,z=H/$;if(isFinite(z)&&(k===null||z<k))return z}return k},null);return B!==null&&isFinite(B)&&(M===null||B<M)?B:M},null)||0}function c(m,R){for(var M=0,F=0,w=0,U=L(m,["moof","traf"]),B=0;B<U.length;B++){var k=U[B],j=L(k,["tfhd"])[0],G=_(j,4),N=R[G];if(!!N){var H=N.default,$=_(j,0)|(H==null?void 0:H.flags),z=H==null?void 0:H.duration;$&8&&($&2?z=_(j,12):z=_(j,8));for(var ee=N.timescale||9e4,X=L(k,["trun"]),te=0;te<X.length;te++){if(M=h(X[te]),!M&&z){var se=_(X[te],4);M=z*se}N.type===o.ElementaryStreamTypes.VIDEO?F+=M/ee:N.type===o.ElementaryStreamTypes.AUDIO&&(w+=M/ee)}}}if(F===0&&w===0){var K=S(m);if(K!=null&&K.references)return K.references.reduce(function(W,V){return W+V.info.duration||0},0)}return F||w}function h(m){var R=_(m,0),M=8;R&1&&(M+=4),R&4&&(M+=4);for(var F=0,w=_(m,4),U=0;U<w;U++){if(R&256){var B=_(m,M);F+=B,M+=4}R&512&&(M+=4),R&1024&&(M+=4),R&2048&&(M+=4)}return F}function E(m,R,M){L(R,["moof","traf"]).forEach(function(F){L(F,["tfhd"]).forEach(function(w){var U=_(w,4),B=m[U];if(!!B){var k=B.timescale||9e4;L(F,["tfdt"]).forEach(function(j){var G=j[0],N=_(j,4);if(G===0)N-=M*k,N=Math.max(N,0),C(j,4,N);else{N*=Math.pow(2,32),N+=_(j,8),N-=M*k,N=Math.max(N,0);var H=Math.floor(N/(b+1)),$=Math.floor(N%(b+1));C(j,4,H),C(j,8,$)}})}})})}function v(m){var R={valid:null,remainder:null},M=L(m,["moof"]);if(M){if(M.length<2)return R.remainder=m,R}else return R;var F=M[M.length-1];return R.valid=Object(a.sliceUint8)(m,0,F.byteOffset-8),R.remainder=Object(a.sliceUint8)(m,F.byteOffset-8),R}function f(m,R){var M=new Uint8Array(m.length+R.length);return M.set(m),M.set(R,m.length),M}function d(m,R){var M=[],F=R.samples,w=R.timescale,U=R.id,B=!1,k=L(F,["moof"]);return k.map(function(j){var G=j.byteOffset-8,N=L(j,["traf"]);N.map(function(H){var $=L(H,["tfdt"]).map(function(z){var ee=z[0],X=_(z,4);return ee===1&&(X*=Math.pow(2,32),X+=_(z,8)),X/w})[0];return $!==void 0&&(m=$),L(H,["tfhd"]).map(function(z){var ee=_(z,4),X=_(z,0)&16777215,te=(X&1)!==0,se=(X&2)!==0,K=(X&8)!==0,W=0,V=(X&16)!==0,Q=0,Y=(X&32)!==0,Z=8;ee===U&&(te&&(Z+=8),se&&(Z+=4),K&&(W=_(z,Z),Z+=4),V&&(Q=_(z,Z),Z+=4),Y&&(Z+=4),R.type==="video"&&(B=P(R.codec)),L(H,["trun"]).map(function(ne){var q=ne[0],re=_(ne,0)&16777215,J=(re&1)!==0,le=0,oe=(re&4)!==0,ue=(re&256)!==0,ce=0,ve=(re&512)!==0,me=0,he=(re&1024)!==0,pe=(re&2048)!==0,be=0,Ue=_(ne,4),Oe=8;J&&(le=_(ne,Oe),Oe+=4),oe&&(Oe+=4);for(var Re=le+G,ke=0;ke<Ue;ke++){if(ue?(ce=_(ne,Oe),Oe+=4):ce=W,ve?(me=_(ne,Oe),Oe+=4):me=Q,he&&(Oe+=4),pe&&(q===0?be=_(ne,Oe):be=O(ne,Oe),Oe+=4),R.type===o.ElementaryStreamTypes.VIDEO)for(var Se=0;Se<me;){var Pe=_(F,Re);Re+=4;var Ie=F[Re]&31;if(D(B,Ie)){var Ve=F.subarray(Re,Re+Pe);x(Ve,m+be/w,M)}Re+=Pe,Se+=Pe+4}m+=ce/w}}))})})}),M}function P(m){if(!m)return!1;var R=m.indexOf("."),M=R<0?m:m.substring(0,R);return M==="hvc1"||M==="hev1"||M==="dvh1"||M==="dvhe"}function D(m,R){return m?R===39||R===40:R===6}function x(m,R,M){var F=y(m),w=0;w++;for(var U=0,B=0,k=!1,j=0;w<F.length;){U=0;do{if(w>=F.length)break;j=F[w++],U+=j}while(j===255);B=0;do{if(w>=F.length)break;j=F[w++],B+=j}while(j===255);var G=F.length-w;if(!k&&U===4&&w<F.length){k=!0;var N=F[w++];if(N===181){var H=p(F,w);if(w+=2,H===49){var $=_(F,w);if(w+=4,$===1195456820){var z=F[w++];if(z===3){var ee=F[w++],X=31&ee,te=64&ee,se=te?2+X*3:0,K=new Uint8Array(se);if(te){K[0]=ee;for(var W=1;W<se;W++)K[W]=F[w++]}M.push({type:z,payloadType:U,pts:R,bytes:K})}}}}}else if(U===5&&B<G){if(k=!0,B>16){for(var V=[],Q=0;Q<16;Q++){var Y=F[w++].toString(16);V.push(Y.length==1?"0"+Y:Y),(Q===3||Q===5||Q===7||Q===9)&&V.push("-")}for(var Z=B-16,ne=new Uint8Array(Z),q=0;q<Z;q++)ne[q]=F[w++];M.push({payloadType:U,pts:R,uuid:V.join(""),userData:Object(l.utf8ArrayToStr)(ne),userDataBytes:ne})}}else if(B<G)w+=B;else if(B>G)break}}function y(m){for(var R=m.byteLength,M=[],F=1;F<R-2;)m[F]===0&&m[F+1]===0&&m[F+2]===3?(M.push(F+2),F+=2):F++;if(M.length===0)return m;var w=R-M.length,U=new Uint8Array(w),B=0;for(F=0;F<w;B++,F++)B===M[0]&&(B++,M.shift()),U[F]=m[B];return U}function g(m){var R=m[0],M="",F="",w=0,U=0,B=0,k=0,j=0,G=0;if(R===0){for(;A(m.subarray(G,G+1))!=="\0";)M+=A(m.subarray(G,G+1)),G+=1;for(M+=A(m.subarray(G,G+1)),G+=1;A(m.subarray(G,G+1))!=="\0";)F+=A(m.subarray(G,G+1)),G+=1;F+=A(m.subarray(G,G+1)),G+=1,w=_(m,12),U=_(m,16),k=_(m,20),j=_(m,24),G=28}else if(R===1){G+=4,w=_(m,G),G+=4;var N=_(m,G);G+=4;var H=_(m,G);for(G+=4,B=Math.pow(2,32)*N+H,Number.isSafeInteger(B)||(B=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),k=_(m,G),G+=4,j=_(m,G),G+=4;A(m.subarray(G,G+1))!=="\0";)M+=A(m.subarray(G,G+1)),G+=1;for(M+=A(m.subarray(G,G+1)),G+=1;A(m.subarray(G,G+1))!=="\0";)F+=A(m.subarray(G,G+1)),G+=1;F+=A(m.subarray(G,G+1)),G+=1}var $=m.subarray(G,m.byteLength);return{schemeIdUri:M,value:F,timeScale:w,presentationTime:B,presentationTimeDelta:U,eventDuration:k,id:j,payload:$}}},"./src/utils/output-filter.ts":function(n,i,r){r.r(i),r.d(i,"default",function(){return a});var a=function(){function o(b,I){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=b,this.trackName=I}var l=o.prototype;return l.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},l.newCue=function(I,T,A){(this.startTime===null||this.startTime>I)&&(this.startTime=I),this.endTime=T,this.screen=A,this.timelineController.createCaptionsTrack(this.trackName)},l.reset=function(){this.cueRanges=[],this.startTime=null},o}()},"./src/utils/texttrack-utils.ts":function(n,i,r){r.r(i),r.d(i,"sendAddTrackEvent",function(){return o}),r.d(i,"addCueToTrack",function(){return l}),r.d(i,"clearCurrentCues",function(){return b}),r.d(i,"removeCuesInRange",function(){return I}),r.d(i,"getCuesInRange",function(){return A});var a=r("./src/utils/logger.ts");function o(p,_){var O;try{O=new Event("addtrack")}catch{O=document.createEvent("Event"),O.initEvent("addtrack",!1,!1)}O.track=p,_.dispatchEvent(O)}function l(p,_){var O=p.mode;if(O==="disabled"&&(p.mode="hidden"),p.cues&&!p.cues.getCueById(_.id))try{if(p.addCue(_),!p.cues.getCueById(_.id))throw new Error("addCue is failed for: "+_)}catch(L){a.logger.debug("[texttrack-utils]: "+L);var C=new self.TextTrackCue(_.startTime,_.endTime,_.text);C.id=_.id,p.addCue(C)}O==="disabled"&&(p.mode=O)}function b(p){var _=p.mode;if(_==="disabled"&&(p.mode="hidden"),p.cues)for(var O=p.cues.length;O--;)p.removeCue(p.cues[O]);_==="disabled"&&(p.mode=_)}function I(p,_,O,C){var L=p.mode;if(L==="disabled"&&(p.mode="hidden"),p.cues&&p.cues.length>0)for(var S=A(p.cues,_,O),u=0;u<S.length;u++)(!C||C(S[u]))&&p.removeCue(S[u]);L==="disabled"&&(p.mode=L)}function T(p,_){if(_<p[0].startTime)return 0;var O=p.length-1;if(_>p[O].endTime)return-1;for(var C=0,L=O;C<=L;){var S=Math.floor((L+C)/2);if(_<p[S].startTime)L=S-1;else if(_>p[S].startTime&&C<O)C=S+1;else return S}return p[C].startTime-_<_-p[L].startTime?C:L}function A(p,_,O){var C=[],L=T(p,_);if(L>-1)for(var S=L,u=p.length;S<u;S++){var s=p[S];if(s.startTime>=_&&s.endTime<=O)C.push(s);else if(s.startTime>O)return C}return C}},"./src/utils/time-ranges.ts":function(n,i,r){r.r(i);var a={toString:function(l){for(var b="",I=l.length,T=0;T<I;T++)b+="["+l.start(T).toFixed(3)+","+l.end(T).toFixed(3)+"]";return b}};i.default=a},"./src/utils/timescale-conversion.ts":function(n,i,r){r.r(i),r.d(i,"toTimescaleFromBase",function(){return o}),r.d(i,"toTimescaleFromScale",function(){return l}),r.d(i,"toMsFromMpegTsClock",function(){return b}),r.d(i,"toMpegTsClockFromTimescale",function(){return I});var a=9e4;function o(T,A,p,_){p===void 0&&(p=1),_===void 0&&(_=!1);var O=T*A*p;return _?Math.round(O):O}function l(T,A,p,_){return p===void 0&&(p=1),_===void 0&&(_=!1),o(T,A,1/p,_)}function b(T,A){return A===void 0&&(A=!1),o(T,1e3,1/a,A)}function I(T,A){return A===void 0&&(A=1),o(T,a,1/A)}},"./src/utils/typed-array.ts":function(n,i,r){r.r(i),r.d(i,"sliceUint8",function(){return a});function a(o,l,b){return Uint8Array.prototype.slice?o.slice(l,b):new Uint8Array(Array.prototype.slice.call(o,l,b))}},"./src/utils/vttcue.ts":function(n,i,r){r.r(i),i.default=function(){if(typeof self!="undefined"&&self.VTTCue)return self.VTTCue;var a=["","lr","rl"],o=["start","middle","end","left","right"];function l(p,_){if(typeof _!="string"||!Array.isArray(p))return!1;var O=_.toLowerCase();return~p.indexOf(O)?O:!1}function b(p){return l(a,p)}function I(p){return l(o,p)}function T(p){for(var _=arguments.length,O=new Array(_>1?_-1:0),C=1;C<_;C++)O[C-1]=arguments[C];for(var L=1;L<arguments.length;L++){var S=arguments[L];for(var u in S)p[u]=S[u]}return p}function A(p,_,O){var C=this,L={enumerable:!0};C.hasBeenReset=!1;var S="",u=!1,s=p,c=_,h=O,E=null,v="",f=!0,d="auto",P="start",D=50,x="middle",y=50,g="middle";Object.defineProperty(C,"id",T({},L,{get:function(){return S},set:function(R){S=""+R}})),Object.defineProperty(C,"pauseOnExit",T({},L,{get:function(){return u},set:function(R){u=!!R}})),Object.defineProperty(C,"startTime",T({},L,{get:function(){return s},set:function(R){if(typeof R!="number")throw new TypeError("Start time must be set to a number.");s=R,this.hasBeenReset=!0}})),Object.defineProperty(C,"endTime",T({},L,{get:function(){return c},set:function(R){if(typeof R!="number")throw new TypeError("End time must be set to a number.");c=R,this.hasBeenReset=!0}})),Object.defineProperty(C,"text",T({},L,{get:function(){return h},set:function(R){h=""+R,this.hasBeenReset=!0}})),Object.defineProperty(C,"region",T({},L,{get:function(){return E},set:function(R){E=R,this.hasBeenReset=!0}})),Object.defineProperty(C,"vertical",T({},L,{get:function(){return v},set:function(R){var M=b(R);if(M===!1)throw new SyntaxError("An invalid or illegal string was specified.");v=M,this.hasBeenReset=!0}})),Object.defineProperty(C,"snapToLines",T({},L,{get:function(){return f},set:function(R){f=!!R,this.hasBeenReset=!0}})),Object.defineProperty(C,"line",T({},L,{get:function(){return d},set:function(R){if(typeof R!="number"&&R!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");d=R,this.hasBeenReset=!0}})),Object.defineProperty(C,"lineAlign",T({},L,{get:function(){return P},set:function(R){var M=I(R);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");P=M,this.hasBeenReset=!0}})),Object.defineProperty(C,"position",T({},L,{get:function(){return D},set:function(R){if(R<0||R>100)throw new Error("Position must be between 0 and 100.");D=R,this.hasBeenReset=!0}})),Object.defineProperty(C,"positionAlign",T({},L,{get:function(){return x},set:function(R){var M=I(R);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");x=M,this.hasBeenReset=!0}})),Object.defineProperty(C,"size",T({},L,{get:function(){return y},set:function(R){if(R<0||R>100)throw new Error("Size must be between 0 and 100.");y=R,this.hasBeenReset=!0}})),Object.defineProperty(C,"align",T({},L,{get:function(){return g},set:function(R){var M=I(R);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");g=M,this.hasBeenReset=!0}})),C.displayState=void 0}return A.prototype.getCueAsHTML=function(){var p=self.WebVTT;return p.convertCueToDOMTree(self,this.text)},A}()},"./src/utils/vttparser.ts":function(n,i,r){r.r(i),r.d(i,"parseTimeStamp",function(){return l}),r.d(i,"fixLineBreaks",function(){return _}),r.d(i,"VTTParser",function(){return O});var a=r("./src/utils/vttcue.ts"),o=function(){function C(){}var L=C.prototype;return L.decode=function(u,s){if(!u)return"";if(typeof u!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(u))},C}();function l(C){function L(u,s,c,h){return(u|0)*3600+(s|0)*60+(c|0)+parseFloat(h||0)}var S=C.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return S?parseFloat(S[2])>59?L(S[2],S[3],0,S[4]):L(S[1],S[2],S[3],S[4]):null}var b=function(){function C(){this.values=Object.create(null)}var L=C.prototype;return L.set=function(u,s){!this.get(u)&&s!==""&&(this.values[u]=s)},L.get=function(u,s,c){return c?this.has(u)?this.values[u]:s[c]:this.has(u)?this.values[u]:s},L.has=function(u){return u in this.values},L.alt=function(u,s,c){for(var h=0;h<c.length;++h)if(s===c[h]){this.set(u,s);break}},L.integer=function(u,s){/^-?\d+$/.test(s)&&this.set(u,parseInt(s,10))},L.percent=function(u,s){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(s)){var c=parseFloat(s);if(c>=0&&c<=100)return this.set(u,c),!0}return!1},C}();function I(C,L,S,u){var s=u?C.split(u):[C];for(var c in s)if(typeof s[c]=="string"){var h=s[c].split(S);if(h.length===2){var E=h[0],v=h[1];L(E,v)}}}var T=new a.default(0,0,""),A=T.align==="middle"?"middle":"center";function p(C,L,S){var u=C;function s(){var E=l(C);if(E===null)throw new Error("Malformed timestamp: "+u);return C=C.replace(/^[^\sa-zA-Z-]+/,""),E}function c(E,v){var f=new b;I(E,function(D,x){var y;switch(D){case"region":for(var g=S.length-1;g>=0;g--)if(S[g].id===x){f.set(D,S[g].region);break}break;case"vertical":f.alt(D,x,["rl","lr"]);break;case"line":y=x.split(","),f.integer(D,y[0]),f.percent(D,y[0])&&f.set("snapToLines",!1),f.alt(D,y[0],["auto"]),y.length===2&&f.alt("lineAlign",y[1],["start",A,"end"]);break;case"position":y=x.split(","),f.percent(D,y[0]),y.length===2&&f.alt("positionAlign",y[1],["start",A,"end","line-left","line-right","auto"]);break;case"size":f.percent(D,x);break;case"align":f.alt(D,x,["start",A,"end","left","right"]);break}},/:/,/\s/),v.region=f.get("region",null),v.vertical=f.get("vertical","");var d=f.get("line","auto");d==="auto"&&T.line===-1&&(d=-1),v.line=d,v.lineAlign=f.get("lineAlign","start"),v.snapToLines=f.get("snapToLines",!0),v.size=f.get("size",100),v.align=f.get("align",A);var P=f.get("position","auto");P==="auto"&&T.position===50&&(P=v.align==="start"||v.align==="left"?0:v.align==="end"||v.align==="right"?100:50),v.position=P}function h(){C=C.replace(/^\s+/,"")}if(h(),L.startTime=s(),h(),C.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+u);C=C.slice(3),h(),L.endTime=s(),h(),c(C,L)}function _(C){return C.replace(/<br(?: \/)?>/gi,`
`)}var O=function(){function C(){this.state="INITIAL",this.buffer="",this.decoder=new o,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var L=C.prototype;return L.parse=function(u){var s=this;u&&(s.buffer+=s.decoder.decode(u,{stream:!0}));function c(){var P=s.buffer,D=0;for(P=_(P);D<P.length&&P[D]!=="\r"&&P[D]!==`
`;)++D;var x=P.slice(0,D);return P[D]==="\r"&&++D,P[D]===`
`&&++D,s.buffer=P.slice(D),x}function h(P){I(P,function(D,x){},/:/)}try{var E="";if(s.state==="INITIAL"){if(!/\r\n|\n/.test(s.buffer))return this;E=c();var v=E.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!v||!v[0])throw new Error("Malformed WebVTT signature.");s.state="HEADER"}for(var f=!1;s.buffer;){if(!/\r\n|\n/.test(s.buffer))return this;switch(f?f=!1:E=c(),s.state){case"HEADER":/:/.test(E)?h(E):E||(s.state="ID");continue;case"NOTE":E||(s.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(E)){s.state="NOTE";break}if(!E)continue;if(s.cue=new a.default(0,0,""),s.state="CUE",E.indexOf("-->")===-1){s.cue.id=E;continue}case"CUE":if(!s.cue){s.state="BADCUE";continue}try{p(E,s.cue,s.regionList)}catch{s.cue=null,s.state="BADCUE";continue}s.state="CUETEXT";continue;case"CUETEXT":{var d=E.indexOf("-->")!==-1;if(!E||d&&(f=!0)){s.oncue&&s.cue&&s.oncue(s.cue),s.cue=null,s.state="ID";continue}if(s.cue===null)continue;s.cue.text&&(s.cue.text+=`
`),s.cue.text+=E}continue;case"BADCUE":E||(s.state="ID")}}}catch{s.state==="CUETEXT"&&s.cue&&s.oncue&&s.oncue(s.cue),s.cue=null,s.state=s.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},L.flush=function(){var u=this;try{if((u.cue||u.state==="HEADER")&&(u.buffer+=`

`,u.parse()),u.state==="INITIAL"||u.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(s){u.onparsingerror&&u.onparsingerror(s)}return u.onflush&&u.onflush(),this},C}()},"./src/utils/webvtt-parser.ts":function(n,i,r){r.r(i),r.d(i,"generateCueId",function(){return O}),r.d(i,"parseWebVTT",function(){return L});var a=r("./src/polyfills/number.ts"),o=r("./src/utils/vttparser.ts"),l=r("./src/demux/id3.ts"),b=r("./src/utils/timescale-conversion.ts"),I=r("./src/remux/mp4-remuxer.ts"),T=/\r\n|\n\r|\n|\r/g,A=function(u,s,c){return c===void 0&&(c=0),u.slice(c,c+s.length)===s},p=function(u){var s=parseInt(u.slice(-3)),c=parseInt(u.slice(-6,-4)),h=parseInt(u.slice(-9,-7)),E=u.length>9?parseInt(u.substring(0,u.indexOf(":"))):0;if(!Object(a.isFiniteNumber)(s)||!Object(a.isFiniteNumber)(c)||!Object(a.isFiniteNumber)(h)||!Object(a.isFiniteNumber)(E))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+u);return s+=1e3*c,s+=60*1e3*h,s+=60*60*1e3*E,s},_=function(u){for(var s=5381,c=u.length;c;)s=s*33^u.charCodeAt(--c);return(s>>>0).toString()};function O(S,u,s){return _(S.toString())+_(u.toString())+_(s)}var C=function(u,s,c){var h=u[s],E=u[h.prevCC];if(!E||!E.new&&h.new){u.ccOffset=u.presentationOffset=h.start,h.new=!1;return}for(;(v=E)!==null&&v!==void 0&&v.new;){var v;u.ccOffset+=h.start-E.start,h.new=!1,h=E,E=u[h.prevCC]}u.presentationOffset=c};function L(S,u,s,c,h,E,v,f){var d=new o.VTTParser,P=Object(l.utf8ArrayToStr)(new Uint8Array(S)).trim().replace(T,`
`).split(`
`),D=[],x=Object(b.toMpegTsClockFromTimescale)(u,s),y="00:00.000",g=0,m=0,R,M=!0;d.oncue=function(F){var w=c[h],U=c.ccOffset,B=(g-x)/9e4;w!=null&&w.new&&(m!==void 0?U=c.ccOffset=w.start:C(c,h,B)),B&&(U=B-c.presentationOffset);var k=F.endTime-F.startTime,j=Object(I.normalizePts)((F.startTime+U-m)*9e4,E*9e4)/9e4;F.startTime=Math.max(j,0),F.endTime=Math.max(j+k,0);var G=F.text.trim();F.text=decodeURIComponent(encodeURIComponent(G)),F.id||(F.id=O(F.startTime,F.endTime,G)),F.endTime>0&&D.push(F)},d.onparsingerror=function(F){R=F},d.onflush=function(){if(R){f(R);return}v(D)},P.forEach(function(F){if(M)if(A(F,"X-TIMESTAMP-MAP=")){M=!1,F.slice(16).split(",").forEach(function(w){A(w,"LOCAL:")?y=w.slice(6):A(w,"MPEGTS:")&&(g=parseInt(w.slice(7)))});try{m=p(y)/1e3}catch(w){R=w}return}else F===""&&(M=!1);d.parse(F+`
`)}),d.flush()}},"./src/utils/xhr-loader.ts":function(n,i,r){r.r(i);var a=r("./src/utils/logger.ts"),o=r("./src/loader/load-stats.ts"),l=/^age:\s*[\d.]+\s*$/m,b=function(){function I(A){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=A?A.xhrSetup:null,this.stats=new o.LoadStats,this.retryDelay=0}var T=I.prototype;return T.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},T.abortInternal=function(){var p=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),p&&(p.onreadystatechange=null,p.onprogress=null,p.readyState!==4&&(this.stats.aborted=!0,p.abort()))},T.abort=function(){var p;this.abortInternal(),(p=this.callbacks)!==null&&p!==void 0&&p.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},T.load=function(p,_,O){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=p,this.config=_,this.callbacks=O,this.retryDelay=_.retryDelay,this.loadInternal()},T.loadInternal=function(){var p=this.config,_=this.context;if(!!p){var O=this.loader=new self.XMLHttpRequest,C=this.stats;C.loading.first=0,C.loaded=0;var L=this.xhrSetup;try{if(L)try{L(O,_.url)}catch{O.open("GET",_.url,!0),L(O,_.url)}O.readyState||O.open("GET",_.url,!0);var S=this.context.headers;if(S)for(var u in S)O.setRequestHeader(u,S[u])}catch(s){this.callbacks.onError({code:O.status,text:s.message},_,O);return}_.rangeEnd&&O.setRequestHeader("Range","bytes="+_.rangeStart+"-"+(_.rangeEnd-1)),O.onreadystatechange=this.readystatechange.bind(this),O.onprogress=this.loadprogress.bind(this),O.responseType=_.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),p.timeout),O.send()}},T.readystatechange=function(){var p=this.context,_=this.loader,O=this.stats;if(!(!p||!_)){var C=_.readyState,L=this.config;if(!O.aborted&&C>=2)if(self.clearTimeout(this.requestTimeout),O.loading.first===0&&(O.loading.first=Math.max(self.performance.now(),O.loading.start)),C===4){_.onreadystatechange=null,_.onprogress=null;var S=_.status;if(S>=200&&S<300){O.loading.end=Math.max(self.performance.now(),O.loading.first);var u,s;if(p.responseType==="arraybuffer"?(u=_.response,s=u.byteLength):(u=_.responseText,s=u.length),O.loaded=O.total=s,!this.callbacks)return;var c=this.callbacks.onProgress;if(c&&c(O,p,u,_),!this.callbacks)return;var h={url:_.responseURL,data:u};this.callbacks.onSuccess(h,O,p,_)}else O.retry>=L.maxRetry||S>=400&&S<499?(a.logger.error(S+" while loading "+p.url),this.callbacks.onError({code:S,text:_.statusText},p,_)):(a.logger.warn(S+" while loading "+p.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,L.maxRetryDelay),O.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),L.timeout)}},T.loadtimeout=function(){a.logger.warn("timeout while loading "+this.context.url);var p=this.callbacks;p&&(this.abortInternal(),p.onTimeout(this.stats,this.context,this.loader))},T.loadprogress=function(p){var _=this.stats;_.loaded=p.loaded,p.lengthComputable&&(_.total=p.total)},T.getCacheAge=function(){var p=null;if(this.loader&&l.test(this.loader.getAllResponseHeaders())){var _=this.loader.getResponseHeader("age");p=_?parseFloat(_):null}return p},I}();i.default=b}}).default})})(Tl);var Br=tm(Tl.exports);const rm={name:"mew-vid-codec",mounted(){this.init().load(this.src)},beforeUnmount(){this.wipe()},data(){return{codec:null}},props:{raw:{type:Boolean,default:!1},src:{type:String,default:""}},watch:{src(e){this.wipe(),this.init().load(e)}},methods:{init(){return this.codec=this.src.includes(".m3u8")?new Br:null,{load:this.load}},load(e){this.codec?this.bind(e):!this.raw&&!this.$global.mobile?this.blob(e):this.$el.getElementsByTagName("video")[0].src=e},blob(e){fetch(e).then(t=>t.blob()).then(t=>{this.$el.getElementsByTagName("video")[0].src=URL.createObjectURL(t)})},bind(e){this.codec.attachMedia(this.$el.getElementsByTagName("video")[0]),this.codec.on(Br.Events.MEDIA_ATTACHED,()=>{this.codec.loadSource(e)}),this.codec.on(Br.Events.ERROR,function(t,n){if(n.fatal)switch(n.type){case Br.ErrorTypes.NETWORK_ERROR:alert("NETWORK_ERROR, Please check your CORS Settings"),this.codec.startLoad();break;case Br.ErrorTypes.MEDIA_ERROR:this.codec.recoverMediaError();break;default:this.codec.destroy();break}})},wipe(){URL.revokeObjectURL(this.$el.src),this.codec&&this.codec.destroy()}}},nm={name:"mew-vid",components:{mxvideo:fv,control:em},emits:["load","play","pause","playing","wait","end"],mixins:[rm],data(){return{el:null,time:0,rate:"1.0",loop:!0,buffered:0,duration:0,playing:!1,loading:!1,volume:.6,cinematic:!1}},props:{poster:{type:String,default:""},autoplay:{type:Boolean,default:!1},rates:{type:Array,default:["0.2","0.5","1.0","1.5","2.0"]},info:{type:String,default:""}},provide(){return{v:this}}},im={class:"mew-vid",relative:"",noselect:"",style:{"background-color":"black!important"}};function sm(e,t,n,i,r,a){const o=Ce("mxvideo"),l=Ce("control");return ae(),fe("div",im,[Ee(o),Ee(l)])}var am=xe(nm,[["render",sm]]);const om={name:"mew-fit",mounted(){this.init()},updated(){this.init()},props:{contain:{type:Boolean,default:!1}},methods:{init(){let e=this.$el.children;if(e.length===0){console.log("%cMEW : %s","font-family:Arial;color: black; background: #b20000; font-size: 13px;padding: 1px 7px;border-radius:2px","No element was fund in <fit> component !");return}if(e.length>1){console.log("%cMEW : %s","font-family:Arial;color: black; background: #b20000; font-size: 13px;padding: 1px 7px;border-radius:2px","More than one elements were fund in <fit> component, this component can only hold one element.");return}e[0].classList.add("mew-fit-item")}}};function lm(e,t,n,i,r,a){return ae(),fe("div",{class:De(["mew-fit",{contain:n.contain}])},[Bt(e.$slots,"default")],2)}var um=xe(om,[["render",lm]]);const fm={name:"flex",mounted(){this.ob=new ResizeObserver(e=>{this.init()}),this.ob.observe(this.$el)},beforeUnmount(){this.ob.disconnect()},data(){return{ob:null,visible:!1}},methods:{init(){let e=this.$refs.container.children;if(e.length===0)return;let t,n,i,r;t=this.$el.offsetWidth,n=e[0].offsetWidth,i=e.length,r=n*i;for(let a=0;a<i;a++)if(e[a].offsetWidth!==n){console.log("%cMEW : %s","font-family:Arial;color: black; background: #b20000; font-size: 13px;padding: 1px 7px;border-radius:2px","Child elements within a Flex component have inconsistent sizes !");return}t>r?this.$refs.container.style.width=r+"px":(i=parseInt(t/n),this.$refs.container.style.width=n*i+"px"),this.visible=!0}}},cm={class:"mew-flex",flex:"",jc:""};function dm(e,t,n,i,r,a){return ae(),fe("div",cm,[ie("div",{ref:"container",class:De(["mew-flex-container",{visible:r.visible}]),flex:"",wrap:""},[Bt(e.$slots,"default")],2)])}var hm=xe(fm,[["render",dm]]);const vm={name:"mew-field-dropList",inject:["field"]},gm={class:"mew-field-dropList"};function mm(e,t,n,i,r,a){return Ft((ae(),fe("div",gm,[Bt(e.$slots,"default")],512)),[[yr,a.field.selecting.target===a.field]])}var pm=xe(vm,[["render",mm]]);const Em={name:"mew-field-label",inject:["field"],mounted(){let e=getComputedStyle(this.$el);parseInt(e.height)===0&&(this.$el.style="height: 100%;width: 100%;left: 0;top: 0;");let t=getComputedStyle(this.field.$el);this.nudgeUp=t.boxShadow!=="none"&&t.borderTopWidth==="0px"||this.field.$attrs.hasOwnProperty("bg");let n=Math.floor(parseInt(t.fontSize)/5-3),i=n<0?.75:.75-n*.08;i<.4&&(i=.4),this.$el.style.setProperty("--scale",i),this.labelWidth=this.$el.getElementsByClassName("shot")[0].offsetWidth,this.labelHeight=this.field.$el.offsetHeight},data(){return{nudgeUp:!1,labelWidth:"",labelHeight:""}},watch:{labelWidth(e){this.$el.style.setProperty("--labelWidth",e+"px")},labelHeight(e){this.$el.style.setProperty("--labelHeight",e+"px")},"field.label":function(e){this.$nextTick(()=>{this.labelWidth=this.$el.getElementsByClassName("shot")[0].offsetWidth})}},computed:{shrink(){return this.field.focus||this.field.modelValue||this.field.placeholder}}},ym=ie("i",{class:"rim_1"},null,-1),Tm=ie("i",{class:"rim_2"},null,-1),xm=ie("i",{class:"rim_3"},null,-1),Sm={class:"shot"};function Am(e,t,n,i,r,a){return ae(),fe("div",{class:De(["mew-field-label",{shrink:a.shrink,activated:a.field.activated,noborder:a.field.select}])},[ym,Tm,xm,ie("div",Sm,_e(a.field.label),1),ie("label",{class:De({nudgeUp:a.field.select||r.nudgeUp})},_e(a.field.label),3)],2)}var Lm=xe(Em,[["render",Am]]);const Dm={name:"mew-field-input",inject:["field"],components:{dropList:pm,labelTag:Lm},data(){return{snapshot:""}},methods:{input(e){this.field.error&&(this.field.error=""),this.field.$emit("update:modelValue",this.field.number?Number(e.target.value):e.target.value)},validate(){this.field.error="",this.$nextTick(()=>{if(this.field.require&&this.field.modelValue.trim()===""&&this.error("\u5FC5\u586B"),this.field.username){let e="[`~!@#$^&*()=|{}':;',\\[\\].<>/?~\uFF01@#\uFFE5\u2026\u2026&*\uFF08\uFF09\u2014\u2014|{}\u3010\u3011\u2018\uFF1B\uFF1A\u201D\u201C'\u3002\uFF0C\u3001\uFF1F]";new RegExp(e).test(this.value)&&this.error("\u7279\u6B8A\u5B57\u7B26\u4E0D\u53EF\u7528")}if(this.field.email){let e="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$";new RegExp(e).test(this.value)||this.error("\u90AE\u7BB1\u4E0D\u53EF\u7528")}this.field.min&&this.value.length<this.field.min&&this.error("\u81F3\u5C11 "+this.field.min+" \u4E2A\u5B57\u7B26"),this.field.max&&this.value.length>this.field.max&&this.error("\u6700\u591A "+this.field.max+" \u4E2A\u5B57\u7B26"),this.field.validate&&this.error(this.field.validate(this.value))})},checkEmpty(){this.field.error||this.field.require&&this.field.modelValue.trim()===""&&(this.field.error="error",this.error("\u5FC5\u586B"))},error(e){e&&(this.snapshot=this.field.modelValue,this.field.$emit("update:modelValue",!1),this.field.error="error",this.field.$el.style.setProperty("--errorMessage",`'${e}'`))},focus(){this.field.focus=!0,this.field.$emit("focus")},blur(){this.field.focus=!1,this.field.$emit("blur"),this.checkEmpty()}},computed:{readonly(){return this.field.select&&!this.field.text},value(){return this.field.error?this.snapshot:this.field.modelValue}}},_m={class:"mew-field-input"},bm=["placeholder","value","type","readonly"],Om=["placeholder","value","readonly"];function Cm(e,t,n,i,r,a){const o=Ce("drop-list"),l=Ce("label-tag");return ae(),fe(Me,null,[ie("div",_m,[a.field.area?(ae(),fe("textarea",{key:1,fill:"",noresize:"",cols:"30",rows:"3",class:De({jc:a.field.jc,je:a.field.je}),placeholder:a.field.placeholder,value:a.value,readonly:a.readonly,onFocus:t[4]||(t[4]=(...b)=>a.focus&&a.focus(...b)),onBlur:t[5]||(t[5]=(...b)=>a.blur&&a.blur(...b)),onChange:t[6]||(t[6]=b=>{a.field.$emit("change"),a.validate()}),onInput:t[7]||(t[7]=(...b)=>a.input&&a.input(...b))},null,42,Om)):(ae(),fe("input",{key:0,fill:"",class:De({jc:a.field.jc,je:a.field.je}),placeholder:a.field.placeholder,value:a.value,type:a.field.type,readonly:a.readonly,onFocus:t[0]||(t[0]=(...b)=>a.focus&&a.focus(...b)),onBlur:t[1]||(t[1]=(...b)=>a.blur&&a.blur(...b)),onChange:t[2]||(t[2]=b=>{a.field.$emit("change"),a.validate()}),onInput:t[3]||(t[3]=(...b)=>a.input&&a.input(...b))},null,42,bm))]),a.field.select?(ae(),Ye(o,{key:0},{default:tt(()=>[Bt(e.$slots,"default")]),_:3})):Fe("",!0),a.field.label?(ae(),Ye(l,{key:1})):Fe("",!0)],64)}var Rm=xe(Dm,[["render",Cm]]);const Pm={name:"mew-field-check",inject:["field"],created(){this.slotted=this.$slots.default()[0].children.length>0,this.bg=this.field.$attrs.hasOwnProperty("bg")},data(){return{slotted:!1,bg:!1}},computed:{checked(){return this.field.value==="mew-default"?this.field.modelValue:this.field.modelValue===this.field.value}}},Im={class:"mew-field-check"},Mm={key:0,class:"mew-check-slot"},Fm=ie("i",null,null,-1),wm=[Fm],Bm={key:2,class:"label"};function Um(e,t,n,i,r,a){return ae(),fe("div",Im,[r.slotted?(ae(),fe("div",Mm,[Bt(e.$slots,"default")])):(ae(),fe("div",{key:1,class:De(["mew-check-mark",{checked:a.checked,bg:r.bg}])},wm,2)),a.field.label?(ae(),fe("div",Bm,_e(a.field.label),1)):Fe("",!0)])}var km=xe(Pm,[["render",Um]]);const Nm={name:"mew-field-inits",components:{Input:Rm,Check:km},props:{value:{type:[String,Number],default:"mew-default"},text:{type:Boolean,default:!1},area:{type:Boolean,default:!1},check:{type:Boolean,default:!1},select:{type:Boolean,default:!1},placeholder:{type:String,default:""},label:{type:[String,Number],default:""},jc:{type:Boolean,default:!1},je:{type:Boolean,default:!1}},computed:{component(){return this.check&&!this.select?"Check":"Input"},snap(){let e=["bb","bb-xs","bb-sm","bb-md","bb-lg","bb-xl"],t=!1;for(let n=0;n<e.length;n++)if(this.$.attrs.hasOwnProperty(e[n])){t=!0;break}return t},mode(){let e=this.area?" area":"",t=this.invalid||this.disabled?" vain":"",n=this.snap?" snap":"",i=this.label?" hint":"",r=this.check?" check":"",a=this.select?" select":"";return e+t+n+i+r+a},checked(){return this.check&&(this.modelValue===!0||this.value!=="default"&&this.modelValue===this.value)?"checked":""},picking(){return this.selecting.target===this?"selecting":""}}},Km={name:"mew-field-types",props:{password:{type:Boolean,default:!1},number:{type:Boolean,default:!1},date:{type:Boolean,default:!1},time:{type:Boolean,default:!1},file:{type:Boolean,default:!1}},computed:{type(){let e={password:this.password,number:this.number,date:this.date,time:this.time,file:this.file};for(let t in e)if(e[t])return t}}},jm={name:"mew-validate",props:{disabled:{type:Boolean,default:!1},invalid:{type:Boolean,default:!1},require:{type:Boolean,default:!1},username:{type:Boolean,default:!1},email:{type:Boolean,default:!1},min:{type:[String,Number],default:""},max:{type:[String,Number],default:""},validate:{type:Function,default:null}},mounted(){}};const Wm={name:"mew-field",emits:["update:modelValue","change","blur","focus"],mixins:[Nm,Km,jm],provide(){return{field:this}},data(){return{focus:!1,error:"",activated:!1,selecting:gl}},props:{modelValue:{type:[String,Boolean,Number],default:""}},methods:{toggle(e){this.component==="Check"?this.$emit("update:modelValue",this.value==="mew-default"?!this.modelValue:this.value):(e.target===this.$el&&this.$el.getElementsByTagName(this.area?"textarea":"input")[0].focus(),this.select&&(this.selecting.target?this.selecting.wrapper.unload():this.selecting.target=this))},$focus(){this.$el.getElementsByTagName(this.area?"textarea":"input")[0].focus()}}};function Gm(e,t,n,i,r,a){return ae(),fe("div",{class:De(["mew-field",[e.mode,e.checked,e.picking,r.error]]),onMousedownOnce:t[0]||(t[0]=o=>r.activated=!0),onClick:t[1]||(t[1]=(...o)=>a.toggle&&a.toggle(...o))},[(ae(),Ye(Rf(e.component),null,{default:tt(()=>[Bt(e.$slots,"default")]),_:3}))],34)}var Hm=xe(Wm,[["render",Gm]]),$m={created(e,t,n){},beforeMount(e,t,n){e.src&&(n.mew||(n.mew={}),n.mew.lazy=!0,n.mew.src=e.src,e.style.opacity="0",e.src="")},mounted(e,t,n){n.mew.lazy&&"IntersectionObserver"in window&&(n.mew.observer=new IntersectionObserver(i=>{i[0].isIntersecting&&(e.src=n.mew.src,n.mew.observer.disconnect(),delete n.mew.observer,delete n.mew.lazy)},{rootMargin:"0px",threshold:.6}),e.onload=function(){e.style.opacity="1"},n.mew.observer.observe(e))},beforeUpdate(){},updated(){},beforeUnmount(){},unmounted(){}},Vm={install:function(e,t){e.config.globalProperties.$loading=ml,e.config.globalProperties.$pending=pl,e.config.globalProperties.$global=Kr,e.config.globalProperties.$notify=ot,e.config.globalProperties.$color=Ri,e.component("ico",yl),e.component("btn",qh),e.component("vid",am),e.component("fit",um),e.component("flex",hm),e.component("field",Hm),e.directive("lazy",$m)}},us={exports:{}},xl=function(t,n){return function(){for(var r=new Array(arguments.length),a=0;a<r.length;a++)r[a]=arguments[a];return t.apply(n,r)}},zm=xl,fs=Object.prototype.toString,cs=function(e){return function(t){var n=fs.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function rr(e){return e=e.toLowerCase(),function(n){return cs(n)===e}}function ds(e){return Array.isArray(e)}function Cn(e){return typeof e=="undefined"}function Ym(e){return e!==null&&!Cn(e)&&e.constructor!==null&&!Cn(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var Sl=rr("ArrayBuffer");function Xm(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Sl(e.buffer),t}function Qm(e){return typeof e=="string"}function Zm(e){return typeof e=="number"}function Al(e){return e!==null&&typeof e=="object"}function mn(e){if(cs(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var Jm=rr("Date"),qm=rr("File"),ep=rr("Blob"),tp=rr("FileList");function hs(e){return fs.call(e)==="[object Function]"}function rp(e){return Al(e)&&hs(e.pipe)}function np(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||fs.call(e)===t||hs(e.toString)&&e.toString()===t)}var ip=rr("URLSearchParams");function sp(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function ap(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function vs(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),ds(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}function Ii(){var e={};function t(r,a){mn(e[a])&&mn(r)?e[a]=Ii(e[a],r):mn(r)?e[a]=Ii({},r):ds(r)?e[a]=r.slice():e[a]=r}for(var n=0,i=arguments.length;n<i;n++)vs(arguments[n],t);return e}function op(e,t,n){return vs(t,function(r,a){n&&typeof r=="function"?e[a]=zm(r,n):e[a]=r}),e}function lp(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function up(e,t,n,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)}function fp(e,t,n){var i,r,a,o={};t=t||{};do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)a=i[r],o[a]||(t[a]=e[a],o[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t}function cp(e,t,n){e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;var i=e.indexOf(t,n);return i!==-1&&i===n}function dp(e){if(!e)return null;var t=e.length;if(Cn(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n}var hp=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array)),Ge={isArray:ds,isArrayBuffer:Sl,isBuffer:Ym,isFormData:np,isArrayBufferView:Xm,isString:Qm,isNumber:Zm,isObject:Al,isPlainObject:mn,isUndefined:Cn,isDate:Jm,isFile:qm,isBlob:ep,isFunction:hs,isStream:rp,isURLSearchParams:ip,isStandardBrowserEnv:ap,forEach:vs,merge:Ii,extend:op,trim:sp,stripBOM:lp,inherits:up,toFlatObject:fp,kindOf:cs,kindOfTest:rr,endsWith:cp,toArray:dp,isTypedArray:hp,isFileList:tp},lr=Ge;function ya(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ll=function(t,n,i){if(!n)return t;var r;if(i)r=i(n);else if(lr.isURLSearchParams(n))r=n.toString();else{var a=[];lr.forEach(n,function(b,I){b===null||typeof b=="undefined"||(lr.isArray(b)?I=I+"[]":b=[b],lr.forEach(b,function(A){lr.isDate(A)?A=A.toISOString():lr.isObject(A)&&(A=JSON.stringify(A)),a.push(ya(I)+"="+ya(A))}))}),r=a.join("&")}if(r){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t},vp=Ge;function Hn(){this.handlers=[]}Hn.prototype.use=function(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};Hn.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Hn.prototype.forEach=function(t){vp.forEach(this.handlers,function(i){i!==null&&t(i)})};var gp=Hn,mp=Ge,pp=function(t,n){mp.forEach(t,function(r,a){a!==n&&a.toUpperCase()===n.toUpperCase()&&(t[n]=r,delete t[a])})},Dl=Ge;function Ar(e,t,n,i,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}Dl.inherits(Ar,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var _l=Ar.prototype,bl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){bl[e]={value:e}});Object.defineProperties(Ar,bl);Object.defineProperty(_l,"isAxiosError",{value:!0});Ar.from=function(e,t,n,i,r,a){var o=Object.create(_l);return Dl.toFlatObject(e,o,function(b){return b!==Error.prototype}),Ar.call(o,e.message,t,n,i,r),o.name=e.name,a&&Object.assign(o,a),o};var Pr=Ar,Ol={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},at=Ge;function Ep(e,t){t=t||new FormData;var n=[];function i(a){return a===null?"":at.isDate(a)?a.toISOString():at.isArrayBuffer(a)||at.isTypedArray(a)?typeof Blob=="function"?new Blob([a]):Buffer.from(a):a}function r(a,o){if(at.isPlainObject(a)||at.isArray(a)){if(n.indexOf(a)!==-1)throw Error("Circular reference detected in "+o);n.push(a),at.forEach(a,function(b,I){if(!at.isUndefined(b)){var T=o?o+"."+I:I,A;if(b&&!o&&typeof b=="object"){if(at.endsWith(I,"{}"))b=JSON.stringify(b);else if(at.endsWith(I,"[]")&&(A=at.toArray(b))){A.forEach(function(p){!at.isUndefined(p)&&t.append(T,i(p))});return}}r(b,T)}}),n.pop()}else t.append(o,i(a))}return r(e),t}var Cl=Ep,si=Pr,yp=function(t,n,i){var r=i.config.validateStatus;!i.status||!r||r(i.status)?t(i):n(new si("Request failed with status code "+i.status,[si.ERR_BAD_REQUEST,si.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},fn=Ge,Tp=fn.isStandardBrowserEnv()?function(){return{write:function(n,i,r,a,o,l){var b=[];b.push(n+"="+encodeURIComponent(i)),fn.isNumber(r)&&b.push("expires="+new Date(r).toGMTString()),fn.isString(a)&&b.push("path="+a),fn.isString(o)&&b.push("domain="+o),l===!0&&b.push("secure"),document.cookie=b.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),xp=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},Sp=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t},Ap=xp,Lp=Sp,Rl=function(t,n){return t&&!Ap(n)?Lp(t,n):n},ai=Ge,Dp=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],_p=function(t){var n={},i,r,a;return t&&ai.forEach(t.split(`
`),function(l){if(a=l.indexOf(":"),i=ai.trim(l.substr(0,a)).toLowerCase(),r=ai.trim(l.substr(a+1)),i){if(n[i]&&Dp.indexOf(i)>=0)return;i==="set-cookie"?n[i]=(n[i]?n[i]:[]).concat([r]):n[i]=n[i]?n[i]+", "+r:r}}),n},Ta=Ge,bp=Ta.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function r(a){var o=a;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(o){var l=Ta.isString(o)?r(o):o;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),Mi=Pr,Op=Ge;function Pl(e){Mi.call(this,e==null?"canceled":e,Mi.ERR_CANCELED),this.name="CanceledError"}Op.inherits(Pl,Mi,{__CANCEL__:!0});var $n=Pl,Cp=function(t){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""},Ur=Ge,Rp=yp,Pp=Tp,Ip=Ll,Mp=Rl,Fp=_p,wp=bp,Bp=Ol,pt=Pr,Up=$n,kp=Cp,xa=function(t){return new Promise(function(i,r){var a=t.data,o=t.headers,l=t.responseType,b;function I(){t.cancelToken&&t.cancelToken.unsubscribe(b),t.signal&&t.signal.removeEventListener("abort",b)}Ur.isFormData(a)&&Ur.isStandardBrowserEnv()&&delete o["Content-Type"];var T=new XMLHttpRequest;if(t.auth){var A=t.auth.username||"",p=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.Authorization="Basic "+btoa(A+":"+p)}var _=Mp(t.baseURL,t.url);T.open(t.method.toUpperCase(),Ip(_,t.params,t.paramsSerializer),!0),T.timeout=t.timeout;function O(){if(!!T){var S="getAllResponseHeaders"in T?Fp(T.getAllResponseHeaders()):null,u=!l||l==="text"||l==="json"?T.responseText:T.response,s={data:u,status:T.status,statusText:T.statusText,headers:S,config:t,request:T};Rp(function(h){i(h),I()},function(h){r(h),I()},s),T=null}}if("onloadend"in T?T.onloadend=O:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(O)},T.onabort=function(){!T||(r(new pt("Request aborted",pt.ECONNABORTED,t,T)),T=null)},T.onerror=function(){r(new pt("Network Error",pt.ERR_NETWORK,t,T,T)),T=null},T.ontimeout=function(){var u=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",s=t.transitional||Bp;t.timeoutErrorMessage&&(u=t.timeoutErrorMessage),r(new pt(u,s.clarifyTimeoutError?pt.ETIMEDOUT:pt.ECONNABORTED,t,T)),T=null},Ur.isStandardBrowserEnv()){var C=(t.withCredentials||wp(_))&&t.xsrfCookieName?Pp.read(t.xsrfCookieName):void 0;C&&(o[t.xsrfHeaderName]=C)}"setRequestHeader"in T&&Ur.forEach(o,function(u,s){typeof a=="undefined"&&s.toLowerCase()==="content-type"?delete o[s]:T.setRequestHeader(s,u)}),Ur.isUndefined(t.withCredentials)||(T.withCredentials=!!t.withCredentials),l&&l!=="json"&&(T.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&T.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&T.upload&&T.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(b=function(S){!T||(r(!S||S&&S.type?new Up:S),T.abort(),T=null)},t.cancelToken&&t.cancelToken.subscribe(b),t.signal&&(t.signal.aborted?b():t.signal.addEventListener("abort",b))),a||(a=null);var L=kp(_);if(L&&["http","https","file"].indexOf(L)===-1){r(new pt("Unsupported protocol "+L+":",pt.ERR_BAD_REQUEST,t));return}T.send(a)})},Np=null,Ne=Ge,Sa=pp,Aa=Pr,Kp=Ol,jp=Cl,Wp={"Content-Type":"application/x-www-form-urlencoded"};function La(e,t){!Ne.isUndefined(e)&&Ne.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function Gp(){var e;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(e=xa),e}function Hp(e,t,n){if(Ne.isString(e))try{return(t||JSON.parse)(e),Ne.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}var Vn={transitional:Kp,adapter:Gp(),transformRequest:[function(t,n){if(Sa(n,"Accept"),Sa(n,"Content-Type"),Ne.isFormData(t)||Ne.isArrayBuffer(t)||Ne.isBuffer(t)||Ne.isStream(t)||Ne.isFile(t)||Ne.isBlob(t))return t;if(Ne.isArrayBufferView(t))return t.buffer;if(Ne.isURLSearchParams(t))return La(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var i=Ne.isObject(t),r=n&&n["Content-Type"],a;if((a=Ne.isFileList(t))||i&&r==="multipart/form-data"){var o=this.env&&this.env.FormData;return jp(a?{"files[]":t}:t,o&&new o)}else if(i||r==="application/json")return La(n,"application/json"),Hp(t);return t}],transformResponse:[function(t){var n=this.transitional||Vn.transitional,i=n&&n.silentJSONParsing,r=n&&n.forcedJSONParsing,a=!i&&this.responseType==="json";if(a||r&&Ne.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(a)throw o.name==="SyntaxError"?Aa.from(o,Aa.ERR_BAD_RESPONSE,this,null,this.response):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Np},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ne.forEach(["delete","get","head"],function(t){Vn.headers[t]={}});Ne.forEach(["post","put","patch"],function(t){Vn.headers[t]=Ne.merge(Wp)});var gs=Vn,$p=Ge,Vp=gs,zp=function(t,n,i){var r=this||Vp;return $p.forEach(i,function(o){t=o.call(r,t,n)}),t},Il=function(t){return!!(t&&t.__CANCEL__)},Da=Ge,oi=zp,Yp=Il,Xp=gs,Qp=$n;function li(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Qp}var Zp=function(t){li(t),t.headers=t.headers||{},t.data=oi.call(t,t.data,t.headers,t.transformRequest),t.headers=Da.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Da.forEach(["delete","get","head","post","put","patch","common"],function(r){delete t.headers[r]});var n=t.adapter||Xp.adapter;return n(t).then(function(r){return li(t),r.data=oi.call(t,r.data,r.headers,t.transformResponse),r},function(r){return Yp(r)||(li(t),r&&r.response&&(r.response.data=oi.call(t,r.response.data,r.response.headers,t.transformResponse))),Promise.reject(r)})},Ze=Ge,Ml=function(t,n){n=n||{};var i={};function r(T,A){return Ze.isPlainObject(T)&&Ze.isPlainObject(A)?Ze.merge(T,A):Ze.isPlainObject(A)?Ze.merge({},A):Ze.isArray(A)?A.slice():A}function a(T){if(Ze.isUndefined(n[T])){if(!Ze.isUndefined(t[T]))return r(void 0,t[T])}else return r(t[T],n[T])}function o(T){if(!Ze.isUndefined(n[T]))return r(void 0,n[T])}function l(T){if(Ze.isUndefined(n[T])){if(!Ze.isUndefined(t[T]))return r(void 0,t[T])}else return r(void 0,n[T])}function b(T){if(T in n)return r(t[T],n[T]);if(T in t)return r(void 0,t[T])}var I={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:b};return Ze.forEach(Object.keys(t).concat(Object.keys(n)),function(A){var p=I[A]||a,_=p(A);Ze.isUndefined(_)&&p!==b||(i[A]=_)}),i},Fl={version:"0.27.2"},Jp=Fl.version,Ct=Pr,ms={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){ms[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});var _a={};ms.transitional=function(t,n,i){function r(a,o){return"[Axios v"+Jp+"] Transitional option '"+a+"'"+o+(i?". "+i:"")}return function(a,o,l){if(t===!1)throw new Ct(r(o," has been removed"+(n?" in "+n:"")),Ct.ERR_DEPRECATED);return n&&!_a[o]&&(_a[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,o,l):!0}};function qp(e,t,n){if(typeof e!="object")throw new Ct("options must be an object",Ct.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),r=i.length;r-- >0;){var a=i[r],o=t[a];if(o){var l=e[a],b=l===void 0||o(l,a,e);if(b!==!0)throw new Ct("option "+a+" must be "+b,Ct.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ct("Unknown option "+a,Ct.ERR_BAD_OPTION)}}var e0={assertOptions:qp,validators:ms},wl=Ge,t0=Ll,ba=gp,Oa=Zp,zn=Ml,r0=Rl,Bl=e0,ur=Bl.validators;function Lr(e){this.defaults=e,this.interceptors={request:new ba,response:new ba}}Lr.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=zn(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&Bl.assertOptions(i,{silentJSONParsing:ur.transitional(ur.boolean),forcedJSONParsing:ur.transitional(ur.boolean),clarifyTimeoutError:ur.transitional(ur.boolean)},!1);var r=[],a=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(a=a&&_.synchronous,r.unshift(_.fulfilled,_.rejected))});var o=[];this.interceptors.response.forEach(function(_){o.push(_.fulfilled,_.rejected)});var l;if(!a){var b=[Oa,void 0];for(Array.prototype.unshift.apply(b,r),b=b.concat(o),l=Promise.resolve(n);b.length;)l=l.then(b.shift(),b.shift());return l}for(var I=n;r.length;){var T=r.shift(),A=r.shift();try{I=T(I)}catch(p){A(p);break}}try{l=Oa(I)}catch(p){return Promise.reject(p)}for(;o.length;)l=l.then(o.shift(),o.shift());return l};Lr.prototype.getUri=function(t){t=zn(this.defaults,t);var n=r0(t.baseURL,t.url);return t0(n,t.params,t.paramsSerializer)};wl.forEach(["delete","get","head","options"],function(t){Lr.prototype[t]=function(n,i){return this.request(zn(i||{},{method:t,url:n,data:(i||{}).data}))}});wl.forEach(["post","put","patch"],function(t){function n(i){return function(a,o,l){return this.request(zn(l||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Lr.prototype[t]=n(),Lr.prototype[t+"Form"]=n(!0)});var n0=Lr,i0=$n;function Dr(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(r){t=r});var n=this;this.promise.then(function(i){if(!!n._listeners){var r,a=n._listeners.length;for(r=0;r<a;r++)n._listeners[r](i);n._listeners=null}}),this.promise.then=function(i){var r,a=new Promise(function(o){n.subscribe(o),r=o}).then(i);return a.cancel=function(){n.unsubscribe(r)},a},e(function(r){n.reason||(n.reason=new i0(r),t(n.reason))})}Dr.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Dr.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};Dr.prototype.unsubscribe=function(t){if(!!this._listeners){var n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}};Dr.source=function(){var t,n=new Dr(function(r){t=r});return{token:n,cancel:t}};var s0=Dr,a0=function(t){return function(i){return t.apply(null,i)}},o0=Ge,l0=function(t){return o0.isObject(t)&&t.isAxiosError===!0},Ca=Ge,u0=xl,pn=n0,f0=Ml,c0=gs;function Ul(e){var t=new pn(e),n=u0(pn.prototype.request,t);return Ca.extend(n,pn.prototype,t),Ca.extend(n,t),n.create=function(r){return Ul(f0(e,r))},n}var Xe=Ul(c0);Xe.Axios=pn;Xe.CanceledError=$n;Xe.CancelToken=s0;Xe.isCancel=Il;Xe.VERSION=Fl.version;Xe.toFormData=Cl;Xe.AxiosError=Pr;Xe.Cancel=Xe.CanceledError;Xe.all=function(t){return Promise.all(t)};Xe.spread=a0;Xe.isAxiosError=l0;us.exports=Xe;us.exports.default=Xe;var d0=us.exports,ps=d0.create({baseURL:"http://xx.xx.xx.xx:3001",timeout:6e3,withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"}});ps.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)});ps.interceptors.response.use(function(e){return e},function(e){return Promise.reject(e)});var h0={install:function(e,t){e.config.globalProperties.$http=ps}};function kl(e){let t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.focus(),t.select(),document.execCommand("copy"),t.blur(),document.body.removeChild(t)}var v0={install:function(e,t){e.config.globalProperties.$copy=kl}};var Nl={exports:{}};(function(e){var t=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(i){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,o={},l={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function u(s){return s instanceof b?new b(s.type,u(s.content),s.alias):Array.isArray(s)?s.map(u):s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(u){return Object.prototype.toString.call(u).slice(8,-1)},objId:function(u){return u.__id||Object.defineProperty(u,"__id",{value:++a}),u.__id},clone:function u(s,c){c=c||{};var h,E;switch(l.util.type(s)){case"Object":if(E=l.util.objId(s),c[E])return c[E];h={},c[E]=h;for(var v in s)s.hasOwnProperty(v)&&(h[v]=u(s[v],c));return h;case"Array":return E=l.util.objId(s),c[E]?c[E]:(h=[],c[E]=h,s.forEach(function(f,d){h[d]=u(f,c)}),h);default:return s}},getLanguage:function(u){for(;u;){var s=r.exec(u.className);if(s)return s[1].toLowerCase();u=u.parentElement}return"none"},setLanguage:function(u,s){u.className=u.className.replace(RegExp(r,"gi"),""),u.classList.add("language-"+s)},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(h){var u=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(h.stack)||[])[1];if(u){var s=document.getElementsByTagName("script");for(var c in s)if(s[c].src==u)return s[c]}return null}},isActive:function(u,s,c){for(var h="no-"+s;u;){var E=u.classList;if(E.contains(s))return!0;if(E.contains(h))return!1;u=u.parentElement}return!!c}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(u,s){var c=l.util.clone(l.languages[u]);for(var h in s)c[h]=s[h];return c},insertBefore:function(u,s,c,h){h=h||l.languages;var E=h[u],v={};for(var f in E)if(E.hasOwnProperty(f)){if(f==s)for(var d in c)c.hasOwnProperty(d)&&(v[d]=c[d]);c.hasOwnProperty(f)||(v[f]=E[f])}var P=h[u];return h[u]=v,l.languages.DFS(l.languages,function(D,x){x===P&&D!=u&&(this[D]=v)}),v},DFS:function u(s,c,h,E){E=E||{};var v=l.util.objId;for(var f in s)if(s.hasOwnProperty(f)){c.call(s,f,s[f],h||f);var d=s[f],P=l.util.type(d);P==="Object"&&!E[v(d)]?(E[v(d)]=!0,u(d,c,null,E)):P==="Array"&&!E[v(d)]&&(E[v(d)]=!0,u(d,c,f,E))}}},plugins:{},highlightAll:function(u,s){l.highlightAllUnder(document,u,s)},highlightAllUnder:function(u,s,c){var h={callback:c,container:u,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",h),h.elements=Array.prototype.slice.apply(h.container.querySelectorAll(h.selector)),l.hooks.run("before-all-elements-highlight",h);for(var E=0,v;v=h.elements[E++];)l.highlightElement(v,s===!0,h.callback)},highlightElement:function(u,s,c){var h=l.util.getLanguage(u),E=l.languages[h];l.util.setLanguage(u,h);var v=u.parentElement;v&&v.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(v,h);var f=u.textContent,d={element:u,language:h,grammar:E,code:f};function P(x){d.highlightedCode=x,l.hooks.run("before-insert",d),d.element.innerHTML=d.highlightedCode,l.hooks.run("after-highlight",d),l.hooks.run("complete",d),c&&c.call(d.element)}if(l.hooks.run("before-sanity-check",d),v=d.element.parentElement,v&&v.nodeName.toLowerCase()==="pre"&&!v.hasAttribute("tabindex")&&v.setAttribute("tabindex","0"),!d.code){l.hooks.run("complete",d),c&&c.call(d.element);return}if(l.hooks.run("before-highlight",d),!d.grammar){P(l.util.encode(d.code));return}if(s&&i.Worker){var D=new Worker(l.filename);D.onmessage=function(x){P(x.data)},D.postMessage(JSON.stringify({language:d.language,code:d.code,immediateClose:!0}))}else P(l.highlight(d.code,d.grammar,d.language))},highlight:function(u,s,c){var h={code:u,grammar:s,language:c};if(l.hooks.run("before-tokenize",h),!h.grammar)throw new Error('The language "'+h.language+'" has no grammar.');return h.tokens=l.tokenize(h.code,h.grammar),l.hooks.run("after-tokenize",h),b.stringify(l.util.encode(h.tokens),h.language)},tokenize:function(u,s){var c=s.rest;if(c){for(var h in c)s[h]=c[h];delete s.rest}var E=new A;return p(E,E.head,u),T(u,E,s,E.head,0),O(E)},hooks:{all:{},add:function(u,s){var c=l.hooks.all;c[u]=c[u]||[],c[u].push(s)},run:function(u,s){var c=l.hooks.all[u];if(!(!c||!c.length))for(var h=0,E;E=c[h++];)E(s)}},Token:b};i.Prism=l;function b(u,s,c,h){this.type=u,this.content=s,this.alias=c,this.length=(h||"").length|0}b.stringify=function u(s,c){if(typeof s=="string")return s;if(Array.isArray(s)){var h="";return s.forEach(function(P){h+=u(P,c)}),h}var E={type:s.type,content:u(s.content,c),tag:"span",classes:["token",s.type],attributes:{},language:c},v=s.alias;v&&(Array.isArray(v)?Array.prototype.push.apply(E.classes,v):E.classes.push(v)),l.hooks.run("wrap",E);var f="";for(var d in E.attributes)f+=" "+d+'="'+(E.attributes[d]||"").replace(/"/g,"&quot;")+'"';return"<"+E.tag+' class="'+E.classes.join(" ")+'"'+f+">"+E.content+"</"+E.tag+">"};function I(u,s,c,h){u.lastIndex=s;var E=u.exec(c);if(E&&h&&E[1]){var v=E[1].length;E.index+=v,E[0]=E[0].slice(v)}return E}function T(u,s,c,h,E,v){for(var f in c)if(!(!c.hasOwnProperty(f)||!c[f])){var d=c[f];d=Array.isArray(d)?d:[d];for(var P=0;P<d.length;++P){if(v&&v.cause==f+","+P)return;var D=d[P],x=D.inside,y=!!D.lookbehind,g=!!D.greedy,m=D.alias;if(g&&!D.pattern.global){var R=D.pattern.toString().match(/[imsuy]*$/)[0];D.pattern=RegExp(D.pattern.source,R+"g")}for(var M=D.pattern||D,F=h.next,w=E;F!==s.tail&&!(v&&w>=v.reach);w+=F.value.length,F=F.next){var U=F.value;if(s.length>u.length)return;if(!(U instanceof b)){var B=1,k;if(g){if(k=I(M,w,u,y),!k||k.index>=u.length)break;var H=k.index,j=k.index+k[0].length,G=w;for(G+=F.value.length;H>=G;)F=F.next,G+=F.value.length;if(G-=F.value.length,w=G,F.value instanceof b)continue;for(var N=F;N!==s.tail&&(G<j||typeof N.value=="string");N=N.next)B++,G+=N.value.length;B--,U=u.slice(w,G),k.index-=w}else if(k=I(M,0,U,y),!k)continue;var H=k.index,$=k[0],z=U.slice(0,H),ee=U.slice(H+$.length),X=w+U.length;v&&X>v.reach&&(v.reach=X);var te=F.prev;z&&(te=p(s,te,z),w+=z.length),_(s,te,B);var se=new b(f,x?l.tokenize($,x):$,m,$);if(F=p(s,te,se),ee&&p(s,F,ee),B>1){var K={cause:f+","+P,reach:X};T(u,s,c,F.prev,w,K),v&&K.reach>v.reach&&(v.reach=K.reach)}}}}}}function A(){var u={value:null,prev:null,next:null},s={value:null,prev:u,next:null};u.next=s,this.head=u,this.tail=s,this.length=0}function p(u,s,c){var h=s.next,E={value:c,prev:s,next:h};return s.next=E,h.prev=E,u.length++,E}function _(u,s,c){for(var h=s.next,E=0;E<c&&h!==u.tail;E++)h=h.next;s.next=h,h.prev=s,u.length-=E}function O(u){for(var s=[],c=u.head.next;c!==u.tail;)s.push(c.value),c=c.next;return s}if(!i.document)return i.addEventListener&&(l.disableWorkerMessageHandler||i.addEventListener("message",function(u){var s=JSON.parse(u.data),c=s.language,h=s.code,E=s.immediateClose;i.postMessage(l.highlight(h,l.languages[c],c)),E&&i.close()},!1)),l;var C=l.util.currentScript();C&&(l.filename=C.src,C.hasAttribute("data-manual")&&(l.manual=!0));function L(){l.manual||l.highlightAll()}if(!l.manual){var S=document.readyState;S==="loading"||S==="interactive"&&C&&C.defer?document.addEventListener("DOMContentLoaded",L):window.requestAnimationFrame?window.requestAnimationFrame(L):window.setTimeout(L,16)}return l}(t);e.exports&&(e.exports=n),typeof Pi!="undefined"&&(Pi.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(r,a){var o={};o["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[a]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};l["language-"+a]={pattern:/[\s\S]+/,inside:n.languages[a]};var b={};b[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:l},n.languages.insertBefore("markup","cdata",b)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(i,r){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:n.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(i){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var a=i.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n=="undefined"||typeof document=="undefined")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading\u2026",r=function(C,L){return"\u2716 Error "+C+" while fetching file: "+L},a="\u2716 Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",b="loading",I="loaded",T="failed",A="pre[data-src]:not(["+l+'="'+I+'"]):not(['+l+'="'+b+'"])';function p(C,L,S){var u=new XMLHttpRequest;u.open("GET",C,!0),u.onreadystatechange=function(){u.readyState==4&&(u.status<400&&u.responseText?L(u.responseText):u.status>=400?S(r(u.status,u.statusText)):S(a))},u.send(null)}function _(C){var L=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(C||"");if(L){var S=Number(L[1]),u=L[2],s=L[3];return u?s?[S,Number(s)]:[S,void 0]:[S,S]}}n.hooks.add("before-highlightall",function(C){C.selector+=", "+A}),n.hooks.add("before-sanity-check",function(C){var L=C.element;if(L.matches(A)){C.code="",L.setAttribute(l,b);var S=L.appendChild(document.createElement("CODE"));S.textContent=i;var u=L.getAttribute("data-src"),s=C.language;if(s==="none"){var c=(/\.(\w+)$/.exec(u)||[,"none"])[1];s=o[c]||c}n.util.setLanguage(S,s),n.util.setLanguage(L,s);var h=n.plugins.autoloader;h&&h.loadLanguages(s),p(u,function(E){L.setAttribute(l,I);var v=_(L.getAttribute("data-range"));if(v){var f=E.split(/\r\n?|\n/g),d=v[0],P=v[1]==null?f.length:v[1];d<0&&(d+=f.length),d=Math.max(0,Math.min(d-1,f.length)),P<0&&(P+=f.length),P=Math.max(0,Math.min(P,f.length)),E=f.slice(d,P).join(`
`),L.hasAttribute("data-start")||L.setAttribute("data-start",String(d+1))}S.textContent=E,n.highlightElement(S)},function(E){L.setAttribute(l,T),S.textContent=E})}}),n.plugins.fileHighlight={highlight:function(L){for(var S=(L||document).querySelectorAll(A),u=0,s;s=S[u++];)n.highlightElement(s)}};var O=!1;n.fileHighlight=function(){O||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),O=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Nl);var Ra=Nl.exports;const g0={name:"prism",mounted(){Ra.highlightAll()},updated(){this.$refs.prism.innerText=this.$slots.default()[0].children,Ra.highlightAll()},props:{lang:{type:String,default:"javascript"}},methods:{cpy(){kl(this.$slots.default()[0].children),this.$notify({color:"green",text:"\u5185\u5BB9\u5DF2\u62F7\u8D1D"})}}},m0={class:"mew-prism"},p0=ie("svg",{height:"24px",width:"24px",viewBox:"0 0 24 24"},[ie("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1),E0=[p0],y0=rt("  ");function T0(e,t,n,i,r,a){return ae(),fe("div",m0,[ie("i",{class:"mew-prism-cpy",title:"\u70B9\u51FB\u590D\u5236",onClick:t[0]||(t[0]=(...o)=>a.cpy&&a.cpy(...o))},E0),ie("pre",null,[y0,ie("code",{ref:"prism",class:De(["language-"+(n.lang==="js"?"javascript":n.lang)])},[Bt(e.$slots,"default")],2)])])}var x0=xe(g0,[["render",T0]]);const S0={name:"apiTable",props:{items:{type:Array,default:[]},title:{type:String,default:"\u5C5E \u6027"}}},A0=e=>(Vu("data-v-580373e6"),e=e(),zu(),e),L0={class:"mew-apiTable"},D0={class:"props"},_0=A0(()=>ie("th",{class:"description"},"\u8BF4 \u660E",-1)),b0={class:"name"},O0={class:"description"},C0={class:"info"},R0={key:0,class:"type"},P0=rt("Type: "),I0={class:"blue"},M0={key:1,class:"defaultValue"},F0=rt("Default: "),w0={class:"blue"},B0={key:2,class:"args"},U0=rt("Args: "),k0={class:"text"};function N0(e,t,n,i,r,a){return ae(),fe("table",L0,[ie("thead",null,[ie("tr",null,[ie("th",D0,_e(n.title),1),_0])]),ie("tbody",null,[(ae(!0),fe(Me,null,es(n.items,o=>(ae(),fe("tr",null,[ie("td",b0,_e(o.name),1),ie("td",O0,[ie("div",C0,[o.type?(ae(),fe("i",R0,[P0,ie("i",I0,_e(o.type),1)])):Fe("",!0),o.default?(ae(),fe("i",M0,[F0,ie("i",w0,_e(o.default),1)])):Fe("",!0),o.args?(ae(),fe("i",B0,[U0,ie("i",{class:De(["blue",{undefined:o.args.toLowerCase()==="undefined"}])},_e(o.args),3)])):Fe("",!0)]),ie("div",k0,_e(o.description),1)])]))),256))])])}var K0=xe(S0,[["render",N0],["__scopeId","data-v-580373e6"]]);let j0=$o(Oc);j0.use(os).use(Ci).use(Vm).use(h0).use(v0).component("prism",x0).component("apiTable",K0).mount("#app");export{Me as F,xe as _,ie as a,Ee as b,fe as c,zu as d,rt as e,es as f,qt as g,oh as h,Fe as i,Ye as j,W0 as k,Er as l,De as n,ae as o,Vu as p,Ce as r,_e as t,tt as w};
